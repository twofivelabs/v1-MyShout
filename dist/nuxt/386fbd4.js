/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[123,10,12,16,36,37,38,39,43,44,46,47,51,55,97],{1006:function(t,e,n){"use strict";n(926)},1007:function(t,e,n){var r=n(38)(!1);r.push([t.i,"*{-moz-user-select:none;-webkit-user-select:none;user-select:none}.chatBox{width:100%;padding-bottom:120px!important}.chatBox *{overflow-anchor:none}#bottomOfChat{overflow-anchor:auto;height:1px}.v-text-field .v-input__control{margin-top:5px!important}.v-text-field .v-input__append-outer{margin-top:0!important}",""]),t.exports=r},1091:function(t,e,n){"use strict";n.r(e);var r=n(1027),o=n(841),c=n(693),l=n(725),h=n(717),f=n(753),d=n(163),v=n(716),m=n(722),y=n(773),_=n(790),w=n(777),x=n(170),k=(n(15),n(17),n(19),n(23),n(24),n(2)),I=n(0),T=(n(4),n(35),n(16),n(66),n(47),n(59),n(97),n(25),n(43),n(14),n(76)),O=n.n(T),E=n(834),S=n(5);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function A(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=Object(S.b)({name:"ChatsChatId",middleware:"authenticated",directives:{Intersect:x.a},setup:function(){var t=Object(S.l)(),e=t.$notify,n=t.$fire,r=t.$vuetify,o=t.$capacitor,c=t.$encryption,l=t.$system,h=t.i18n,f=t.error,d=Object(S.q)(),v=d.dispatch,m=d.state,y=Object(S.i)(!0),_=Object(S.i)(!0),w=Object(S.o)(),x=Object(S.a)((function(){return m.user})),k=Object(S.i)(),T=Object(S.i)([]),C=Object(S.i)(),j=Object(S.i)(),N=Object(S.i)({}),P=Object(S.i)(),R=Object(S.i)();Object(S.m)(Object(I.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_.value=!0,t.next=4,v("chats/getOne",w.value.params.id).then(function(){var t=Object(I.a)(regeneratorRuntime.mark((function t(e){var n,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===e){t.next=11;break}C.value=e,t.t0=regeneratorRuntime.keys(e.participants);case 3:if((t.t1=t.t0()).done){t.next=11;break}return n=t.t1.value,t.next=7,v("user/getOne",e.participants[n]);case 7:(u=t.sent)&&(N.value[e.participants[n]]=A({},u)),t.next=3;break;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),l.log({comp:"ChatsChatId",msg:"getOne",val:t.t0}),f({statusCode:404});case 10:return t.prev=10,_.value=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,6,10,13]])}))));var D=function(){T.value=[];try{y.value=!0,P.value=n.firestore.collection("Chats/".concat(j.value,"/Messages")).orderBy("created_at","asc").limitToLast(100).onSnapshot((function(t){t.docChanges().forEach((function(t){if("added"===t.type){var data=t.doc.data();data.id=t.doc.id,data.ownerData=N.value[data.owner],data.message&&(data.message=c.decrypt(data.message)),T.value.push(data),L()}}))}))}catch(t){console.log("ERROR LOADING MESSAGES",t)}finally{y.value=!1}},M=function(){var t=Object(I.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(k.value||R.value)&&x.value.data.uid){t.next=4;break}return e.show({text:h.t("notify.error_try_again"),color:"error"}),t.abrupt("return");case 4:return n=null,k.value&&(n=c.encrypt(k.value)),t.next=8,v("chats/messages/add",{chatId:j.value,message:{message:n,image:R.value||null,owner:x.value.data.uid,seen:[x.value.data.uid]}});case 8:return t.next=10,v("chats/updateField",{id:j.value,lastMessage:k.value||null,seen:[x.value.data.uid]});case 10:return k.value=null,R.value=null,t.next=14,L(0);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),e.show({text:h.t("notify.error_try_again"),color:"error"});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=Object(I.a)(regeneratorRuntime.mark((function t(){var e,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=o.length>0&&void 0!==o[0]?o[0]:1e3,setTimeout((function(){r.goTo("#bottomOfChat").then((function(){try{C.value.seen.includes(x.value.data.uid)||n.firestore.doc("Chats/".concat(j.value)).update({seen:E.a.firestore.FieldValue.arrayUnion(x.value.data.uid)}),n.firestore.doc("Users/".concat(x.value.data.uid)).update({"notifications.hasMessages":!1})}catch(t){}}))}),e);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(S.r)(_,(function(){!1===_.value&&w.value.params.id&&(j.value=w.value.params.id,D(),L(2500))})),Object(S.r)(w,(function(t){if("chats-chat-id"===t.name)o.AdMob_hideBanner(),j.value=w.value.params.id,D(),L();else try{console.log("STICKY: REMOVE CHAT MESSAGE LISTENER"),P.value()}catch(t){}})),{loading:y,chat:C,newMessage:k,messages:T,users:N,user:x,imageMessageUrl:R,sendMessage:M,onIntersect:function(t){var e=t[0].target.id.substring(8),r=O.a.find(T.value,{id:e});try{r.seen.includes(x.value.data.uid)||n.firestore.doc("Chats/".concat(j.value,"/Messages/").concat(e)).update({seen:E.a.firestore.FieldValue.arrayUnion(x.value.data.uid)})}catch(t){}},goTo:function(t){r.goTo("#message-".concat(t))},imageMessageUrlCallback:function(t){R.value=t}}}}),N=j,P=(n(1006),n(37)),component=Object(P.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n(r.a,{staticClass:"mobileNotch pb-1",attrs:{color:"white",app:"",fixed:"",top:""}},[n(o.a,[n(c.a,{attrs:{to:"/chats",text:"",color:"transparent"}},[n(d.a,{staticClass:"pr-2 py-3 pl-2",attrs:{color:"myshoutDarkGrey"}},[t._v("\n          mdi-arrow-left\n        ")])],1)],1),t._v(" "),n(w.b,{staticClass:"pl-0"},[n("div",{staticClass:"d-flex align-center"},[t.chat?n("ChatTopavatar",{staticClass:"mr-2",attrs:{chat:t.chat}}):t._e(),t._v(" "),t.chat?n("ChatUsername",{attrs:{chat:t.chat,loggedInUser:t.user}}):t._e()],1)]),t._v(" "),n(y.a),t._v(" "),t.chat&&t.chat.id?n("ChatActionsbtn",{attrs:{chatId:t.chat.id}}):t._e()],1),t._v(" "),n(f.a,{staticClass:"pa-0 fill-height align-end"},[t.loading?n(v.a,{staticClass:"pa-6 mt-5"},[n(h.a,[n(m.a,{staticClass:"mb-6",attrs:{width:"100%","max-height":"50",type:"text"}}),t._v(" "),n(m.a,{staticClass:"mb-6",attrs:{width:"100%","max-height":"50",type:"text"}}),t._v(" "),n(m.a,{staticClass:"mb-6",attrs:{width:"100%","max-height":"50",type:"text"}}),t._v(" "),n(m.a,{staticClass:"mb-6",attrs:{width:"100%","max-height":"50",type:"text"}})],1)],1):t._e(),t._v(" "),n(l.a,{staticClass:"chatBox elevation-0 pt-14 mt-5 mb-14",attrs:{color:"transparent"}},[t._l(t.messages,(function(e,r){return[n("ChatMessage",{directives:[{def:x.b,name:"intersect",rawName:"v-intersect",value:t.onIntersect,expression:"onIntersect"}],key:r,staticClass:"chat-message",attrs:{message:e,chat:t.chat,id:"message-"+e.id}})]})),t._v(" "),n("div",{attrs:{id:"bottomOfChat"}})],2),t._v(" "),n(r.a,{staticClass:"align-center",staticStyle:{top:"calc(100% - 180px)"},attrs:{color:"transparent",flat:"",bottom:"",fixed:""}},[n(_.a,{attrs:{label:t.$t("form.message"),type:"text","hide-details":"",solo:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n(c.a,{attrs:{fab:""},on:{click:t.sendMessage}},[n(d.a,[t._v("mdi-send")])],1)]},proxy:!0},{key:"append",fn:function(){return[n("ChatUploadimage",{attrs:{chat:t.chat,currentUrl:t.imageMessageUrl},on:{url:t.imageMessageUrlCallback}}),t._v(" "),n("ChatRecordaudio",{attrs:{chat:t.chat}})]},proxy:!0}]),model:{value:t.newMessage,callback:function(e){t.newMessage=e},expression:"newMessage"}})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ChatTopavatar:n(872).default,ChatUsername:n(873).default,ChatActionsbtn:n(874).default,ChatMessage:n(953).default,ChatUploadimage:n(954).default,ChatRecordaudio:n(933).default})},724:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f}));var r=n(725),o=n(3),c=Object(o.i)("v-card__actions"),l=Object(o.i)("v-card__subtitle"),h=Object(o.i)("v-card__text"),f=Object(o.i)("v-card__title");r.a},725:function(t,e,n){"use strict";n(15),n(17),n(19),n(4),n(23),n(16),n(24);var r=n(2),o=(n(56),n(396),n(397),n(734),n(223)),c=n(738),l=n(115),h=n(28);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=Object(h.a)(c.a,l.a,o.a).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return d(d({"v-card":!0},l.a.options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},o.a.options.computed.classes.call(this))},styles:function(){var style=d({},o.a.options.computed.styles.call(this));return this.img&&(style.background='url("'.concat(this.img,'") center center / cover no-repeat')),style}},methods:{genProgress:function(){var t=c.a.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),n=e.tag,data=e.data;return data.style=this.styles,this.isClickable&&(data.attrs=data.attrs||{},data.attrs.tabindex=0),t(n,this.setBackgroundColor(this.color,data),[this.genProgress(),this.$slots.default])}})},727:function(t,e,n){var content=n(736);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("744bab4a",content,!0,{sourceMap:!1})},728:function(t,e,n){"use strict";n.r(e);var r=n(163),o={name:"ElementH1",props:{text:{type:String,default:function(){return""}},align:{type:String,default:"center"},prependIcon:{type:String,default:null}}},c=n(37),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{class:"text-"+t.align+" text-h1 text-md-h2 text-lg-h1",staticStyle:{"letter-spacing":"-2px !important"}},[t.prependIcon?n(r.a,[t._v("\n    "+t._s(t.prependIcon)+"\n  ")]):t._e(),t._v("\n  "+t._s(t.text)+"\n")],1)}),[],!1,null,null,null);e.default=component.exports},734:function(t,e,n){var content=n(735);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("e23b7040",content,!0,{sourceMap:!1})},735:function(t,e,n){var r=n(38)(!1);r.push([t.i,'.input-tel__input{padding:1.75rem!important}.input-tel__input,input.country-selector__input{background:#f6f6f6!important;border:none!important}input.country-selector__input{height:56px!important}.country-selector__country-flag{top:25px}.country-selector__toggle{top:calc(50% - 4px)!important}.theme--light.v-app-bar.v-toolbar.v-sheet,.theme--light.v-application,.theme--light.v-tabs-items{background-color:#eef3ff}.theme--light .cart-popup-contents{background-color:#fff}.theme--light.v-stepper{background:transparent}.theme--light.v-sheet.company-card,.theme--light.v-sheet.company-list-card,.theme--light.v-sheet.post-card,.theme--light.v-sheet.product-card,.theme--light.v-sheet.recent-news-card{background-color:#fff;border:7px solid hsla(0,0%,87.1%,.2)}.theme--light.v-skeleton-loader .v-skeleton-loader__actions,.theme--light.v-skeleton-loader .v-skeleton-loader__article,.theme--light.v-skeleton-loader .v-skeleton-loader__card-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__card-text,.theme--light.v-skeleton-loader .v-skeleton-loader__date-picker,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-text,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__table-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tbody,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tfoot,.theme--light.v-skeleton-loader .v-skeleton-loader__table-thead{background:transparent!important}.theme--light.slide-up{background-color:#eef3ff}.theme--dark.v-app-bar.v-toolbar.v-sheet,.theme--dark.v-application{background-color:#242a33}.theme--dark.v-navigation-drawer,.theme--dark.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:transparent}.theme--dark.v-bottom-navigation{background-color:#242a33}.theme--dark.v-tabs-items{background-color:transparent}.theme--dark .cart-popup-contents,.theme--dark.shipping-options,.theme--dark.v-sheet,.theme--dark.v-tabs-items,.v-dialog .theme--dark.v-sheet{background-color:#242a33}.theme--dark.v-sheet.company-card,.theme--dark.v-sheet.company-list-card,.theme--dark.v-sheet.post-card,.theme--dark.v-sheet.product-card,.theme--dark.v-sheet.recent-news-card{background-color:#fff;border:7px solid #15191e}.theme--dark.v-card>.v-card__text,.theme--dark.v-card>.v-card__title{color:#000}.theme--dark.slide-up{background-color:#242a33}.appBarHeight{height:calc(60px + env(safe-area-inset-top))}.mobileNotch{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)!important;height:inherit!important}header.mobileNotch{max-height:100px}.v-card__subtitle,.v-card__text{line-height:1.975rem;letter-spacing:0!important}.v-application .body-1{letter-spacing:0!important}.v-application .primary{background-color:#6fa7e0;border-color:#6fa7e0}.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:90%}.v-dialog--scrollable>.v-sheet{overflow-y:scroll!important}@media screen and (max-width:600px){.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:100%}}.admin-container{margin-top:0;margin-bottom:15px;padding-top:0;padding-left:0;padding-right:0}.avatar-elevation{border:4px solid #fff}.no-break{word-break:break-word}.v-application a{text-decoration:none;color:#6fa7e0!important}.missing-image{opacity:.25}.company-card .title,.post-card .name,.product-card .name{word-break:break-word;line-height:1.33em;letter-spacing:-.3px!important}.slide-left-enter-active,.slide-left-leave-active,.slide-right-enter-active,.slide-right-leave-active{transition-duration:.5s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.55,0,.1,1);overflow:hidden}.slide-left-enter,.slide-right-leave-active{opacity:0;transform:translate(2em)}.slide-left-leave-active,.slide-right-enter{opacity:0;transform:translate(-2em)}.phoneNumberInput .input-tel__input{border-right:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input,.phoneNumberInput .input-tel__input{font-size:16px!important;border-top:3px solid hsla(0,0%,46.3%,.05)!important;border-bottom:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input{border-left:3px solid hsla(0,0%,46.3%,.05)!important;height:62px!important}.phoneNumberInput .country-selector__toggle{top:20px!important}.phoneNumberInput .country-selector__country-flag{top:27px!important}.v-text-field--outlined fieldset{border-color:#f1f0ef!important}.country-selector.has-hint .country-selector__input,.country-selector.has-value .country-selector__input{padding-top:0!important}.alertBtn{font-size:1.45rem;font-weight:600;letter-spacing:1px;text-transform:capitalize;color:#fff}.borderButton,.borderInput{border:3px solid #f1f0ef;background-color:#f8f9fa}details>summary{font-size:17px;margin:10px 0;border-bottom:1px solid #fefefe;padding:15px 0 30px}.v-list--rounded.v-list--three-line .v-list-item,.v-list--rounded.v-list--three-line .v-list-item:before,.v-list--rounded.v-list--three-line .v-list-item>.v-ripple__container{border-radius:32px!important}.v-list--rounded .v-list-item,.v-list--rounded .v-list-item:before,.v-list--rounded .v-list-item>.v-ripple__container{border-radius:15px!important}.myshout .theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled){border:2px solid #f0f0ef;background:#f9f9f9;margin-bottom:15px}.myshout .v-list-item__title{font-size:1rem;font-weight:600}.myshout .v-list-item__subtitle{font-size:.9rem}.myshout .v-list-item__icon{width:80px;height:80px;border-radius:20px;text-align:center}.myshout .v-list-item__icon .v-icon{font-size:33px;width:100%}.v-application--is-ltr .myshout .v-list-item__action:first-child,.v-application--is-ltr .myshout .v-list-item__icon:first-child{margin-right:10px}.theme--light.v-card{background-color:#fff;color:rgba(0,0,0,.87)}.theme--light.v-card>.v-card__subtitle,.theme--light.v-card>.v-card__text{color:rgba(0,0,0,.6)}.theme--dark.v-card{background-color:#1e1e1e;color:#fff}.theme--dark.v-card>.v-card__subtitle,.theme--dark.v-card>.v-card__text{color:hsla(0,0%,100%,.7)}.v-sheet.v-card{border-radius:.25rem}.v-sheet.v-card:not(.v-sheet--outlined){box-shadow:0 3px 1px -2px rgba(0,0,0,.1),0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.06)}.v-sheet.v-card.v-sheet--shaped{border-radius:3rem .25rem}.v-card{border-width:thin;display:block;max-width:100%;outline:none;text-decoration:none;transition-property:box-shadow,opacity;word-wrap:break-word;position:relative;white-space:normal}.v-card>.v-card__progress+:not(.v-btn):not(.v-chip):not(.v-avatar),.v-card>:first-child:not(.v-btn):not(.v-chip):not(.v-avatar){border-top-left-radius:inherit;border-top-right-radius:inherit}.v-card>:last-child:not(.v-btn):not(.v-chip):not(.v-avatar){border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.v-card__progress{top:0;left:0;right:0;overflow:hidden}.v-card__subtitle+.v-card__text{padding-top:0}.v-card__subtitle,.v-card__text{font-size:.875rem;font-weight:400;line-height:1.375rem;letter-spacing:.0071428571em}.v-card__subtitle,.v-card__text,.v-card__title{padding:16px}.v-card__title{align-items:center;display:flex;flex-wrap:wrap;font-size:1em;font-weight:500;letter-spacing:0;line-height:1.2em;word-break:break-all}.v-card__title+.v-card__subtitle,.v-card__title+.v-card__text{padding-top:0}.v-card__title+.v-card__subtitle{margin-top:-16px}.v-card__text{width:100%}.v-card__actions{align-items:center;display:flex;padding:8px}.v-card__actions>.v-btn.v-btn{padding:0 8px}.v-application--is-ltr .v-card__actions>.v-btn.v-btn+.v-btn{margin-left:8px}.v-application--is-ltr .v-card__actions>.v-btn.v-btn .v-icon--left{margin-left:4px}.v-application--is-ltr .v-card__actions>.v-btn.v-btn .v-icon--right{margin-right:4px}.v-application--is-rtl .v-card__actions>.v-btn.v-btn+.v-btn{margin-right:8px}.v-application--is-rtl .v-card__actions>.v-btn.v-btn .v-icon--left{margin-right:4px}.v-application--is-rtl .v-card__actions>.v-btn.v-btn .v-icon--right{margin-left:4px}.v-card--flat{box-shadow:0 0 0 0 rgba(0,0,0,.1),0 0 0 0 rgba(0,0,0,.07),0 0 0 0 rgba(0,0,0,.06)!important}.v-sheet.v-card--hover{cursor:pointer;transition:box-shadow .4s cubic-bezier(.25,.8,.25,1)}.v-sheet.v-card--hover:focus,.v-sheet.v-card--hover:hover{box-shadow:0 5px 5px -3px rgba(0,0,0,.1),0 8px 10px 1px rgba(0,0,0,.07),0 3px 14px 2px rgba(0,0,0,.06)}.v-card--link,.v-card--link .v-chip{cursor:pointer}.v-card--link:focus:before{opacity:.08}.v-card--link:before{background:currentColor;bottom:0;content:"";left:0;opacity:0;pointer-events:none;position:absolute;right:0;top:0;transition:opacity .2s}.v-card--disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-card--disabled>:not(.v-card__progress){opacity:.6;transition:inherit}.v-card--loading{overflow:hidden}.v-card--raised{box-shadow:0 5px 5px -3px rgba(0,0,0,.1),0 8px 10px 1px rgba(0,0,0,.07),0 3px 14px 2px rgba(0,0,0,.06)}',""]),t.exports=r},736:function(t,e,n){var r=n(38)(!1);r.push([t.i,".input-tel__input{padding:1.75rem!important}.input-tel__input,input.country-selector__input{background:#f6f6f6!important;border:none!important}input.country-selector__input{height:56px!important}.country-selector__country-flag{top:25px}.country-selector__toggle{top:calc(50% - 4px)!important}.theme--light.v-app-bar.v-toolbar.v-sheet,.theme--light.v-application,.theme--light.v-tabs-items{background-color:#eef3ff}.theme--light .cart-popup-contents{background-color:#fff}.theme--light.v-stepper{background:transparent}.theme--light.v-sheet.company-card,.theme--light.v-sheet.company-list-card,.theme--light.v-sheet.post-card,.theme--light.v-sheet.product-card,.theme--light.v-sheet.recent-news-card{background-color:#fff;border:7px solid hsla(0,0%,87.1%,.2)}.theme--light.v-skeleton-loader .v-skeleton-loader__actions,.theme--light.v-skeleton-loader .v-skeleton-loader__article,.theme--light.v-skeleton-loader .v-skeleton-loader__card-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__card-text,.theme--light.v-skeleton-loader .v-skeleton-loader__date-picker,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-text,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__table-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tbody,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tfoot,.theme--light.v-skeleton-loader .v-skeleton-loader__table-thead{background:transparent!important}.theme--light.slide-up{background-color:#eef3ff}.theme--dark.v-app-bar.v-toolbar.v-sheet,.theme--dark.v-application{background-color:#242a33}.theme--dark.v-navigation-drawer,.theme--dark.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:transparent}.theme--dark.v-bottom-navigation{background-color:#242a33}.theme--dark.v-tabs-items{background-color:transparent}.theme--dark .cart-popup-contents,.theme--dark.shipping-options,.theme--dark.v-sheet,.theme--dark.v-tabs-items,.v-dialog .theme--dark.v-sheet{background-color:#242a33}.theme--dark.v-sheet.company-card,.theme--dark.v-sheet.company-list-card,.theme--dark.v-sheet.post-card,.theme--dark.v-sheet.product-card,.theme--dark.v-sheet.recent-news-card{background-color:#fff;border:7px solid #15191e}.theme--dark.v-card>.v-card__text,.theme--dark.v-card>.v-card__title{color:#000}.theme--dark.slide-up{background-color:#242a33}.appBarHeight{height:calc(60px + env(safe-area-inset-top))}.mobileNotch{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)!important;height:inherit!important}header.mobileNotch{max-height:100px}.v-card__subtitle,.v-card__text{line-height:1.975rem;letter-spacing:0!important}.v-application .body-1{letter-spacing:0!important}.v-application .primary{background-color:#6fa7e0;border-color:#6fa7e0}.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:90%}.v-dialog--scrollable>.v-sheet{overflow-y:scroll!important}@media screen and (max-width:600px){.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:100%}}.admin-container{margin-top:0;margin-bottom:15px;padding-top:0;padding-left:0;padding-right:0}.avatar-elevation{border:4px solid #fff}.no-break{word-break:break-word}.v-application a{text-decoration:none;color:#6fa7e0!important}.missing-image{opacity:.25}.company-card .title,.post-card .name,.product-card .name{word-break:break-word;line-height:1.33em;letter-spacing:-.3px!important}.slide-left-enter-active,.slide-left-leave-active,.slide-right-enter-active,.slide-right-leave-active{transition-duration:.5s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.55,0,.1,1);overflow:hidden}.slide-left-enter,.slide-right-leave-active{opacity:0;transform:translate(2em)}.slide-left-leave-active,.slide-right-enter{opacity:0;transform:translate(-2em)}.phoneNumberInput .input-tel__input{border-right:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input,.phoneNumberInput .input-tel__input{font-size:16px!important;border-top:3px solid hsla(0,0%,46.3%,.05)!important;border-bottom:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input{border-left:3px solid hsla(0,0%,46.3%,.05)!important;height:62px!important}.phoneNumberInput .country-selector__toggle{top:20px!important}.phoneNumberInput .country-selector__country-flag{top:27px!important}.v-text-field--outlined fieldset{border-color:#f1f0ef!important}.country-selector.has-hint .country-selector__input,.country-selector.has-value .country-selector__input{padding-top:0!important}.alertBtn{font-size:1.45rem;font-weight:600;letter-spacing:1px;text-transform:capitalize;color:#fff}.borderButton,.borderInput{border:3px solid #f1f0ef;background-color:#f8f9fa}details>summary{font-size:17px;margin:10px 0;border-bottom:1px solid #fefefe;padding:15px 0 30px}.v-list--rounded.v-list--three-line .v-list-item,.v-list--rounded.v-list--three-line .v-list-item:before,.v-list--rounded.v-list--three-line .v-list-item>.v-ripple__container{border-radius:32px!important}.v-list--rounded .v-list-item,.v-list--rounded .v-list-item:before,.v-list--rounded .v-list-item>.v-ripple__container{border-radius:15px!important}.myshout .theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled){border:2px solid #f0f0ef;background:#f9f9f9;margin-bottom:15px}.myshout .v-list-item__title{font-size:1rem;font-weight:600}.myshout .v-list-item__subtitle{font-size:.9rem}.myshout .v-list-item__icon{width:80px;height:80px;border-radius:20px;text-align:center}.myshout .v-list-item__icon .v-icon{font-size:33px;width:100%}.v-application--is-ltr .myshout .v-list-item__action:first-child,.v-application--is-ltr .myshout .v-list-item__icon:first-child{margin-right:10px}.container.grow-shrink-0{flex-grow:0;flex-shrink:0}.container.fill-height{align-items:center;display:flex;flex-wrap:wrap}.container.fill-height>.row{flex:1 1 100%;max-width:calc(100% + 24px)}.container.fill-height>.layout{height:100%;flex:1 1 auto}.container.fill-height>.layout.grow-shrink-0{flex-grow:0;flex-shrink:0}.container.grid-list-xs .layout .flex{padding:1px}.container.grid-list-xs .layout:only-child{margin:-1px}.container.grid-list-xs .layout:not(:only-child){margin:auto -1px}.container.grid-list-xs :not(:only-child) .layout:first-child{margin-top:-1px}.container.grid-list-xs :not(:only-child) .layout:last-child{margin-bottom:-1px}.container.grid-list-sm .layout .flex{padding:2px}.container.grid-list-sm .layout:only-child{margin:-2px}.container.grid-list-sm .layout:not(:only-child){margin:auto -2px}.container.grid-list-sm :not(:only-child) .layout:first-child{margin-top:-2px}.container.grid-list-sm :not(:only-child) .layout:last-child{margin-bottom:-2px}.container.grid-list-md .layout .flex{padding:4px}.container.grid-list-md .layout:only-child{margin:-4px}.container.grid-list-md .layout:not(:only-child){margin:auto -4px}.container.grid-list-md :not(:only-child) .layout:first-child{margin-top:-4px}.container.grid-list-md :not(:only-child) .layout:last-child{margin-bottom:-4px}.container.grid-list-lg .layout .flex{padding:8px}.container.grid-list-lg .layout:only-child{margin:-8px}.container.grid-list-lg .layout:not(:only-child){margin:auto -8px}.container.grid-list-lg :not(:only-child) .layout:first-child{margin-top:-8px}.container.grid-list-lg :not(:only-child) .layout:last-child{margin-bottom:-8px}.container.grid-list-xl .layout .flex{padding:12px}.container.grid-list-xl .layout:only-child{margin:-12px}.container.grid-list-xl .layout:not(:only-child){margin:auto -12px}.container.grid-list-xl :not(:only-child) .layout:first-child{margin-top:-12px}.container.grid-list-xl :not(:only-child) .layout:last-child{margin-bottom:-12px}.layout{display:flex;flex:1 1 auto;flex-wrap:nowrap;min-width:0}.layout.reverse{flex-direction:row-reverse}.layout.column{flex-direction:column}.layout.column.reverse{flex-direction:column-reverse}.layout.column>.flex{max-width:100%}.layout.wrap{flex-wrap:wrap}.layout.grow-shrink-0{flex-grow:0;flex-shrink:0}@media (min-width:0){.flex.xs12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-xs12{order:12}.flex.xs11{flex-basis:91.6666666667%;flex-grow:0;max-width:91.6666666667%}.flex.order-xs11{order:11}.flex.xs10{flex-basis:83.3333333333%;flex-grow:0;max-width:83.3333333333%}.flex.order-xs10{order:10}.flex.xs9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-xs9{order:9}.flex.xs8{flex-basis:66.6666666667%;flex-grow:0;max-width:66.6666666667%}.flex.order-xs8{order:8}.flex.xs7{flex-basis:58.3333333333%;flex-grow:0;max-width:58.3333333333%}.flex.order-xs7{order:7}.flex.xs6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-xs6{order:6}.flex.xs5{flex-basis:41.6666666667%;flex-grow:0;max-width:41.6666666667%}.flex.order-xs5{order:5}.flex.xs4{flex-basis:33.3333333333%;flex-grow:0;max-width:33.3333333333%}.flex.order-xs4{order:4}.flex.xs3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-xs3{order:3}.flex.xs2{flex-basis:16.6666666667%;flex-grow:0;max-width:16.6666666667%}.flex.order-xs2{order:2}.flex.xs1{flex-basis:8.3333333333%;flex-grow:0;max-width:8.3333333333%}.flex.order-xs1{order:1}.v-application--is-ltr .flex.offset-xs12{margin-left:100%}.v-application--is-rtl .flex.offset-xs12{margin-right:100%}.v-application--is-ltr .flex.offset-xs11{margin-left:91.6666666667%}.v-application--is-rtl .flex.offset-xs11{margin-right:91.6666666667%}.v-application--is-ltr .flex.offset-xs10{margin-left:83.3333333333%}.v-application--is-rtl .flex.offset-xs10{margin-right:83.3333333333%}.v-application--is-ltr .flex.offset-xs9{margin-left:75%}.v-application--is-rtl .flex.offset-xs9{margin-right:75%}.v-application--is-ltr .flex.offset-xs8{margin-left:66.6666666667%}.v-application--is-rtl .flex.offset-xs8{margin-right:66.6666666667%}.v-application--is-ltr .flex.offset-xs7{margin-left:58.3333333333%}.v-application--is-rtl .flex.offset-xs7{margin-right:58.3333333333%}.v-application--is-ltr .flex.offset-xs6{margin-left:50%}.v-application--is-rtl .flex.offset-xs6{margin-right:50%}.v-application--is-ltr .flex.offset-xs5{margin-left:41.6666666667%}.v-application--is-rtl .flex.offset-xs5{margin-right:41.6666666667%}.v-application--is-ltr .flex.offset-xs4{margin-left:33.3333333333%}.v-application--is-rtl .flex.offset-xs4{margin-right:33.3333333333%}.v-application--is-ltr .flex.offset-xs3{margin-left:25%}.v-application--is-rtl .flex.offset-xs3{margin-right:25%}.v-application--is-ltr .flex.offset-xs2{margin-left:16.6666666667%}.v-application--is-rtl .flex.offset-xs2{margin-right:16.6666666667%}.v-application--is-ltr .flex.offset-xs1{margin-left:8.3333333333%}.v-application--is-rtl .flex.offset-xs1{margin-right:8.3333333333%}.v-application--is-ltr .flex.offset-xs0{margin-left:0}.v-application--is-rtl .flex.offset-xs0{margin-right:0}}@media (min-width:600px){.flex.sm12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-sm12{order:12}.flex.sm11{flex-basis:91.6666666667%;flex-grow:0;max-width:91.6666666667%}.flex.order-sm11{order:11}.flex.sm10{flex-basis:83.3333333333%;flex-grow:0;max-width:83.3333333333%}.flex.order-sm10{order:10}.flex.sm9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-sm9{order:9}.flex.sm8{flex-basis:66.6666666667%;flex-grow:0;max-width:66.6666666667%}.flex.order-sm8{order:8}.flex.sm7{flex-basis:58.3333333333%;flex-grow:0;max-width:58.3333333333%}.flex.order-sm7{order:7}.flex.sm6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-sm6{order:6}.flex.sm5{flex-basis:41.6666666667%;flex-grow:0;max-width:41.6666666667%}.flex.order-sm5{order:5}.flex.sm4{flex-basis:33.3333333333%;flex-grow:0;max-width:33.3333333333%}.flex.order-sm4{order:4}.flex.sm3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-sm3{order:3}.flex.sm2{flex-basis:16.6666666667%;flex-grow:0;max-width:16.6666666667%}.flex.order-sm2{order:2}.flex.sm1{flex-basis:8.3333333333%;flex-grow:0;max-width:8.3333333333%}.flex.order-sm1{order:1}.v-application--is-ltr .flex.offset-sm12{margin-left:100%}.v-application--is-rtl .flex.offset-sm12{margin-right:100%}.v-application--is-ltr .flex.offset-sm11{margin-left:91.6666666667%}.v-application--is-rtl .flex.offset-sm11{margin-right:91.6666666667%}.v-application--is-ltr .flex.offset-sm10{margin-left:83.3333333333%}.v-application--is-rtl .flex.offset-sm10{margin-right:83.3333333333%}.v-application--is-ltr .flex.offset-sm9{margin-left:75%}.v-application--is-rtl .flex.offset-sm9{margin-right:75%}.v-application--is-ltr .flex.offset-sm8{margin-left:66.6666666667%}.v-application--is-rtl .flex.offset-sm8{margin-right:66.6666666667%}.v-application--is-ltr .flex.offset-sm7{margin-left:58.3333333333%}.v-application--is-rtl .flex.offset-sm7{margin-right:58.3333333333%}.v-application--is-ltr .flex.offset-sm6{margin-left:50%}.v-application--is-rtl .flex.offset-sm6{margin-right:50%}.v-application--is-ltr .flex.offset-sm5{margin-left:41.6666666667%}.v-application--is-rtl .flex.offset-sm5{margin-right:41.6666666667%}.v-application--is-ltr .flex.offset-sm4{margin-left:33.3333333333%}.v-application--is-rtl .flex.offset-sm4{margin-right:33.3333333333%}.v-application--is-ltr .flex.offset-sm3{margin-left:25%}.v-application--is-rtl .flex.offset-sm3{margin-right:25%}.v-application--is-ltr .flex.offset-sm2{margin-left:16.6666666667%}.v-application--is-rtl .flex.offset-sm2{margin-right:16.6666666667%}.v-application--is-ltr .flex.offset-sm1{margin-left:8.3333333333%}.v-application--is-rtl .flex.offset-sm1{margin-right:8.3333333333%}.v-application--is-ltr .flex.offset-sm0{margin-left:0}.v-application--is-rtl .flex.offset-sm0{margin-right:0}}@media (min-width:960px){.flex.md12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-md12{order:12}.flex.md11{flex-basis:91.6666666667%;flex-grow:0;max-width:91.6666666667%}.flex.order-md11{order:11}.flex.md10{flex-basis:83.3333333333%;flex-grow:0;max-width:83.3333333333%}.flex.order-md10{order:10}.flex.md9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-md9{order:9}.flex.md8{flex-basis:66.6666666667%;flex-grow:0;max-width:66.6666666667%}.flex.order-md8{order:8}.flex.md7{flex-basis:58.3333333333%;flex-grow:0;max-width:58.3333333333%}.flex.order-md7{order:7}.flex.md6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-md6{order:6}.flex.md5{flex-basis:41.6666666667%;flex-grow:0;max-width:41.6666666667%}.flex.order-md5{order:5}.flex.md4{flex-basis:33.3333333333%;flex-grow:0;max-width:33.3333333333%}.flex.order-md4{order:4}.flex.md3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-md3{order:3}.flex.md2{flex-basis:16.6666666667%;flex-grow:0;max-width:16.6666666667%}.flex.order-md2{order:2}.flex.md1{flex-basis:8.3333333333%;flex-grow:0;max-width:8.3333333333%}.flex.order-md1{order:1}.v-application--is-ltr .flex.offset-md12{margin-left:100%}.v-application--is-rtl .flex.offset-md12{margin-right:100%}.v-application--is-ltr .flex.offset-md11{margin-left:91.6666666667%}.v-application--is-rtl .flex.offset-md11{margin-right:91.6666666667%}.v-application--is-ltr .flex.offset-md10{margin-left:83.3333333333%}.v-application--is-rtl .flex.offset-md10{margin-right:83.3333333333%}.v-application--is-ltr .flex.offset-md9{margin-left:75%}.v-application--is-rtl .flex.offset-md9{margin-right:75%}.v-application--is-ltr .flex.offset-md8{margin-left:66.6666666667%}.v-application--is-rtl .flex.offset-md8{margin-right:66.6666666667%}.v-application--is-ltr .flex.offset-md7{margin-left:58.3333333333%}.v-application--is-rtl .flex.offset-md7{margin-right:58.3333333333%}.v-application--is-ltr .flex.offset-md6{margin-left:50%}.v-application--is-rtl .flex.offset-md6{margin-right:50%}.v-application--is-ltr .flex.offset-md5{margin-left:41.6666666667%}.v-application--is-rtl .flex.offset-md5{margin-right:41.6666666667%}.v-application--is-ltr .flex.offset-md4{margin-left:33.3333333333%}.v-application--is-rtl .flex.offset-md4{margin-right:33.3333333333%}.v-application--is-ltr .flex.offset-md3{margin-left:25%}.v-application--is-rtl .flex.offset-md3{margin-right:25%}.v-application--is-ltr .flex.offset-md2{margin-left:16.6666666667%}.v-application--is-rtl .flex.offset-md2{margin-right:16.6666666667%}.v-application--is-ltr .flex.offset-md1{margin-left:8.3333333333%}.v-application--is-rtl .flex.offset-md1{margin-right:8.3333333333%}.v-application--is-ltr .flex.offset-md0{margin-left:0}.v-application--is-rtl .flex.offset-md0{margin-right:0}}@media (min-width:1264px){.flex.lg12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-lg12{order:12}.flex.lg11{flex-basis:91.6666666667%;flex-grow:0;max-width:91.6666666667%}.flex.order-lg11{order:11}.flex.lg10{flex-basis:83.3333333333%;flex-grow:0;max-width:83.3333333333%}.flex.order-lg10{order:10}.flex.lg9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-lg9{order:9}.flex.lg8{flex-basis:66.6666666667%;flex-grow:0;max-width:66.6666666667%}.flex.order-lg8{order:8}.flex.lg7{flex-basis:58.3333333333%;flex-grow:0;max-width:58.3333333333%}.flex.order-lg7{order:7}.flex.lg6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-lg6{order:6}.flex.lg5{flex-basis:41.6666666667%;flex-grow:0;max-width:41.6666666667%}.flex.order-lg5{order:5}.flex.lg4{flex-basis:33.3333333333%;flex-grow:0;max-width:33.3333333333%}.flex.order-lg4{order:4}.flex.lg3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-lg3{order:3}.flex.lg2{flex-basis:16.6666666667%;flex-grow:0;max-width:16.6666666667%}.flex.order-lg2{order:2}.flex.lg1{flex-basis:8.3333333333%;flex-grow:0;max-width:8.3333333333%}.flex.order-lg1{order:1}.v-application--is-ltr .flex.offset-lg12{margin-left:100%}.v-application--is-rtl .flex.offset-lg12{margin-right:100%}.v-application--is-ltr .flex.offset-lg11{margin-left:91.6666666667%}.v-application--is-rtl .flex.offset-lg11{margin-right:91.6666666667%}.v-application--is-ltr .flex.offset-lg10{margin-left:83.3333333333%}.v-application--is-rtl .flex.offset-lg10{margin-right:83.3333333333%}.v-application--is-ltr .flex.offset-lg9{margin-left:75%}.v-application--is-rtl .flex.offset-lg9{margin-right:75%}.v-application--is-ltr .flex.offset-lg8{margin-left:66.6666666667%}.v-application--is-rtl .flex.offset-lg8{margin-right:66.6666666667%}.v-application--is-ltr .flex.offset-lg7{margin-left:58.3333333333%}.v-application--is-rtl .flex.offset-lg7{margin-right:58.3333333333%}.v-application--is-ltr .flex.offset-lg6{margin-left:50%}.v-application--is-rtl .flex.offset-lg6{margin-right:50%}.v-application--is-ltr .flex.offset-lg5{margin-left:41.6666666667%}.v-application--is-rtl .flex.offset-lg5{margin-right:41.6666666667%}.v-application--is-ltr .flex.offset-lg4{margin-left:33.3333333333%}.v-application--is-rtl .flex.offset-lg4{margin-right:33.3333333333%}.v-application--is-ltr .flex.offset-lg3{margin-left:25%}.v-application--is-rtl .flex.offset-lg3{margin-right:25%}.v-application--is-ltr .flex.offset-lg2{margin-left:16.6666666667%}.v-application--is-rtl .flex.offset-lg2{margin-right:16.6666666667%}.v-application--is-ltr .flex.offset-lg1{margin-left:8.3333333333%}.v-application--is-rtl .flex.offset-lg1{margin-right:8.3333333333%}.v-application--is-ltr .flex.offset-lg0{margin-left:0}.v-application--is-rtl .flex.offset-lg0{margin-right:0}}@media (min-width:1904px){.flex.xl12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-xl12{order:12}.flex.xl11{flex-basis:91.6666666667%;flex-grow:0;max-width:91.6666666667%}.flex.order-xl11{order:11}.flex.xl10{flex-basis:83.3333333333%;flex-grow:0;max-width:83.3333333333%}.flex.order-xl10{order:10}.flex.xl9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-xl9{order:9}.flex.xl8{flex-basis:66.6666666667%;flex-grow:0;max-width:66.6666666667%}.flex.order-xl8{order:8}.flex.xl7{flex-basis:58.3333333333%;flex-grow:0;max-width:58.3333333333%}.flex.order-xl7{order:7}.flex.xl6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-xl6{order:6}.flex.xl5{flex-basis:41.6666666667%;flex-grow:0;max-width:41.6666666667%}.flex.order-xl5{order:5}.flex.xl4{flex-basis:33.3333333333%;flex-grow:0;max-width:33.3333333333%}.flex.order-xl4{order:4}.flex.xl3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-xl3{order:3}.flex.xl2{flex-basis:16.6666666667%;flex-grow:0;max-width:16.6666666667%}.flex.order-xl2{order:2}.flex.xl1{flex-basis:8.3333333333%;flex-grow:0;max-width:8.3333333333%}.flex.order-xl1{order:1}.v-application--is-ltr .flex.offset-xl12{margin-left:100%}.v-application--is-rtl .flex.offset-xl12{margin-right:100%}.v-application--is-ltr .flex.offset-xl11{margin-left:91.6666666667%}.v-application--is-rtl .flex.offset-xl11{margin-right:91.6666666667%}.v-application--is-ltr .flex.offset-xl10{margin-left:83.3333333333%}.v-application--is-rtl .flex.offset-xl10{margin-right:83.3333333333%}.v-application--is-ltr .flex.offset-xl9{margin-left:75%}.v-application--is-rtl .flex.offset-xl9{margin-right:75%}.v-application--is-ltr .flex.offset-xl8{margin-left:66.6666666667%}.v-application--is-rtl .flex.offset-xl8{margin-right:66.6666666667%}.v-application--is-ltr .flex.offset-xl7{margin-left:58.3333333333%}.v-application--is-rtl .flex.offset-xl7{margin-right:58.3333333333%}.v-application--is-ltr .flex.offset-xl6{margin-left:50%}.v-application--is-rtl .flex.offset-xl6{margin-right:50%}.v-application--is-ltr .flex.offset-xl5{margin-left:41.6666666667%}.v-application--is-rtl .flex.offset-xl5{margin-right:41.6666666667%}.v-application--is-ltr .flex.offset-xl4{margin-left:33.3333333333%}.v-application--is-rtl .flex.offset-xl4{margin-right:33.3333333333%}.v-application--is-ltr .flex.offset-xl3{margin-left:25%}.v-application--is-rtl .flex.offset-xl3{margin-right:25%}.v-application--is-ltr .flex.offset-xl2{margin-left:16.6666666667%}.v-application--is-rtl .flex.offset-xl2{margin-right:16.6666666667%}.v-application--is-ltr .flex.offset-xl1{margin-left:8.3333333333%}.v-application--is-rtl .flex.offset-xl1{margin-right:8.3333333333%}.v-application--is-ltr .flex.offset-xl0{margin-left:0}.v-application--is-rtl .flex.offset-xl0{margin-right:0}}.child-flex>*,.flex{flex:1 1 auto;max-width:100%}.child-flex>.grow-shrink-0,.flex.grow-shrink-0{flex-grow:0;flex-shrink:0}.grow,.spacer{flex-grow:1!important}.grow{flex-shrink:0!important}.shrink{flex-grow:0!important;flex-shrink:1!important}.fill-height{height:100%}",""]),t.exports=r},745:function(t,e,n){"use strict";n.r(e);var r={name:"ElementP",props:{text:{type:String,default:function(){return""}},align:{type:String,default:"center"}}},o=n(37),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("p",{class:"text-"+t.align+" text-xl-body-1"},[t._v("\n  "+t._s(t.text)+"\n")])}),[],!1,null,null,null);e.default=component.exports},751:function(t,e,n){var content=n(759);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("2029faa0",content,!0,{sourceMap:!1})},753:function(t,e,n){"use strict";n(19),n(4),n(15),n(104),n(25),n(727),n(282),n(95),n(96);var r=n(1);var o,c=n(114);e.a=(o="container",r.default.extend({name:"v-".concat(o),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,e){var n=e.props,data=e.data,r=e.children;data.staticClass="".concat(o," ").concat(data.staticClass||"").trim();var c=data.attrs;if(c){data.attrs={};var l=Object.keys(c).filter((function(t){if("slot"===t)return!1;var e=c[t];return t.startsWith("data-")?(data.attrs[t]=e,!1):e||"string"==typeof e}));l.length&&(data.staticClass+=" ".concat(l.join(" ")))}return n.id&&(data.domProps=data.domProps||{},data.domProps.id=n.id),t(n.tag,data,r)}})).extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var n,r=e.props,data=e.data,o=e.children,l=data.attrs;return l&&(data.attrs={},n=Object.keys(l).filter((function(t){if("slot"===t)return!1;var e=l[t];return t.startsWith("data-")?(data.attrs[t]=e,!1):e||"string"==typeof e}))),r.id&&(data.domProps=data.domProps||{},data.domProps.id=r.id),t(r.tag,Object(c.a)(data,{staticClass:"container",class:Array({"container--fluid":r.fluid}).concat(n||[])}),o)}})},755:function(t,e,n){"use strict";n.r(e);var r=n(266),o=n(723),c=n(720),l=n(693),h=n(163),f=n(749),d=(n(56),n(47),n(59),n(43),n(5)),v=Object(d.b)({name:"UserAvatar",props:{user:{type:Object,default:function(){return{}}},size:{type:Number,default:function(){return 50}},color:{type:String,default:function(){return"black"}}},setup:function(t){var e=Object(d.q)(),n=e.getters,r=e.state,o=Object(d.o)(),c=Object(d.a)((function(){return n["user/isLoggedIn"]})),l=Object(d.a)((function(){return r.user.profile.initial})),h=Object(d.a)((function(){return r.user.profile.photoURL})),f=Object(d.a)((function(){return r.user.profile})),v=Object(d.i)("offline"),m=Object(d.i)(!1),y=Object(d.i)("/users/user/".concat(t.user.id));r.user.profile.isOnline&&r.user.profile.isOnline.status&&(v.value=r.user.profile.isOnline.status),t.user&&(l=Object(d.a)((function(){return t.user.initial})),h=Object(d.a)((function(){return t.user.photoURL})),t.user.isOnline&&t.user.isOnline.status&&(v.value=t.user.isOnline.status)),f.value.id===t.user.id&&(y.value="/profile");return{isLoggedIn:c,initial:l,photo:h,goTo:y,onlineStatus:v,viewPhoto:m,tappedPhoto:function(){o.value.name.includes("users-user-id")&&(m.value=!0)}}}}),m=n(37),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-block"}},[n(o.a,{attrs:{top:"",dot:"",overlap:"",bordered:"","offset-x":"8","offset-y":"8",color:"online"===t.onlineStatus?"myshoutGreen":"myshoutRed"}},[n(r.a,{staticClass:"rounded-lg",attrs:{color:t.color,size:t.size,rounded:""}},[t.isLoggedIn?t.isLoggedIn&&t.photo?n(f.a,{attrs:{src:t.photo},on:{click:t.tappedPhoto}}):t.isLoggedIn?n("span",{staticClass:"white--text headline"},[t._v(t._s(t.initial))]):t._e():n(h.a,{attrs:{dark:""}},[t._v("\n        mdi-account\n      ")])],1)],1),t._v(" "),t.viewPhoto?n(c.a,{staticClass:"elevation-0",staticStyle:{"box-shadow":"none !important"},attrs:{"hide-overlay":!0,scrollable:!1,width:"100%","max-width":"700"},model:{value:t.viewPhoto,callback:function(e){t.viewPhoto=e},expression:"viewPhoto"}},[n("div",{staticStyle:{"margin-bottom":"45%"}},[n(f.a,{staticClass:"elevation-12 rounded-lg mx-1",attrs:{src:t.photo}}),t._v(" "),n("div",{staticClass:"text-center"},[n(l.a,{staticClass:"mt-n7",attrs:{color:"primary",fab:""},on:{click:function(e){t.viewPhoto=!t.viewPhoto}}},[n(h.a,[t._v("mdi-close")])],1)],1)],1)]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},756:function(t,e,n){"use strict";n.r(e);var r=n(164),o=n(264),c=n(103),l=n(5),h=Object(l.b)({name:"UserListitem",props:{user:{type:Object,default:function(){return{}}},urlBase:{type:String,default:function(){return"/users/user/"}}},setup:function(t){var e=Object(l.q)().state,n=Object(l.i)(!1),r=Object(l.i)(!1),o=Object(l.i)(),dialog=Object(l.i)(!1),c=Object(l.a)((function(){return e.user.data})),h=Object(l.i)(!1),f=Object(l.i)();return Object(l.f)((function(){c.value.uid===t.user.id&&(h.value=!0,f.value="/profile")})),{loading:n,chat:o,showBottomSheet:r,dialog:dialog,isMe:h,goTo:f}}}),f=(n(758),n(37)),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(r.a,[n("NuxtLink",{attrs:{to:t.goTo?t.goTo:""+t.urlBase+t.user.id}},[n("UserAvatar",{staticClass:"mr-5",attrs:{user:t.user}})],1),t._v(" "),n("NuxtLink",{staticStyle:{width:"100%"},attrs:{to:t.goTo?t.goTo:""+t.urlBase+t.user.id,color:"myshoutDarkGrey"}},[n(c.a,[n(c.c,{staticClass:"username myshoutDarkGrey--text",domProps:{innerHTML:t._s(t.user&&t.user.username?"@"+t.user.username:t.user.first_name)}})],1)],1),t._v(" "),n(o.a,{staticClass:"mr-3"},[t._t("action")],2)],1)}),[],!1,null,"83a04722",null);e.default=component.exports;installComponents(component,{UserAvatar:n(755).default})},758:function(t,e,n){"use strict";n(751)},759:function(t,e,n){var r=n(38)(!1);r.push([t.i,".username[data-v-83a04722]{font-size:19px;font-weight:600}",""]),t.exports=r},765:function(t,e,n){"use strict";var r,o=n(729),c=n(748),l=n(741),h=n(744),f=n(800),d="0.4.32",v=1e4,m="w:0.4.32",y="FIS_v2",_=36e5,w=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),x=new h.ErrorFactory("installations","Installations",w);function k(t){return t instanceof h.FirebaseError&&t.code.includes("request-failed")}function I(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function T(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function O(t,e){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.json()];case 1:return n=o.sent(),r=n.error,[2,x.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function E(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function S(t,e){var n=e.refreshToken,r=E(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function C(t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e;return Object(l.__generator)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function A(t,e){var n=e.fid;return Object(l.__awaiter)(this,void 0,void 0,(function(){var e,r,body,o,c,h;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:return e=I(t),r=E(t),body={fid:n,authVersion:y,appId:t.appId,sdkVersion:m},o={method:"POST",headers:r,body:JSON.stringify(body)},[4,C((function(){return fetch(e,o)}))];case 1:return(c=l.sent()).ok?[4,c.json()]:[3,3];case 2:return h=l.sent(),[2,{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:T(h.authToken)}];case 3:return[4,O("Create Installation",c)];case 4:throw l.sent()}}))}))}function j(t){return new Promise((function(e){setTimeout(e,t)}))}var N=/^[cdef][\w-]{21}$/;function P(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(l.__spreadArray)([],Object(l.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return N.test(e)?e:""}catch(t){return""}}function R(t){return t.appName+"!"+t.appId}var D=new Map;function M(t,e){var n=R(t);L(n,e),function(t,e){var n=U();n&&n.postMessage({key:t,fid:e});V()}(n,e)}function L(t,e){var n,r,o=D.get(t);if(o)try{for(var c=Object(l.__values)(o),h=c.next();!h.done;h=c.next()){(0,h.value)(e)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}var F=null;function U(){return!F&&"BroadcastChannel"in self&&((F=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){L(t.data.key,t.data.fid)}),F}function V(){0===D.size&&F&&(F.close(),F=null)}var B,K="firebase-installations-store",H=null;function G(){return H||(H=Object(f.openDb)("firebase-installations-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(K)}))),H}function W(t,e){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,o,c,h;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:return n=R(t),[4,G()];case 1:return r=l.sent(),o=r.transaction(K,"readwrite"),[4,(c=o.objectStore(K)).get(n)];case 2:return h=l.sent(),[4,c.put(e,n)];case 3:return l.sent(),[4,o.complete];case 4:return l.sent(),h&&h.fid===e.fid||M(t,e.fid),[2,e]}}))}))}function z(t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return e=R(t),[4,G()];case 1:return n=o.sent(),[4,(r=n.transaction(K,"readwrite")).objectStore(K).delete(e)];case 2:return o.sent(),[4,r.complete];case 3:return o.sent(),[2]}}))}))}function $(t,e){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,o,c,h,f;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:return n=R(t),[4,G()];case 1:return r=l.sent(),o=r.transaction(K,"readwrite"),[4,(c=o.objectStore(K)).get(n)];case 2:return h=l.sent(),void 0!==(f=e(h))?[3,4]:[4,c.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,c.put(f,n)];case 5:l.sent(),l.label=6;case 6:return[4,o.complete];case 7:return l.sent(),!f||h&&h.fid===f.fid||M(t,f.fid),[2,f]}}))}))}function Q(t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return[4,$(t,(function(n){var r=function(t){return J(t||{fid:P(),registrationStatus:0})}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(x.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,7]),[4,A(t,e)];case 1:return n=o.sent(),[2,W(t,n)];case 2:return k(r=o.sent())&&409===r.customData.serverCode?[4,z(t)]:[3,4];case 3:return o.sent(),[3,6];case 4:return[4,W(t,{fid:e.fid,registrationStatus:0})];case 5:o.sent(),o.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Y(t)}:{installationEntry:e}}(t,r);return e=o.registrationPromise,o.installationEntry}))];case 1:return""!==(n=o.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=o.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Y(t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return Object(l.__generator)(this,(function(c){switch(c.label){case 0:return[4,X(t)];case 1:e=c.sent(),c.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,j(100)];case 3:return c.sent(),[4,X(t)];case 4:return e=c.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Q(t)];case 6:return n=c.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,e]}}))}))}function X(t){return $(t,(function(t){if(!t)throw x.create("installation-not-found");return J(t)}))}function J(t){return 1===(e=t).registrationStatus&&e.registrationTime+v<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Z(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(l.__awaiter)(this,void 0,void 0,(function(){var t,o,c,body,h,f,d;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:return t=function(t,e){var n=e.fid;return I(t)+"/"+n+"/authTokens:generate"}(n,e),o=S(n,e),(c=r.getImmediate({optional:!0}))&&o.append("x-firebase-client",c.getPlatformInfoString()),body={installation:{sdkVersion:m}},h={method:"POST",headers:o,body:JSON.stringify(body)},[4,C((function(){return fetch(t,h)}))];case 1:return(f=l.sent()).ok?[4,f.json()]:[3,3];case 2:return d=l.sent(),[2,T(d)];case 3:return[4,O("Generate Auth Token",f)];case 4:throw l.sent()}}))}))}function tt(t,e){return void 0===e&&(e=!1),Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return Object(l.__generator)(this,(function(c){switch(c.label){case 0:return[4,$(t.appConfig,(function(r){if(!nt(r))throw x.create("not-registered");var o=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+_}(t)}(o))return r;if(1===o.requestStatus)return n=function(t,e){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return[4,et(t.appConfig)];case 1:n=o.sent(),o.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,j(100)];case 3:return o.sent(),[4,et(t.appConfig)];case 4:return n=o.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,tt(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw x.create("app-offline");var c=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(l.__assign)(Object(l.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return Object(l.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,8]),[4,Z(t,e)];case 1:return n=c.sent(),o=Object(l.__assign)(Object(l.__assign)({},e),{authToken:n}),[4,W(t.appConfig,o)];case 2:return c.sent(),[2,n];case 3:return!k(r=c.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,z(t.appConfig)];case 4:return c.sent(),[3,7];case 5:return o=Object(l.__assign)(Object(l.__assign)({},e),{authToken:{requestStatus:0}}),[4,W(t.appConfig,o)];case 6:c.sent(),c.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,c),c}))];case 1:return r=c.sent(),n?[4,n]:[3,3];case 2:return o=c.sent(),[3,4];case 3:o=r.authToken,c.label=4;case 4:return[2,o]}}))}))}function et(t){return $(t,(function(t){if(!nt(t))throw x.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+v<Date.now()?Object(l.__assign)(Object(l.__assign)({},t),{authToken:{requestStatus:0}}):t}))}function nt(t){return void 0!==t&&2===t.registrationStatus}function it(t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e;return Object(l.__generator)(this,(function(n){switch(n.label){case 0:return[4,Q(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function ot(t,e){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,o,c;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:return n=function(t,e){var n=e.fid;return I(t)+"/"+n}(t,e),r=S(t,e),o={method:"DELETE",headers:r},[4,C((function(){return fetch(n,o)}))];case 1:return(c=l.sent()).ok?[3,3]:[4,O("Delete Installation",c)];case 2:throw l.sent();case 3:return[2]}}))}))}function at(t,e){var n=t.appConfig;return function(t,e){U();var n=R(t),r=D.get(n);r||(r=new Set,D.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=R(t),r=D.get(n);r&&(r.delete(e),0===r.size&&D.delete(n),V())}(n,e)}}function st(t){return x.create("missing-app-config-values",{valueName:t})}(B=o.default).INTERNAL.registerComponent(new c.Component("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw st("App Configuration");if(!t.name)throw st("App Name");try{for(var r=Object(l.__values)(["projectId","apiKey","appId"]),o=r.next();!o.done;o=r.next()){var c=o.value;if(!t.options[c])throw st(c)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},o={app:e,getId:function(){return function(t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return[4,Q(t.appConfig)];case 1:return e=o.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):tt(t).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(l.__awaiter)(this,void 0,void 0,(function(){return Object(l.__generator)(this,(function(n){switch(n.label){case 0:return[4,it(t.appConfig)];case 1:return n.sent(),[4,tt(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(l.__generator)(this,(function(r){switch(r.label){case 0:return[4,$(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw x.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw x.create("app-offline");case 3:return[4,ot(e,n)];case 4:return r.sent(),[4,z(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return at(r,t)}};return o}),"PUBLIC")),B.registerVersion("@firebase/installations",d)},772:function(t,e,n){"use strict";(function(t){var e=n(729);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,t){a!=Array.prototype&&a!=Object.prototype&&(a[b]=t.value)};var o=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,a];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}return globalThis}(this);function c(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function l(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:c(a)}}!function(a,b){if(b){var t=o;a=a.split(".");for(var e=0;e<a.length-1;e++){var n=a[e];n in t||(t[n]={}),t=t[n]}(b=b(e=t[a=a[a.length-1]]))!=e&&null!=b&&r(t,a,{configurable:!0,writable:!0,value:b})}}("Promise",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{g(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function e(g){return g instanceof b?g:new b((function(t){t(g)}))}if(a)return a;t.prototype.b=function(g){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(g)};var n=o.setTimeout;t.prototype.c=function(g){n(g,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var t=0;t<g.length;++t){var e=g[t];g[t]=null;try{e()}catch(t){this.f(t)}}}this.a=null},t.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(p){return function(n){e||(e=!0,p.call(t,n))}}var t=this,e=!1;return{resolve:g(this.m),reject:g(this.g)}},b.prototype.m=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.s(g);else{t:switch(typeof g){case"object":var t=null!=g;break t;case"function":t=!0;break t;default:t=!1}t?this.v(g):this.h(g)}},b.prototype.v=function(g){var t=void 0;try{t=g.then}catch(t){return void this.g(t)}"function"==typeof t?this.u(t,g):this.h(g)},b.prototype.g=function(g){this.i(2,g)},b.prototype.h=function(g){this.i(1,g)},b.prototype.i=function(g,t){if(0!=this.b)throw Error("Cannot settle("+g+", "+t+"): Promise already settled in state"+this.b);this.b=g,this.c=t,this.l()},b.prototype.l=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)r.b(this.a[g]);this.a=null}};var r=new t;return b.prototype.s=function(g){var t=this.f();g.Ra(t.resolve,t.reject)},b.prototype.u=function(g,t){var e=this.f();try{g.call(t,e.resolve,e.reject)}catch(t){e.reject(t)}},b.prototype.then=function(g,t){function e(t,e){return"function"==typeof t?function(e){try{p(t(e))}catch(t){n(t)}}:e}var p,n,r=new b((function(t,e){p=t,n=e}));return this.Ra(e(g,p),e(t,n)),r},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.Ra=function(g,t){function e(){switch(p.b){case 1:g(p.c);break;case 2:t(p.c);break;default:throw Error("Unexpected state: "+p.b)}}var p=this;null==this.a?r.b(e):this.a.push(e)},b.resolve=e,b.reject=function(g){return new b((function(t,e){e(g)}))},b.race=function(g){return new b((function(t,n){for(var p=l(g),r=p.next();!r.done;r=p.next())e(r.value).Ra(t,n)}))},b.all=function(g){var t=l(g),n=t.next();return n.done?e([]):new b((function(p,r){function o(t){return function(e){c[t]=e,0==--l&&p(c)}}var c=[],l=0;do{c.push(void 0),l++,e(n.value).Ra(o(c.length-1),r),n=t.next()}while(!n.done)}))},b}));var h=h||{},f=this||self,d=/^[\w+/_-]+[=]{0,2}$/,v=null;function m(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&d.test(a)?a:""}function y(){}function _(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function w(a){var b=_(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"function"==_(a)}function k(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function I(a){return Object.prototype.hasOwnProperty.call(a,T)&&a[T]||(a[T]=++O)}var T="closure_uid_"+(1e9*Math.random()>>>0),O=0;function E(a,b,t){return a.call.apply(a.bind,arguments)}function S(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function q(a,b,t){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:S).apply(null,arguments)}function C(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var A=Date.now;function j(a,b){function t(){}t.prototype=b.prototype,a.bb=b.prototype,a.prototype=new t,a.prototype.constructor=a}function N(a){return a}function P(a,b,t){this.code=M+a,this.message=b||L[a]||"",this.a=t||null}function R(a){var b=a&&a.code;return b?new P(b.substring(M.length),a.message,a.serverResponse):null}j(P,Error),P.prototype.w=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},P.prototype.toJSON=function(){return this.w()};var D,M="auth/",L={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},F={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function U(a){for(var b in F)if(F[b].id===a)return{firebaseEndpoint:(a=F[b]).Ua,secureTokenEndpoint:a.$a,identityPlatformEndpoint:a.Xa};return null}function V(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(t){return!1}}function u(a){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function B(a,b){for(var t="",e=(a=a.split("%s")).length-1,n=0;n<e;n++)t+=a[n]+(n<b.length?b[n]:"%s");u.call(this,t+a[e])}function K(a,b){throw new B("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function H(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function G(a,b){a.f(b),100>a.b&&(a.b++,b.next=a.a,a.a=b)}function W(){this.b=this.a=null}D=U("__EID__")?"__EID__":void 0,j(u,Error),u.prototype.name="CustomError",j(B,u),B.prototype.name="AssertionError",H.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var z=new H((function(){return new Q}),(function(a){a.reset()}));function $(){var a=Se,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Q(){this.next=this.b=this.a=null}W.prototype.add=function(a,b){var t=z.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Q.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Q.prototype.reset=function(){this.next=this.b=this.a=null};var Y=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},X=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};var J=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=[],n=0,r="string"==typeof a?a.split(""):a,g=0;g<t;g++)if(g in r){var o=r[g];b.call(void 0,o,g,a)&&(e[n++]=o)}return e},Z=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=Array(t),n="string"==typeof a?a.split(""):a,r=0;r<t;r++)r in n&&(e[r]=b.call(void 0,n[r],r,a));return e},tt=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a))return!0;return!1};function et(a,b){return 0<=Y(a,b)}function nt(a,b){var t;return(t=0<=(b=Y(a,b)))&&Array.prototype.splice.call(a,b,1),t}function it(a,b){!function(a,b){for(var t="string"==typeof a?a.split(""):a,e=a.length-1;0<=e;--e)e in t&&b.call(void 0,t[e],e,a)}(a,(function(t,e){b.call(void 0,t,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&0}))}function ot(a){return Array.prototype.concat.apply([],arguments)}function at(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}var st,ut=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},ct=/&/g,lt=/</g,ht=/>/g,ft=/"/g,pt=/'/g,vt=/\x00/g,gt=/[\x00&<>"']/;function mt(a,b){return-1!=a.indexOf(b)}function yt(a,b){return a<b?-1:a>b?1:0}t:{var _t=f.navigator;if(_t){var bt=_t.userAgent;if(bt){st=bt;break t}}st=""}function wt(a){return mt(st,a)}function xt(a,b){for(var t in a)b.call(void 0,a[t],t,a)}function kt(a){for(var b in a)return!1;return!0}function It(a){var t,b={};for(t in a)b[t]=a[t];return b}var Tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ot(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<Tt.length;r++)t=Tt[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function Et(a,b){t:{try{var t=a&&a.ownerDocument,e=t&&(t.defaultView||t.parentWindow);if((e=e||f).Element&&e.Location){var n=e;break t}}catch(t){}n=null}if(n&&void 0!==n[b]&&(!a||!(a instanceof n[b])&&(a instanceof n.Location||a instanceof n.Element))){if(k(a))try{var r=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(t){r="<object could not be stringified>"}else r=void 0===a?"undefined":null===a?"null":typeof a;K("Argument is not a %s (or a non-Element, non-Location mock); got: %s",b,r)}}function St(a,b){this.a=a===Nt&&b||"",this.b=jt}function Ct(a){return a instanceof St&&a.constructor===St&&a.b===jt?a.a:(K("expected object of type Const, got '"+a+"'"),"type_error:Const")}St.prototype.ta=!0,St.prototype.sa=function(){return this.a},St.prototype.toString=function(){return"Const{"+this.a+"}"};var At,jt={},Nt={};function Pt(){if(void 0===At){var a=null,b=f.trustedTypes;if(b&&b.createPolicy){try{a=b.createPolicy("goog#html",{createHTML:N,createScript:N,createScriptURL:N})}catch(t){f.console&&f.console.error(t.message)}At=a}else At=a}return At}function Rt(a,b){this.a=b===Ut?a:""}function Dt(a){return a instanceof Rt&&a.constructor===Rt?a.a:(K("expected object of type TrustedResourceUrl, got '"+a+"' of type "+_(a)),"type_error:TrustedResourceUrl")}function Mt(a,b){var t=Ct(a);if(!Ft.test(t))throw Error("Invalid TrustedResourceUrl format: "+t);return function(a){var b=Pt();return new Rt(a=b?b.createScriptURL(a):a,Ut)}(a=t.replace(Lt,(function(e,n){if(!Object.prototype.hasOwnProperty.call(b,n))throw Error('Found marker, "'+n+'", in format string, "'+t+'", but no valid label mapping found in args: '+JSON.stringify(b));return(e=b[n])instanceof St?Ct(e):encodeURIComponent(String(e))})))}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Lt=/%{(\w+)}/g,Ft=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ut={};function qt(a,b){this.a=b===zt?a:""}function Vt(a){return a instanceof qt&&a.constructor===qt?a.a:(K("expected object of type SafeUrl, got '"+a+"' of type "+_(a)),"type_error:SafeUrl")}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Bt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ht=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Gt(a){if(a instanceof qt)return a;if(a="object"==typeof a&&a.ta?a.sa():String(a),Ht.test(a))a=new qt(a,zt);else{var b=(a=(a=String(a)).replace(/(%0A|%0D)/g,"")).match(Kt);a=b&&Bt.test(b[1])?new qt(a,zt):null}return a}function Wt(a){return a instanceof qt?a:(a="object"==typeof a&&a.ta?a.sa():String(a),Ht.test(a)||(a="about:invalid#zClosurez"),new qt(a,zt))}var zt={},$t=new qt("about:invalid#zClosurez",zt);function Qt(a,b,t){this.a=t===Yt?a:""}Qt.prototype.ta=!0,Qt.prototype.sa=function(){return this.a.toString()},Qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Yt={};function Xt(a,b,t,e){return a=a instanceof qt?a:Wt(a),b=b||f,t=t instanceof St?Ct(t):t||"",b.open(Vt(a),t,e,void 0)}function Jt(a,b){for(var t=a.split("%s"),e="",n=Array.prototype.slice.call(arguments,1);n.length&&1<t.length;)e+=t.shift()+n.shift();return e+t.join("%s")}function Zt(a){return gt.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(ct,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(lt,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(ht,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ft,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(pt,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(vt,"&#0;"))),a}function te(a){return te[" "](a),a}te[" "]=y;var ee,a,ne=wt("Opera"),re=wt("Trident")||wt("MSIE"),ie=wt("Edge"),oe=ie||re,ae=wt("Gecko")&&!(mt(st.toLowerCase(),"webkit")&&!wt("Edge"))&&!(wt("Trident")||wt("MSIE"))&&!wt("Edge"),se=mt(st.toLowerCase(),"webkit")&&!wt("Edge");function ue(){var a=f.document;return a?a.documentMode:void 0}t:{var ce="",le=(a=st,ae?/rv:([^\);]+)(\)|;)/.exec(a):ie?/Edge\/([\d\.]+)/.exec(a):re?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):se?/WebKit\/(\S+)/.exec(a):ne?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(le&&(ce=le?le[1]:""),re){var he=ue();if(null!=he&&he>parseFloat(ce)){ee=String(he);break t}}ee=ce}var fe,de={};function pe(a){return function(a,b){var t=de;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=ut(String(ee)).split("."),e=ut(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var g=t[r]||"",o=e[r]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==g[0].length&&0==o[0].length)break;b=yt(0==g[1].length?0:parseInt(g[1],10),0==o[1].length?0:parseInt(o[1],10))||yt(0==g[2].length,0==o[2].length)||yt(g[2],o[2]),g=g[3],o=o[3]}while(0==b)}return 0<=b}))}if(f.document&&re){var ve=ue();fe=ve||(parseInt(ee,10)||void 0)}else fe=void 0;var ge=fe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(a){}var me=!re||9<=Number(ge);function ye(a){var b=document;return"string"==typeof a?b.getElementById(a):a}function _e(a,b){xt(b,(function(t,e){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==e?a.style.cssText=t:"class"==e?a.className=t:"for"==e?a.htmlFor=t:xe.hasOwnProperty(e)?a.setAttribute(xe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,t):a[e]=t}))}var be,we,xe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ke(a,b,t){function e(t){t&&b.appendChild("string"==typeof t?a.createTextNode(t):t)}for(var n=2;n<t.length;n++){var r=t[n];if(!w(r)||k(r)&&0<r.nodeType)e(r);else{t:{if(r&&"number"==typeof r.length){if(k(r)){var g="function"==typeof r.item||"string"==typeof r.item;break t}if(x(r)){g="function"==typeof r.item;break t}}g=!1}X(g?at(r):r,e)}}}function Ie(a,b){return b=String(b),"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase()),a.createElement(b)}function Te(a){f.setTimeout((function(){throw a}),0)}function Oe(a,b){we||function(){if(f.Promise&&f.Promise.resolve){var a=f.Promise.resolve(void 0);we=function(){a.then(Ce)}}else we=function(){var b=Ce;!x(f.setImmediate)||f.Window&&f.Window.prototype&&!wt("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(be||(be=function(){var a=f.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!wt("Presto")&&(a=function(){var t=Ie(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var g="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=q((function(t){"*"!=n&&t.origin!=n||t.data!=g||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(g,n)}}}),void 0!==a&&!wt("Trident")&&!wt("MSIE")){var b=new a,t={},e=t;return b.port1.onmessage=function(){if(void 0!==t.next){var e=(t=t.next).Hb;t.Hb=null,e()}},function(t){e.next={Hb:t},e=e.next,b.port2.postMessage(0)}}return function(t){f.setTimeout(t,0)}}()),be(b)):f.setImmediate(b)}}(),Ee||(we(),Ee=!0),Se.add(a,b)}var Ee=!1,Se=new W;function Ce(){for(var a;a=$();){try{a.a.call(a.b)}catch(t){Te(t)}G(z,a)}Ee=!1}function Ae(a,b){if(this.a=je,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=y)try{var t=this;a.call(b,(function(e){He(t,Ne,e)}),(function(e){if(!(e instanceof Xe))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}He(t,Pe,e)}))}catch(t){He(this,Pe,t)}}var je=0,Ne=2,Pe=3;function Re(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Re.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var De=new H((function(){return new Re}),(function(a){a.reset()}));function Me(a,b,t){var e=De.get();return e.g=a,e.b=b,e.f=t,e}function Le(a){if(a instanceof Ae)return a;var b=new Ae(y);return He(b,Ne,a),b}function Fe(a){return new Ae((function(b,t){t(a)}))}function Ue(a,b,t){Ge(a,b,t,null)||Oe(C(b,a))}function qe(a){return new Ae((function(b){var t=a.length,e=[];if(t)for(var n=function(n,r,p){t--,e[n]=r?{Qb:!0,value:p}:{Qb:!1,reason:p},0==t&&b(e)},r=0;r<a.length;r++)Ue(a[r],C(n,r,!0),C(n,r,!1));else b(e)}))}function Ve(a,b){if(a.a==je)if(a.c){var t=a.c;if(t.b){for(var e=0,n=null,r=null,g=t.b;g&&(g.c||(e++,g.a==a&&(n=g),!(n&&1<e)));g=g.next)n||(r=g);n&&(t.a==je&&1==e?Ve(t,b):(r?((e=r).next==t.f&&(t.f=e),e.next=e.next.next):ze(t),$e(t,n,Pe,b)))}a.c=null}else He(a,Pe,b)}function Be(a,b){a.b||a.a!=Ne&&a.a!=Pe||We(a),a.f?a.f.next=b:a.b=b,a.f=b}function Ke(a,b,t,e){var n=Me(null,null,null);return n.a=new Ae((function(r,g){n.g=b?function(t){try{var n=b.call(e,t);r(n)}catch(t){g(t)}}:r,n.b=t?function(n){try{var o=t.call(e,n);void 0===o&&n instanceof Xe?g(n):r(o)}catch(t){g(t)}}:g})),n.a.c=a,Be(a,n),n.a}function He(a,b,t){a.a==je&&(a===t&&(b=Pe,t=new TypeError("Promise cannot resolve to itself")),a.a=1,Ge(t,a.$c,a.ad,a)||(a.i=t,a.a=b,a.c=null,We(a),b!=Pe||t instanceof Xe||function(a,b){a.g=!0,Oe((function(){a.g&&Ye.call(null,b)}))}(a,t)))}function Ge(a,b,t,e){if(a instanceof Ae)return Be(a,Me(b||y,t||null,e)),!0;if(V(a))return a.then(b,t,e),!0;if(k(a))try{var n=a.then;if(x(n))return function(a,b,t,e,n){function r(t){o||(o=!0,e.call(n,t))}function g(e){o||(o=!0,t.call(n,e))}var o=!1;try{b.call(a,g,r)}catch(t){r(t)}}(a,n,b,t,e),!0}catch(n){return t.call(e,n),!0}return!1}function We(a){a.h||(a.h=!0,Oe(a.gc,a))}function ze(a){var b=null;return a.b&&(b=a.b,a.b=b.next,b.next=null),a.b||(a.f=null),b}function $e(a,b,t,e){if(t==Pe&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Qe(b,t,e);else try{b.c?b.g.call(b.f):Qe(b,t,e)}catch(t){Ye.call(null,t)}G(De,b)}function Qe(a,b,t){b==Ne?a.g.call(a.f,t):a.b&&a.b.call(a.f,t)}Ae.prototype.then=function(a,b,t){return Ke(this,x(a)?a:null,x(b)?b:null,t)},Ae.prototype.$goog_Thenable=!0,(n=Ae.prototype).oa=function(a,b){return(a=Me(a,a,b)).c=!0,Be(this,a),this},n.o=function(a,b){return Ke(this,null,a,b)},n.cancel=function(a){if(this.a==je){var b=new Xe(a);Oe((function(){Ve(this,b)}),this)}},n.$c=function(a){this.a=je,He(this,Ne,a)},n.ad=function(a){this.a=je,He(this,Pe,a)},n.gc=function(){for(var a;a=ze(this);)$e(this,a,this.a,this.i);this.h=!1};var Ye=Te;function Xe(a){u.call(this,a)}function Je(){0!=Ze&&(tn[I(this)]=this),this.ya=this.ya,this.pa=this.pa}j(Xe,u),Xe.prototype.name="cancel";var Ze=0,tn={};function en(a){if(!a.ya&&(a.ya=!0,a.Da(),0!=Ze)){var b=I(a);if(0!=Ze&&a.pa&&0<a.pa.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete tn[b]}}Je.prototype.ya=!1,Je.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var nn=Object.freeze||function(a){return a},rn=!re||9<=Number(ge),on=re&&!pe("9"),an=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{f.addEventListener("test",y,b),f.removeEventListener("test",y,b)}catch(t){}return a}();function sn(a,b){this.type=a,this.b=this.target=b,this.defaultPrevented=!1}function un(a,b){if(sn.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=b,b=a.relatedTarget){if(ae){t:{try{te(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:cn[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}sn.prototype.preventDefault=function(){this.defaultPrevented=!0},j(un,sn);var cn=nn({2:"touch",3:"pen",4:"mouse"});un.prototype.preventDefault=function(){un.bb.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,on)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}},un.prototype.g=function(){return this.a};var dd="closure_listenable_"+(1e6*Math.random()|0),ln=0;function hn(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.Wa=n,this.key=++ln,this.wa=this.Qa=!1}function fn(a){a.wa=!0,a.listener=null,a.proxy=null,a.src=null,a.Wa=null}function dn(a){this.src=a,this.a={},this.b=0}function pn(a,b){var t=b.type;t in a.a&&nt(a.a[t],b)&&(fn(b),0==a.a[t].length&&(delete a.a[t],a.b--))}function vn(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.wa&&r.listener==b&&r.capture==!!t&&r.Wa==e)return n}return-1}dn.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var g=vn(a,b,e,n);return-1<g?(b=a[g],t||(b.Qa=!1)):((b=new hn(b,this.src,r,!!e,n)).Qa=t,a.push(b)),b};var gn="closure_lm_"+(1e6*Math.random()|0),mn={};function yn(a,b,t,e,n){if(e&&e.once)bn(a,b,t,e,n);else if(Array.isArray(b))for(var r=0;r<b.length;r++)yn(a,b[r],t,e,n);else t=Cn(t),a&&a[dd]?jn(a,b,t,k(e)?!!e.capture:!!e,n):_n(a,b,t,!1,e,n)}function _n(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var g=k(n)?!!n.capture:!!n,o=En(a);if(o||(a[gn]=o=new dn(a)),!(t=o.add(b,t,e,g,r)).proxy){if(e=function(){var a=On,b=rn?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)an||(n=g),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(kn(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}0}}function bn(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)bn(a,b[r],t,e,n);else t=Cn(t),a&&a[dd]?Nn(a,b,t,k(e)?!!e.capture:!!e,n):_n(a,b,t,!0,e,n)}function wn(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)wn(a,b[r],t,e,n);else e=k(e)?!!e.capture:!!e,t=Cn(t),a&&a[dd]?(a=a.v,(b=String(b).toString())in a.a&&(-1<(t=vn(r=a.a[b],t,e,n))&&(fn(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete a.a[b],a.b--)))):a&&(a=En(a))&&(b=a.a[b.toString()],a=-1,b&&(a=vn(b,t,e,n)),(t=-1<a?b[a]:null)&&xn(t))}function xn(a){if("number"!=typeof a&&a&&!a.wa){var b=a.src;if(b&&b[dd])pn(b.v,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(kn(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=En(b))?(pn(t,a),0==t.b&&(t.src=null,b[gn]=null)):fn(a)}}}function kn(a){return a in mn?mn[a]:mn[a]="on"+a}function In(a,b,t,e){var n=!0;if((a=En(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var r=b[a];r&&r.capture==t&&!r.wa&&(r=Tn(r,e),n=n&&!1!==r)}return n}function Tn(a,b){var t=a.listener,e=a.Wa||a.src;return a.Qa&&xn(a),t.call(e,b)}function On(a,b){if(a.wa)return!0;if(!rn){if(!b)t:{b=["window","event"];for(var t=f,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}if(b=new un(e=b,this),t=!0,!(0>e.keyCode||null!=e.returnValue)){t:{var n=!1;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(t){n=!0}(n||null==e.returnValue)&&(e.returnValue=!0)}for(e=[],n=b.b;n;n=n.parentNode)e.push(n);for(a=a.type,n=e.length-1;0<=n;n--){b.b=e[n];var r=In(e[n],a,!0,b);t=t&&r}for(n=0;n<e.length;n++)b.b=e[n],r=In(e[n],a,!1,b),t=t&&r}return t}return Tn(a,new un(b,this))}function En(a){return(a=a[gn])instanceof dn?a:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cn(a){return x(a)?a:(a[Sn]||(a[Sn]=function(b){return a.handleEvent(b)}),a[Sn])}function An(){Je.call(this),this.v=new dn(this),this.bc=this,this.hb=null}function jn(a,b,t,e,n){a.v.add(String(b),t,!1,e,n)}function Nn(a,b,t,e,n){a.v.add(String(b),t,!0,e,n)}function Pn(a,b,t,e){if(!(b=a.v.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var g=b[r];if(g&&!g.wa&&g.capture==t){var o=g.listener,c=g.Wa||g.src;g.Qa&&pn(a.v,g),n=!1!==o.call(c,e)&&n}}return n&&!e.defaultPrevented}function Rn(a,b,t){if(x(a))t&&(a=q(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=q(a.handleEvent,a)}return 2147483647<Number(b)?-1:f.setTimeout(a,b||0)}function Dn(a){var b=null;return new Ae((function(t,e){-1==(b=Rn((function(){t(void 0)}),a))&&e(Error("Failed to schedule timer."))})).o((function(t){throw f.clearTimeout(b),t}))}function Mn(a){if(a.X&&"function"==typeof a.X)return a.X();if("string"==typeof a)return a.split("");if(w(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}function Ln(a){if(a.Y&&"function"==typeof a.Y)return a.Y();if(!a.X||"function"!=typeof a.X){if(w(a)||"string"==typeof a){var b=[];a=a.length;for(var t=0;t<a;t++)b.push(t);return b}for(var e in b=[],t=0,a)b[t++]=e;return b}}function Fn(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Fn)for(t=a.Y(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Un(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];qn(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)qn(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function qn(a,b){return Object.prototype.hasOwnProperty.call(a,b)}j(An,Je),An.prototype[dd]=!0,An.prototype.addEventListener=function(a,b,t,e){yn(this,a,b,t,e)},An.prototype.removeEventListener=function(a,b,t,e){wn(this,a,b,t,e)},An.prototype.dispatchEvent=function(a){var b,t=this.hb;if(t)for(b=[];t;t=t.hb)b.push(t);t=this.bc;var e=a.type||a;if("string"==typeof a)a=new sn(a,t);else if(a instanceof sn)a.target=a.target||t;else{var n=a;Ot(a=new sn(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var g=a.b=b[r];n=Pn(g,e,!0,a)&&n}if(n=Pn(g=a.b=t,e,!0,a)&&n,n=Pn(g,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Pn(g=a.b=b[r],e,!1,a)&&n;return n},An.prototype.Da=function(){if(An.bb.Da.call(this),this.v){var t,a=this.v;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)fn(e[n]);delete a.a[t],a.b--}}this.hb=null},(n=Fn.prototype).X=function(){Un(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},n.Y=function(){return Un(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(a,b){return qn(this.b,a)?this.b[a]:b},n.set=function(a,b){qn(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},n.forEach=function(a,b){for(var t=this.Y(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Vn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bn(a,b){var t;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,a instanceof Bn?(this.i=void 0!==b?b:a.i,Kn(this,a.c),this.l=a.l,this.a=a.a,Hn(this,a.g),this.f=a.f,Gn(this,fr(a.b)),this.h=a.h):a&&(t=String(a).match(Vn))?(this.i=!!b,Kn(this,t[1]||"",!0),this.l=Yn(t[2]||""),this.a=Yn(t[3]||"",!0),Hn(this,t[4]),this.f=Yn(t[5]||"",!0),Gn(this,t[6]||"",!0),this.h=Yn(t[7]||"")):(this.i=!!b,this.b=new or(null,this.i))}function Kn(a,b,t){a.c=t?Yn(b,!0):b,a.c&&(a.c=a.c.replace(/:$/,""))}function Hn(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.g=b}else a.g=null}function Gn(a,b,t){b instanceof or?(a.b=b,function(a,b){b&&!a.f&&(ar(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ur(this,e),lr(this,n,t))}),a)),a.f=b}(a.b,a.i)):(t||(b=Xn(b,rr)),a.b=new or(b,a.i))}function Wn(a,b,t){a.b.set(b,t)}function zn(a,b){return a.b.get(b)}function $n(a){return a instanceof Bn?new Bn(a):new Bn(a,void 0)}function Qn(a,b,t,e){var n=new Bn(null,void 0);return a&&Kn(n,a),b&&(n.a=b),t&&Hn(n,t),e&&(n.f=e),n}function Yn(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xn(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,Jn),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jn(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Bn.prototype.toString=function(){var a=[],b=this.c;b&&a.push(Xn(b,Zn,!0),":");var t=this.a;return(t||"file"==b)&&(a.push("//"),(b=this.l)&&a.push(Xn(b,Zn,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.g)&&a.push(":",String(t))),(t=this.f)&&(this.a&&"/"!=t.charAt(0)&&a.push("/"),a.push(Xn(t,"/"==t.charAt(0)?nr:er,!0))),(t=this.b.toString())&&a.push("?",t),(t=this.h)&&a.push("#",Xn(t,ir)),a.join("")},Bn.prototype.resolve=function(a){var b=new Bn(this),t=!!a.c;t?Kn(b,a.c):t=!!a.l,t?b.l=a.l:t=!!a.a,t?b.a=a.a:t=null!=a.g;var e=a.f;if(t)Hn(b,a.g);else if(t=!!a.f){if("/"!=e.charAt(0))if(this.a&&!this.f)e="/"+e;else{var n=b.f.lastIndexOf("/");-1!=n&&(e=b.f.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(mt(n,"./")||mt(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],g=0;g<n.length;){var o=n[g++];"."==o?e&&g==n.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&g==n.length&&r.push("")):(r.push(o),e=!0)}e=r.join("/")}else e=n}return t?b.f=e:t=""!==a.b.toString(),t?Gn(b,fr(a.b)):t=!!a.h,t&&(b.h=a.h),b};var Zn=/[#\/\?@]/g,er=/[#\?:]/g,nr=/[#\?]/g,rr=/[#\?@]/g,ir=/#/g;function or(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function ar(a){a.a||(a.a=new Fn,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function sr(a){var b=Ln(a);if(void 0===b)throw Error("Keys are undefined");var t=new or(null,void 0);a=Mn(a);for(var e=0;e<b.length;e++){var n=b[e],r=a[e];Array.isArray(r)?lr(t,n,r):t.add(n,r)}return t}function ur(a,b){ar(a),b=dr(a,b),qn(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,qn((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Un(a)))}function cr(a,b){return ar(a),b=dr(a,b),qn(a.a.b,b)}function lr(a,b,t){ur(a,b),0<t.length&&(a.c=null,a.a.set(dr(a,b),at(t)),a.b+=t.length)}function fr(a){var b=new or;return b.c=a.c,a.a&&(b.a=new Fn(a.a),b.b=a.b),b}function dr(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function pr(a){var b=[];return gr(new vr,a,b),b.join("")}function vr(){}function gr(a,b,t){if(null==b)t.push("null");else{if("object"==typeof b){if(Array.isArray(b)){var e=b;b=e.length,t.push("[");for(var n="",r=0;r<b;r++)t.push(n),gr(a,e[r],t),n=",";return void t.push("]")}if(!(b instanceof String||b instanceof Number||b instanceof Boolean)){for(e in t.push("{"),n="",b)Object.prototype.hasOwnProperty.call(b,e)&&("function"!=typeof(r=b[e])&&(t.push(n),_r(e,t),t.push(":"),gr(a,r,t),n=","));return void t.push("}")}b=b.valueOf()}switch(typeof b){case"string":_r(b,t);break;case"number":t.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":t.push(String(b));break;case"function":t.push("null");break;default:throw Error("Unknown type: "+typeof b)}}}(n=or.prototype).add=function(a,b){ar(this),this.c=null,a=dr(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(a,b){ar(this),this.a.forEach((function(t,e){X(t,(function(t){a.call(b,t,e,this)}),this)}),this)},n.Y=function(){ar(this);for(var a=this.a.X(),b=this.a.Y(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},n.X=function(a){ar(this);var b=[];if("string"==typeof a)cr(this,a)&&(b=ot(b,this.a.get(dr(this,a))));else{a=this.a.X();for(var t=0;t<a.length;t++)b=ot(b,a[t])}return b},n.set=function(a,b){return ar(this),this.c=null,cr(this,a=dr(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},n.get=function(a,b){return a&&0<(a=this.X(a)).length?String(a[0]):b},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.Y(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.X(e);for(var r=0;r<e.length;r++){var g=n;""!==e[r]&&(g+="="+encodeURIComponent(String(e[r]))),a.push(g)}}return this.c=a.join("&")};var mr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},yr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function _r(a,b){b.push('"',a.replace(yr,(function(t){var e=mr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),mr[t]=e),e})),'"')}function wr(){var a=Vr();return re&&!!ge&&11==ge||/Edge\/\d+/.test(a)}function xr(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function kr(a,b){b=b||f.window;var t="about:blank";a&&(t=Vt(Gt(a)||$t)),b.location.href=t}function Ir(a,b){var t,e=[];for(t in a)t in b?typeof a[t]!=typeof b[t]?e.push(t):"object"==typeof a[t]&&null!=a[t]&&null!=b[t]?0<Ir(a[t],b[t]).length&&e.push(t):a[t]!==b[t]&&e.push(t):e.push(t);for(t in b)t in a||e.push(t);return e}function Tr(a){return!!((a=(a||Vr()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function Or(a){a=a||f.window;try{a.close()}catch(t){}}function Er(a,b,t){var e=Math.floor(1e9*Math.random()).toString();b=b||500,t=t||600;var n=(window.screen.availHeight-t)/2,r=(window.screen.availWidth-b)/2;for(g in b={width:b,height:t,top:0<n?n:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},t=Vr().toLowerCase(),e&&(b.target=e,mt(t,"crios/")&&(b.target="_blank")),Fr(Vr())==Mr&&(a=a||"http://localhost",b.scrollbars=!0),t=a||"",(a=b)||(a={}),e=window,b=t instanceof qt?t:Gt(void 0!==t.href?t.href:String(t))||$t,t=a.target||t.target,n=[],a)switch(g){case"width":case"height":case"top":case"left":n.push(g+"="+a[g]);break;case"target":case"noopener":case"noreferrer":break;default:n.push(g+"="+(a[g]?1:0))}var g=n.join(",");if((wt("iPhone")&&!wt("iPod")&&!wt("iPad")||wt("iPad")||wt("iPod"))&&e.navigator&&e.navigator.standalone&&t&&"_self"!=t?(Et(g=Ie(document,"A"),"HTMLAnchorElement"),b=b instanceof qt?b:Wt(b),g.href=Vt(b),g.setAttribute("target",t),a.noreferrer&&g.setAttribute("rel","noreferrer"),(a=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,e,1),g.dispatchEvent(a),g={}):a.noreferrer?(g=Xt("",e,t,g),a=Vt(b),g&&(oe&&mt(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),g.opener=null,a='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Zt(a)+'">',a=new Qt(a=(e=Pt())?e.createHTML(a):a,null,Yt),e=g.document)&&(e.write(function(a){return a instanceof Qt&&a.constructor===Qt?a.a:(K("expected object of type SafeHtml, got '"+a+"' of type "+_(a)),"type_error:SafeHtml")}(a)),e.close())):(g=Xt(b,e,t,g))&&a.noopener&&(g.opener=null),g)try{g.focus()}catch(t){}return g}var Sr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cr=/^[^@]+@[^@]+$/;function Ar(){var a=null;return new Ae((function(b){"complete"==f.document.readyState?b():(a=function(){b()},bn(window,"load",a))})).o((function(b){throw wn(window,"load",a),b}))}function jr(a){return a=a||Vr(),!("file:"!==Wr()&&"ionic:"!==Wr()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nr(){var a=f.window;try{return!(!a||a==a.top)}catch(t){return!1}}function Pr(){return void 0!==f.WorkerGlobalScope&&"function"==typeof f.importScripts}function Rr(){return e.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.default.INTERNAL.hasOwnProperty("node")?"Node":Pr()?"Worker":"Browser"}function Dr(){var a=Rr();return"ReactNative"===a||"Node"===a}var Mr="Firefox",Lr="Chrome";function Fr(a){var b=a.toLowerCase();return mt(b,"opera/")||mt(b,"opr/")||mt(b,"opios/")?"Opera":mt(b,"iemobile")?"IEMobile":mt(b,"msie")||mt(b,"trident/")?"IE":mt(b,"edge/")?"Edge":mt(b,"firefox/")?Mr:mt(b,"silk/")?"Silk":mt(b,"blackberry")?"Blackberry":mt(b,"webos")?"Webos":!mt(b,"safari/")||mt(b,"chrome/")||mt(b,"crios/")||mt(b,"android")?!mt(b,"chrome/")&&!mt(b,"crios/")||mt(b,"edge/")?mt(b,"android")?"Android":(a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length?a[1]:"Other":Lr:"Safari"}var Ur={md:"FirebaseCore-web",od:"FirebaseUI-web"};function qr(a,b){b=b||[];var t,e=[],n={};for(t in Ur)n[Ur[t]]=!0;for(t=0;t<b.length;t++)void 0!==n[b[t]]&&(delete n[b[t]],e.push(b[t]));return e.sort(),(b=e).length||(b=["FirebaseCore-web"]),"Browser"===(e=Rr())?e=Fr(n=Vr()):"Worker"===e&&(e=Fr(n=Vr())+"-"+e),e+"/JsCore/"+a+"/"+b.join(",")}function Vr(){return f.navigator&&f.navigator.userAgent||""}function Br(a,b){a=a.split("."),b=b||f;for(var t=0;t<a.length&&"object"==typeof b&&null!=b;t++)b=b[a[t]];return t!=a.length&&(b=void 0),b}function Kr(){try{var a=f.localStorage,b=Xr();if(a)return a.setItem(b,"1"),a.removeItem(b),!wr()||!!f.indexedDB}catch(t){return Pr()&&!!f.indexedDB}return!1}function Hr(){return(Gr()||"chrome-extension:"===Wr()||jr())&&!Dr()&&Kr()&&!Pr()}function Gr(){return"http:"===Wr()||"https:"===Wr()}function Wr(){return f.location&&f.location.protocol||null}function zr(a){return!Tr(a=a||Vr())&&Fr(a)!=Mr}function $r(a){return void 0===a?null:pr(a)}function Qr(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&null!==a[t]&&void 0!==a[t]&&(b[t]=a[t]);return b}function Yr(a){if(null!==a)return JSON.parse(a)}function Xr(a){return a||Math.floor(1e9*Math.random()).toString()}function Jr(a){return"Safari"!=Fr(a=a||Vr())&&!a.toLowerCase().match(/iphone|ipad|ipod/)}function Zr(){var a=f.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var t=0;t<a.CP.length;t++)a.CP[t]=null}function ti(a,b){if(a>b)throw Error("Short delay should be less than long delay!");this.a=a,this.c=b,a=Vr(),b=Rr(),this.b=Tr(a)||"ReactNative"===b}function ei(){var a=f.document;return!a||void 0===a.visibilityState||"visible"==a.visibilityState}function ni(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(t){}return null}function ri(){return!(!Br("fireauth.oauthhelper",f)&&!Br("fireauth.iframe",f))}ti.prototype.get=function(){var a=f.navigator;return!a||"boolean"!=typeof a.onLine||!Gr()&&"chrome-extension:"!==Wr()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var ii,oi={};function ai(a){oi[a]||(oi[a]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(a))}try{var si={};Object.defineProperty(si,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(si,"abcd",{configurable:!0,enumerable:!0,value:2}),ii=2==si.abcd}catch(a){ii=!1}function ui(a,b,t){ii?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:t}):a[b]=t}function ci(a,b){if(b)for(var t in b)b.hasOwnProperty(t)&&ui(a,t,b[t])}function hi(a){var b={};return ci(b,a),b}function fi(a){var b=a;if("object"==typeof a&&null!=a)for(var t in b="length"in a?[]:{},a)ui(b,t,fi(a[t]));return b}function di(a){var b=a&&(a[yi]?"phone":null);if(!(b&&a&&a[mi]))throw new P("internal-error","Internal assert: invalid MultiFactorInfo object");ui(this,"uid",a[mi]),ui(this,"displayName",a[vi]||null);var t=null;a[gi]&&(t=new Date(a[gi]).toUTCString()),ui(this,"enrollmentTime",t),ui(this,"factorId",b)}function pi(a){try{var b=new _i(a)}catch(t){b=null}return b}di.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var vi="displayName",gi="enrolledAt",mi="mfaEnrollmentId",yi="phoneInfo";function _i(a){di.call(this,a),ui(this,"phoneNumber",a[yi])}function bi(a){var b={},t=a[Ii],e=a[Oi],n=a[Ei];if(a=pi(a[Ti]),!n||n!=xi&&n!=ki&&!t||n==ki&&!e||n==wi&&!a)throw Error("Invalid checkActionCode response!");n==ki?(b[Ci]=t||null,b[ji]=t||null,b[Si]=e):(b[Ci]=e||null,b[ji]=e||null,b[Si]=t||null),b[Ai]=a||null,ui(this,Pi,n),ui(this,Ni,fi(b))}j(_i,di),_i.prototype.w=function(){var a=_i.bb.w.call(this);return a.phoneNumber=this.phoneNumber,a};var wi="REVERT_SECOND_FACTOR_ADDITION",xi="EMAIL_SIGNIN",ki="VERIFY_AND_CHANGE_EMAIL",Ii="email",Ti="mfaInfo",Oi="newEmail",Ei="requestType",Si="email",Ci="fromEmail",Ai="multiFactorInfo",ji="previousEmail",Ni="data",Pi="operation";function Ri(a){var b=zn(a=$n(a),Di)||null,t=zn(a,Mi)||null,e=zn(a,Ui)||null;if(e=e&&Vi[e]||null,!b||!t||!e)throw new P("argument-error",Di+", "+Mi+"and "+Ui+" are required in a valid action code URL.");ci(this,{apiKey:b,operation:e,code:t,continueUrl:zn(a,Li)||null,languageCode:zn(a,Fi)||null,tenantId:zn(a,qi)||null})}var Di="apiKey",Mi="oobCode",Li="continueUrl",Fi="languageCode",Ui="mode",qi="tenantId",Vi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:wi,signIn:xi,verifyAndChangeEmail:ki,verifyEmail:"VERIFY_EMAIL"};function Bi(a){try{return new Ri(a)}catch(t){return null}}function Ki(a){var b=a[$i];if(void 0===b)throw new P("missing-continue-uri");if("string"!=typeof b||"string"==typeof b&&!b.length)throw new P("invalid-continue-uri");this.h=b,this.b=this.a=null,this.g=!1;var t=a[Hi];if(t&&"object"==typeof t){b=t[Xi];var e=t[Qi];if(t=t[Yi],"string"==typeof b&&b.length){if(this.a=b,void 0!==e&&"boolean"!=typeof e)throw new P("argument-error",Qi+" property must be a boolean when specified.");if(this.g=!!e,void 0!==t&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new P("argument-error",Yi+" property must be a non empty string when specified.");this.b=t||null}else{if(void 0!==b)throw new P("argument-error",Xi+" property must be a non empty string when specified.");if(void 0!==e||void 0!==t)throw new P("missing-android-pkg-name")}}else if(void 0!==t)throw new P("argument-error",Hi+" property must be a non null object when specified.");if(this.f=null,(b=a[zi])&&"object"==typeof b){if("string"==typeof(b=b[Ji])&&b.length)this.f=b;else if(void 0!==b)throw new P("argument-error",Ji+" property must be a non empty string when specified.")}else if(void 0!==b)throw new P("argument-error",zi+" property must be a non null object when specified.");if(void 0!==(b=a[Wi])&&"boolean"!=typeof b)throw new P("argument-error",Wi+" property must be a boolean when specified.");if(this.c=!!b,void 0!==(a=a[Gi])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new P("argument-error",Gi+" property must be a non empty string when specified.");this.i=a||null}var Hi="android",Gi="dynamicLinkDomain",Wi="handleCodeInApp",zi="iOS",$i="url",Qi="installApp",Yi="minimumVersion",Xi="packageName",Ji="bundleId";function Zi(a){var b={};for(var t in b.continueUrl=a.h,b.canHandleCodeInApp=a.c,(b.androidPackageName=a.a)&&(b.androidMinimumVersion=a.b,b.androidInstallApp=a.g),b.iOSBundleId=a.f,b.dynamicLinkDomain=a.i,b)null===b[t]&&delete b[t];return b}var to=null;function eo(a){var b=[];return function(a,b){function t(t){for(;e<a.length;){var p=a.charAt(e++),n=to[p];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return t}!function(){if(!to){to={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++)for(var e=a.concat(b[t].split("")),n=0;n<e.length;n++){var r=e[n];void 0===to[r]&&(to[r]=n)}}}();for(var e=0;;){var n=t(-1),r=t(0),g=t(64),o=t(64);if(64===o&&-1===n)break;b(n<<2|r>>4),64!=g&&(b(r<<4&240|g>>2),64!=o&&b(g<<6&192|o))}}(a,(function(t){b.push(t)})),b}function no(a){var b=io(a);if(!(b&&b.sub&&b.iss&&b.aud&&b.exp))throw Error("Invalid JWT");this.h=a,this.a=b.exp,this.i=b.sub,a=Date.now()/1e3,this.g=b.iat||(a>this.a?this.a:a),this.b=b.provider_id||b.firebase&&b.firebase.sign_in_provider||null,this.f=b.firebase&&b.firebase.tenant||null,this.c=!!b.is_anonymous||"anonymous"==this.b}function ro(a){try{return new no(a)}catch(t){return null}}function io(a){if(!a)return null;if(3!=(a=a.split(".")).length)return null;for(var b=(4-(a=a[1]).length%4)%4,t=0;t<b;t++)a+=".";try{var e=eo(a);for(a=[],t=b=0;b<e.length;){var n=e[b++];if(128>n)a[t++]=String.fromCharCode(n);else if(191<n&&224>n){var r=e[b++];a[t++]=String.fromCharCode((31&n)<<6|63&r)}else if(239<n&&365>n){r=e[b++];var g=e[b++],o=((7&n)<<18|(63&r)<<12|(63&g)<<6|63&e[b++])-65536;a[t++]=String.fromCharCode(55296+(o>>10)),a[t++]=String.fromCharCode(56320+(1023&o))}else r=e[b++],g=e[b++],a[t++]=String.fromCharCode((15&n)<<12|(63&r)<<6|63&g)}return JSON.parse(a.join(""))}catch(t){}return null}no.prototype.T=function(){return this.f},no.prototype.l=function(){return this.c},no.prototype.toString=function(){return this.h};var oo="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ao=["client_id","response_type","scope","redirect_uri","state"],so={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:ao},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:ao},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:ao},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:oo},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function uo(a){for(var b in so)if(so[b].fa==a)return so[b];return null}function co(a){var b={};b["facebook.com"]=vo,b["google.com"]=mo,b["github.com"]=go,b["twitter.com"]=yo;var t=a&&a[ho];try{if(t)return b[t]?new b[t](a):new po(a);if(void 0!==a[lo])return new fo(a)}catch(t){}return null}var lo="idToken",ho="providerId";function fo(a){var b=a[ho];if(!b&&a[lo]){var t=ro(a[lo]);t&&t.b&&(b=t.b)}if(!b)throw Error("Invalid additional user info!");"anonymous"!=b&&"custom"!=b||(b=null),t=!1,void 0!==a.isNewUser?t=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(t=!0),ui(this,"providerId",b),ui(this,"isNewUser",t)}function po(a){fo.call(this,a),ui(this,"profile",fi((a=Yr(a.rawUserInfo||"{}"))||{}))}function vo(a){if(po.call(this,a),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function go(a){if(po.call(this,a),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ui(this,"username",this.profile&&this.profile.login||null)}function mo(a){if(po.call(this,a),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function yo(a){if(po.call(this,a),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ui(this,"username",a.screenName||null)}function _o(a){var b=$n(a),t=zn(b,"link"),e=zn($n(t),"link");return b=zn(b,"deep_link_id"),zn($n(b),"link")||b||e||t||a}function bo(a,b){if(!a&&!b)throw new P("internal-error","Internal assert: no raw session string available");if(a&&b)throw new P("internal-error","Internal assert: unable to determine the session type");this.a=a||null,this.b=b||null,this.type=this.a?wo:xo}j(po,fo),j(vo,po),j(go,po),j(mo,po),j(yo,po);var wo="enroll",xo="signin";function ko(){}function Io(a,b){return a.then((function(t){if(t[ls]){var e=ro(t[ls]);if(!e||b!=e.i)throw new P("user-mismatch");return t}throw new P("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==M+"user-not-found"?new P("user-mismatch"):t}))}function To(a,b){if(!b)throw new P("internal-error","failed to construct a credential");this.a=b,ui(this,"providerId",a),ui(this,"signInMethod",a)}function Oo(a){return{pendingToken:a.a,requestUri:"http://localhost"}}function Eo(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf("saml.")&&a.pendingToken)try{return new To(a.providerId,a.pendingToken)}catch(t){}return null}function So(a,b,t){if(this.a=null,b.idToken||b.accessToken)b.idToken&&ui(this,"idToken",b.idToken),b.accessToken&&ui(this,"accessToken",b.accessToken),b.nonce&&!b.pendingToken&&ui(this,"nonce",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else{if(!b.oauthToken||!b.oauthTokenSecret)throw new P("internal-error","failed to construct a credential");ui(this,"accessToken",b.oauthToken),ui(this,"secret",b.oauthTokenSecret)}ui(this,"providerId",a),ui(this,"signInMethod",t)}function Co(a){var b={};return a.idToken&&(b.id_token=a.idToken),a.accessToken&&(b.access_token=a.accessToken),a.secret&&(b.oauth_token_secret=a.secret),b.providerId=a.providerId,a.nonce&&!a.a&&(b.nonce=a.nonce),b={postBody:sr(b).toString(),requestUri:"http://localhost"},a.a&&(delete b.postBody,b.pendingToken=a.a),b}function Ao(a){if(a&&a.providerId&&a.signInMethod){var b={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new So(a.providerId,b,a.signInMethod)}catch(t){}}return null}function jo(a,b){this.Qc=b||[],ci(this,{providerId:a,isOAuthProvider:!0}),this.Jb={},this.qb=(uo(a)||{}).Ja||null,this.pb=null}function No(a){if("string"!=typeof a||0!=a.indexOf("saml."))throw new P("argument-error",'SAML provider IDs must be prefixed with "saml."');jo.call(this,a,[])}function Po(a){jo.call(this,a,ao),this.a=[]}function Ro(){Po.call(this,"facebook.com")}function Do(a){if(!a)throw new P("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return k(a)&&(b=a.accessToken),(new Ro).credential({accessToken:b})}function Mo(){Po.call(this,"github.com")}function Lo(a){if(!a)throw new P("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return k(a)&&(b=a.accessToken),(new Mo).credential({accessToken:b})}function Fo(){Po.call(this,"google.com"),this.Ca("profile")}function Uo(a,b){var t=a;return k(a)&&(t=a.idToken,b=a.accessToken),(new Fo).credential({idToken:t,accessToken:b})}function qo(){jo.call(this,"twitter.com",oo)}function Vo(a,b){var t=a;if(k(t)||(t={oauthToken:a,oauthTokenSecret:b}),!t.oauthToken||!t.oauthTokenSecret)throw new P("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new So("twitter.com",t,"twitter.com")}function Bo(a,b,t){this.a=a,this.f=b,ui(this,"providerId","password"),ui(this,"signInMethod",t===Ho.EMAIL_LINK_SIGN_IN_METHOD?Ho.EMAIL_LINK_SIGN_IN_METHOD:Ho.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ko(a){return a&&a.email&&a.password?new Bo(a.email,a.password,a.signInMethod):null}function Ho(){ci(this,{providerId:"password",isOAuthProvider:!1})}function Go(a,b){if(!(b=Wo(b)))throw new P("argument-error","Invalid email link!");return new Bo(a,b.code,Ho.EMAIL_LINK_SIGN_IN_METHOD)}function Wo(a){return(a=Bi(a=_o(a)))&&a.operation===xi?a:null}function zo(a){if(!(a.fb&&a.eb||a.La&&a.ea))throw new P("internal-error");this.a=a,ui(this,"providerId","phone"),this.fa="phone",ui(this,"signInMethod","phone")}function $o(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var b={};return X(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(t){a[t]&&(b[t]=a[t])})),new zo(b)}return null}function Qo(a){return a.a.La&&a.a.ea?{temporaryProof:a.a.La,phoneNumber:a.a.ea}:{sessionInfo:a.a.fb,code:a.a.eb}}function Yo(a){try{this.a=a||e.default.auth()}catch(t){throw new P("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ci(this,{providerId:"phone",isOAuthProvider:!1})}function Xo(a,b){if(!a)throw new P("missing-verification-id");if(!b)throw new P("missing-verification-code");return new zo({fb:a,eb:b})}function Jo(a){if(a.temporaryProof&&a.phoneNumber)return new zo({La:a.temporaryProof,ea:a.phoneNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var t=a&&a.oauthAccessToken,e=a&&a.oauthTokenSecret,n=a&&a.nonce,r=a&&a.oauthIdToken,g=a&&a.pendingToken;try{switch(b){case"google.com":return Uo(r,t);case"facebook.com":return Do(t);case"github.com":return Lo(t);case"twitter.com":return Vo(t,e);default:return t||e||r||g?g?0==b.indexOf("saml.")?new To(b,g):new So(b,{pendingToken:g,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new Po(b).credential({idToken:r,accessToken:t,rawNonce:n}):null}}catch(t){return null}}function Zo(a){if(!a.isOAuthProvider)throw new P("invalid-oauth-provider")}function ta(a,b,t,e,n,r,g){if(this.c=a,this.b=b||null,this.g=t||null,this.f=e||null,this.i=r||null,this.h=g||null,this.a=n||null,!this.g&&!this.a)throw new P("invalid-auth-event");if(this.g&&this.a)throw new P("invalid-auth-event");if(this.g&&!this.f)throw new P("invalid-auth-event")}function th(a){return(a=a||{}).type?new ta(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&R(a.error),a.postBody,a.tenantId):null}function ea(){this.b=null,this.a=[]}bo.prototype.Ha=function(){return this.a?Le(this.a):Le(this.b)},bo.prototype.w=function(){return this.type==wo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ko.prototype.ka=function(){},ko.prototype.b=function(){},ko.prototype.c=function(){},ko.prototype.w=function(){},To.prototype.ka=function(a){return Ns(a,Oo(this))},To.prototype.b=function(a,b){var t=Oo(this);return t.idToken=b,Ps(a,t)},To.prototype.c=function(a,b){return Io(Rs(a,Oo(this)),b)},To.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},So.prototype.ka=function(a){return Ns(a,Co(this))},So.prototype.b=function(a,b){var t=Co(this);return t.idToken=b,Ps(a,t)},So.prototype.c=function(a,b){return Io(Rs(a,Co(this)),b)},So.prototype.w=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},jo.prototype.Ka=function(a){return this.Jb=It(a),this},j(No,jo),j(Po,jo),Po.prototype.Ca=function(a){return et(this.a,a)||this.a.push(a),this},Po.prototype.Rb=function(){return at(this.a)},Po.prototype.credential=function(a,b){var t;if(!(t=k(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:b||null}).idToken&&!t.accessToken)throw new P("argument-error","credential failed: must provide the ID token and/or the access token.");return new So(this.providerId,t,this.providerId)},j(Ro,Po),ui(Ro,"PROVIDER_ID","facebook.com"),ui(Ro,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),j(Mo,Po),ui(Mo,"PROVIDER_ID","github.com"),ui(Mo,"GITHUB_SIGN_IN_METHOD","github.com"),j(Fo,Po),ui(Fo,"PROVIDER_ID","google.com"),ui(Fo,"GOOGLE_SIGN_IN_METHOD","google.com"),j(qo,jo),ui(qo,"PROVIDER_ID","twitter.com"),ui(qo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Bo.prototype.ka=function(a){return this.signInMethod==Ho.EMAIL_LINK_SIGN_IN_METHOD?vu(a,Bs,{email:this.a,oobCode:this.f}):vu(a,lu,{email:this.a,password:this.f})},Bo.prototype.b=function(a,b){return this.signInMethod==Ho.EMAIL_LINK_SIGN_IN_METHOD?vu(a,Ks,{idToken:b,email:this.a,oobCode:this.f}):vu(a,nu,{idToken:b,email:this.a,password:this.f})},Bo.prototype.c=function(a,b){return Io(this.ka(a),b)},Bo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ci(Ho,{PROVIDER_ID:"password"}),ci(Ho,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ci(Ho,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),zo.prototype.ka=function(a){return a.gb(Qo(this))},zo.prototype.b=function(a,b){var t=Qo(this);return t.idToken=b,vu(a,fu,t)},zo.prototype.c=function(a,b){var t=Qo(this);return t.operation="REAUTH",Io(a=vu(a,du,t),b)},zo.prototype.w=function(){var a={providerId:"phone"};return this.a.fb&&(a.verificationId=this.a.fb),this.a.eb&&(a.verificationCode=this.a.eb),this.a.La&&(a.temporaryProof=this.a.La),this.a.ea&&(a.phoneNumber=this.a.ea),a},Yo.prototype.gb=function(a,b){var t=this.a.a;return Le(b.verify()).then((function(e){if("string"!=typeof e)throw new P("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===b.type){var g,n=k(a)?a.session:null,r=k(a)?a.phoneNumber:a;return g=n&&n.type==wo?n.Ha().then((function(n){return function(a,b){return vu(a,iu,b).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(t,{idToken:n,phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:e}})})):n&&n.type==xo?n.Ha().then((function(n){return function(a,b){return vu(a,ou,b).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(t,{mfaPendingCredential:n,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}})})):function(a,b){return vu(a,tu,b)}(t,{phoneNumber:r,recaptchaToken:e}),g.then((function(t){return"function"==typeof b.reset&&b.reset(),t}),(function(t){throw"function"==typeof b.reset&&b.reset(),t}))}throw new P("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ci(Yo,{PROVIDER_ID:"phone"}),ci(Yo,{PHONE_SIGN_IN_METHOD:"phone"}),ta.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join("-")},ta.prototype.T=function(){return this.h},ta.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var na,ra=null;function ia(a){var b="unauthorized-domain",t=void 0,e=$n(a);a=e.a,"chrome-extension"==(e=e.c)?t=Jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==e||"https"==e?t=Jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment",P.call(this,b,t)}function oa(a,b,t){P.call(this,a,t),(a=b||{}).Kb&&ui(this,"email",a.Kb),a.ea&&ui(this,"phoneNumber",a.ea),a.credential&&ui(this,"credential",a.credential),a.$b&&ui(this,"tenantId",a.$b)}function aa(a){if(a.code){var b=a.code||"";0==b.indexOf(M)&&(b=b.substring(M.length));var t={credential:Jo(a),$b:a.tenantId};if(a.email)t.Kb=a.email;else if(a.phoneNumber)t.ea=a.phoneNumber;else if(!t.credential)return new P(b,a.message||void 0);return new oa(b,t,a.message)}return null}function sa(){}function ua(a){return a.c||(a.c=a.b())}function ca(){}function la(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<b.length;t++){var e=b[t];try{return new ActiveXObject(e),a.f=e}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}function ha(){}function fa(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=q(this.qc,this),this.a.onerror=q(this.Tb,this),this.a.onprogress=q(this.rc,this),this.a.ontimeout=q(this.vc,this)}function da(a,b){a.readyState=b,a.onreadystatechange&&a.onreadystatechange()}function pa(a,b,t){this.reset(a,b,t,void 0,void 0)}j(ia,P),j(oa,P),oa.prototype.w=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var b=this.credential&&this.credential.w();return b&&Ot(a,b),a},oa.prototype.toJSON=function(){return this.w()},sa.prototype.c=null,j(ca,sa),ca.prototype.a=function(){var a=la(this);return a?new ActiveXObject(a):new XMLHttpRequest},ca.prototype.b=function(){var a={};return la(this)&&(a[0]=!0,a[1]=!0),a},na=new ca,j(ha,sa),ha.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new fa;throw Error("Unsupported browser")},ha.prototype.b=function(){return{}},(n=fa.prototype).open=function(a,b,t){if(null!=t&&!t)throw Error("Only async requests are supported.");this.a.open(a,b)},n.send=function(a){if(a){if("string"!=typeof a)throw Error("Only string data is supported");this.a.send(a)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,da(this,4)},n.Tb=function(){this.status=500,this.response=this.responseText="",da(this,4)},n.vc=function(){this.Tb()},n.rc=function(){this.status=200,da(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},pa.prototype.a=null;function va(a){this.f=a,this.b=this.c=this.a=null}function ga(a,b){this.name=a,this.value=b}pa.prototype.reset=function(a,b,t,e,n){"number"==typeof n||0,e||A(),delete this.a},ga.prototype.toString=function(){return this.name};var ma=new ga("SEVERE",1e3),ya=new ga("WARNING",900),_a=new ga("CONFIG",700),ba=new ga("FINE",500);function wa(a){return a.c?a.c:a.a?wa(a.a):(K("Root logger has no level set."),null)}va.prototype.log=function(a,b,t){if(a.value>=wa(this).value)for(x(b)&&(b=b()),a=new pa(a,String(b),this.f),t&&(a.a=t),t=this;t;)t=t.a};var xa={},ka=null;function Ia(a){var b;if(ka||(ka=new va(""),xa[""]=ka,ka.c=_a),!(b=xa[a])){b=new va(a);var t=a.lastIndexOf("."),e=a.substr(t+1);(t=Ia(a.substr(0,t))).b||(t.b={}),t.b[e]=b,b.a=t,xa[a]=b}return b}function Ta(a,b){a&&a.log(ba,b,void 0)}function Oa(a){this.f=a}function Ea(a){An.call(this),this.u=a,this.h=void 0,this.readyState=Sa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Ia("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}j(Oa,sa),Oa.prototype.a=function(){return new Ea(this.f)},Oa.prototype.b=function(a){return function(){return a}}({}),j(Ea,An);var Sa=0;function Ca(a){a.c.read().then(a.pc.bind(a)).catch(a.Va.bind(a))}function Aa(a){a.readyState=4,a.g=null,a.c=null,a.m=null,ja(a)}function ja(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function Na(a){An.call(this),this.headers=new Fn,this.D=a||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Pa,this.u=this.S=!1}(n=Ea.prototype).open=function(a,b){if(this.readyState!=Sa)throw this.abort(),Error("Error reopening a connection");this.s=a,this.f=b,this.readyState=1,ja(this)},n.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var b={headers:this.l,method:this.s,credentials:this.h,cache:void 0};a&&(b.body=a),this.u.fetch(new Request(this.f,b)).then(this.uc.bind(this),this.Va.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Aa(this)),this.readyState=Sa},n.uc=function(a){this.a&&(this.g=a,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=a.headers,this.readyState=2,ja(this)),this.a&&(this.readyState=3,ja(this),this.a&&("arraybuffer"===this.responseType?a.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==f.ReadableStream&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.m=new TextDecoder,Ca(this)):a.text().then(this.tc.bind(this),this.Va.bind(this)))))},n.pc=function(a){if(this.a){var b=this.m.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b),a.done?Aa(this):ja(this),3==this.readyState&&Ca(this)}},n.tc=function(a){this.a&&(this.response=this.responseText=a,Aa(this))},n.sc=function(a){this.a&&(this.response=a,Aa(this))},n.Va=function(a){var b=this.i;b&&b.log(ya,"Failed to fetch url "+this.f,a instanceof Error?a:Error(a)),this.a&&Aa(this)},n.setRequestHeader=function(a,b){this.l.append(a,b)},n.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.i)&&a.log(ya,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var a=this.i;return a&&a.log(ya,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}a=[];for(var b=this.b.entries(),t=b.next();!t.done;)t=t.value,a.push(t[0]+": "+t[1]),t=b.next();return a.join("\r\n")},Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(a){this.h=a?"include":"same-origin"}}),j(Na,An);var Pa="";Na.prototype.b=Ia("goog.net.XhrIo");var Ra=/^https?$/i,Da=["POST","PUT"];function Ma(a,b,t,e,n){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+b);t=t?t.toUpperCase():"GET",a.l=b,a.h="",a.P=t,a.J=!1,a.c=!0,a.a=a.D?a.D.a():na.a(),a.C=a.D?ua(a.D):ua(na),a.a.onreadystatechange=q(a.Wb,a);try{Ta(a.b,Ha(a,"Opening Xhr")),a.N=!0,a.a.open(t,String(b),!0),a.N=!1}catch(t){return Ta(a.b,Ha(a,"Error opening Xhr: "+t.message)),void Fa(a,t)}b=e||"";var r=new Fn(a.headers);n&&function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(w(a)||"string"==typeof a)X(a,b,void 0);else for(var t=Ln(a),e=Mn(a),n=e.length,r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}(n,(function(g,t){r.set(t,g)})),n=function(a){t:{for(var b=La,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(r.Y()),e=f.FormData&&b instanceof f.FormData,!et(Da,t)||n||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(g,t){this.a.setRequestHeader(t,g)}),a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.S&&(a.a.withCredentials=a.S);try{Va(a),0<a.g&&(a.u=function(a){return re&&pe(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),Ta(a.b,Ha(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.u)),a.u?(a.a.timeout=a.g,a.a.ontimeout=q(a.Ma,a)):a.s=Rn(a.Ma,a.g,a)),Ta(a.b,Ha(a,"Sending request")),a.i=!0,a.a.send(b),a.i=!1}catch(t){Ta(a.b,Ha(a,"Send error: "+t.message)),Fa(a,t)}}function La(a){return"content-type"==a.toLowerCase()}function Fa(a,b){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=b,Ua(a),qa(a)}function Ua(a){a.J||(a.J=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function li(a){if(a.c&&void 0!==h)if(a.C[1]&&4==Ba(a)&&2==Ka(a))Ta(a.b,Ha(a,"Local request error detected and ignored"));else if(a.i&&4==Ba(a))Rn(a.Wb,0,a);else if(a.dispatchEvent("readystatechange"),4==Ba(a)){Ta(a.b,Ha(a,"Request complete")),a.c=!1;try{var t,b=Ka(a);t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.l).match(Vn)[1]||null;if(!r&&f.self&&f.self.location){var g=f.self.location.protocol;r=g.substr(0,g.length-1)}n=!Ra.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var o=2<Ba(a)?a.a.statusText:""}catch(t){Ta(a.b,"Can not get status: "+t.message),o=""}a.h=o+" ["+Ka(a)+"]",Ua(a)}}finally{qa(a)}}}function qa(a,b){if(a.a){Va(a);var t=a.a,e=a.C[0]?y:null;a.a=null,a.C=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){(a=a.b)&&a.log(ma,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Va(a){a.a&&a.u&&(a.a.ontimeout=null),a.s&&(f.clearTimeout(a.s),a.s=null)}function Ba(a){return a.a?a.a.readyState:0}function Ka(a){try{return 2<Ba(a)?a.a.status:-1}catch(t){return-1}}function Ha(a,b){return b+" ["+a.P+" "+a.l+" "+Ka(a)+"]"}function Ga(a){var b=ns;this.g=[],this.u=b,this.s=a||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Wa(a,b,t){a.a=!0,a.c=t,a.f=!b,Ya(a)}function za(a){if(a.a){if(!a.v)throw new Xa(a);a.v=!1}}function $a(a,b,t,e){a.g.push([b,t,e]),a.a&&Ya(a)}function Qa(a){return tt(a.g,(function(b){return x(b[1])}))}function Ya(a){if(a.h&&a.a&&Qa(a)){var b=a.h,t=ts[b];t&&(f.clearTimeout(t.a),delete ts[b]),a.h=0}a.b&&(a.b.l--,delete a.b),b=a.c;for(var e=t=!1;a.g.length&&!a.i;){var n=a.g.shift(),r=n[0],g=n[1];if(n=n[2],r=a.f?g:r)try{var o=r.call(n||a.s,b);void 0!==o&&(a.f=a.f&&(o==b||o instanceof Error),a.c=b=o),(V(b)||"function"==typeof f.Promise&&b instanceof f.Promise)&&(e=!0,a.i=!0)}catch(e){b=e,a.f=!0,Qa(a)||(t=!0)}}a.c=b,e&&(o=q(a.m,a,!0),e=q(a.m,a,!1),b instanceof Ga?($a(b,o,e),b.C=!0):b.then(o,e)),t&&(b=new Za(b),ts[b.a]=b,a.h=b.a)}function Xa(){u.call(this)}function Ja(){u.call(this)}function Za(a){this.a=f.setTimeout(q(this.c,this),0),this.b=a}(n=Na.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ta(this.b,Ha(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(Ta(this.b,Ha(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),qa(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),qa(this,!0)),Na.bb.Da.call(this)},n.Wb=function(){this.ya||(this.N||this.i||this.f?li(this):this.Jc())},n.Jc=function(){li(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Pa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(ma,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Ta(this.b,"Can not get response: "+t.message),null}},Ga.prototype.cancel=function(a){if(this.a)this.c instanceof Ga&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b,a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(a=new Ja(this),za(this),Wa(this,!1,a))}},Ga.prototype.m=function(a,b){this.i=!1,Wa(this,a,b)},Ga.prototype.then=function(a,b,t){var e,n,r=new Ae((function(g,t){e=g,n=t}));return $a(this,e,(function(g){g instanceof Ja?r.cancel():n(g)})),r.then(a,b,t)},Ga.prototype.$goog_Thenable=!0,j(Xa,u),Xa.prototype.message="Deferred has already fired",Xa.prototype.name="AlreadyCalledError",j(Ja,u),Ja.prototype.message="Deferred was canceled",Ja.prototype.name="CanceledError",Za.prototype.c=function(){throw delete ts[this.a],this.b};var ts={};function es(a){var b={},t=b.document||document,e=Dt(a).toString(),n=Ie(document,"SCRIPT"),r={Xb:n,Ma:void 0},g=new Ga(r),o=null,c=null!=b.timeout?b.timeout:5e3;return 0<c&&(o=window.setTimeout((function(){rs(n,!0);var p=new as(os,"Timeout reached for loading script "+e);za(g),Wa(g,!1,p)}),c),r.Ma=o),n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(rs(n,b.xd||!1,o),za(g),Wa(g,!0,null))},n.onerror=function(){rs(n,!0,o);var p=new as(is,"Error while loading script "+e);za(g),Wa(g,!1,p)},Ot(r=b.attributes||{},{type:"text/javascript",charset:"UTF-8"}),_e(n,r),function(a,b){Et(a,"HTMLScriptElement"),a.src=Dt(b),(b=a.ownerDocument&&a.ownerDocument.defaultView)&&b!=f?b=m(b.document):(null===v&&(v=m(f.document)),b=v),b&&a.setAttribute("nonce",b)}(n,a),function(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement}(t).appendChild(n),g}function ns(){if(this&&this.Xb){var a=this.Xb;a&&"SCRIPT"==a.tagName&&rs(a,!0,this.Ma)}}function rs(a,b,t){null!=t&&f.clearTimeout(t),a.onload=y,a.onerror=y,a.onreadystatechange=y,b&&window.setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),0)}var is=0,os=1;function as(a,b){var t="Jsloader error (code #"+a+")";b&&(t+=": "+b),u.call(this,t),this.code=a}function ss(a){this.f=a}function us(a,b,t){if(this.c=a,a=b||{},this.l=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=a.secureTokenTimeout||hs,this.g=It(a.secureTokenHeaders||fs),this.h=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=a.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=a.firebaseTimeout||ds,this.a=It(a.firebaseHeaders||ps),t&&(this.a["X-Client-Version"]=t,this.g["X-Client-Version"]=t),t="Node"==Rr(),!(t=f.XMLHttpRequest||t&&e.default.INTERNAL.node&&e.default.INTERNAL.node.XMLHttpRequest)&&!Pr())throw new P("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Pr()?this.f=new Oa(self):Dr()?this.f=new ss(t):this.f=new ha,this.b=null}j(as,u),j(ss,sa),ss.prototype.a=function(){return new this.f},ss.prototype.b=function(){return{}};var cs,ls="idToken",hs=new ti(3e4,6e4),fs={"Content-Type":"application/x-www-form-urlencoded"},ds=new ti(3e4,6e4),ps={"Content-Type":"application/json"};function vs(a,b){b?a.a["X-Firebase-Locale"]=b:delete a.a["X-Firebase-Locale"]}function gs(a,b){b&&(a.l=ms("https://securetoken.googleapis.com/v1/token",b),a.h=ms("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",b),a.i=ms("https://identitytoolkit.googleapis.com/v2/",b))}function ms(a,b){return a=$n(a),b=$n(b.url),a.f=a.a+a.f,Kn(a,b.c),a.a=b.a,Hn(a,b.g),a.toString()}function ys(a,b){b?(a.a["X-Client-Version"]=b,a.g["X-Client-Version"]=b):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}function _s(a,b,t,e,n,r,g){(function(){var a=Vr();return!((a=Fr(a)!=Lr?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a||re&&ge&&!(9<ge))})()||Pr()?a=q(a.u,a):(cs||(cs=new Ae((function(t,e){!function(a,b){if(((window.gapi||{}).client||{}).request)a();else{f[ws]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))},function(a,b){$a(a,null,b,void 0)}(es(Mt(bs,{onload:ws})),(function(){b(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),a=q(a.s,a)),a(b,t,e,n,r,g)}us.prototype.T=function(){return this.b},us.prototype.u=function(a,b,t,e,n,r){if(Pr()&&(void 0===f.fetch||void 0===f.Headers||void 0===f.Request))throw new P("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var g=new Na(this.f);if(r){g.g=Math.max(0,r);var o=setTimeout((function(){g.dispatchEvent("timeout")}),r)}jn(g,"complete",(function(){o&&clearTimeout(o);var t=null;try{t=JSON.parse(function(a){try{return a.a?a.a.responseText:""}catch(t){return Ta(a.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(e){t=null}b&&b(t)})),Nn(g,"ready",(function(){o&&clearTimeout(o),en(this)})),Nn(g,"timeout",(function(){o&&clearTimeout(o),en(this),b&&b(null)})),Ma(g,a,t,e,n)};var bs=new St(Nt,"https://apis.google.com/js/client.js?onload=%{onload}"),ws="__fcb"+Math.floor(1e6*Math.random()).toString();function xs(a,b,t,e,n,r,g){var o=$n(b+t);Wn(o,"key",a.c),g&&Wn(o,"cb",Date.now().toString());var c="GET"==e;if(c)for(var p in n)n.hasOwnProperty(p)&&Wn(o,p,n[p]);return new Ae((function(t,l){_s(a,o.toString(),(function(e){e?e.error?l(mu(e,r||{})):t(e):l(new P("network-request-failed"))}),e,c?void 0:pr(Qr(n)),a.a,a.v.get())}))}function ks(a){if("string"!=typeof(a=a.email)||!Cr.test(a))throw new P("invalid-email")}function Is(a){"email"in a&&ks(a)}function Ts(a){if(!a[ls]){if(a.mfaPendingCredential)throw new P("multi-factor-auth-required",null,It(a));throw new P("internal-error")}}function Os(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new P("internal-error")}else{if(!a.sessionInfo)throw new P("missing-verification-id");if(!a.code)throw new P("missing-verification-code")}}us.prototype.s=function(a,b,t,e,n){var r=this;cs.then((function(){window.gapi.client.setApiKey(r.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:t,body:e,headers:n,authType:"none",callback:function(t){window.gapi.auth.setToken(g),b&&b(t)}})})).o((function(g){b&&b({error:{message:g&&g.message||"CORS_UNSUPPORTED"}})}))},us.prototype.Ab=function(){return vu(this,ru,{})},us.prototype.Cb=function(a,b){return vu(this,eu,{idToken:a,email:b})},us.prototype.Db=function(a,b){return vu(this,nu,{idToken:a,password:b})};var Es={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ss(a){if(!a.phoneVerificationInfo)throw new P("internal-error");if(!a.phoneVerificationInfo.sessionInfo)throw new P("missing-verification-id");if(!a.phoneVerificationInfo.code)throw new P("missing-verification-code")}function Cs(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new P("internal-error")}function As(a,b){return b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf("oidc.")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&(cr(a=new or(a.postBody),"nonce")&&(b.nonce=a.get("nonce")))),b}function js(a){var b=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",b=aa(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=aa(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",b=aa(a)):a.errorMessage&&(b=gu(a.errorMessage)),b)throw b;Ts(a)}function Ns(a,b){return b.returnIdpCredential=!0,vu(a,au,b)}function Ps(a,b){return b.returnIdpCredential=!0,vu(a,uu,b)}function Rs(a,b){return b.returnIdpCredential=!0,b.autoCreate=!1,vu(a,su,b)}function Ds(a){if(!a.oobCode)throw new P("invalid-action-code")}(n=us.prototype).Eb=function(a,b){var t={idToken:a},e=[];return xt(Es,(function(n,r){var g=b[r];null===g?e.push(n):r in b&&(t[r]=g)})),e.length&&(t.deleteAttribute=e),vu(this,eu,t)},n.wb=function(a,b){return Ot(a={requestType:"PASSWORD_RESET",email:a},b),vu(this,Ys,a)},n.xb=function(a,b){return Ot(a={requestType:"EMAIL_SIGNIN",email:a},b),vu(this,zs,a)},n.vb=function(a,b){return Ot(a={requestType:"VERIFY_EMAIL",idToken:a},b),vu(this,$s,a)},n.Fb=function(a,b,t){return Ot(a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:b},t),vu(this,Qs,a)},n.gb=function(a){return vu(this,hu,a)},n.ob=function(a,b){return vu(this,Zs,{oobCode:a,newPassword:b})},n.Sa=function(a){return vu(this,Ls,{oobCode:a})},n.kb=function(a){return vu(this,Ms,{oobCode:a})};var Ms={endpoint:"setAccountInfo",A:Ds,Z:"email",B:!0},Ls={endpoint:"resetPassword",A:Ds,G:function(a){var b=a.requestType;if(!b||!a.email&&"EMAIL_SIGNIN"!=b&&"VERIFY_AND_CHANGE_EMAIL"!=b)throw new P("internal-error")},B:!0},Fs={endpoint:"signupNewUser",A:function(a){if(ks(a),!a.password)throw new P("weak-password")},G:Ts,V:!0,B:!0},Us={endpoint:"createAuthUri",B:!0},qs={endpoint:"deleteAccount",O:["idToken"]},Vs={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(a){if(!Array.isArray(a.deleteProvider))throw new P("internal-error")}},Bs={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ks,G:Ts,V:!0,B:!0},Ks={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ks,G:Ts,V:!0},Hs={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:Ss,G:Ts,B:!0,Na:!0},Gs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:Ss,G:Ts,B:!0,Na:!0},Ws={endpoint:"getAccountInfo"},zs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(a){if("EMAIL_SIGNIN"!=a.requestType)throw new P("internal-error");ks(a)},Z:"email",B:!0},$s={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new P("internal-error")},Z:"email",B:!0},Qs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(a){if("VERIFY_AND_CHANGE_EMAIL"!=a.requestType)throw new P("internal-error")},Z:"email",B:!0},Ys={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(a){if("PASSWORD_RESET"!=a.requestType)throw new P("internal-error");ks(a)},Z:"email",B:!0},Xs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Js={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(a){if(!a.recaptchaSiteKey)throw new P("internal-error")}},Zs={endpoint:"resetPassword",A:Ds,Z:"email",B:!0},tu={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},eu={endpoint:"setAccountInfo",O:["idToken"],A:Is,V:!0},nu={endpoint:"setAccountInfo",O:["idToken"],A:function(a){if(Is(a),!a.password)throw new P("weak-password")},G:Ts,V:!0},ru={endpoint:"signupNewUser",G:Ts,V:!0,B:!0},iu={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(a){if(!a.phoneEnrollmentInfo)throw new P("internal-error");if(!a.phoneEnrollmentInfo.phoneNumber)throw new P("missing-phone-number");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new P("missing-app-credential")},G:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new P("internal-error")},B:!0,Na:!0},ou={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new P("missing-app-credential")},G:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new P("internal-error")},B:!0,Na:!0},au={endpoint:"verifyAssertion",A:Cs,Za:As,G:js,V:!0,B:!0},su={endpoint:"verifyAssertion",A:Cs,Za:As,G:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new P("user-not-found");if(a.errorMessage)throw gu(a.errorMessage);Ts(a)},V:!0,B:!0},uu={endpoint:"verifyAssertion",A:function(a){if(Cs(a),!a.idToken)throw new P("internal-error")},Za:As,G:js,V:!0},cu={endpoint:"verifyCustomToken",A:function(a){if(!a.token)throw new P("invalid-custom-token")},G:Ts,V:!0,B:!0},lu={endpoint:"verifyPassword",A:function(a){if(ks(a),!a.password)throw new P("wrong-password")},G:Ts,V:!0,B:!0},hu={endpoint:"verifyPhoneNumber",A:Os,G:Ts,B:!0},fu={endpoint:"verifyPhoneNumber",A:function(a){if(!a.idToken)throw new P("internal-error");Os(a)},G:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",aa(a);Ts(a)}},du={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Os,G:Ts,B:!0},pu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(a){if(!!a[ls]^!!a.refreshToken)throw new P("internal-error")},B:!0,Na:!0};function vu(a,b,t){if(!function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var t=0;t<b.length;t++){var e=a[b[t]];if(null==e||""===e)return!1}return!0}(t,b.O))return Fe(new P("internal-error"));var e,n=!!b.Na,r=b.Vb||"POST";return Le(t).then(b.A).then((function(){return b.V&&(t.returnSecureToken=!0),b.B&&a.b&&void 0===t.tenantId&&(t.tenantId=a.b),xs(a,n?a.i:a.h,b.endpoint,r,t,b.Ib,b.mb||!1)})).then((function(g){return e=g,b.Za?b.Za(t,e):e})).then(b.G).then((function(){if(!b.Z)return e;if(!(b.Z in e))throw new P("internal-error");return e[b.Z]}))}function gu(a){return mu({error:{errors:[{message:a}],code:400,message:a}})}function mu(a,b){var t=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",e={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(t=e[t]?new P(e[t]):null)return t;for(var n in t=a.error&&a.error.message||"",Ot(e={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},b||{}),b=(b=t.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<b.length?b[1]:void 0,e)if(0===t.indexOf(n))return new P(e[n],b);return!b&&a&&(b=$r(a)),new P("internal-error",b)}function yu(a){this.b=a,this.a=null,this.sb=function(a){return(xu||(xu=new Ae((function(a,b){function t(){Zr(),Br("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Zr(),b(Error("Network Error"))},timeout:bu.get()})}if(Br("gapi.iframes.Iframe"))a();else if(Br("gapi.load"))t();else{var e="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[e]=function(){Br("gapi.load")?t():b(Error("Network Error"))},Le(es(e=Mt(_u,{onload:e}))).o((function(){b(Error("Network Error"))}))}})).o((function(a){throw xu=null,a})))).then((function(){return new Ae((function(b,t){Br("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:Br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(e){function n(){clearTimeout(r),b()}a.a=e,a.a.restyle({setHideOnLeave:!1});var r=setTimeout((function(){t(Error("Network Error"))}),wu.get());e.ping(n).then(n,(function(){t(Error("Network Error"))}))}))}))}))}(this)}var _u=new St(Nt,"https://apis.google.com/js/api.js?onload=%{onload}"),bu=new ti(3e4,6e4),wu=new ti(5e3,15e3),xu=null;function ku(a,b,t,e){this.l=a,this.h=b,this.i=t,this.g=e,this.f=null,this.g?a=Qn((a=$n(this.g.url)).c,a.a,a.g,"/emulator/auth/iframe"):a=Qn("https",this.l,null,"/__/auth/iframe"),this.a=a,Wn(this.a,"apiKey",this.h),Wn(this.a,"appName",this.i),this.b=null,this.c=[]}function Iu(a,b,t,e,n,r){this.u=a,this.s=b,this.c=t,this.m=e,this.v=r,this.i=this.g=this.l=null,this.a=n,this.h=this.f=null}function Tu(a){try{return e.default.app(a).auth().Ga()}catch(t){return[]}}function Ou(a,b,t,e,n,r){this.s=a,this.g=b,this.b=t,this.f=r,this.c=e||null,this.i=n||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Eu(a){var b=xr();return function(a){return vu(a,Xs,{}).then((function(b){return b.authorizedDomains||[]}))}(a).then((function(t){t:{var e=$n(b),n=e.c;e=e.a;for(var r=0;r<t.length;r++){var g=t[r],o=e,c=n;if(0==g.indexOf("chrome-extension://")?o=$n(g).a==o&&"chrome-extension"==c:"http"!=c&&"https"!=c?o=!1:Sr.test(g)?o=o==g:(g=g.split(".").join("\\."),o=new RegExp("^(.+\\."+g+"|"+g+")$","i").test(o)),o){t=!0;break t}}t=!1}if(!t)throw new ia(xr())}))}function Su(a){return a.m||(a.m=Ar().then((function(){if(!a.u){var b=a.c,t=a.i,e=Tu(a.b),n=new ku(a.s,a.g,a.b,a.f);n.f=b,n.b=t,n.c=at(e||[]),a.u=n.toString()}a.v=new yu(a.u),function(a){if(!a.v)throw Error("IfcHandler must be initialized!");!function(a,b){a.sb.then((function(){a.a.register("authEvent",b,Br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(a.v,(function(b){var t={};if(b&&b.authEvent){var e=!1;for(b=th(b.authEvent),t=0;t<a.h.length;t++)e=a.h[t](b)||e;return(t={}).status=e?"ACK":"ERROR",Le(t)}return t.status="ERROR",Le(t)}))}(a)}))),a.m}function Cu(a){return a.l||(a.C=a.c?qr(a.c,Tu(a.b)):null,a.l=new us(a.g,U(a.i),a.C),a.f&&gs(a.l,a.f)),a.l}function Au(a,b,t,e,n,r,g,o,c,p,l,h){return(a=new Iu(a,b,t,e,n,h)).l=r,a.g=g,a.i=o,a.b=It(c||null),a.f=p,a.zb(l).toString()}function ju(a){if(this.a=a||e.default.INTERNAL.reactNative&&e.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new P("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Nu(a){this.b=a,this.a={},this.f=q(this.c,this)}ku.prototype.toString=function(){return this.f?Wn(this.a,"v",this.f):ur(this.a.b,"v"),this.b?Wn(this.a,"eid",this.b):ur(this.a.b,"eid"),this.c.length?Wn(this.a,"fw",this.c.join(",")):ur(this.a.b,"fw"),this.a.toString()},Iu.prototype.zb=function(a){return this.h=a,this},Iu.prototype.toString=function(){if(this.v){var a=$n(this.v.url);a=Qn(a.c,a.a,a.g,"/emulator/auth/handler")}else a=Qn("https",this.u,null,"/__/auth/handler");if(Wn(a,"apiKey",this.s),Wn(a,"appName",this.c),Wn(a,"authType",this.m),this.a.isOAuthProvider){var b=this.a;try{var t=e.default.app(this.c).auth().la()}catch(e){t=null}for(var n in b.pb=t,Wn(a,"providerId",this.a.providerId),b=Qr((t=this.a).Jb))b[n]=b[n].toString();n=t.Qc,b=It(b);for(var r=0;r<n.length;r++){var o=n[r];o in b&&delete b[o]}t.qb&&t.pb&&!b[t.qb]&&(b[t.qb]=t.pb),kt(b)||Wn(a,"customParameters",$r(b))}if("function"==typeof this.a.Rb&&((t=this.a.Rb()).length&&Wn(a,"scopes",t.join(","))),this.l?Wn(a,"redirectUrl",this.l):ur(a.b,"redirectUrl"),this.g?Wn(a,"eventId",this.g):ur(a.b,"eventId"),this.i?Wn(a,"v",this.i):ur(a.b,"v"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!zn(a,g)&&Wn(a,g,this.b[g]);return this.h?Wn(a,"tid",this.h):ur(a.b,"tid"),this.f?Wn(a,"eid",this.f):ur(a.b,"eid"),(g=Tu(this.c)).length&&Wn(a,"fw",g.join(",")),a.toString()},(n=Ou.prototype).Pb=function(a,b,t){var e=new P("popup-closed-by-user"),n=new P("web-storage-unsupported"),r=this,g=!1;return this.ma().then((function(){(function(a){var b={type:"webStorageSupport"};return Su(a).then((function(){return function(a,b){return a.sb.then((function(){return new Ae((function(t){a.a.send(b.type,b,t,Br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(a.v,b)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(r).then((function(t){t||(a&&Or(a),b(n),g=!0)}))})).o((function(){})).then((function(){if(!g)return function(a){return new Ae((function(b){return function t(){Dn(2e3).then((function(){if(a&&!a.closed)return t();b()}))}()}))}(a)})).then((function(){if(!g)return Dn(t).then((function(){b(e)}))}))},n.Yb=function(){var a=Vr();return!zr(a)&&!Jr(a)},n.Ub=function(){return!1},n.Nb=function(a,b,t,e,n,r,g,o){if(!a)return Fe(new P("popup-blocked"));if(g&&!zr())return this.ma().o((function(p){Or(a),n(p)})),e(),Le();this.a||(this.a=Eu(Cu(this)));var c=this;return this.a.then((function(){var p=c.ma().o((function(t){throw Or(a),n(t),t}));return e(),p})).then((function(){(Zo(t),g)||kr(Au(c.s,c.g,c.b,b,t,null,r,c.c,void 0,c.i,o,c.f),a)})).o((function(p){throw"auth/network-request-failed"==p.code&&(c.a=null),p}))},n.Ob=function(a,b,t,e){this.a||(this.a=Eu(Cu(this)));var n=this;return this.a.then((function(){Zo(b),kr(Au(n.s,n.g,n.b,a,b,xr(),t,n.c,void 0,n.i,e,n.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(n.a=null),t}))},n.ma=function(){var a=this;return Su(this).then((function(){return a.v.sb})).o((function(){throw a.a=null,new P("network-request-failed")}))},n.ac=function(){return!0},n.Ea=function(a){this.h.push(a)},n.Ta=function(a){it(this.h,(function(b){return b==a}))},(n=ju.prototype).get=function(a){return Le(this.a.getItem(a)).then((function(b){return b&&Yr(b)}))},n.set=function(a,b){return Le(this.a.setItem(a,$r(b)))},n.U=function(a){return Le(this.a.removeItem(a))},n.ca=function(){},n.ia=function(){};var Pu,Ru=[];function Du(a,b,t){kt(a.a)&&a.b.addEventListener("message",a.f),void 0===a.a[b]&&(a.a[b]=[]),a.a[b].push(t)}function Mu(a){this.a=a}function Lu(a){this.c=a,this.b=!1,this.a=[]}function Fu(a,b,t,e){var n,g,r,o,c=t||{},p=null;if(a.b)return Fe(Error("connection_unavailable"));var l=e?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ae((function(t,e){h?(n=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),r=setTimeout((function(){e(Error("unsupported_event"))}),l),p={messageChannel:h,onMessage:g=function(c){c.data.eventId===n&&("ack"===c.data.status?(clearTimeout(r),o=setTimeout((function(){e(Error("timeout"))}),3e3)):"done"===c.data.status?(clearTimeout(o),void 0!==c.data.response?t(c.data.response):e(Error("unknown_error"))):(clearTimeout(r),clearTimeout(o),e(Error("invalid_response"))))}},a.a.push(p),h.port1.addEventListener("message",g),a.c.postMessage({eventType:b,eventId:n,data:c},[h.port2])):e(Error("connection_unavailable"))})).then((function(t){return Uu(a,p),t})).o((function(t){throw Uu(a,p),t}))}function Uu(a,b){if(b){var t=b.messageChannel,e=b.onMessage;t&&(t.port1.removeEventListener("message",e),t.port1.close()),it(a.a,(function(t){return t==b}))}}function qu(){if(!Hu())throw new P("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=f.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var a=this;Pr()&&self?(this.v=function(){var a=Pr()?self:null;if(X(Ru,(function(t){t.b==a&&(b=t)})),!b){var b=new Nu(a);Ru.push(b)}return b}(),Du(this.v,"keyChanged",(function(b,t){return Qu(a).then((function(e){return 0<e.length&&X(a.a,(function(t){t(e)})),{keyProcessed:et(e,t.key)}}))})),Du(this.v,"ping",(function(){return Le(["keyChanged"])}))):function(){var a=f.navigator;return a&&a.serviceWorker?Le().then((function(){return a.serviceWorker.ready})).then((function(b){return b.active||null})).o((function(){return null})):Le(null)}().then((function(b){(a.h=b)&&(a.g=new Lu(new Mu(b)),Fu(a.g,"ping",null,!0).then((function(t){t[0].fulfilled&&et(t[0].value,"keyChanged")&&(a.s=!0)})).o((function(){})))}))}function Vu(a){return new Ae((function(b,t){var e=a.m.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(t){}t(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){t(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?b(e):function(a){return new Ae((function(b,t){var e=a.m.deleteDatabase("firebaseLocalStorageDb");e.onsuccess=function(){b()},e.onerror=function(e){t(Error(e.target.error))}}))}(a).then((function(){return Vu(a)})).then((function(t){b(t)})).o((function(e){t(e)}))}}))}function Bu(a){return a.i||(a.i=Vu(a)),a.i}function Ku(a,b){var t=0;return new Ae((function e(n,r){Bu(a).then(b).then(n).o((function(g){if(!(3<++t))return Bu(a).then((function(t){return t.close(),a.i=void 0,e(n,r)})).o((function(t){r(t)}));r(g)}))}))}function Hu(){try{return!!f.indexedDB}catch(t){return!1}}function Gu(a){return a.objectStore("firebaseLocalStorage")}function Wu(a,b){return a.transaction(["firebaseLocalStorage"],b?"readwrite":"readonly")}function zu(a){return new Ae((function(b,t){a.onsuccess=function(t){t&&t.target?b(t.target.result):b()},a.onerror=function(e){t(e.target.error)}}))}function $u(a,b){return a.g&&a.h&&function(){var a=f.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.h?Fu(a.g,"keyChanged",{key:b},a.s).then((function(){})).o((function(){})):Le()}function Qu(a){return Bu(a).then((function(b){var t=Gu(Wu(b,!1));return t.getAll?zu(t.getAll()):new Ae((function(e,n){var r=[],g=t.openCursor();g.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},g.onerror=function(t){n(t.target.error)}}))})).then((function(b){var t={},e=[];if(0==a.b){for(e=0;e<b.length;e++)t[b[e].fbase_key]=b[e].value;e=Ir(a.c,t),a.c=t}return e}))}function Yu(a){a.l&&a.l.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function Xu(a){var b=this,t=null;this.a=[],this.type="indexedDB",this.c=a,this.b=Le().then((function(){if(Hu()){var e=Xr(),n="__sak"+e;return Pu||(Pu=new qu),(t=Pu).set(n,e).then((function(){return t.get(n)})).then((function(r){if(r!==e)throw Error("indexedDB not supported!");return t.U(n)})).then((function(){return t})).o((function(){return b.c}))}return b.c})).then((function(t){return b.type=t.type,t.ca((function(t){X(b.a,(function(e){e(t)}))})),t}))}function Ju(){this.a={},this.type="inMemory"}function Zu(){if(!function(){var a="Node"==Rr();if(!(a=tc()||a&&e.default.INTERNAL.node&&e.default.INTERNAL.node.localStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Rr())throw new P("internal-error","The LocalStorage compatibility library was not found.");throw new P("web-storage-unsupported")}this.a=tc()||e.default.INTERNAL.node.localStorage,this.type="localStorage"}function tc(){try{var a=f.localStorage,b=Xr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function ec(){this.type="nullStorage"}function nc(){if(!function(){var a="Node"==Rr();if(!(a=rc()||a&&e.default.INTERNAL.node&&e.default.INTERNAL.node.sessionStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Rr())throw new P("internal-error","The SessionStorage compatibility library was not found.");throw new P("web-storage-unsupported")}this.a=rc()||e.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function rc(){try{var a=f.sessionStorage,b=Xr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function ic(){var a={};a.Browser=sc,a.Node=uc,a.ReactNative=cc,a.Worker=lc,this.a=a[Rr()]}Nu.prototype.c=function(a){var b=a.data.eventType,t=a.data.eventId,e=this.a[b];if(e&&0<e.length){a.ports[0].postMessage({status:"ack",eventId:t,eventType:b,response:null});var n=[];X(e,(function(t){n.push(Le().then((function(){return t(a.origin,a.data.data)})))})),qe(n).then((function(e){var g=[];X(e,(function(t){g.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),X(g,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),a.ports[0].postMessage({status:"done",eventId:t,eventType:b,response:g})}))}},Mu.prototype.postMessage=function(a,b){this.a.postMessage(a,b)},Lu.prototype.close=function(){for(;0<this.a.length;)Uu(this,this.a[0]);this.b=!0},(n=qu.prototype).set=function(a,b){var t=this,e=!1;return Ku(this,(function(t){return zu((t=Gu(Wu(t,!0))).get(a))})).then((function(n){return Ku(t,(function(r){if(r=Gu(Wu(r,!0)),n)return n.value=b,zu(r.put(n));t.b++,e=!0;var g={};return g.fbase_key=a,g.value=b,zu(r.add(g))}))})).then((function(){return t.c[a]=b,$u(t,a)})).oa((function(){e&&t.b--}))},n.get=function(a){return Ku(this,(function(b){return zu(Gu(Wu(b,!1)).get(a))})).then((function(b){return b&&b.value}))},n.U=function(a){var b=this,t=!1;return Ku(this,(function(e){return t=!0,b.b++,zu(Gu(Wu(e,!0)).delete(a))})).then((function(){return delete b.c[a],$u(b,a)})).oa((function(){t&&b.b--}))},n.ca=function(a){0==this.a.length&&function(a){function b(){a.f=setTimeout((function(){a.l=Qu(a).then((function(t){0<t.length&&X(a.a,(function(e){e(t)}))})).then((function(){b()})).o((function(t){"STOP_EVENT"!=t.message&&b()}))}),800)}Yu(a),b()}(this),this.a.push(a)},n.ia=function(a){it(this.a,(function(b){return b==a})),0==this.a.length&&Yu(this)},(n=Xu.prototype).get=function(a){return this.b.then((function(b){return b.get(a)}))},n.set=function(a,b){return this.b.then((function(t){return t.set(a,b)}))},n.U=function(a){return this.b.then((function(b){return b.U(a)}))},n.ca=function(a){this.a.push(a)},n.ia=function(a){it(this.a,(function(b){return b==a}))},(n=Ju.prototype).get=function(a){return Le(this.a[a])},n.set=function(a,b){return this.a[a]=b,Le()},n.U=function(a){return delete this.a[a],Le()},n.ca=function(){},n.ia=function(){},(n=Zu.prototype).get=function(a){var b=this;return Le().then((function(){return Yr(b.a.getItem(a))}))},n.set=function(a,b){var t=this;return Le().then((function(){var e=$r(b);null===e?t.U(a):t.a.setItem(a,e)}))},n.U=function(a){var b=this;return Le().then((function(){b.a.removeItem(a)}))},n.ca=function(a){f.window&&yn(f.window,"storage",a)},n.ia=function(a){f.window&&wn(f.window,"storage",a)},(n=ec.prototype).get=function(){return Le(null)},n.set=function(){return Le()},n.U=function(){return Le()},n.ca=function(){},n.ia=function(){},(n=nc.prototype).get=function(a){var b=this;return Le().then((function(){return Yr(b.a.getItem(a))}))},n.set=function(a,b){var t=this;return Le().then((function(){var e=$r(b);null===e?t.U(a):t.a.setItem(a,e)}))},n.U=function(a){var b=this;return Le().then((function(){b.a.removeItem(a)}))},n.ca=function(){},n.ia=function(){};var oc,ac,sc={F:Zu,cb:nc},uc={F:Zu,cb:nc},cc={F:ju,cb:ec},lc={F:Zu,cb:ec},hc={rd:"local",NONE:"none",td:"session"};function fc(){var a=!(Jr(Vr())||!Nr()),b=zr(),t=Kr();this.m=a,this.h=b,this.l=t,this.a={},oc||(oc=new ic),a=oc;try{this.g=!wr()&&ri()||!f.indexedDB?new a.a.F:new Xu(Pr()?new Ju:new a.a.F)}catch(t){this.g=new Ju,this.h=!0}try{this.i=new a.a.cb}catch(t){this.i=new Ju}this.v=new Ju,this.f=q(this.Zb,this),this.b={}}function dc(){return ac||(ac=new fc),ac}function pc(a,b){switch(b){case"session":return a.i;case"none":return a.v;default:return a.g}}function vc(a,b){return"firebase:"+a.name+(b?":"+b:"")}function gc(a,b,t){return t=vc(b,t),"local"==b.F&&(a.b[t]=null),pc(a,b.F).U(t)}function mc(a){a.c&&(clearInterval(a.c),a.c=null)}function yc(a){this.a=a,this.b=dc()}(n=fc.prototype).get=function(a,b){return pc(this,a.F).get(vc(a,b))},n.set=function(a,b,t){var e=vc(a,t),n=this,r=pc(this,a.F);return r.set(e,b).then((function(){return r.get(e)})).then((function(g){"local"==a.F&&(n.b[e]=g)}))},n.addListener=function(a,b,t){a=vc(a,b),this.l&&(this.b[a]=f.localStorage.getItem(a)),kt(this.a)&&(pc(this,"local").ca(this.f),this.h||(wr()||!ri())&&f.indexedDB||!this.l||function(a){mc(a),a.c=setInterval((function(){for(var b in a.a){var t=f.localStorage.getItem(b),e=a.b[b];t!=e&&(a.b[b]=t,t=new un({type:"storage",key:b,target:window,oldValue:e,newValue:t,a:!0}),a.Zb(t))}}),1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(t)},n.removeListener=function(a,b,t){a=vc(a,b),this.a[a]&&(it(this.a[a],(function(e){return e==t})),0==this.a[a].length&&delete this.a[a]),kt(this.a)&&(pc(this,"local").ia(this.f),mc(this))},n.Zb=function(a){if(a&&a.g){var b=a.a.key;if(null==b)for(var t in this.a){var e=this.b[t];void 0===e&&(e=null);var n=f.localStorage.getItem(t);n!==e&&(this.b[t]=n,this.nb(t))}else if(0==b.indexOf("firebase:")&&this.a[b]){if(void 0!==a.a.a?pc(this,"local").ia(this.f):mc(this),this.m)if(t=f.localStorage.getItem(b),(e=a.a.newValue)!==t)null!==e?f.localStorage.setItem(b,e):f.localStorage.removeItem(b);else if(this.b[b]===e&&void 0===a.a.a)return;var r=this;t=function(){void 0===a.a.a&&r.b[b]===f.localStorage.getItem(b)||(r.b[b]=f.localStorage.getItem(b),r.nb(b))},re&&ge&&10==ge&&f.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(t,10):t()}}else X(a,q(this.nb,this))},n.nb=function(a){this.a[a]&&X(this.a[a],(function(b){b()}))};var _c,bc={name:"authEvent",F:"local"};function wc(){this.a=dc()}function xc(a,b){this.b=kc,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=b,this.l=f.Int32Array?new Int32Array(64):Array(64),void 0===_c&&(_c=f.Int32Array?new Int32Array(Cc):Cc),this.reset()}j(xc,(function(){this.b=-1}));for(var kc=64,Ic=kc-1,Tc=[],Oc=0;Oc<Ic;Oc++)Tc[Oc]=0;var Ec=ot(128,Tc);function ol(a){for(var b=a.f,t=a.l,e=0,n=0;n<b.length;)t[e++]=b[n]<<24|b[n+1]<<16|b[n+2]<<8|b[n+3],n=4*e;for(b=16;64>b;b++){n=0|t[b-15],e=0|t[b-2];var r=(0|t[b-16])+((n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3)|0,g=(0|t[b-7])+((e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)|0;t[b]=r+g|0}e=0|a.a[0],n=0|a.a[1];var o=0|a.a[2],c=0|a.a[3],p=0|a.a[4],l=0|a.a[5],h=0|a.a[6];for(r=0|a.a[7],b=0;64>b;b++){var f=((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+(e&n^e&o^n&o)|0;g=(r=r+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))|0)+((g=(g=p&l^~p&h)+(0|_c[b])|0)+(0|t[b])|0)|0,r=h,h=l,l=p,p=c+g|0,c=o,o=n,n=e,e=g+f|0}a.a[0]=a.a[0]+e|0,a.a[1]=a.a[1]+n|0,a.a[2]=a.a[2]+o|0,a.a[3]=a.a[3]+c|0,a.a[4]=a.a[4]+p|0,a.a[5]=a.a[5]+l|0,a.a[6]=a.a[6]+h|0,a.a[7]=a.a[7]+r|0}function Sc(a,b,t){void 0===t&&(t=b.length);var e=0,n=a.c;if("string"==typeof b)for(;e<t;)a.f[n++]=b.charCodeAt(e++),n==a.b&&(ol(a),n=0);else{if(!w(b))throw Error("message must be string or array");for(;e<t;){var r=b[e++];if(!("number"==typeof r&&0<=r&&255>=r&&r==(0|r)))throw Error("message must be a byte array");a.f[n++]=r,n==a.b&&(ol(a),n=0)}}a.c=n,a.g+=t}xc.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):at(this.h)};var Cc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ac(){xc.call(this,8,jc)}j(Ac,xc);var jc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nc(a,b,t,e,n,r){this.v=a,this.i=b,this.l=t,this.m=e||null,this.u=n||null,this.s=r,this.h=b+":"+t,this.C=new wc,this.g=new yc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Pc(a){return new P("invalid-cordova-configuration",a)}function Rc(a){var b=new Ac;Sc(b,a),a=[];var t=8*b.g;56>b.c?Sc(b,Ec,56-b.c):Sc(b,Ec,b.b-(b.c-56));for(var e=63;56<=e;e--)b.f[e]=255&t,t/=256;for(ol(b),e=t=0;e<b.i;e++)for(var n=24;0<=n;n-=8)a[t++]=b.a[e]>>n&255;return function(a){return Z(a,(function(b){return 1<(b=b.toString(16)).length?b:"0"+b})).join("")}(a)}function Dc(a,b){for(var t=0;t<a.b.length;t++)try{a.b[t](b)}catch(t){}}function Mc(a){return a.f||(a.f=a.ma().then((function(){return new Ae((function(b){a.Ea((function t(e){return b(e),a.Ta(t),!1})),function(a){function b(g){e=!0,n&&n.cancel(),Lc(a).then((function(e){var n=t;if(e&&g&&g.url){var p=null;-1!=(n=_o(g.url)).indexOf("/__/auth/callback")&&(p=(p="object"==typeof(p=Yr(zn(p=$n(n),"firebaseError")||null))?R(p):null)?new ta(e.c,e.b,null,null,p,null,e.T()):new ta(e.c,e.b,n,e.f,null,null,e.T())),n=p||t}Dc(a,n)}))}var t=new ta("unknown",null,null,null,new P("no-auth-event")),e=!1,n=Dn(500).then((function(){return Lc(a).then((function(){e||Dc(a,t)}))})),r=f.handleOpenURL;f.handleOpenURL=function(g){if(0==g.toLowerCase().indexOf(Br("BuildInfo.packageName",f).toLowerCase()+"://")&&b({url:g}),"function"==typeof r)try{r(g)}catch(t){console.error(t)}},ra||(ra=new ea),function(a){var b=ra;b.a.push(a),b.b||(b.b=function(t){for(var e=0;e<b.a.length;e++)b.a[e](t)},"function"==typeof(a=Br("universalLinks.subscribe",f))&&a(null,b.b))}(b)}(a)}))}))),a.f}function Lc(a){var b=null;return function(a){return a.b.get(bc,a.a).then((function(b){return th(b)}))}(a.g).then((function(t){return b=t,gc((t=a.g).b,bc,t.a)})).then((function(){return b}))}function Fc(a){this.a=a,this.b=dc()}(n=Nc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(jr(void 0)?Ar().then((function(){return new Ae((function(a,b){var t=f.document,e=setTimeout((function(){b(Error("Cordova framework is not ready."))}),1e3);t.addEventListener("deviceready",(function(){clearTimeout(e),a()}),!1)}))})):Fe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Br("universalLinks.subscribe",f))throw Pc("cordova-universal-links-plugin-fix is not installed");if(void 0===Br("BuildInfo.packageName",f))throw Pc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Br("cordova.plugins.browsertab.openUrl",f))throw Pc("cordova-plugin-browsertab is not installed");if("function"!=typeof Br("cordova.InAppBrowser.open",f))throw Pc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new P("cordova-not-ready")}))},n.Pb=function(a,b){return b(new P("operation-not-supported-in-this-environment")),Le()},n.Nb=function(){return Fe(new P("operation-not-supported-in-this-environment"))},n.ac=function(){return!1},n.Yb=function(){return!0},n.Ub=function(){return!0},n.Ob=function(a,b,t,e){if(this.c)return Fe(new P("redirect-operation-pending"));var n=this,r=f.document,g=null,o=null,c=null,p=null;return this.c=Le().then((function(){return Zo(b),Mc(n)})).then((function(){return function(a,b,t,e,n){var r=function(){for(var a=20,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}(),g=new ta(b,e,null,r,new P("no-auth-event"),null,n),o=Br("BuildInfo.packageName",f);if("string"!=typeof o)throw new P("invalid-cordova-configuration");var c=Br("BuildInfo.displayName",f),p={};if(Vr().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=o;else{if(!Vr().toLowerCase().match(/android/))return Fe(new P("operation-not-supported-in-this-environment"));p.apn=o}c&&(p.appDisplayName=c),r=Rc(r),p.sessionId=r;var l=Au(a.v,a.i,a.l,b,t,null,e,a.m,p,a.u,n,a.s);return a.ma().then((function(){var t=a.h;return a.C.a.set(bc,g.w(),t)})).then((function(){var t=Br("cordova.plugins.browsertab.isAvailable",f);if("function"!=typeof t)throw new P("invalid-cordova-configuration");var e=null;t((function(t){if(t){if("function"!=typeof(e=Br("cordova.plugins.browsertab.openUrl",f)))throw new P("invalid-cordova-configuration");e(l)}else{if("function"!=typeof(e=Br("cordova.InAppBrowser.open",f)))throw new P("invalid-cordova-configuration");t=Vr(),a.a=e(l,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(n,a,b,t,e)})).then((function(){return new Ae((function(t,e){o=function(){var e=Br("cordova.plugins.browsertab.close",f);return t(),"function"==typeof e&&e(),n.a&&"function"==typeof n.a.close&&(n.a.close(),n.a=null),!1},n.Ea(o),c=function(){g||(g=Dn(2e3).then((function(){e(new P("redirect-cancelled-by-user"))})))},p=function(){ei()&&c()},r.addEventListener("resume",c,!1),Vr().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",p,!1)})).o((function(t){return Lc(n).then((function(){throw t}))}))})).oa((function(){c&&r.removeEventListener("resume",c,!1),p&&r.removeEventListener("visibilitychange",p,!1),g&&g.cancel(),o&&n.Ta(o),n.c=null}))},n.Ea=function(a){this.b.push(a),Mc(this).o((function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new ta("unknown",null,null,null,new P("no-auth-event")),a(b))}))},n.Ta=function(a){it(this.b,(function(b){return b==a}))};var Uc={name:"pendingRedirect",F:"session"};function qc(a){return gc(a.b,Uc,a.a)}function Vc(a,b,t,e){this.i={},this.u=0,this.D=a,this.v=b,this.m=t,this.J=e,this.h=[],this.f=!1,this.l=q(this.s,this),this.b=new nl,this.C=new cl,this.g=new Fc(tl(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Bc(this.D,this.v,this.m,D,this.J)}function Bc(a,b,t,n,r){var o=e.default.SDK_VERSION||null;return jr()?new Nc(a,b,t,o,n,r):new Ou(a,b,t,o,n,r)}function Kc(a){a.f||(a.f=!0,a.a.Ea(a.l));var b=a.a;return a.a.ma().o((function(t){throw a.a==b&&a.reset(),t}))}function Hc(a){a.a.Yb()&&Kc(a).o((function(b){var t=new ta("unknown",null,null,null,new P("operation-not-supported-in-this-environment"));Yc(b)&&a.s(t)})),a.a.Ub()||rl(a.b)}function Gc(a,b){et(a.h,b)||a.h.push(b),a.f||function(a){return a.b.get(Uc,a.a).then((function(b){return"pending"==b}))}(a.g).then((function(t){t?qc(a.g).then((function(){Kc(a).o((function(t){var e=new ta("unknown",null,null,null,new P("operation-not-supported-in-this-environment"));Yc(t)&&a.s(e)}))})):Hc(a)})).o((function(){Hc(a)}))}function Wc(a,b){it(a.h,(function(t){return t==b}))}Vc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Bc(this.D,this.v,this.m,null,this.J),this.i={}},Vc.prototype.s=function(a){if(!a)throw new P("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var b=!1,t=0;t<this.h.length;t++){var e=this.h[t];if(e.Gb(a.c,a.b)){(b=this.c[a.c])&&(b.h(a,e),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.u=Date.now())),b=!0;break}}return rl(this.b),b};var zc=new ti(2e3,1e4),$c=new ti(3e4,6e4);function Qc(a,b,t,e,n,r,g){return a.a.Nb(b,t,e,(function(){a.f||(a.f=!0,a.a.Ea(a.l))}),(function(){a.reset()}),n,r,g)}function Yc(a){return!(!a||"auth/cordova-not-ready"!=a.code)}function Xc(a,b,t,e,n){var r;return function(a){return a.b.set(Uc,"pending",a.a)}(a.g).then((function(){return a.a.Ob(b,t,e,n).o((function(g){if(Yc(g))throw new P("operation-not-supported-in-this-environment");return r=g,qc(a.g).then((function(){throw r}))})).then((function(){return a.a.ac()?new Ae((function(){})):qc(a.g).then((function(){return a.ra()})).then((function(){})).o((function(){}))}))}))}function Jc(a,b,t,e,n){return a.a.Pb(e,(function(e){b.na(t,null,e,n)}),zc.get())}Vc.prototype.ra=function(){return this.b.ra()};var Zc={};function tl(a,b,t){return a=a+":"+b,t&&(a=a+":"+t.url),a}function el(a,b,t,e){var n=tl(b,t,e);return Zc[n]||(Zc[n]=new Vc(a,b,t,e)),Zc[n]}function nl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function rl(a){a.g||(a.g=!0,sl(a,!1,null,null))}function il(a){a.g&&!a.i&&sl(a,!1,null,null)}function al(a,b){if(a.b=function(){return Le(b)},a.f.length)for(var t=0;t<a.f.length;t++)a.f[t](b)}function sl(a,b,t,e){b?e?function(a,b){if(a.b=function(){return Fe(b)},a.c.length)for(var t=0;t<a.c.length;t++)a.c[t](b)}(a,e):al(a,t):al(a,{user:null}),a.f=[],a.c=[]}function cl(){}function em(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(a){this.jb=a},enumerable:!1})}function ll(a,b){this.a=b,ui(this,"verificationId",a)}function hl(a,b,t,e){return new Yo(a).gb(b,t).then((function(t){return new ll(t,e)}))}function fl(a){var b=io(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new P("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ci(this,{token:a,expirationTime:ni(1e3*b.exp),authTime:ni(1e3*b.auth_time),issuedAtTime:ni(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,signInSecondFactor:b.firebase&&b.firebase.sign_in_second_factor?b.firebase.sign_in_second_factor:null,claims:b})}function pl(a,b,t){var e=b&&b[gl];if(!e)throw new P("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=a,this.f=It(b),this.g=t,this.c=new bo(null,e),this.b=[];var n=this;X(b[vl]||[],(function(t){(t=pi(t))&&n.b.push(t)})),ui(this,"auth",this.a),ui(this,"session",this.c),ui(this,"hints",this.b)}nl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},nl.prototype.h=function(a,b){if(a){this.reset(),this.g=!0;var t=a.c,e=a.b,n=a.a&&"auth/web-storage-unsupported"==a.a.code,r=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.i=!(!n&&!r),"unknown"!=t||n||r?a.a?(sl(this,!0,null,a.a),Le()):b.Fa(t,e)?function(a,b,t){t=t.Fa(b.c,b.b);var e=b.g,n=b.f,r=b.i,g=b.T(),o=!!b.c.match(/Redirect$/);t(e,n,g,r).then((function(t){sl(a,o,t,null)})).o((function(t){sl(a,o,null,t)}))}(this,a,b):Fe(new P("invalid-auth-event")):(sl(this,!1,null,null),Le())}else Fe(new P("invalid-auth-event"))},nl.prototype.ra=function(){var a=this;return new Ae((function(b,t){a.b?a.b().then(b,t):(a.f.push(b),a.c.push(t),function(a){var b=new P("timeout");a.a&&a.a.cancel(),a.a=Dn($c.get()).then((function(){a.b||(a.g=!0,sl(a,!0,null,b))}))}(a))}))},cl.prototype.h=function(a,b){if(a){var t=a.c,e=a.b;a.a?(b.na(a.c,null,a.a,a.b),Le()):b.Fa(t,e)?function(a,b){var t=a.b,e=a.c;b.Fa(e,t)(a.g,a.f,a.T(),a.i).then((function(n){b.na(e,n,null,t)})).o((function(n){b.na(e,null,n,t)}))}(a,b):Fe(new P("invalid-auth-event"))}else Fe(new P("invalid-auth-event"))},ll.prototype.confirm=function(a){return a=Xo(this.verificationId,a),this.a(a)};var vl="mfaInfo",gl="mfaPendingCredential";function ml(a,b,t,e){P.call(this,"multi-factor-auth-required",e,b),this.b=new pl(a,b,t),ui(this,"resolver",this.b)}function yl(a,b,t){if(a&&k(a.serverResponse)&&"auth/multi-factor-auth-required"===a.code)try{return new ml(b,a.serverResponse,t,a.message)}catch(t){}return null}function _l(){}function bl(a){ui(this,"factorId",a.fa),this.a=a}function wl(a){if(bl.call(this,a),this.a.fa!=Yo.PROVIDER_ID)throw new P("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function xl(a,b){for(var t in sn.call(this,a),b)this[t]=b[t]}function kl(a,b){this.a=a,this.b=[],this.c=q(this.yc,this),yn(this.a,"userReloaded",this.c);var t=[];b&&b.multiFactor&&b.multiFactor.enrolledFactors&&X(b.multiFactor.enrolledFactors,(function(e){var n=null,r={};if(e){e.uid&&(r[mi]=e.uid),e.displayName&&(r[vi]=e.displayName),e.enrollmentTime&&(r[gi]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[yi]=e.phoneNumber);try{n=new _i(r)}catch(t){}e=n}else e=null;e&&t.push(e)})),Il(this,t)}function Il(a,b){a.b=b,ui(a,"enrolledFactors",b)}function Tl(a,b,t){if(this.h=a,this.i=b,this.g=t,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ol(a,b){a.stop(),a.b=Dn(function(a,b){return b?(a.a=a.c,a.g()):(b=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),b)}(a,b)).then((function(){return function(){var a=f.document,b=null;return ei()||!a?Le():new Ae((function(t){b=function(){ei()&&(a.removeEventListener("visibilitychange",b,!1),t())},a.addEventListener("visibilitychange",b,!1)})).o((function(t){throw a.removeEventListener("visibilitychange",b,!1),t}))}()})).then((function(){return a.h()})).then((function(){Ol(a,!0)})).o((function(t){a.i(t)&&Ol(a,!1)}))}function El(a){this.f=a,this.b=this.a=null,this.c=Date.now()}function Sl(a,b){void 0===b&&(a.b?b=(b=a.b).a-b.g:b=0),a.c=Date.now()+1e3*b}function Cl(a,b){a.b=ro(b[ls]||""),a.a=b.refreshToken,Sl(a,void 0!==(b=b.expiresIn)?Number(b):void 0)}function Al(a,b){return function(a,b){return new Ae((function(t,e){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?_s(a,a.l+"?key="+encodeURIComponent(a.c),(function(n){n?n.error?e(mu(n)):n.access_token&&n.refresh_token?t(n):e(new P("internal-error")):e(new P("network-request-failed"))}),"POST",sr(b).toString(),a.g,a.m.get()):e(new P("internal-error"))}))}(a.f,b).then((function(t){return a.b=ro(t.access_token),a.a=t.refresh_token,Sl(a,t.expires_in),{accessToken:a.b.toString(),refreshToken:a.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(a.a=null),t}))}function jl(a,b){this.a=a||null,this.b=b||null,ci(this,{lastSignInTime:ni(b||null),creationTime:ni(a||null)})}function Nl(a,b,t,e,n,r){ci(this,{uid:a,displayName:e||null,photoURL:n||null,email:t||null,phoneNumber:r||null,providerId:b})}function Pl(a,b,t){this.N=[],this.l=a.apiKey,this.m=a.appName,this.s=a.authDomain||null;var n=e.default.SDK_VERSION?qr(e.default.SDK_VERSION):null;this.a=new us(this.l,U(D),n),(this.u=a.emulatorConfig||null)&&gs(this.a,this.u),this.h=new El(this.a),Bl(this,b[ls]),Cl(this.h,b),ui(this,"refreshToken",this.h.a),Gl(this,t||{}),An.call(this),this.P=!1,this.s&&Hr()&&(this.b=el(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(a){return new Tl((function(){return a.I(!0)}),(function(b){return!(!b||"auth/network-request-failed"!=b.code)}),(function(){var b=a.h.c-Date.now()-3e5;return 0<b?b:0}))}(this),this.ba=q(this.ib,this);var r=this;this.za=null,this.Pa=function(t){r.xa(t.h)},this.qa=null,this.Ba=function(t){Rl(r,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Ll(r,t.f)},this.ja=null,this.S=new kl(this,t),ui(this,"multiFactor",this.S)}function Rl(a,b){a.u=b,gs(a.a,b),a.b&&(b=a.b,a.b=el(a.s,a.l,a.m,a.u),a.P&&(Wc(b,a),Gc(a.b,a)))}function Dl(a,b){a.qa&&wn(a.qa,"languageCodeChanged",a.Pa),(a.qa=b)&&yn(b,"languageCodeChanged",a.Pa)}function Ml(a,b){a.$&&wn(a.$,"emulatorConfigChanged",a.Ba),(a.$=b)&&yn(b,"emulatorConfigChanged",a.Ba)}function Ll(a,b){a.aa=b,ys(a.a,e.default.SDK_VERSION?qr(e.default.SDK_VERSION,a.aa):null)}function Fl(a,b){a.ja&&wn(a.ja,"frameworkChanged",a.Oa),(a.ja=b)&&yn(b,"frameworkChanged",a.Oa)}function Ul(a){try{return e.default.app(a.m).auth()}catch(t){throw new P("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function ql(a){a.J||a.D.b||(a.D.start(),wn(a,"tokenChanged",a.ba),yn(a,"tokenChanged",a.ba))}function Vl(a){wn(a,"tokenChanged",a.ba),a.D.stop()}function Bl(a,b){a.Aa=b,ui(a,"_lat",b)}function Kl(a){for(var b=[],t=0;t<a.W.length;t++)b.push(a.W[t](a));return qe(b).then((function(){return a}))}function Hl(a){a.b&&!a.P&&(a.P=!0,Gc(a.b,a))}function Gl(a,b){ci(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,tenantId:b.tenantId||null,metadata:new jl(b.createdAt,b.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Wl(){}function zl(a){return Le().then((function(){if(a.J)throw new P("app-deleted")}))}function $l(a){return Z(a.providerData,(function(b){return b.providerId}))}function Ql(a,b){b&&(Yl(a,b.providerId),a.providerData.push(b))}function Yl(a,b){it(a.providerData,(function(t){return t.providerId==b}))}function Xl(a,b,t){("uid"!=b||t)&&a.hasOwnProperty(b)&&ui(a,b,t)}function Jl(a,b){a!=b&&(ci(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,tenantId:b.tenantId,providerData:[]}),b.metadata?ui(a,"metadata",function(a){return new jl(a.a,a.b)}(b.metadata)):ui(a,"metadata",new jl),X(b.providerData,(function(t){Ql(a,t)})),function(a,b){a.b=b.b,a.a=b.a,a.c=b.c}(a.h,b.h),ui(a,"refreshToken",a.h.a),Il(a.S,b.S.b))}function Zl(a){return a.I().then((function(b){var t=a.isAnonymous;return function(a,b){return vu(a.a,Ws,{idToken:b}).then(q(a.Kc,a))}(a,b).then((function(){return t||Xl(a,"isAnonymous",!1),b}))}))}function eh(a,b){b[ls]&&a.Aa!=b[ls]&&(Cl(a.h,b),a.dispatchEvent(new xl("tokenChanged")),Bl(a,b[ls]),Xl(a,"refreshToken",a.h.a))}function nh(a,b){return Zl(a).then((function(){if(et($l(a),b))return Kl(a).then((function(){throw new P("provider-already-linked")}))}))}function rh(a,b,t){return hi({user:a,credential:Jo(b),additionalUserInfo:b=co(b),operationType:t})}function ih(a,b){return eh(a,b),a.reload().then((function(){return a}))}function oh(a,b,t,n,r){if(!Hr())return Fe(new P("operation-not-supported-in-this-environment"));if(a.i&&!r)return Fe(a.i);var o=uo(t.providerId),g=Xr(a.uid+":::"),c=null;(!zr()||Nr())&&a.s&&t.isOAuthProvider&&(c=Au(a.s,a.l,a.m,b,t,null,g,e.default.SDK_VERSION||null,null,null,a.tenantId,a.u));var l=Er(c,o&&o.va,o&&o.ua);return n=n().then((function(){if(sh(a),!r)return a.I().then((function(){}))})).then((function(){return Qc(a.b,l,b,t,g,!!c,a.tenantId)})).then((function(){return new Ae((function(p,t){a.na(b,null,new P("cancelled-popup-request"),a.g||null),a.f=p,a.C=t,a.g=g,a.c=Jc(a.b,a,b,l,g)}))})).then((function(p){return l&&Or(l),p?hi(p):null})).o((function(p){throw l&&Or(l),p})),uh(a,n,r)}function ah(a,b,t,e,n){if(!Hr())return Fe(new P("operation-not-supported-in-this-environment"));if(a.i&&!n)return Fe(a.i);var r=null,g=Xr(a.uid+":::");return e=e().then((function(){if(sh(a),!n)return a.I().then((function(){}))})).then((function(){return a.ga=g,Kl(a)})).then((function(t){return a.ha&&(t=(t=a.ha).b.set(hh,a.w(),t.a)),t})).then((function(){return Xc(a.b,b,t,g,a.tenantId)})).o((function(t){if(r=t,a.ha)return fh(a.ha);throw r})).then((function(){if(r)throw r})),uh(a,e,n)}function sh(a){if(!a.b||!a.P){if(a.b&&!a.P)throw new P("internal-error");throw new P("auth-domain-config-required")}}function uh(a,b,t){var e=function(a,b,t){return a.i&&!t?(b.cancel(),Fe(a.i)):b.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(a.i||a.dispatchEvent(new xl("userInvalidated")),a.i=t),t}))}(a,b,t);return a.N.push(e),e.oa((function(){nt(a.N,e)})),e.o((function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=yl(t.w(),Ul(a),q(a.jc,a))),e||t}))}function ch(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName,emulatorConfig:a.emulatorConfig},t={};if(!a.stsTokenManager||!a.stsTokenManager.accessToken)return null;t[ls]=a.stsTokenManager.accessToken,t.refreshToken=a.stsTokenManager.refreshToken||null;var e=a.stsTokenManager.expirationTime;e&&(t.expiresIn=(e-Date.now())/1e3);var n=new Pl(b,t,a);return a.providerData&&X(a.providerData,(function(t){t&&Ql(n,hi(t))})),a.redirectEventId&&(n.ga=a.redirectEventId),n}function lh(a){this.a=a,this.b=dc()}pl.prototype.Rc=function(a){var b=this;return a.tb(this.a.a,this.c).then((function(t){var e=It(b.f);return delete e[vl],delete e[gl],Ot(e,t),b.g(e)}))},j(ml,P),_l.prototype.tb=function(a,b,t){return b.type==wo?function(a,b,t,e){return t.Ha().then((function(t){return t={idToken:t},void 0!==e&&(t.displayName=e),Ot(t,{phoneVerificationInfo:Qo(a.a)}),vu(b,Hs,t)}))}(this,a,b,t):function(a,b,t){return t.Ha().then((function(t){return Ot(t={mfaPendingCredential:t},{phoneVerificationInfo:Qo(a.a)}),vu(b,Gs,t)}))}(this,a,b)},j(bl,_l),j(wl,bl),j(xl,sn),(n=kl.prototype).yc=function(a){Il(this,function(a){var b=[];return X(a.mfaInfo||[],(function(t){(t=pi(t))&&b.push(t)})),b}(a.hd))},n.Sb=function(){return this.a.I().then((function(a){return new bo(a,null)}))},n.fc=function(a,b){var t=this,e=this.a.a;return this.Sb().then((function(t){return a.tb(e,t,b)})).then((function(e){return eh(t.a,e),t.a.reload()}))},n.bd=function(a){var b=this,t="string"==typeof a?a:a.uid,e=this.a.a;return this.a.I().then((function(n){return vu(e,pu,{idToken:n,mfaEnrollmentId:t})})).then((function(e){var n=J(b.b,(function(g){return g.uid!=t}));return Il(b,n),eh(b.a,e),b.a.reload().o((function(g){if("auth/user-token-expired"!=g.code)throw g}))}))},n.w=function(){return{multiFactor:{enrolledFactors:Z(this.b,(function(a){return a.w()}))}}},Tl.prototype.start=function(){this.a=this.c,Ol(this,!0)},Tl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},El.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},El.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?Fe(new P("user-token-expired")):a||!this.b||Date.now()>this.c-3e4?this.a?Al(this,{grant_type:"refresh_token",refresh_token:this.a}):Le(null):Le({accessToken:this.b.toString(),refreshToken:this.a})},jl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},j(Pl,An),Pl.prototype.xa=function(a){this.za=a,vs(this.a,a)},Pl.prototype.la=function(){return this.za},Pl.prototype.Ga=function(){return at(this.aa)},Pl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},ui(Pl.prototype,"providerId","firebase"),(n=Pl.prototype).reload=function(){var a=this;return uh(this,zl(this).then((function(){return Zl(a).then((function(){return Kl(a)})).then(Wl)})))},n.oc=function(a){return this.I(a).then((function(b){return new fl(b)}))},n.I=function(a){var b=this;return uh(this,zl(this).then((function(){return b.h.getToken(a)})).then((function(t){if(!t)throw new P("internal-error");return t.accessToken!=b.Aa&&(Bl(b,t.accessToken),b.dispatchEvent(new xl("tokenChanged"))),Xl(b,"refreshToken",t.refreshToken),t.accessToken})))},n.Kc=function(a){if(!(a=a.users)||!a.length)throw new P("internal-error");Gl(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var b=function(a){return(a=a.providerUserInfo)&&a.length?Z(a,(function(b){return new Nl(b.rawId,b.providerId,b.email,b.displayName,b.photoUrl,b.phoneNumber)})):[]}(a),t=0;t<b.length;t++)Ql(this,b[t]);Xl(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new xl("userReloaded",{hd:a}))},n.Lc=function(a){return ai("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(a)},n.ub=function(a){var b=this,t=null;return uh(this,a.c(this.a,this.uid).then((function(e){return eh(b,e),t=rh(b,e,"reauthenticate"),b.i=null,b.reload()})).then((function(){return t})),!0)},n.Cc=function(a){return ai("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(a)},n.rb=function(a){var b=this,t=null;return uh(this,nh(this,a.providerId).then((function(){return b.I()})).then((function(t){return a.b(b.a,t)})).then((function(e){return t=rh(b,e,"link"),ih(b,e)})).then((function(){return t})))},n.Dc=function(a,b){var t=this;return uh(this,nh(this,"phone").then((function(){return hl(Ul(t),a,b,q(t.rb,t))})))},n.Mc=function(a,b){var t=this;return uh(this,Le().then((function(){return hl(Ul(t),a,b,q(t.ub,t))})),!0)},n.Cb=function(a){var b=this;return uh(this,this.I().then((function(t){return b.a.Cb(t,a)})).then((function(t){return eh(b,t),b.reload()})))},n.ed=function(a){var b=this;return uh(this,this.I().then((function(t){return a.b(b.a,t)})).then((function(t){return eh(b,t),b.reload()})))},n.Db=function(a){var b=this;return uh(this,this.I().then((function(t){return b.a.Db(t,a)})).then((function(t){return eh(b,t),b.reload()})))},n.Eb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return zl(this);var b=this;return uh(this,this.I().then((function(t){return b.a.Eb(t,{displayName:a.displayName,photoUrl:a.photoURL})})).then((function(t){return eh(b,t),Xl(b,"displayName",t.displayName||null),Xl(b,"photoURL",t.photoUrl||null),X(b.providerData,(function(t){"password"===t.providerId&&(ui(t,"displayName",b.displayName),ui(t,"photoURL",b.photoURL))})),Kl(b)})).then(Wl))},n.cd=function(a){var b=this;return uh(this,Zl(this).then((function(t){return et($l(b),a)?function(a,b,t){return vu(a,Vs,{idToken:b,deleteProvider:t})}(b.a,t,[a]).then((function(t){var e={};return X(t.providerUserInfo||[],(function(t){e[t.providerId]=!0})),X($l(b),(function(t){e[t]||Yl(b,t)})),e[Yo.PROVIDER_ID]||ui(b,"phoneNumber",null),Kl(b)})):Kl(b).then((function(){throw new P("no-such-provider")}))})))},n.delete=function(){var a=this;return uh(this,this.I().then((function(b){return vu(a.a,qs,{idToken:b})})).then((function(){a.dispatchEvent(new xl("userDeleted"))}))).then((function(){for(var b=0;b<a.N.length;b++)a.N[b].cancel("app-deleted");Dl(a,null),Ml(a,null),Fl(a,null),a.N=[],a.J=!0,Vl(a),ui(a,"refreshToken",null),a.b&&Wc(a.b,a)}))},n.Gb=function(a,b){return!!("linkViaPopup"==a&&(this.g||null)==b&&this.f||"reauthViaPopup"==a&&(this.g||null)==b&&this.f||"linkViaRedirect"==a&&(this.ga||null)==b||"reauthViaRedirect"==a&&(this.ga||null)==b)},n.na=function(a,b,t,e){"linkViaPopup"!=a&&"reauthViaPopup"!=a||e!=(this.g||null)||(t&&this.C?this.C(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(a,b){return"linkViaPopup"==a&&b==(this.g||null)?q(this.Lb,this):"reauthViaPopup"==a&&b==(this.g||null)?q(this.Mb,this):"linkViaRedirect"==a&&(this.ga||null)==b?q(this.Lb,this):"reauthViaRedirect"==a&&(this.ga||null)==b?q(this.Mb,this):null},n.Ec=function(a){var b=this;return oh(this,"linkViaPopup",a,(function(){return nh(b,a.providerId).then((function(){return Kl(b)}))}),!1)},n.Nc=function(a){return oh(this,"reauthViaPopup",a,(function(){return Le()}),!0)},n.Fc=function(a){var b=this;return ah(this,"linkViaRedirect",a,(function(){return nh(b,a.providerId)}),!1)},n.Oc=function(a){return ah(this,"reauthViaRedirect",a,(function(){return Le()}),!0)},n.Lb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return uh(this,this.I().then((function(g){return Ps(n.a,{requestUri:a,postBody:e,sessionId:b,idToken:g})})).then((function(g){return r=rh(n,g,"link"),ih(n,g)})).then((function(){return r})))},n.Mb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return uh(this,Le().then((function(){return Io(Rs(n.a,{requestUri:a,sessionId:b,postBody:e,tenantId:t}),n.uid)})).then((function(t){return r=rh(n,t,"reauthenticate"),eh(n,t),n.i=null,n.reload()})).then((function(){return r})),!0)},n.vb=function(a){var b=this,t=null;return uh(this,this.I().then((function(e){return t=e,void 0===a||kt(a)?{}:Zi(new Ki(a))})).then((function(e){return b.a.vb(t,e)})).then((function(t){if(b.email!=t)return b.reload()})).then((function(){})))},n.Fb=function(a,b){var t=this,e=null;return uh(this,this.I().then((function(t){return e=t,void 0===b||kt(b)?{}:Zi(new Ki(b))})).then((function(n){return t.a.Fb(e,a,n)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.jc=function(a){var b=null,t=this;return uh(this,a=Io(Le(a),t.uid).then((function(e){return b=rh(t,e,"reauthenticate"),eh(t,e),t.i=null,t.reload()})).then((function(){return b})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Ot(a,this.metadata.w()),X(this.providerData,(function(b){a.providerData.push(function(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&(b[t]=a[t]);return b}(b))})),Ot(a,this.S.w()),a};var hh={name:"redirectUser",F:"session"};function fh(a){return gc(a.b,hh,a.a)}function dh(a){this.a=a,this.b=dc(),this.c=null,this.f=function(a){var b=gh("local"),t=gh("session"),e=gh("none");return function(a,b,t){var e=vc(b,t),n=pc(a,b.F);return a.get(b,t).then((function(r){var g=null;try{g=Yr(f.localStorage.getItem(e))}catch(t){}if(g&&!r)return f.localStorage.removeItem(e),a.set(b,g,t);g&&r&&"localStorage"!=n.type&&f.localStorage.removeItem(e)}))}(a.b,b,a.a).then((function(){return a.b.get(t,a.a)})).then((function(n){return n?t:a.b.get(e,a.a).then((function(t){return t?e:a.b.get(b,a.a).then((function(g){return g?b:a.b.get(vh,a.a).then((function(t){return t?gh(t):b}))}))}))})).then((function(t){return a.c=t,ph(a,t.F)})).o((function(){a.c||(a.c=b)}))}(this),this.b.addListener(gh("local"),this.a,q(this.g,this))}function ph(a,b){var t,e=[];for(t in hc)hc[t]!==b&&e.push(gc(a.b,gh(hc[t]),a.a));return e.push(gc(a.b,vh,a.a)),function(a){return new Ae((function(b,t){var e=a.length,n=[];if(e)for(var r=function(p,t){e--,n[p]=t,0==e&&b(n)},g=function(p){t(p)},o=0;o<a.length;o++)Ue(a[o],C(r,o),g);else b(n)}))}(e)}dh.prototype.g=function(){var a=this,b=gh("local");bh(this,(function(){return Le().then((function(){return a.c&&"local"!=a.c.F?a.b.get(b,a.a):null})).then((function(t){if(t)return ph(a,"local").then((function(){a.c=b}))}))}))};var vh={name:"persistence",F:"session"};function gh(a){return{name:"authUser",F:a}}function mh(a,b){return bh(a,(function(){return a.b.set(a.c,b.w(),a.a)}))}function yh(a){return bh(a,(function(){return gc(a.b,a.c,a.a)}))}function _h(a,b,t){return bh(a,(function(){return a.b.get(a.c,a.a).then((function(e){return e&&b&&(e.authDomain=b),e&&t&&(e.emulatorConfig=t),ch(e||{})}))}))}function bh(a,b){return a.f=a.f.then(b,b),a.f}function wh(a){if(this.l=!1,ui(this,"settings",new em),ui(this,"app",a),!Ah(this).options||!Ah(this).options.apiKey)throw new P("invalid-api-key");a=e.default.SDK_VERSION?qr(e.default.SDK_VERSION):null,this.a=new us(Ah(this).options&&Ah(this).options.apiKey,U(D),a),this.P=[],this.s=[],this.N=[],this.Pa=e.default.INTERNAL.createSubscribe(q(this.zc,this)),this.W=void 0,this.ib=e.default.INTERNAL.createSubscribe(q(this.Ac,this)),Sh(this,null),this.i=new dh(Ah(this).options.apiKey+":"+Ah(this).name),this.D=new lh(Ah(this).options.apiKey+":"+Ah(this).name),this.$=Rh(this,function(a){var b=Ah(a).options.authDomain,t=function(a){var b=function(a,b){return a.b.get(hh,a.a).then((function(t){return t&&b&&(t.authDomain=b),ch(t||{})}))}(a.D,Ah(a).options.authDomain).then((function(t){return(a.m=t)&&(t.ha=a.D),fh(a.D)}));return Rh(a,b)}(a).then((function(){return _h(a.i,b,a.R)})).then((function(t){return t?(t.ha=a.D,a.m&&(a.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return mh(a.i,t).then((function(){return t}))})).o((function(e){return"auth/network-request-failed"==e.code?t:yh(a.i)}))):null})).then((function(t){Sh(a,t||null)}));return Rh(a,t)}(this)),this.h=Rh(this,function(a){return a.$.then((function(){return Oh(a)})).o((function(){})).then((function(){if(!a.l)return a.ja()})).o((function(){})).then((function(){if(!a.l){a.ba=!0;var b=a.i;b.b.addListener(gh("local"),b.a,a.ja)}}))}(this)),this.ba=!1,this.ja=q(this.Zc,this),this.Ba=q(this.da,this),this.qa=q(this.mc,this),this.za=q(this.wc,this),this.Aa=q(this.xc,this),this.b=null,function(a){var b=Ah(a).options.authDomain,t=Ah(a).options.apiKey;b&&Hr()&&(a.Oa=a.$.then((function(){if(!a.l){if(a.b=el(b,t,Ah(a).name,a.R),Gc(a.b,a),jh(a)&&Hl(jh(a)),a.m){Hl(a.m);var e=a.m;e.xa(a.la()),Dl(e,a),Ll(e=a.m,a.J),Fl(e,a),Rl(e=a.m,a.R),Ml(e,a),a.m=null}return a.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=q(this.delete,this),this.INTERNAL.logFramework=q(this.Gc,this),this.u=0,An.call(this),function(a){Object.defineProperty(a,"lc",{get:function(){return this.la()},set:function(b){this.xa(b)},enumerable:!1}),a.aa=null,Object.defineProperty(a,"ti",{get:function(){return this.T()},set:function(b){this.zb(b)},enumerable:!1}),a.S=null,Object.defineProperty(a,"emulatorConfig",{get:function(){if(this.R){var b=$n(this.R.url);b=hi({protocol:b.c,host:b.a,port:b.g,options:hi({disableWarnings:this.R.ec})})}else b=null;return b},enumerable:!1})}(this),this.J=[],this.R=null}function xh(a){sn.call(this,"languageCodeChanged"),this.h=a}function kh(a){sn.call(this,"emulatorConfigChanged"),this.c=a}function Ih(a){sn.call(this,"frameworkChanged"),this.f=a}function Th(a){return a.Oa||Fe(new P("auth-domain-config-required"))}function Oh(a){if(!Hr())return Fe(new P("operation-not-supported-in-this-environment"));var b=Th(a).then((function(){return a.b.ra()})).then((function(t){return t?hi(t):null}));return Rh(a,b)}function Eh(a,b){var t={};return t.apiKey=Ah(a).options.apiKey,t.authDomain=Ah(a).options.authDomain,t.appName=Ah(a).name,a.R&&(t.emulatorConfig=a.R),a.$.then((function(){return function(a,b,t,e){var n=new Pl(a,b);return t&&(n.ha=t),e&&Ll(n,e),n.reload().then((function(){return n}))}(t,b,a.D,a.Ga())})).then((function(t){return jh(a)&&t.uid==jh(a).uid?(Jl(jh(a),t),a.da(t)):(Sh(a,t),Hl(t),a.da(t))})).then((function(){Ph(a)}))}function Sh(a,b){jh(a)&&(function(a,b){it(a.W,(function(t){return t==b}))}(jh(a),a.Ba),wn(jh(a),"tokenChanged",a.qa),wn(jh(a),"userDeleted",a.za),wn(jh(a),"userInvalidated",a.Aa),Vl(jh(a))),b&&(b.W.push(a.Ba),yn(b,"tokenChanged",a.qa),yn(b,"userDeleted",a.za),yn(b,"userInvalidated",a.Aa),0<a.u&&ql(b)),ui(a,"currentUser",b),b&&(b.xa(a.la()),Dl(b,a),Ll(b,a.J),Fl(b,a),Rl(b,a.R),Ml(b,a))}function Ch(a,b){var t=null,e=null;return Rh(a,b.then((function(n){return t=Jo(n),e=co(n),Eh(a,n)}),(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=yl(t.w(),a,q(a.kc,a))),e||t})).then((function(){return hi({user:jh(a),credential:t,additionalUserInfo:e,operationType:"signIn"})})))}function Ah(a){return a.app}function jh(a){return a.currentUser}function Nh(a){return jh(a)&&jh(a)._lat||null}function Ph(a){if(a.ba){for(var b=0;b<a.s.length;b++)a.s[b]&&a.s[b](Nh(a));if(a.W!==a.getUid()&&a.N.length)for(a.W=a.getUid(),b=0;b<a.N.length;b++)a.N[b]&&a.N[b](Nh(a))}}function Rh(a,b){return a.P.push(b),b.oa((function(){nt(a.P,b)})),b}function Dh(){}function Mh(){this.a={},this.b=1e12}dh.prototype.yb=function(a){var b=null,t=this;return function(a){var b=new P("invalid-persistence-type"),t=new P("unsupported-persistence-type");t:{for(e in hc)if(hc[e]==a){var e=!0;break t}e=!1}if(!e||"string"!=typeof a)throw b;switch(Rr()){case"ReactNative":if("session"===a)throw t;break;case"Node":if("none"!==a)throw t;break;case"Worker":if("session"===a||!Hu()&&"none"!==a)throw t;break;default:if(!Kr()&&"none"!==a)throw t}}(a),bh(this,(function(){return a!=t.c.F?t.b.get(t.c,t.a).then((function(e){return b=e,ph(t,a)})).then((function(){if(t.c=gh(a),b)return t.b.set(t.c,b,t.a)})):Le()}))},j(wh,An),j(xh,sn),j(kh,sn),j(Ih,sn),(n=wh.prototype).yb=function(a){return Rh(this,a=this.i.yb(a))},n.xa=function(a){this.aa===a||this.l||(this.aa=a,vs(this.a,this.aa),this.dispatchEvent(new xh(this.la())))},n.la=function(){return this.aa},n.fd=function(){var a=f.navigator;this.xa(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},n.gd=function(a,b){if(!this.R){if(!/^https?:\/\//.test(a))throw new P("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(a){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),f.document&&!a&&Ar().then((function(){var b=f.document.createElement("div");b.innerText="Running in emulator mode. Do not use with production credentials.",b.style.position="fixed",b.style.width="100%",b.style.backgroundColor="#ffffff",b.style.border=".1em solid #000000",b.style.color="#b50000",b.style.bottom="0px",b.style.left="0px",b.style.margin="0px",b.style.zIndex=1e4,b.style.textAlign="center",b.classList.add("firebase-emulator-warning"),f.document.body.appendChild(b)}))})(b=!!b&&!!b.disableWarnings),this.R={url:a,ec:b},this.settings.jb=!0,gs(this.a,this.R),this.dispatchEvent(new kh(this.R))}},n.Gc=function(a){this.J.push(a),ys(this.a,e.default.SDK_VERSION?qr(e.default.SDK_VERSION,this.J):null),this.dispatchEvent(new Ih(this.J))},n.Ga=function(){return at(this.J)},n.zb=function(a){this.S===a||this.l||(this.S=a,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:Ah(this).options.apiKey,authDomain:Ah(this).options.authDomain,appName:Ah(this).name,currentUser:jh(this)&&jh(this).w()}},n.Gb=function(a,b){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==b&&!!this.f;default:return!1}},n.na=function(a,b,t,e){"signInViaPopup"==a&&this.g==e&&(t&&this.C?this.C(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.g==b&&this.f?q(this.ic,this):null},n.ic=function(a,b,t,e){var n=this,r={requestUri:a,postBody:e,sessionId:b,tenantId:t};return this.c&&(this.c.cancel(),this.c=null),n.$.then((function(){return Ch(n,Ns(n.a,r))}))},n.Xc=function(a){if(!Hr())return Fe(new P("operation-not-supported-in-this-environment"));var b=this,t=uo(a.providerId),n=Xr(),r=null;(!zr()||Nr())&&Ah(this).options.authDomain&&a.isOAuthProvider&&(r=Au(Ah(this).options.authDomain,Ah(this).options.apiKey,Ah(this).name,"signInViaPopup",a,null,n,e.default.SDK_VERSION||null,null,null,this.T(),this.R));var o=Er(r,t&&t.va,t&&t.ua);return Rh(this,t=Th(this).then((function(g){return Qc(g,o,"signInViaPopup",a,n,!!r,b.T())})).then((function(){return new Ae((function(g,t){b.na("signInViaPopup",null,new P("cancelled-popup-request"),b.g),b.f=g,b.C=t,b.g=n,b.c=Jc(b.b,b,"signInViaPopup",o,n)}))})).then((function(g){return o&&Or(o),g?hi(g):null})).o((function(g){throw o&&Or(o),g})))},n.Yc=function(a){if(!Hr())return Fe(new P("operation-not-supported-in-this-environment"));var b=this,t=Th(this).then((function(){return function(a){return bh(a,(function(){return a.b.set(vh,a.c.F,a.a)}))}(b.i)})).then((function(){return Xc(b.b,"signInViaRedirect",a,void 0,b.T())}));return Rh(this,t)},n.ra=function(){var a=this;return Oh(this).then((function(b){return a.b&&il(a.b.b),b})).o((function(b){throw a.b&&il(a.b.b),b}))},n.dd=function(a){if(!a)return Fe(new P("null-user"));if(this.S!=a.tenantId)return Fe(new P("tenant-id-mismatch"));var b=this,t={};t.apiKey=Ah(this).options.apiKey,t.authDomain=Ah(this).options.authDomain,t.appName=Ah(this).name;var e=function(a,b,t,e){var n=a.h,r={};return r[ls]=n.b&&n.b.toString(),r.refreshToken=n.a,b=new Pl(b||{apiKey:a.l,authDomain:a.s,appName:a.m},r),t&&(b.ha=t),e&&Ll(b,e),Jl(b,a),b}(a,t,b.D,b.Ga());return Rh(this,this.h.then((function(){if(Ah(b).options.apiKey!=a.l)return e.reload()})).then((function(){return jh(b)&&a.uid==jh(b).uid?(Jl(jh(b),a),b.da(a)):(Sh(b,e),Hl(e),b.da(e))})).then((function(){Ph(b)})))},n.Bb=function(){var a=this;return Rh(this,this.h.then((function(){return a.b&&il(a.b.b),jh(a)?(Sh(a,null),yh(a.i).then((function(){Ph(a)}))):Le()})))},n.Zc=function(){var a=this;return _h(this.i,Ah(this).options.authDomain).then((function(b){if(!a.l){var t;if(t=jh(a)&&b){t=jh(a).uid;var e=b.uid;t=null!=t&&""!==t&&null!=e&&""!==e&&t==e}if(t)return Jl(jh(a),b),jh(a).I();(jh(a)||b)&&(Sh(a,b),b&&(Hl(b),b.ha=a.D),a.b&&Gc(a.b,a),Ph(a))}}))},n.da=function(a){return mh(this.i,a)},n.mc=function(){Ph(this),this.da(jh(this))},n.wc=function(){this.Bb()},n.xc=function(){this.Bb()},n.kc=function(a){var b=this;return this.h.then((function(){return Ch(b,Le(a))}))},n.zc=function(a){var b=this;this.addAuthTokenListener((function(){a.next(jh(b))}))},n.Ac=function(a){var b=this;!function(a,b){a.N.push(b),Rh(a,a.h.then((function(){!a.l&&et(a.N,b)&&a.W!==a.getUid()&&(a.W=a.getUid(),b(Nh(a)))})))}(this,(function(){a.next(jh(b))}))},n.Ic=function(a,b,t){var e=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof a?a(jh(e)):"function"==typeof a.next&&a.next(jh(e))})),this.Pa(a,b,t)},n.Hc=function(a,b,t){var e=this;return this.ba&&Promise.resolve().then((function(){e.W=e.getUid(),"function"==typeof a?a(jh(e)):"function"==typeof a.next&&a.next(jh(e))})),this.ib(a,b,t)},n.nc=function(a){var b=this;return Rh(this,this.h.then((function(){return jh(b)?jh(b).I(a).then((function(t){return{accessToken:t}})):null})))},n.Tc=function(a){var b=this;return this.h.then((function(){return Ch(b,vu(b.a,cu,{token:a}))})).then((function(t){var e=t.user;return Xl(e,"isAnonymous",!1),b.da(e),t}))},n.Uc=function(a,b){var t=this;return this.h.then((function(){return Ch(t,vu(t.a,lu,{email:a,password:b}))}))},n.dc=function(a,b){var t=this;return this.h.then((function(){return Ch(t,vu(t.a,Fs,{email:a,password:b}))}))},n.ab=function(a){var b=this;return this.h.then((function(){return Ch(b,a.ka(b.a))}))},n.Sc=function(a){return ai("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(a)},n.Ab=function(){var a=this;return this.h.then((function(){var b=jh(a);if(b&&b.isAnonymous){var t=hi({providerId:null,isNewUser:!1});return hi({user:b,credential:null,additionalUserInfo:t,operationType:"signIn"})}return Ch(a,a.a.Ab()).then((function(t){var e=t.user;return Xl(e,"isAnonymous",!0),a.da(e),t}))}))},n.getUid=function(){return jh(this)&&jh(this).uid||null},n.cc=function(a){this.addAuthTokenListener(a),this.u++,0<this.u&&jh(this)&&ql(jh(this))},n.Pc=function(a){var b=this;X(this.s,(function(t){t==a&&b.u--})),0>this.u&&(this.u=0),0==this.u&&jh(this)&&Vl(jh(this)),this.removeAuthTokenListener(a)},n.addAuthTokenListener=function(a){var b=this;this.s.push(a),Rh(this,this.h.then((function(){b.l||et(b.s,a)&&a(Nh(b))})))},n.removeAuthTokenListener=function(a){it(this.s,(function(b){return b==a}))},n.delete=function(){this.l=!0;for(var a=0;a<this.P.length;a++)this.P[a].cancel("app-deleted");return this.P=[],this.i&&(a=this.i).b.removeListener(gh("local"),a.a,this.ja),this.b&&(Wc(this.b,this),il(this.b.b)),Promise.resolve()},n.hc=function(a){return Rh(this,function(a,b){return vu(a,Us,{identifier:b,continueUri:Gr()?xr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,a))},n.Bc=function(a){return!!Wo(a)},n.xb=function(a,b){var t=this;return Rh(this,Le().then((function(){var t=new Ki(b);if(!t.c)throw new P("argument-error",Wi+" must be true when sending sign in link to email");return Zi(t)})).then((function(e){return t.a.xb(a,e)})).then((function(){})))},n.jd=function(a){return this.Sa(a).then((function(b){return b.data.email}))},n.ob=function(a,b){return Rh(this,this.a.ob(a,b).then((function(){})))},n.Sa=function(a){return Rh(this,this.a.Sa(a).then((function(b){return new bi(b)})))},n.kb=function(a){return Rh(this,this.a.kb(a).then((function(){})))},n.wb=function(a,b){var t=this;return Rh(this,Le().then((function(){return void 0===b||kt(b)?{}:Zi(new Ki(b))})).then((function(e){return t.a.wb(a,e)})).then((function(){})))},n.Wc=function(a,b){return Rh(this,hl(this,a,b,q(this.ab,this)))},n.Vc=function(a,b){var t=this;return Rh(this,Le().then((function(){var e=b||xr(),n=Go(a,e);if(!(e=Wo(e)))throw new P("argument-error","Invalid email link!");if(e.tenantId!==t.T())throw new P("tenant-id-mismatch");return t.ab(n)})))},Dh.prototype.render=function(){},Dh.prototype.reset=function(){},Dh.prototype.getResponse=function(){},Dh.prototype.execute=function(){};var Lh=null;function Fh(a,b){return(b=Uh(b))&&a.a[b]||null}function Uh(a){return(a=void 0===a?1e12:a)?a.toString():null}function qh(a,b){this.g=!1,this.c=b,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ye(a);var t=this;this.i=function(){t.execute()},this.h?this.execute():yn(this.f,"click",this.i)}function Vh(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function Bh(){}function Kh(){}Mh.prototype.render=function(a,b){return this.a[this.b.toString()]=new qh(a,b),this.b++},Mh.prototype.reset=function(a){var b=Fh(this,a);a=Uh(a),b&&a&&(b.delete(),delete this.a[a])},Mh.prototype.getResponse=function(a){return(a=Fh(this,a))?a.getResponse():null},Mh.prototype.execute=function(a){(a=Fh(this,a))&&a.execute()},qh.prototype.getResponse=function(){return Vh(this),this.b},qh.prototype.execute=function(){Vh(this);var a=this;this.a||(this.a=setTimeout((function(){a.b=function(){for(var a=50,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}();var b=a.c.callback,t=a.c["expired-callback"];if(b)try{b(a.b)}catch(t){}a.a=setTimeout((function(){if(a.a=null,a.b=null,t)try{t()}catch(t){}a.h&&a.execute()}),6e4)}),500))},qh.prototype.delete=function(){Vh(this),this.g=!0,clearTimeout(this.a),this.a=null,wn(this.f,"click",this.i)},ui(Bh,"FACTOR_ID","phone"),Kh.prototype.g=function(){return Lh||(Lh=new Mh),Le(Lh)},Kh.prototype.c=function(){};var Hh=null;function Gh(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Wh=new St(Nt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),zh=new ti(3e4,6e4);Gh.prototype.g=function(a){var b=this;return new Ae((function(t,e){var n=setTimeout((function(){e(new P("network-request-failed"))}),zh.get());!f.grecaptcha||a!==b.f&&!b.b?(f[b.a]=function(){if(f.grecaptcha){b.f=a;var g=f.grecaptcha.render;f.grecaptcha.render=function(t,e){return t=g(t,e),b.b++,t},clearTimeout(n),t(f.grecaptcha)}else clearTimeout(n),e(new P("internal-error"));delete f[b.a]},Le(es(Mt(Wh,{onload:b.a,hl:a||""}))).o((function(){clearTimeout(n),e(new P("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(n),t(f.grecaptcha))}))},Gh.prototype.c=function(){this.b--};var $h=null;function Qh(a,b,t,e,n,r,g){if(ui(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=b,this.g=null,g?(Hh||(Hh=new Kh),g=Hh):($h||($h=new Gh),g=$h),this.m=g,this.a=t||{theme:"light",type:"image"},this.h=[],this.a[Jh])throw new P("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Zh],!f.document)throw new P("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ye(b)||!this.i&&ye(b).hasChildNodes())throw new P("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new us(a,r||null,n||null),this.u=e||function(){return null};var o=this;this.l=[];var c=this.a[Yh];this.a[Yh]=function(t){if(tf(o,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Br(c,f);"function"==typeof e&&e(t)}};var p=this.a[Xh];this.a[Xh]=function(){if(tf(o,null),"function"==typeof p)p();else if("string"==typeof p){var t=Br(p,f);"function"==typeof t&&t()}}}var Yh="callback",Xh="expired-callback",Jh="sitekey",Zh="size";function tf(a,b){for(var t=0;t<a.l.length;t++)try{a.l[t](b)}catch(t){}}function ef(a,b){return a.h.push(b),b.oa((function(){nt(a.h,b)})),b}function nf(a){if(a.J)throw new P("internal-error","RecaptchaVerifier instance has been destroyed.")}function rf(a,b,t){var n=!1;try{this.b=t||e.default.app()}catch(t){throw new P("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new P("invalid-api-key");t=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{n=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=e.default.SDK_VERSION?qr(e.default.SDK_VERSION,o):null,Qh.call(this,t,a,b,(function(){try{var g=r.b.auth().la()}catch(t){g=null}return g}),o,U(D),n)}function of(a,b,t,e){t:{t=Array.prototype.slice.call(t);for(var n=0,r=!1,g=0;g<b.length;g++)if(b[g].optional)r=!0;else{if(r)throw new P("internal-error","Argument validator encountered a required argument after an optional argument.");n++}if(r=b.length,t.length<n||r<t.length)e="Expected "+(n==r?1==n?"1 argument":n+" arguments":n+"-"+r+" arguments")+" but got "+t.length+".";else{for(n=0;n<t.length;n++)if(r=b[n].optional&&void 0===t[n],!b[n].M(t[n])&&!r){if(b=b[n],0>n||n>=af.length)throw new P("internal-error","Argument validator received an unsupported number of arguments.");t=af[n],e=(e?"":t+" argument ")+(b.name?'"'+b.name+'" ':"")+"must be "+b.K+".";break t}e=null}}if(e)throw new P("argument-error",a+" failed: "+e)}(n=Qh.prototype).Ia=function(){var a=this;return this.f?this.f:this.f=ef(this,Le().then((function(){if(Gr()&&!Pr())return Ar();throw new P("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return a.m.g(a.u())})).then((function(b){return a.g=b,vu(a.s,Js,{})})).then((function(b){a.a[Jh]=b.recaptchaSiteKey})).o((function(b){throw a.f=null,b})))},n.render=function(){nf(this);var a=this;return ef(this,this.Ia().then((function(){if(null===a.c){var b=a.v;if(!a.i){var t=ye(b);b=function(a,b,t){var e=arguments,n=document,r=String(e[0]),g=e[1];if(!me&&g&&(g.name||g.type)){if(r=["<",r],g.name&&r.push(' name="',Zt(g.name),'"'),g.type){r.push(' type="',Zt(g.type),'"');var o={};Ot(o,g),delete o.type,g=o}r.push(">"),r=r.join("")}return r=Ie(n,r),g&&("string"==typeof g?r.className=g:Array.isArray(g)?r.className=g.join(" "):_e(r,g)),2<e.length&&ke(n,r,e),r}("DIV"),t.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c})))},n.verify=function(){nf(this);var a=this;return ef(this,this.render().then((function(b){return new Ae((function(t){var e=a.g.getResponse(b);if(e)t(e);else{var n=function(e){e&&(function(a,b){it(a.l,(function(t){return t==b}))}(a,n),t(e))};a.l.push(n),a.i&&a.g.execute(a.c)}}))})))},n.reset=function(){nf(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){nf(this),this.J=!0,this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){a=ye(this.v);for(var b;b=a.firstChild;)a.removeChild(b)}},j(rf,Qh);var af="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function sf(a,b){return{name:a||"",K:"a valid string",optional:!!b,M:function(t){return"string"==typeof t}}}function uf(a,b){return{name:a||"",K:"a boolean",optional:!!b,M:function(t){return"boolean"==typeof t}}}function cf(a,b){return{name:a||"",K:"a valid object",optional:!!b,M:k}}function lf(a,b){return{name:a||"",K:"a function",optional:!!b,M:function(t){return"function"==typeof t}}}function hf(a,b){return{name:a||"",K:"null",optional:!!b,M:function(t){return null===t}}}function ff(a){return{name:a?a+"Credential":"credential",K:a?"a valid "+a+" credential":"a valid credential",optional:!1,M:function(b){if(!b)return!1;var t=!a||b.providerId===a;return!(!b.ka||!t)}}}function df(a,b){return k(a)&&"string"==typeof a.type&&a.type===b&&"function"==typeof a.Ha}function pf(a){return k(a)&&"string"==typeof a.uid}function vf(a,b,t,e){return{name:t||"",K:a.K+" or "+b.K,optional:!!e,M:function(t){return a.M(t)||b.M(t)}}}function gf(a,b){for(var t in b){var e=b[t].name;a[e]=_f(e,a[t],b[t].j)}}function mf(a,b){for(var t in b){var e=b[t].name;e!==t&&Object.defineProperty(a,e,{get:C((function(t){return this[t]}),t),set:C((function(t,e,g,n){of(t,[g],[n],!0),this[e]=n}),e,t,b[t].lb),enumerable:!0})}}function yf(a,b,t,e){a[b]=_f(b,t,e)}function _f(a,b,t){function e(){var g=Array.prototype.slice.call(arguments);return of(r,t,g),b.apply(this,g)}if(!t)return b;var n,r=function(a){return(a=a.split("."))[a.length-1]}(a);for(n in b)e[n]=b[n];for(n in b.prototype)e.prototype[n]=b.prototype[n];return e}gf(wh.prototype,{kb:{name:"applyActionCode",j:[sf("code")]},Sa:{name:"checkActionCode",j:[sf("code")]},ob:{name:"confirmPasswordReset",j:[sf("code"),sf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[sf("email"),sf("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[sf("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[sf("emailLink")]},Hc:{name:"onAuthStateChanged",j:[vf(cf(),lf(),"nextOrObserver"),lf("opt_error",!0),lf("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[vf(cf(),lf(),"nextOrObserver"),lf("opt_error",!0),lf("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[sf("email"),vf(cf("opt_actionCodeSettings",!0),hf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[sf("email"),cf("actionCodeSettings")]},yb:{name:"setPersistence",j:[sf("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ff()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[ff()]},Tc:{name:"signInWithCustomToken",j:[sf("token")]},Uc:{name:"signInWithEmailAndPassword",j:[sf("email"),sf("password")]},Vc:{name:"signInWithEmailLink",j:[sf("email"),sf("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[sf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[vf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(b){return!!(b&&b instanceof Pl)}},hf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[sf(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[sf("url"),cf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[sf("code")]}}),mf(wh.prototype,{lc:{name:"languageCode",lb:vf(sf(),hf(),"languageCode")},ti:{name:"tenantId",lb:vf(sf(),hf(),"tenantId")}}),wh.Persistence=hc,wh.Persistence.LOCAL="local",wh.Persistence.SESSION="session",wh.Persistence.NONE="none",gf(Pl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[uf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[uf("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ff()]},rb:{name:"linkWithCredential",j:[ff()]},Dc:{name:"linkWithPhoneNumber",j:[sf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ff()]},ub:{name:"reauthenticateWithCredential",j:[ff()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[sf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[vf(cf("opt_actionCodeSettings",!0),hf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[sf(null,!0)]},cd:{name:"unlink",j:[sf("provider")]},Cb:{name:"updateEmail",j:[sf("email")]},Db:{name:"updatePassword",j:[sf("password")]},ed:{name:"updatePhoneNumber",j:[ff("phone")]},Eb:{name:"updateProfile",j:[cf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[sf("email"),vf(cf("opt_actionCodeSettings",!0),hf(null,!0),"opt_actionCodeSettings",!0)]}}),gf(Mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),gf(Dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),gf(Ae.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),mf(em.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:uf("appVerificationDisabledForTesting")}}),gf(ll.prototype,{confirm:{name:"confirm",j:[sf("verificationCode")]}}),yf(ko,"fromJSON",(function(a){a="string"==typeof a?JSON.parse(a):a;for(var b,t=[Ao,Ko,$o,Eo],e=0;e<t.length;e++)if(b=t[e](a))return b;return null}),[vf(sf(),cf(),"json")]),yf(Ho,"credential",(function(a,b){return new Bo(a,b)}),[sf("email"),sf("password")]),gf(Bo.prototype,{w:{name:"toJSON",j:[sf(null,!0)]}}),gf(Ro.prototype,{Ca:{name:"addScope",j:[sf("scope")]},Ka:{name:"setCustomParameters",j:[cf("customOAuthParameters")]}}),yf(Ro,"credential",Do,[vf(sf(),cf(),"token")]),yf(Ho,"credentialWithLink",Go,[sf("email"),sf("emailLink")]),gf(Mo.prototype,{Ca:{name:"addScope",j:[sf("scope")]},Ka:{name:"setCustomParameters",j:[cf("customOAuthParameters")]}}),yf(Mo,"credential",Lo,[vf(sf(),cf(),"token")]),gf(Fo.prototype,{Ca:{name:"addScope",j:[sf("scope")]},Ka:{name:"setCustomParameters",j:[cf("customOAuthParameters")]}}),yf(Fo,"credential",Uo,[vf(sf(),vf(cf(),hf()),"idToken"),vf(sf(),hf(),"accessToken",!0)]),gf(qo.prototype,{Ka:{name:"setCustomParameters",j:[cf("customOAuthParameters")]}}),yf(qo,"credential",Vo,[vf(sf(),cf(),"token"),sf("secret",!0)]),gf(Po.prototype,{Ca:{name:"addScope",j:[sf("scope")]},credential:{name:"credential",j:[vf(sf(),vf(cf(),hf()),"optionsOrIdToken"),vf(sf(),hf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[cf("customOAuthParameters")]}}),gf(So.prototype,{w:{name:"toJSON",j:[sf(null,!0)]}}),gf(To.prototype,{w:{name:"toJSON",j:[sf(null,!0)]}}),yf(Yo,"credential",Xo,[sf("verificationId"),sf("verificationCode")]),gf(Yo.prototype,{gb:{name:"verifyPhoneNumber",j:[vf(sf(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?df(t.session,wo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?df(t.session,xo)&&pf(t.multiFactorHint):t.session&&t.multiFactorUid?df(t.session,xo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]}}),gf(zo.prototype,{w:{name:"toJSON",j:[sf(null,!0)]}}),gf(P.prototype,{toJSON:{name:"toJSON",j:[sf(null,!0)]}}),gf(oa.prototype,{toJSON:{name:"toJSON",j:[sf(null,!0)]}}),gf(ia.prototype,{toJSON:{name:"toJSON",j:[sf(null,!0)]}}),gf(ml.prototype,{toJSON:{name:"toJSON",j:[sf(null,!0)]}}),gf(pl.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(a){return!!a&&!!a.tb}}]}}),gf(kl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(a){return!!a&&!!a.tb}},sf("displayName",!0)]},bd:{name:"unenroll",j:[vf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:pf},sf(),"multiFactorInfoIdentifier")]}}),gf(rf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),yf(Ri,"parseLink",Bi,[sf("link")]),yf(Bh,"assertion",(function(a){return new wl(a)}),[ff("phone")]),function(){if(void 0===e.default||!e.default.INTERNAL||!e.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:xi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:wi,VERIFY_AND_CHANGE_EMAIL:ki,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:wh,AuthCredential:ko,Error:P};yf(a,"EmailAuthProvider",Ho,[]),yf(a,"FacebookAuthProvider",Ro,[]),yf(a,"GithubAuthProvider",Mo,[]),yf(a,"GoogleAuthProvider",Fo,[]),yf(a,"TwitterAuthProvider",qo,[]),yf(a,"OAuthProvider",Po,[sf("providerId")]),yf(a,"SAMLAuthProvider",No,[sf("providerId")]),yf(a,"PhoneAuthProvider",Yo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(a){return!!(a&&a instanceof wh)}}]),yf(a,"RecaptchaVerifier",rf,[vf(sf(),{name:"",K:"an HTML element",optional:!1,M:function(a){return!!(a&&a instanceof Element)}},"recaptchaContainer"),cf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(a){return!!(a&&a instanceof e.default.app.App)}}]),yf(a,"ActionCodeURL",Ri,[]),yf(a,"PhoneMultiFactorGenerator",Bh,[]),e.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(b){return new wh(b=b.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(b){b.getProvider("auth-internal").initialize()}}),e.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(b){return{getUid:q((b=b.getProvider("auth").getImmediate()).getUid,b),getToken:q(b.nc,b),addAuthTokenListener:q(b.cc,b),removeAuthTokenListener:q(b.Pc,b)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.default.registerVersion("@firebase/auth","0.16.8"),e.default.INTERNAL.extendNamespace({User:Pl})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(77))},773:function(t,e,n){"use strict";n(727);var r=n(3);e.a=Object(r.i)("spacer","div","v-spacer")},775:function(t,e,n){var content=n(776);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("197fcea4",content,!0,{sourceMap:!1})},776:function(t,e,n){var r=n(38)(!1);r.push([t.i,'.input-tel__input{padding:1.75rem!important}.input-tel__input,input.country-selector__input{background:#f6f6f6!important;border:none!important}input.country-selector__input{height:56px!important}.country-selector__country-flag{top:25px}.country-selector__toggle{top:calc(50% - 4px)!important}.theme--light.v-app-bar.v-toolbar.v-sheet,.theme--light.v-application,.theme--light.v-tabs-items{background-color:#eef3ff}.theme--light .cart-popup-contents{background-color:#fff}.theme--light.v-stepper{background:transparent}.theme--light.v-sheet.company-card,.theme--light.v-sheet.company-list-card,.theme--light.v-sheet.post-card,.theme--light.v-sheet.product-card,.theme--light.v-sheet.recent-news-card{background-color:#fff;border:7px solid hsla(0,0%,87.1%,.2)}.theme--light.v-skeleton-loader .v-skeleton-loader__actions,.theme--light.v-skeleton-loader .v-skeleton-loader__article,.theme--light.v-skeleton-loader .v-skeleton-loader__card-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__card-text,.theme--light.v-skeleton-loader .v-skeleton-loader__date-picker,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-text,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__table-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tbody,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tfoot,.theme--light.v-skeleton-loader .v-skeleton-loader__table-thead{background:transparent!important}.theme--light.slide-up{background-color:#eef3ff}.theme--dark.v-app-bar.v-toolbar.v-sheet,.theme--dark.v-application{background-color:#242a33}.theme--dark.v-navigation-drawer,.theme--dark.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:transparent}.theme--dark.v-bottom-navigation{background-color:#242a33}.theme--dark.v-tabs-items{background-color:transparent}.theme--dark .cart-popup-contents,.theme--dark.shipping-options,.theme--dark.v-sheet,.theme--dark.v-tabs-items,.v-dialog .theme--dark.v-sheet{background-color:#242a33}.theme--dark.v-sheet.company-card,.theme--dark.v-sheet.company-list-card,.theme--dark.v-sheet.post-card,.theme--dark.v-sheet.product-card,.theme--dark.v-sheet.recent-news-card{background-color:#fff;border:7px solid #15191e}.theme--dark.v-card>.v-card__text,.theme--dark.v-card>.v-card__title{color:#000}.theme--dark.slide-up{background-color:#242a33}.appBarHeight{height:calc(60px + env(safe-area-inset-top))}.mobileNotch{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)!important;height:inherit!important}header.mobileNotch{max-height:100px}.v-card__subtitle,.v-card__text{line-height:1.975rem;letter-spacing:0!important}.v-application .body-1{letter-spacing:0!important}.v-application .primary{background-color:#6fa7e0;border-color:#6fa7e0}.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:90%}.v-dialog--scrollable>.v-sheet{overflow-y:scroll!important}@media screen and (max-width:600px){.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:100%}}.admin-container{margin-top:0;margin-bottom:15px;padding-top:0;padding-left:0;padding-right:0}.avatar-elevation{border:4px solid #fff}.no-break{word-break:break-word}.v-application a{text-decoration:none;color:#6fa7e0!important}.missing-image{opacity:.25}.company-card .title,.post-card .name,.product-card .name{word-break:break-word;line-height:1.33em;letter-spacing:-.3px!important}.slide-left-enter-active,.slide-left-leave-active,.slide-right-enter-active,.slide-right-leave-active{transition-duration:.5s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.55,0,.1,1);overflow:hidden}.slide-left-enter,.slide-right-leave-active{opacity:0;transform:translate(2em)}.slide-left-leave-active,.slide-right-enter{opacity:0;transform:translate(-2em)}.phoneNumberInput .input-tel__input{border-right:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input,.phoneNumberInput .input-tel__input{font-size:16px!important;border-top:3px solid hsla(0,0%,46.3%,.05)!important;border-bottom:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input{border-left:3px solid hsla(0,0%,46.3%,.05)!important;height:62px!important}.phoneNumberInput .country-selector__toggle{top:20px!important}.phoneNumberInput .country-selector__country-flag{top:27px!important}.v-text-field--outlined fieldset{border-color:#f1f0ef!important}.country-selector.has-hint .country-selector__input,.country-selector.has-value .country-selector__input{padding-top:0!important}.alertBtn{font-size:1.45rem;font-weight:600;letter-spacing:1px;text-transform:capitalize;color:#fff}.borderButton,.borderInput{border:3px solid #f1f0ef;background-color:#f8f9fa}details>summary{font-size:17px;margin:10px 0;border-bottom:1px solid #fefefe;padding:15px 0 30px}.v-list--rounded.v-list--three-line .v-list-item,.v-list--rounded.v-list--three-line .v-list-item:before,.v-list--rounded.v-list--three-line .v-list-item>.v-ripple__container{border-radius:32px!important}.v-list--rounded .v-list-item,.v-list--rounded .v-list-item:before,.v-list--rounded .v-list-item>.v-ripple__container{border-radius:15px!important}.myshout .theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled){border:2px solid #f0f0ef;background:#f9f9f9;margin-bottom:15px}.myshout .v-list-item__title{font-size:1rem;font-weight:600}.myshout .v-list-item__subtitle{font-size:.9rem}.myshout .v-list-item__icon{width:80px;height:80px;border-radius:20px;text-align:center}.myshout .v-list-item__icon .v-icon{font-size:33px;width:100%}.v-application--is-ltr .myshout .v-list-item__action:first-child,.v-application--is-ltr .myshout .v-list-item__icon:first-child{margin-right:10px}.v-chip:not(.v-chip--outlined).accent,.v-chip:not(.v-chip--outlined).error,.v-chip:not(.v-chip--outlined).info,.v-chip:not(.v-chip--outlined).primary,.v-chip:not(.v-chip--outlined).secondary,.v-chip:not(.v-chip--outlined).success,.v-chip:not(.v-chip--outlined).warning{color:#fff}.theme--light.v-chip{border-color:rgba(0,0,0,.12);color:rgba(0,0,0,.87)}.theme--light.v-chip:not(.v-chip--active){background:#e0e0e0}.theme--light.v-chip:hover:before{opacity:.04}.theme--light.v-chip--active:before,.theme--light.v-chip--active:hover:before,.theme--light.v-chip:focus:before{opacity:.12}.theme--light.v-chip--active:focus:before{opacity:.16}.theme--dark.v-chip{border-color:hsla(0,0%,100%,.12);color:#fff}.theme--dark.v-chip:not(.v-chip--active){background:#555}.theme--dark.v-chip:hover:before{opacity:.08}.theme--dark.v-chip--active:before,.theme--dark.v-chip--active:hover:before,.theme--dark.v-chip:focus:before{opacity:.24}.theme--dark.v-chip--active:focus:before{opacity:.32}.v-chip{align-items:center;cursor:default;display:inline-flex;line-height:20px;max-width:100%;outline:none;overflow:hidden;padding:0 12px;position:relative;text-decoration:none;transition-duration:.28s;transition-property:box-shadow,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);vertical-align:middle;white-space:nowrap}.v-chip:before{background-color:currentColor;bottom:0;border-radius:inherit;content:"";left:0;opacity:0;position:absolute;pointer-events:none;right:0;top:0}.v-chip .v-avatar{height:24px!important;min-width:24px!important;width:24px!important}.v-chip .v-icon{font-size:24px}.v-application--is-ltr .v-chip .v-avatar--left,.v-application--is-ltr .v-chip .v-icon--left{margin-left:-6px;margin-right:6px}.v-application--is-ltr .v-chip .v-avatar--right,.v-application--is-ltr .v-chip .v-icon--right,.v-application--is-rtl .v-chip .v-avatar--left,.v-application--is-rtl .v-chip .v-icon--left{margin-left:6px;margin-right:-6px}.v-application--is-rtl .v-chip .v-avatar--right,.v-application--is-rtl .v-chip .v-icon--right{margin-left:-6px;margin-right:6px}.v-chip:not(.v-chip--no-color) .v-icon{color:inherit}.v-chip .v-chip__close.v-icon{font-size:18px;max-height:18px;max-width:18px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-application--is-ltr .v-chip .v-chip__close.v-icon.v-icon--right{margin-right:-4px}.v-application--is-rtl .v-chip .v-chip__close.v-icon.v-icon--right{margin-left:-4px}.v-chip .v-chip__close.v-icon:active,.v-chip .v-chip__close.v-icon:focus,.v-chip .v-chip__close.v-icon:hover{opacity:.72}.v-chip .v-chip__content{align-items:center;display:inline-flex;height:100%;max-width:100%}.v-chip--active .v-icon{color:inherit}.v-chip--link:before{transition:opacity .3s cubic-bezier(.25,.8,.5,1)}.v-chip--link:focus:before{opacity:.32}.v-chip--clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-chip--clickable:active{box-shadow:0 3px 1px -2px rgba(0,0,0,.1),0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.06)}.v-chip--disabled{opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-chip__filter{max-width:24px}.v-chip__filter.v-icon{color:inherit}.v-chip__filter.expand-x-transition-enter,.v-chip__filter.expand-x-transition-leave-active{margin:0}.v-chip--pill .v-chip__filter{margin:0 16px 0 0}.v-chip--pill .v-avatar{height:32px!important;width:32px!important}.v-application--is-ltr .v-chip--pill .v-avatar--left{margin-left:-12px}.v-application--is-ltr .v-chip--pill .v-avatar--right,.v-application--is-rtl .v-chip--pill .v-avatar--left{margin-right:-12px}.v-application--is-rtl .v-chip--pill .v-avatar--right{margin-left:-12px}.v-chip--label{border-radius:.25rem!important}.v-chip.v-chip--outlined{border-width:thin;border-style:solid}.v-chip.v-chip--outlined.v-chip--active:before{opacity:.08}.v-chip.v-chip--outlined .v-icon{color:inherit}.v-chip.v-chip--outlined.v-chip.v-chip{background-color:transparent!important}.v-chip.v-chip--selected{background:transparent}.v-chip.v-chip--selected:after{opacity:.28}.v-chip.v-size--x-small{border-radius:8px;font-size:10px;height:16px}.v-chip.v-size--small{border-radius:12px;font-size:12px;height:24px}.v-chip.v-size--default{border-radius:16px;font-size:14px;height:32px}.v-chip.v-size--large{border-radius:27px;font-size:16px;height:54px}.v-chip.v-size--x-large{border-radius:33px;font-size:18px;height:66px}',""]),t.exports=r},777:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c}));var r=n(771),o=n(3),c=Object(o.i)("v-toolbar__title"),l=Object(o.i)("v-toolbar__items");r.a},778:function(t,e,n){var content=n(779);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("2e2bc7da",content,!0,{sourceMap:!1})},779:function(t,e,n){var r=n(38)(!1);r.push([t.i,'.input-tel__input{padding:1.75rem!important}.input-tel__input,input.country-selector__input{background:#f6f6f6!important;border:none!important}input.country-selector__input{height:56px!important}.country-selector__country-flag{top:25px}.country-selector__toggle{top:calc(50% - 4px)!important}.theme--light.v-app-bar.v-toolbar.v-sheet,.theme--light.v-application,.theme--light.v-tabs-items{background-color:#eef3ff}.theme--light .cart-popup-contents{background-color:#fff}.theme--light.v-stepper{background:transparent}.theme--light.v-sheet.company-card,.theme--light.v-sheet.company-list-card,.theme--light.v-sheet.post-card,.theme--light.v-sheet.product-card,.theme--light.v-sheet.recent-news-card{background-color:#fff;border:7px solid hsla(0,0%,87.1%,.2)}.theme--light.v-skeleton-loader .v-skeleton-loader__actions,.theme--light.v-skeleton-loader .v-skeleton-loader__article,.theme--light.v-skeleton-loader .v-skeleton-loader__card-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__card-text,.theme--light.v-skeleton-loader .v-skeleton-loader__date-picker,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-text,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__table-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tbody,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tfoot,.theme--light.v-skeleton-loader .v-skeleton-loader__table-thead{background:transparent!important}.theme--light.slide-up{background-color:#eef3ff}.theme--dark.v-app-bar.v-toolbar.v-sheet,.theme--dark.v-application{background-color:#242a33}.theme--dark.v-navigation-drawer,.theme--dark.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:transparent}.theme--dark.v-bottom-navigation{background-color:#242a33}.theme--dark.v-tabs-items{background-color:transparent}.theme--dark .cart-popup-contents,.theme--dark.shipping-options,.theme--dark.v-sheet,.theme--dark.v-tabs-items,.v-dialog .theme--dark.v-sheet{background-color:#242a33}.theme--dark.v-sheet.company-card,.theme--dark.v-sheet.company-list-card,.theme--dark.v-sheet.post-card,.theme--dark.v-sheet.product-card,.theme--dark.v-sheet.recent-news-card{background-color:#fff;border:7px solid #15191e}.theme--dark.v-card>.v-card__text,.theme--dark.v-card>.v-card__title{color:#000}.theme--dark.slide-up{background-color:#242a33}.appBarHeight{height:calc(60px + env(safe-area-inset-top))}.mobileNotch{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)!important;height:inherit!important}header.mobileNotch{max-height:100px}.v-card__subtitle,.v-card__text{line-height:1.975rem;letter-spacing:0!important}.v-application .body-1{letter-spacing:0!important}.v-application .primary{background-color:#6fa7e0;border-color:#6fa7e0}.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:90%}.v-dialog--scrollable>.v-sheet{overflow-y:scroll!important}@media screen and (max-width:600px){.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:100%}}.admin-container{margin-top:0;margin-bottom:15px;padding-top:0;padding-left:0;padding-right:0}.avatar-elevation{border:4px solid #fff}.no-break{word-break:break-word}.v-application a{text-decoration:none;color:#6fa7e0!important}.missing-image{opacity:.25}.company-card .title,.post-card .name,.product-card .name{word-break:break-word;line-height:1.33em;letter-spacing:-.3px!important}.slide-left-enter-active,.slide-left-leave-active,.slide-right-enter-active,.slide-right-leave-active{transition-duration:.5s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.55,0,.1,1);overflow:hidden}.slide-left-enter,.slide-right-leave-active{opacity:0;transform:translate(2em)}.slide-left-leave-active,.slide-right-enter{opacity:0;transform:translate(-2em)}.phoneNumberInput .input-tel__input{border-right:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input,.phoneNumberInput .input-tel__input{font-size:16px!important;border-top:3px solid hsla(0,0%,46.3%,.05)!important;border-bottom:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input{border-left:3px solid hsla(0,0%,46.3%,.05)!important;height:62px!important}.phoneNumberInput .country-selector__toggle{top:20px!important}.phoneNumberInput .country-selector__country-flag{top:27px!important}.v-text-field--outlined fieldset{border-color:#f1f0ef!important}.country-selector.has-hint .country-selector__input,.country-selector.has-value .country-selector__input{padding-top:0!important}.alertBtn{font-size:1.45rem;font-weight:600;letter-spacing:1px;text-transform:capitalize;color:#fff}.borderButton,.borderInput{border:3px solid #f1f0ef;background-color:#f8f9fa}details>summary{font-size:17px;margin:10px 0;border-bottom:1px solid #fefefe;padding:15px 0 30px}.v-list--rounded.v-list--three-line .v-list-item,.v-list--rounded.v-list--three-line .v-list-item:before,.v-list--rounded.v-list--three-line .v-list-item>.v-ripple__container{border-radius:32px!important}.v-list--rounded .v-list-item,.v-list--rounded .v-list-item:before,.v-list--rounded .v-list-item>.v-ripple__container{border-radius:15px!important}.myshout .theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled){border:2px solid #f0f0ef;background:#f9f9f9;margin-bottom:15px}.myshout .v-list-item__title{font-size:1rem;font-weight:600}.myshout .v-list-item__subtitle{font-size:.9rem}.myshout .v-list-item__icon{width:80px;height:80px;border-radius:20px;text-align:center}.myshout .v-list-item__icon .v-icon{font-size:33px;width:100%}.v-application--is-ltr .myshout .v-list-item__action:first-child,.v-application--is-ltr .myshout .v-list-item__icon:first-child{margin-right:10px}.v-input--selection-controls{margin-top:16px;padding-top:4px}.v-input--selection-controls>.v-input__append-outer,.v-input--selection-controls>.v-input__prepend-outer{margin-top:0;margin-bottom:0}.v-input--selection-controls:not(.v-input--hide-details)>.v-input__slot{margin-bottom:12px}.v-input--selection-controls .v-input__slot,.v-input--selection-controls .v-radio{cursor:pointer}.v-input--selection-controls .v-input__slot>.v-label,.v-input--selection-controls .v-radio>.v-label{align-items:center;display:inline-flex;flex:1 1 auto;height:auto}.v-input--selection-controls__input{color:inherit;display:inline-flex;flex:0 0 auto;height:24px;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1);transition-property:transform;width:24px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-input--selection-controls__input .v-icon{width:100%}.v-application--is-ltr .v-input--selection-controls__input{margin-right:8px}.v-application--is-rtl .v-input--selection-controls__input{margin-left:8px}.v-input--selection-controls__input input[role=checkbox],.v-input--selection-controls__input input[role=radio],.v-input--selection-controls__input input[role=switch]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-input--selection-controls__input+.v-label{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-input--selection-controls__ripple{border-radius:50%;cursor:pointer;height:34px;position:absolute;transition:inherit;width:34px;left:-12px;top:calc(50% - 24px);margin:7px}.v-input--selection-controls__ripple:before{border-radius:inherit;bottom:0;content:"";position:absolute;opacity:.2;left:0;right:0;top:0;transform-origin:center center;transform:scale(.2);transition:inherit}.v-input--selection-controls__ripple>.v-ripple__container{transform:scale(1.2)}.v-input--selection-controls.v-input--dense .v-input--selection-controls__ripple{width:28px;height:28px;left:-9px}.v-input--selection-controls.v-input--dense:not(.v-input--switch) .v-input--selection-controls__ripple{top:calc(50% - 21px)}.v-input--selection-controls.v-input{flex:0 1 auto}.v-input--selection-controls.v-input--is-focused .v-input--selection-controls__ripple:before,.v-input--selection-controls .v-radio--is-focused .v-input--selection-controls__ripple:before{background:currentColor;transform:scale(1.2)}.v-input--selection-controls.v-input--is-disabled:not(.v-input--indeterminate) .v-icon{color:inherit}.v-input--selection-controls.v-input--is-disabled:not(.v-input--is-readonly){pointer-events:none}.v-input--selection-controls__input:hover .v-input--selection-controls__ripple:before{background:currentColor;transform:scale(1.2);transition:none}',""]),t.exports=r},781:function(t,e,n){"use strict";n(4),n(85),n(19);var r=n(770),o=n(127),c=n(1).default.extend({name:"rippleable",directives:{ripple:o.a},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(data.staticClass="v-input--selection-controls__ripple",data.directives=data.directives||[],data.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",data)):null}}}),l=n(283),h=n(28);function f(t){t.preventDefault()}e.a=Object(h.a)(r.a,c,l.a).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,input=this.internalValue;return this.isMultiple?!!Array.isArray(input)&&input.some((function(n){return t.valueComparator(n,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,input):Boolean(input):this.valueComparator(input,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var label=r.a.options.methods.genLabel.call(this);return label?(label.data.on={click:f},label):label},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:f},ref:"input"})},onClick:function(t){this.onChange(),this.$emit("click",t)},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,input=this.internalValue;if(this.isMultiple){Array.isArray(input)||(input=[]);var n=input.length;(input=input.filter((function(n){return!t.valueComparator(n,e)}))).length===n&&input.push(e)}else input=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(input,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(input,e)?null:e:!input;this.validate(!0,input),this.internalValue=input,this.hasColor=input}},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown:function(t){}}})},782:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return yr})),n.d(e,"b",(function(){return wr})),n.d(e,"c",(function(){return _r})),n.d(e,"d",(function(){return kr})),n.d(e,"e",(function(){return xr})),n.d(e,"f",(function(){return Ir})),n.d(e,"g",(function(){return Tr})),n.d(e,"h",(function(){return gr})),n.d(e,"i",(function(){return mr}));var r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)};function o(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function d(){}function v(a){var b=typeof a;return"array"==(b="object"!=b?b:a?Array.isArray(a)?"array":b:"null")||"object"==b&&"number"==typeof a.length}function p(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function _(a,b,t){return a.call.apply(a.bind,arguments)}function w(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function q(a,b,t){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function x(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}function k(a,b){function t(){}t.prototype=b.prototype,a.Z=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.Vb=function(t,e,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[e].apply(t,r)}}function I(){this.s=this.s,this.o=this.o}var T={};I.prototype.s=!1,I.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var a=function(a){return Object.prototype.hasOwnProperty.call(a,m)&&a[m]||(a[m]=++y)}(this);delete T[a]}},I.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var O=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},E=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function S(a){return Array.prototype.concat.apply([],arguments)}function C(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function A(a){return/^[\s\xa0]*$/.test(a)}var j,N=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function P(a,b){return-1!=a.indexOf(b)}function R(a,b){return a<b?-1:a>b?1:0}t:{var D=f.navigator;if(D){var M=D.userAgent;if(M){j=M;break t}}j=""}function L(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function F(a){var b={};for(var t in a)b[t]=a[t];return b}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<U.length;r++)t=U[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function B(a){return B[" "](a),a}B[" "]=d;var K,a,H=P(j,"Opera"),G=P(j,"Trident")||P(j,"MSIE"),W=P(j,"Edge"),z=W||G,$=P(j,"Gecko")&&!(P(j.toLowerCase(),"webkit")&&!P(j,"Edge"))&&!(P(j,"Trident")||P(j,"MSIE"))&&!P(j,"Edge"),Q=P(j.toLowerCase(),"webkit")&&!P(j,"Edge");function Y(){var a=f.document;return a?a.documentMode:void 0}t:{var X="",J=(a=j,$?/rv:([^\);]+)(\)|;)/.exec(a):W?/Edge\/([\d\.]+)/.exec(a):G?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Q?/WebKit\/(\S+)/.exec(a):H?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(J&&(X=J?J[1]:""),G){var Z=Y();if(null!=Z&&Z>parseFloat(X)){K=String(Z);break t}}K=X}var tt,et={};function nt(){return function(a){var b=et;return Object.prototype.hasOwnProperty.call(b,9)?b[9]:b[9]=a(9)}((function(){for(var a=0,b=N(String(K)).split("."),t=N("9").split("."),e=Math.max(b.length,t.length),n=0;0==a&&n<e;n++){var r=b[n]||"",o=t[n]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;a=R(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||R(0==r[2].length,0==o[2].length)||R(r[2],o[2]),r=r[3],o=o[3]}while(0==a)}return 0<=a}))}if(f.document&&G){var it=Y();tt=it||(parseInt(K,10)||void 0)}else tt=void 0;var ot=tt,at=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{f.addEventListener("test",d,b),f.removeEventListener("test",d,b)}catch(t){}return a}();function st(a,b){this.type=a,this.g=this.target=b,this.defaultPrevented=!1}function ut(a,b){if(st.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=b,b=a.relatedTarget){if($){t:{try{B(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ut.Z.h.call(this)}}st.prototype.h=function(){this.defaultPrevented=!0},k(ut,st);var ct={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.Z.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var lt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function ft(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.ia=n,this.key=++ht,this.ca=this.fa=!1}function pt(a){a.ca=!0,a.listener=null,a.proxy=null,a.src=null,a.ia=null}function vt(a){this.src=a,this.g={},this.h=0}function gt(a,b){var t=b.type;if(t in a.g){var e,n=a.g[t],r=O(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(pt(b),0==a.g[t].length&&(delete a.g[t],a.h--))}}function mt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.ca&&r.listener==b&&r.capture==!!t&&r.ia==e)return n}return-1}vt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.g[r])||(a=this.g[r]=[],this.h++);var o=mt(a,b,e,n);return-1<o?(b=a[o],t||(b.fa=!1)):((b=new ft(b,this.src,r,!!e,n)).fa=t,a.push(b)),b};var yt="closure_lm_"+(1e6*Math.random()|0),_t={};function bt(a,b,t,e,n){if(e&&e.once)return xt(a,b,t,e,n);if(Array.isArray(b)){for(var r=0;r<b.length;r++)bt(a,b[r],t,e,n);return null}return t=Ct(t),a&&a[lt]?a.N(b,t,p(e)?!!e.capture:!!e,n):wt(a,b,t,!1,e,n)}function wt(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var o=p(n)?!!n.capture:!!n,c=Et(a);if(c||(a[yt]=c=new vt(a)),(t=c.add(b,t,e,o,r)).proxy)return t;if(e=function(){function a(t){return b.call(a.src,a.listener,t)}var b=Ot;return a}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)at||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(Tt(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function xt(a,b,t,e,n){if(Array.isArray(b)){for(var r=0;r<b.length;r++)xt(a,b[r],t,e,n);return null}return t=Ct(t),a&&a[lt]?a.O(b,t,p(e)?!!e.capture:!!e,n):wt(a,b,t,!0,e,n)}function kt(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)kt(a,b[r],t,e,n);else e=p(e)?!!e.capture:!!e,t=Ct(t),a&&a[lt]?(a=a.i,(b=String(b).toString())in a.g&&(-1<(t=mt(r=a.g[b],t,e,n))&&(pt(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete a.g[b],a.h--)))):a&&(a=Et(a))&&(b=a.g[b.toString()],a=-1,b&&(a=mt(b,t,e,n)),(t=-1<a?b[a]:null)&&It(t))}function It(a){if("number"!=typeof a&&a&&!a.ca){var b=a.src;if(b&&b[lt])gt(b.i,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(Tt(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=Et(b))?(gt(t,a),0==t.h&&(t.src=null,b[yt]=null)):pt(a)}}}function Tt(a){return a in _t?_t[a]:_t[a]="on"+a}function Ot(a,b){if(a.ca)a=!0;else{b=new ut(b,this);var t=a.listener,e=a.ia||a.src;a.fa&&It(a),a=t.call(e,b)}return a}function Et(a){return(a=a[yt])instanceof vt?a:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(a){return"function"==typeof a?a:(a[St]||(a[St]=function(b){return a.handleEvent(b)}),a[St])}function At(){I.call(this),this.i=new vt(this),this.P=this,this.I=null}function jt(a,b){var t,e=a.I;if(e)for(t=[];e;e=e.I)t.push(e);if(a=a.P,e=b.type||b,"string"==typeof b)b=new st(b,a);else if(b instanceof st)b.target=b.target||a;else{var n=b;V(b=new st(e,a),n)}if(n=!0,t)for(var r=t.length-1;0<=r;r--){var o=b.g=t[r];n=Nt(o,e,!0,b)&&n}if(n=Nt(o=b.g=a,e,!0,b)&&n,n=Nt(o,e,!1,b)&&n,t)for(r=0;r<t.length;r++)n=Nt(o=b.g=t[r],e,!1,b)&&n}function Nt(a,b,t,e){if(!(b=a.i.g[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.ca&&o.capture==t){var c=o.listener,u=o.ia||o.src;o.fa&&gt(a.i,o),n=!1!==c.call(u,e)&&n}}return n&&!e.defaultPrevented}k(At,I),At.prototype[lt]=!0,At.prototype.removeEventListener=function(a,b,t,e){kt(this,a,b,t,e)},At.prototype.M=function(){if(At.Z.M.call(this),this.i){var t,a=this.i;for(t in a.g){for(var e=a.g[t],n=0;n<e.length;n++)pt(e[n]);delete a.g[t],a.h--}}this.I=null},At.prototype.N=function(a,b,t,e){return this.i.add(String(a),b,!1,t,e)},At.prototype.O=function(a,b,t,e){return this.i.add(String(a),b,!0,t,e)};var Pt=f.JSON.stringify;function Rt(){var a=Bt,b=null;return a.g&&(b=a.g,a.g=a.g.next,a.g||(a.h=null),b.next=null),b}var Dt,Mt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(a,b){var t=Lt.get();t.set(a,b),this.h?this.h.next=t:this.g=t,this.h=t},t}(),Lt=new(function(){function t(a,b){this.i=a,this.j=b,this.h=0,this.g=null}return t.prototype.get=function(){var a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a},t}())((function(){return new Ft}),(function(a){return a.reset()})),Ft=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(a,b){this.h=a,this.g=b,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ut(a){f.setTimeout((function(){throw a}),0)}function qt(a,b){Dt||function(){var a=f.Promise.resolve(void 0);Dt=function(){a.then(Kt)}}(),Vt||(Dt(),Vt=!0),Bt.add(a,b)}var Vt=!1,Bt=new Mt;function Kt(){for(var a;a=Rt();){try{a.h.call(a.g)}catch(t){Ut(t)}var b=Lt;b.j(a),100>b.h&&(b.h++,a.next=b.g,b.g=a)}Vt=!1}function Ht(a,b){At.call(this),this.h=a||1,this.g=b||f,this.j=q(this.kb,this),this.l=Date.now()}function Gt(a){a.da=!1,a.S&&(a.g.clearTimeout(a.S),a.S=null)}function Wt(a,b,t){if("function"==typeof a)t&&(a=q(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=q(a.handleEvent,a)}return 2147483647<Number(b)?-1:f.setTimeout(a,b||0)}function zt(a){a.g=Wt((function(){a.g=null,a.i&&(a.i=!1,zt(a))}),a.j);var b=a.h;a.h=null,a.m.apply(null,b)}k(Ht,At),(c=Ht.prototype).da=!1,c.S=null,c.kb=function(){if(this.da){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-a):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jt(this,"tick"),this.da&&(Gt(this),this.start()))}},c.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},c.M=function(){Ht.Z.M.call(this),Gt(this),delete this.g};var $t=function(t){function e(a,b){var e=t.call(this)||this;return e.m=a,e.j=b,e.h=null,e.i=!1,e.g=null,e}return function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}(e,t),e.prototype.l=function(a){this.h=arguments,this.g?this.i=!0:zt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(I);function Qt(a){I.call(this),this.h=a,this.g={}}k(Qt,I);var Yt=[];function Xt(a,b,t,e){Array.isArray(t)||(t&&(Yt[0]=t.toString()),t=Yt);for(var n=0;n<t.length;n++){var r=bt(b,t[n],e||a.handleEvent,!1,a.h||a);if(!r)break;a.g[r.key]=r}}function Jt(a){L(a.g,(function(b,t){this.g.hasOwnProperty(t)&&It(b)}),a),a.g={}}function Zt(){this.g=!0}function te(a,b,t,e){a.info((function(){return"XMLHTTP TEXT ("+b+"): "+function(a,b){if(!a.g)return b;if(!b)return null;try{var t=JSON.parse(b);if(t)for(a=0;a<t.length;a++)if(Array.isArray(t[a])){var e=t[a];if(!(2>e.length)){var n=e[1];if(Array.isArray(n)&&!(1>n.length)){var r=n[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<n.length;o++)n[o]=""}}}return Pt(t)}catch(t){return b}}(a,t)+(e?" "+e:"")}))}Qt.prototype.M=function(){Qt.Z.M.call(this),Jt(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zt.prototype.Aa=function(){this.g=!1},Zt.prototype.info=function(){};var ee={},ne=null;function re(){return ne=ne||new At}function ie(a){st.call(this,ee.Ma,a)}function oe(a){var b=re();jt(b,new ie(b,a))}function ae(a,b){st.call(this,ee.STAT_EVENT,a),this.stat=b}function se(a){var b=re();jt(b,new ae(b,a))}function ue(a,b){st.call(this,ee.Na,a),this.size=b}function ce(a,b){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){a()}),b)}ee.Ma="serverreachability",k(ie,st),ee.STAT_EVENT="statevent",k(ae,st),ee.Na="timingevent",k(ue,st);var le={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},he={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function fe(){}function de(a){return a.h||(a.h=a.i())}function pe(){}fe.prototype.h=null;var ve,ge={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function me(){st.call(this,"d")}function ye(){st.call(this,"c")}function _e(){}function be(a,b,t,e){this.l=a,this.j=b,this.m=t,this.X=e||1,this.V=new Qt(this),this.P=xe,a=z?125:void 0,this.W=new Ht(a),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}k(me,st),k(ye,st),k(_e,fe),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},ve=new _e;var xe=45e3,ke={},Ie={};function Te(a,b,t){a.K=1,a.v=$e(Be(b)),a.s=t,a.U=!0,Oe(a,null)}function Oe(a,b){a.F=Date.now(),Ae(a),a.A=Be(a.v);var t=a.A,e=a.X;Array.isArray(e)||(e=[String(e)]),sn(t.h,"t",e),a.C=0,t=a.l.H,a.h=new we,a.g=ur(a.l,t?b:null,!a.s),0<a.O&&(a.L=new $t(q(a.Ia,a,a.g),a.O)),Xt(a.V,a.g,"readystatechange",a.gb),b=a.H?F(a.H):{},a.s?(a.u||(a.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.s,b)):(a.u="GET",a.g.ea(a.A,a.u,null,b)),oe(1),function(a,b,t,e,n,r){a.info((function(){if(a.g)if(r)for(var o="",c=r.split("&"),u=0;u<c.length;u++){var l=c[u].split("=");if(1<l.length){var h=l[0];l=l[1];var f=h.split("_");o=2<=f.length&&"type"==f[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+e+") [attempt "+n+"]: "+b+"\n"+t+"\n"+o}))}(a.j,a.u,a.A,a.m,a.X,a.s)}function Ee(a){return!!a.g&&("GET"==a.u&&2!=a.K&&a.l.Ba)}function Se(a,b,t){for(var e,n=!0;!a.I&&a.C<t.length;){if((e=Ce(a,t))==Ie){4==b&&(a.o=4,se(14),n=!1),te(a.j,a.m,null,"[Incomplete Response]");break}if(e==ke){a.o=4,se(15),te(a.j,a.m,t,"[Invalid Chunk]"),n=!1;break}te(a.j,a.m,e,null),De(a,e)}Ee(a)&&e!=Ie&&e!=ke&&(a.h.g="",a.C=0),4!=b||0!=t.length||a.h.h||(a.o=1,se(16),n=!1),a.i=a.i&&n,n?0<t.length&&!a.aa&&(a.aa=!0,(b=a.l).g==a&&b.$&&!b.L&&(b.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zn(b),b.L=!0,se(11))):(te(a.j,a.m,t,"[Invalid Chunked Response]"),Re(a),Pe(a))}function Ce(a,b){var t=a.C,e=b.indexOf("\n",t);return-1==e?Ie:(t=Number(b.substring(t,e)),isNaN(t)?ke:(e+=1)+t>b.length?Ie:(b=b.substr(e,t),a.C=e+t,b))}function Ae(a){a.Y=Date.now()+a.P,je(a,a.P)}function je(a,b){if(null!=a.B)throw Error("WatchDog timer not null");a.B=ce(q(a.eb,a),b)}function Ne(a){a.B&&(f.clearTimeout(a.B),a.B=null)}function Pe(a){0==a.l.G||a.I||rr(a.l,a)}function Re(a){Ne(a);var b=a.L;b&&"function"==typeof b.na&&b.na(),a.L=null,Gt(a.W),Jt(a.V),a.g&&(b=a.g,a.g=null,b.abort(),b.na())}function De(a,b){try{var t=a.l;if(0!=t.G&&(t.g==a||pn(t.i,a)))if(t.I=a.N,!a.J&&pn(t.i,a)&&3==t.G){try{var e=t.Ca.g.parse(b)}catch(r){e=null}if(Array.isArray(e)&&3==e.length){var n=e;if(0==n[0]){t:if(!t.u){if(t.g){if(!(t.g.F+3e3<a.F))break t;nr(t),Hn(t)}Jn(t),se(18)}}else t.ta=n[1],0<t.ta-t.U&&37500>n[2]&&t.N&&0==t.A&&!t.v&&(t.v=ce(q(t.ab,t),6e3));if(1>=dn(t.i)&&t.ka){try{t.ka()}catch(r){}t.ka=void 0}}else or(t,11)}else if((a.J||t.g==a)&&nr(t),!A(b))for(n=t.Ca.g.parse(b),b=0;b<n.length;b++){var r=n[b];if(t.U=r[0],r=r[1],2==t.G)if("c"==r[0]){t.J=r[1],t.la=r[2];var o=r[3];null!=o&&(t.ma=o,t.h.info("VER="+t.ma));var c=r[4];null!=c&&(t.za=c,t.h.info("SVER="+t.za));var l=r[5];null!=l&&"number"==typeof l&&0<l&&(e=1.5*l,t.K=e,t.h.info("backChannelRequestTimeoutMs_="+e)),e=t;var h=a.g;if(h){var f=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var d=e.i;!d.g&&(P(f,"spdy")||P(f,"quic")||P(f,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(vn(d,d.h),d.h=null))}if(e.D){var v=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(e.sa=v,ze(e.F,e.D,v))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-a.F,t.h.info("Handshake RTT: "+t.O+"ms"));var m=a;if((e=t).oa=sr(e,e.H?e.la:null,e.W),m.J){gn(e.i,m);var y=m,u=e.K;u&&y.setTimeout(u),y.B&&(Ne(y),Ae(y)),e.g=m}else Xn(e);0<t.l.length&&zn(t)}else"stop"!=r[0]&&"close"!=r[0]||or(t,7);else 3==t.G&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?or(t,7):Kn(t):"noop"!=r[0]&&t.j&&t.j.wa(r),t.A=0)}oe(4)}catch(r){}}function Me(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(v(a)||"string"==typeof a)E(a,b,void 0);else{if(a.T&&"function"==typeof a.T)var t=a.T();else if(a.R&&"function"==typeof a.R)t=void 0;else if(v(a)||"string"==typeof a){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;e=function(a){if(a.R&&"function"==typeof a.R)return a.R();if("string"==typeof a)return a.split("");if(v(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a),n=e.length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function Le(a,b){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Le)for(t=a.T(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Fe(a){if(a.i!=a.g.length){for(var b=0,t=0;b<a.g.length;){var e=a.g[b];Ue(a.h,e)&&(a.g[t++]=e),b++}a.g.length=t}if(a.i!=a.g.length){var n={};for(t=b=0;b<a.g.length;)Ue(n,e=a.g[b])||(a.g[t++]=e,n[e]=1),b++;a.g.length=t}}function Ue(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(c=be.prototype).setTimeout=function(a){this.P=a},c.gb=function(a){a=a.target;var b=this.L;b&&3==Fn(a)?b.l():this.Ia(a)},c.Ia=function(a){try{if(a==this.g)t:{var t=Fn(this.g),b=this.g.Da(),e=this.g.ba();if(!(3>t)&&(3!=t||z||this.g&&(this.h.h||this.g.ga()||Un(this.g)))){this.I||4!=t||7==b||oe(8==b||0>=e?3:2),Ne(this);var n=this.g.ba();this.N=n;e:if(Ee(this)){var r=Un(this.g);a="";var o=r.length,c=4==Fn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Re(this),Pe(this);var l="";break e}this.h.i=new f.TextDecoder}for(b=0;b<o;b++)this.h.h=!0,a+=this.h.i.decode(r[b],{stream:c&&b==o-1});r.splice(0,o),this.h.g+=a,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==n,function(a,b,t,e,n,r,o){a.info((function(){return"XMLHTTP RESP ("+e+") [ attempt "+n+"]: "+b+"\n"+t+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,n),this.i){if(this.$&&!this.J){e:{if(this.g){var h,u=this.g;if((h=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(h)){var d=h;break e}}d=null}if(!(n=d)){this.i=!1,this.o=3,se(12),Re(this),Pe(this);break t}te(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,De(this,n)}this.U?(Se(this,t,l),z&&this.i&&3==t&&(Xt(this.V,this.W,"tick",this.fb),this.W.start())):(te(this.j,this.m,l,null),De(this,l)),4==t&&Re(this),this.i&&!this.I&&(4==t?rr(this.l,this):(this.i=!1,Ae(this)))}else 400==n&&0<l.indexOf("Unknown SID")?(this.o=3,se(12)):(this.o=0,se(13)),Re(this),Pe(this)}}}catch(t){}},c.fb=function(){if(this.g){var a=Fn(this.g),b=this.g.ga();this.C<b.length&&(Ne(this),Se(this,a,b),this.i&&4!=a&&Ae(this))}},c.cancel=function(){this.I=!0,Re(this)},c.eb=function(){this.B=null;var a=Date.now();0<=a-this.Y?(function(a,b){a.info((function(){return"TIMEOUT: "+b}))}(this.j,this.A),2!=this.K&&(oe(3),se(17)),Re(this),this.o=2,Pe(this)):je(this,this.Y-a)},(c=Le.prototype).R=function(){Fe(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a},c.T=function(){return Fe(this),this.g.concat()},c.get=function(a,b){return Ue(this.h,a)?this.h[a]:b},c.set=function(a,b){Ue(this.h,a)||(this.i++,this.g.push(a)),this.h[a]=b},c.forEach=function(a,b){for(var t=this.T(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var qe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(a,b){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,a instanceof Ve){this.g=void 0!==b?b:a.g,Ke(this,a.j),this.s=a.s,He(this,a.i),Ge(this,a.m),this.l=a.l,b=a.h;var t=new rn;t.i=b.i,b.g&&(t.g=new Le(b.g),t.h=b.h),We(this,t),this.o=a.o}else a&&(t=String(a).match(qe))?(this.g=!!b,Ke(this,t[1]||"",!0),this.s=Qe(t[2]||""),He(this,t[3]||"",!0),Ge(this,t[4]),this.l=Qe(t[5]||"",!0),We(this,t[6]||"",!0),this.o=Qe(t[7]||"")):(this.g=!!b,this.h=new rn(null,this.g))}function Be(a){return new Ve(a)}function Ke(a,b,t){a.j=t?Qe(b,!0):b,a.j&&(a.j=a.j.replace(/:$/,""))}function He(a,b,t){a.i=t?Qe(b,!0):b}function Ge(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.m=b}else a.m=null}function We(a,b,t){b instanceof rn?(a.h=b,function(a,b){b&&!a.j&&(on(a),a.i=null,a.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(dd(this,e),sn(this,n,t))}),a)),a.j=b}(a.h,a.g)):(t||(b=Ye(b,en)),a.h=new rn(b,a.g))}function ze(a,b,t){a.h.set(b,t)}function $e(a){return ze(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Qe(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ye(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,Xe),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xe(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Ve.prototype.toString=function(){var a=[],b=this.j;b&&a.push(Ye(b,Je,!0),":");var t=this.i;return(t||"file"==b)&&(a.push("//"),(b=this.s)&&a.push(Ye(b,Je,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&a.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&a.push("/"),a.push(Ye(t,"/"==t.charAt(0)?tn:Ze,!0))),(t=this.h.toString())&&a.push("?",t),(t=this.o)&&a.push("#",Ye(t,nn)),a.join("")};var Je=/[#\/\?@]/g,Ze=/[#\?:]/g,tn=/[#\?]/g,en=/[#\?@]/g,nn=/#/g;function rn(a,b){this.h=this.g=null,this.i=a||null,this.j=!!b}function on(a){a.g||(a.g=new Le,a.h=0,a.i&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.i,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function dd(a,b){on(a),b=un(a,b),Ue(a.g.h,b)&&(a.i=null,a.h-=a.g.get(b).length,Ue((a=a.g).h,b)&&(delete a.h[b],a.i--,a.g.length>2*a.i&&Fe(a)))}function an(a,b){return on(a),b=un(a,b),Ue(a.g.h,b)}function sn(a,b,t){dd(a,b),0<t.length&&(a.i=null,a.g.set(un(a,b),C(t)),a.h+=t.length)}function un(a,b){return b=String(b),a.j&&(b=b.toLowerCase()),b}(c=rn.prototype).add=function(a,b){on(this),this.i=null,a=un(this,a);var t=this.g.get(a);return t||this.g.set(a,t=[]),t.push(b),this.h+=1,this},c.forEach=function(a,b){on(this),this.g.forEach((function(t,e){E(t,(function(t){a.call(b,t,e,this)}),this)}),this)},c.T=function(){on(this);for(var a=this.g.R(),b=this.g.T(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},c.R=function(a){on(this);var b=[];if("string"==typeof a)an(this,a)&&(b=S(b,this.g.get(un(this,a))));else{a=this.g.R();for(var t=0;t<a.length;t++)b=S(b,a[t])}return b},c.set=function(a,b){return on(this),this.i=null,an(this,a=un(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[b]),this.h+=1,this},c.get=function(a,b){return a&&0<(a=this.R(a)).length?String(a[0]):b},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var a=[],b=this.g.T(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.R(e);for(var r=0;r<e.length;r++){var o=n;""!==e[r]&&(o+="="+encodeURIComponent(String(e[r]))),a.push(o)}}return this.i=a.join("&")};var cn=function(a,b){this.h=a,this.g=b};function ln(a){this.l=a||hn,f.PerformanceNavigationTiming?a=0<(a=f.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(f.g&&f.g.Ea&&f.g.Ea()&&f.g.Ea().Zb),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hn=10;function fn(a){return!!a.h||!!a.g&&a.g.size>=a.j}function dn(a){return a.h?1:a.g?a.g.size:0}function pn(a,b){return a.h?a.h==b:!!a.g&&a.g.has(b)}function vn(a,b){a.g?a.g.add(b):a.h=b}function gn(a,b){a.h&&a.h==b?a.h=null:a.g&&a.g.has(b)&&a.g.delete(b)}function mn(a){var t,e;if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){var b=a.i;try{for(var n=o(a.g.values()),r=n.next();!r.done;r=n.next()){var c=r.value;b=b.concat(c.D)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return b}return C(a.i)}function yn(){}function _n(){this.g=new yn}function bn(a,b,t){var e=t||"";try{Me(a,(function(t,n){var r=t;p(t)&&(r=Pt(t)),b.push(e+n+"="+encodeURIComponent(r))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function wn(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}function xn(a){this.l=a.$b||null,this.j=a.ib||!1}function kn(a,b){At.call(this),this.D=a,this.u=b,this.m=void 0,this.readyState=In,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ln.prototype.cancel=function(){var t,e;if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=o(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},yn.prototype.stringify=function(a){return f.JSON.stringify(a,void 0)},yn.prototype.parse=function(a){return f.JSON.parse(a,void 0)},k(xn,fe),xn.prototype.g=function(){return new kn(this.l,this.j)},xn.prototype.i=function(a){return function(){return a}}({}),k(kn,At);var In=0;function Tn(a){a.j.read().then(a.Sa.bind(a)).catch(a.ha.bind(a))}function td(a){a.readyState=4,a.l=null,a.j=null,a.A=null,On(a)}function On(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(c=kn.prototype).open=function(a,b){if(this.readyState!=In)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=b,this.readyState=1,On(this)},c.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var b={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(b.body=a),(this.D||f).fetch(new Request(this.B,b)).then(this.Va.bind(this),this.ha.bind(this))},c.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,td(this)),this.readyState=In},c.Va=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==f.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tn(this)}else a.text().then(this.Ua.bind(this),this.ha.bind(this))},c.Sa=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var b=a.value?a.value:new Uint8Array(0);(b=this.A.decode(b,{stream:!a.done}))&&(this.response=this.responseText+=b)}a.done?td(this):On(this),3==this.readyState&&Tn(this)}},c.Ua=function(a){this.g&&(this.response=this.responseText=a,td(this))},c.Ta=function(a){this.g&&(this.response=a,td(this))},c.ha=function(){this.g&&td(this)},c.setRequestHeader=function(a,b){this.v.append(a,b)},c.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";for(var a=[],b=this.h.entries(),t=b.next();!t.done;)t=t.value,a.push(t[0]+": "+t[1]),t=b.next();return a.join("\r\n")},Object.defineProperty(kn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var En=f.JSON.parse;function Sn(a){At.call(this),this.headers=new Le,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cn,this.K=this.L=!1}k(Sn,At);var Cn="",An=/^https?$/i,jn=["POST","PUT"];function Nn(a){return"content-type"==a.toLowerCase()}function Pn(a,b){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=b,a.m=5,Rn(a),Mn(a)}function Rn(a){a.D||(a.D=!0,jt(a,"complete"),jt(a,"error"))}function Dn(a){if(a.h&&void 0!==h&&(!a.C[1]||4!=Fn(a)||2!=a.ba()))if(a.v&&4==Fn(a))Wt(a.Fa,0,a);else if(jt(a,"readystatechange"),4==Fn(a)){a.h=!1;try{var t,e=a.ba();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}if(!(t=b)){var n;if(n=0===e){var r=String(a.H).match(qe)[1]||null;if(!r&&f.self&&f.self.location){var o=f.self.location.protocol;r=o.substr(0,o.length-1)}n=!An.test(r?r.toLowerCase():"")}t=n}if(t)jt(a,"complete"),jt(a,"success");else{a.m=6;try{var c=2<Fn(a)?a.g.statusText:""}catch(t){c=""}a.j=c+" ["+a.ba()+"]",Rn(a)}}finally{Mn(a)}}}function Mn(a,b){if(a.g){Ln(a);var t=a.g,e=a.C[0]?d:null;a.g=null,a.C=null,b||jt(a,"ready");try{t.onreadystatechange=e}catch(t){}}}function Ln(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(f.clearTimeout(a.A),a.A=null)}function Fn(a){return a.g?a.g.readyState:0}function Un(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case Cn:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}e||(t=function(a){var b="";return L(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),"string"==typeof a?null!=t&&encodeURIComponent(String(t)):ze(a,b,t))}function Vn(a,b,t){return t&&t.internalChannelParams&&t.internalChannelParams[a]||b}function Bn(a){this.za=0,this.l=[],this.h=new Zt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vn("failFast",!1,a),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vn("baseRetryDelayMs",5e3,a),this.$a=Vn("retryDelaySeedMs",1e4,a),this.Ya=Vn("forwardChannelMaxRetries",2,a),this.ra=Vn("forwardChannelRequestTimeoutMs",2e4,a),this.qa=a&&a.xmlHttpFactory||void 0,this.Ba=a&&a.Yb||!1,this.K=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.J="",this.i=new ln(a&&a.concurrentRequestLimit),this.Ca=new _n,this.ja=a&&a.fastHandshake||!1,this.Ra=a&&a.Wb||!1,a&&a.Aa&&this.h.Aa(),a&&a.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&a&&a.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!a||!1!==a.Xb}function Kn(a){if(Gn(a),3==a.G){var b=a.V++,t=Be(a.F);ze(t,"SID",a.J),ze(t,"RID",b),ze(t,"TYPE","terminate"),Qn(a,t),(b=new be(a,a.h,b,void 0)).K=2,b.v=$e(Be(t)),t=!1,f.navigator&&f.navigator.sendBeacon&&(t=f.navigator.sendBeacon(b.v.toString(),"")),!t&&f.Image&&((new Image).src=b.v,t=!0),t||(b.g=ur(b.l,null),b.g.ea(b.v)),b.F=Date.now(),Ae(b)}ar(a)}function Hn(a){a.g&&(Zn(a),a.g.cancel(),a.g=null)}function Gn(a){Hn(a),a.u&&(f.clearTimeout(a.u),a.u=null),nr(a),a.i.cancel(),a.m&&("number"==typeof a.m&&f.clearTimeout(a.m),a.m=null)}function Wn(a,b){a.l.push(new cn(a.Za++,b)),3==a.G&&zn(a)}function zn(a){fn(a.i)||a.m||(a.m=!0,qt(a.Ha,a),a.C=0)}function $n(a,b){var t;t=b?b.m:a.V++;var e=Be(a.F);ze(e,"SID",a.J),ze(e,"RID",t),ze(e,"AID",a.U),Qn(a,e),a.o&&a.s&&qn(e,a.o,a.s),t=new be(a,a.h,t,a.C+1),null===a.o&&(t.H=a.s),b&&(a.l=b.D.concat(a.l)),b=Yn(a,t,1e3),t.setTimeout(Math.round(.5*a.ra)+Math.round(.5*a.ra*Math.random())),vn(a.i,t),Te(t,e,b)}function Qn(a,b){a.j&&Me({},(function(t,e){ze(b,e,t)}))}function Yn(a,b,t){t=Math.min(a.l.length,t);var e=a.j?q(a.j.Oa,a.j,a):null;t:for(var n=a.l,r=-1;;){var o=["count="+t];-1==r?0<t?(r=n[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,u=0;u<t;u++){var l=n[u].h,h=n[u].g;if(0>(l-=r))r=Math.max(0,n[u].h-100),c=!1;else try{bn(h,o,"req"+l+"_")}catch(t){e&&e(h)}}if(c){e=o.join("&");break t}}return a=a.l.splice(0,t),b.D=a,e}function Xn(a){a.g||a.u||(a.Y=1,qt(a.Ga,a),a.A=0)}function Jn(a){return!(a.g||a.u||3<=a.A)&&(a.Y++,a.u=ce(q(a.Ga,a),ir(a,a.A)),a.A++,!0)}function Zn(a){null!=a.B&&(f.clearTimeout(a.B),a.B=null)}function er(a){a.g=new be(a,a.h,"rpc",a.Y),null===a.o&&(a.g.H=a.s),a.g.O=0;var b=Be(a.oa);ze(b,"RID","rpc"),ze(b,"SID",a.J),ze(b,"CI",a.N?"0":"1"),ze(b,"AID",a.U),Qn(a,b),ze(b,"TYPE","xmlhttp"),a.o&&a.s&&qn(b,a.o,a.s),a.K&&a.g.setTimeout(a.K);var t=a.g;a=a.la,t.K=1,t.v=$e(Be(b)),t.s=null,t.U=!0,Oe(t,a)}function nr(a){null!=a.v&&(f.clearTimeout(a.v),a.v=null)}function rr(a,b){var t=null;if(a.g==b){nr(a),Zn(a),a.g=null;var e=2}else{if(!pn(a.i,b))return;t=b.D,gn(a.i,b),e=1}if(a.I=b.N,0!=a.G)if(b.i)if(1==e){t=b.s?b.s.length:0,b=Date.now()-b.F;var n=a.C;jt(e=re(),new ue(e,t,b,n)),zn(a)}else Xn(a);else if(3==(n=b.o)||0==n&&0<a.I||!(1==e&&function(a,b){return!(dn(a.i)>=a.i.j-(a.m?1:0)||(a.m?(a.l=b.D.concat(a.l),0):1==a.G||2==a.G||a.C>=(a.Xa?0:a.Ya)||(a.m=ce(q(a.Ha,a,b),ir(a,a.C)),a.C++,0)))}(a,b)||2==e&&Jn(a)))switch(t&&0<t.length&&(b=a.i,b.i=b.i.concat(t)),n){case 1:or(a,5);break;case 4:or(a,10);break;case 3:or(a,6);break;default:or(a,2)}}function ir(a,b){var t=a.Pa+Math.floor(Math.random()*a.$a);return a.j||(t*=2),t*b}function or(a,b){if(a.h.info("Error code "+b),2==b){var t=null;a.j&&(t=null);var e=q(a.jb,a);t||(t=new Ve("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Ke(t,"https"),$e(t)),function(a,b){var t=new Zt;if(f.Image){var e=new Image;e.onload=x(wn,t,e,"TestLoadImage: loaded",!0,b),e.onerror=x(wn,t,e,"TestLoadImage: error",!1,b),e.onabort=x(wn,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=x(wn,t,e,"TestLoadImage: timeout",!1,b),f.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else se(2);a.G=0,a.j&&a.j.va(b),ar(a),Gn(a)}function ar(a){a.G=0,a.I=-1,a.j&&(0==mn(a.i).length&&0==a.l.length||(a.i.i.length=0,C(a.l),a.l.length=0),a.j.ua())}function sr(a,b,t){var e=function(a){return a instanceof Ve?Be(a):new Ve(a,void 0)}(t);if(""!=e.i)b&&He(e,b+"."+e.i),Ge(e,e.m);else{var n=f.location;e=function(a,b,t,e){var n=new Ve(null,void 0);return a&&Ke(n,a),b&&He(n,b),t&&Ge(n,t),e&&(n.l=e),n}(n.protocol,b?b+"."+n.hostname:n.hostname,+n.port,t)}return a.aa&&L(a.aa,(function(t,n){ze(e,n,t)})),b=a.D,t=a.sa,b&&t&&ze(e,b,t),ze(e,"VER",a.ma),Qn(a,e),e}function ur(a,b,t){if(b&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(b=t&&a.Ba&&!a.qa?new Sn(new xn({ib:!0})):new Sn(a.qa)).L=a.H,b}function cr(){}function lr(){if(G&&!(10<=Number(ot)))throw Error("Environmental error: no available transport.")}function fr(a,b){At.call(this),this.g=new Bn(b),this.l=a,this.h=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.ya&&(a?a["X-WebChannel-Client-Profile"]=b.ya:a={"X-WebChannel-Client-Profile":b.ya}),this.g.P=a,(a=b&&b.httpHeadersOverwriteParam)&&!A(a)&&(this.g.o=a),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!A(b)&&(this.g.D=b,null!==(a=this.h)&&b in a&&(b in(a=this.h)&&delete a[b])),this.j=new vr(this)}function dr(a){me.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.i=a)&&(a=this.i,b=null!==b&&a in b?b[a]:void 0),this.data=b}else this.data=a}function pr(){ye.call(this),this.status=1}function vr(a){this.g=a}(c=Sn.prototype).ea=function(a,b,t,e){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);b=b?b.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ve.g(),this.C=this.u?de(this.u):de(ve),this.g.onreadystatechange=q(this.Fa,this);try{this.F=!0,this.g.open(b,String(a),!0),this.F=!1}catch(t){return void Pn(this,t)}a=t||"";var n=new Le(this.headers);e&&Me(e,(function(t,e){n.set(e,t)})),e=function(a){t:{for(var b=Nn,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(n.T()),t=f.FormData&&a instanceof f.FormData,!(0<=O(jn,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ln(this),0<this.B&&((this.K=function(a){return G&&nt()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q(this.pa,this)):this.A=Wt(this.pa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(t){Pn(this,t)}},c.pa=function(){void 0!==h&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jt(this,"timeout"),this.abort(8))},c.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,jt(this,"complete"),jt(this,"abort"),Mn(this))},c.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mn(this,!0)),Sn.Z.M.call(this)},c.Fa=function(){this.s||(this.F||this.v||this.l?Dn(this):this.cb())},c.cb=function(){Dn(this)},c.ba=function(){try{return 2<Fn(this)?this.g.status:-1}catch(t){return-1}},c.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},c.Qa=function(a){if(this.g){var b=this.g.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),En(b)}},c.Da=function(){return this.m},c.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(c=Bn.prototype).ma=8,c.G=1,c.hb=function(a){try{this.h.info("Origin Trials invoked: "+a)}catch(t){}},c.Ha=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.V=Math.floor(1e5*Math.random()),a=this.V++;var t=new be(this,this.h,a,void 0),e=this.s;if(this.P&&(e?V(e=F(e),this.P):e=this.P),null===this.o&&(t.H=e),this.ja)t:{for(var b=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(b+=r)){b=n;break t}if(4096===b||n===this.l.length-1){b=n+1;break t}}b=1e3}else b=1e3;b=Yn(this,t,b),ze(n=Be(this.F),"RID",a),ze(n,"CVER",22),this.D&&ze(n,"X-HTTP-Session-Id",this.D),Qn(this,n),this.o&&e&&qn(n,this.o,e),vn(this.i,t),this.Ra&&ze(n,"TYPE","init"),this.ja?(ze(n,"$req",b),ze(n,"SID","null"),t.$=!0,Te(t,n,null)):Te(t,n,b),this.G=2}}else 3==this.G&&(a?$n(this,a):0==this.l.length||fn(this.i)||$n(this))},c.Ga=function(){if(this.u=null,er(this),this.$&&!(this.L||null==this.g||0>=this.O)){var a=2*this.O;this.h.info("BP detection timer enabled: "+a),this.B=ce(q(this.bb,this),a)}},c.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,se(10),Hn(this),er(this))},c.ab=function(){null!=this.v&&(this.v=null,Hn(this),Jn(this),se(19))},c.jb=function(a){a?(this.h.info("Successfully pinged google.com"),se(2)):(this.h.info("Failed to ping google.com"),se(1))},(c=cr.prototype).xa=function(){},c.wa=function(){},c.va=function(){},c.ua=function(){},c.Oa=function(){},lr.prototype.g=function(a,b){return new fr(a,b)},k(fr,At),fr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var a=this.g,b=this.l,t=this.h||void 0;a.Wa&&(a.h.info("Origin Trials enabled."),qt(q(a.hb,a,b))),se(0),a.W=b,a.aa=t||{},a.N=a.X,a.F=sr(a,null,a.W),zn(a)},fr.prototype.close=function(){Kn(this.g)},fr.prototype.u=function(a){if("string"==typeof a){var b={};b.__data__=a,Wn(this.g,b)}else this.v?((b={}).__data__=Pt(a),Wn(this.g,b)):Wn(this.g,a)},fr.prototype.M=function(){this.g.j=null,delete this.j,Kn(this.g),delete this.g,fr.Z.M.call(this)},k(dr,me),k(pr,ye),k(vr,cr),vr.prototype.xa=function(){jt(this.g,"a")},vr.prototype.wa=function(a){jt(this.g,new dr(a))},vr.prototype.va=function(a){jt(this.g,new pr(a))},vr.prototype.ua=function(){jt(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,fr.prototype.send=fr.prototype.u,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,le.NO_ERROR=0,le.TIMEOUT=8,le.HTTP_ERROR=6,he.COMPLETE="complete",pe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",At.prototype.listen=At.prototype.N,Sn.prototype.listenOnce=Sn.prototype.O,Sn.prototype.getLastError=Sn.prototype.La,Sn.prototype.getLastErrorCode=Sn.prototype.Da,Sn.prototype.getStatus=Sn.prototype.ba,Sn.prototype.getResponseJson=Sn.prototype.Qa,Sn.prototype.getResponseText=Sn.prototype.ga,Sn.prototype.send=Sn.prototype.ea;var gr=function(){return new lr},mr=function(){return re()},yr=le,_r=he,wr=ee,xr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},kr=xn,Ir=pe,Tr=Sn}).call(this,n(77))},788:function(t,e,n){var content=n(789);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("12a190a6",content,!0,{sourceMap:!1})},789:function(t,e,n){var r=n(38)(!1);r.push([t.i,".input-tel__input{padding:1.75rem!important}.input-tel__input,input.country-selector__input{background:#f6f6f6!important;border:none!important}input.country-selector__input{height:56px!important}.country-selector__country-flag{top:25px}.country-selector__toggle{top:calc(50% - 4px)!important}.theme--light.v-app-bar.v-toolbar.v-sheet,.theme--light.v-application,.theme--light.v-tabs-items{background-color:#eef3ff}.theme--light .cart-popup-contents{background-color:#fff}.theme--light.v-stepper{background:transparent}.theme--light.v-sheet.company-card,.theme--light.v-sheet.company-list-card,.theme--light.v-sheet.post-card,.theme--light.v-sheet.product-card,.theme--light.v-sheet.recent-news-card{background-color:#fff;border:7px solid hsla(0,0%,87.1%,.2)}.theme--light.v-skeleton-loader .v-skeleton-loader__actions,.theme--light.v-skeleton-loader .v-skeleton-loader__article,.theme--light.v-skeleton-loader .v-skeleton-loader__card-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__card-text,.theme--light.v-skeleton-loader .v-skeleton-loader__date-picker,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-text,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__table-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tbody,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tfoot,.theme--light.v-skeleton-loader .v-skeleton-loader__table-thead{background:transparent!important}.theme--light.slide-up{background-color:#eef3ff}.theme--dark.v-app-bar.v-toolbar.v-sheet,.theme--dark.v-application{background-color:#242a33}.theme--dark.v-navigation-drawer,.theme--dark.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:transparent}.theme--dark.v-bottom-navigation{background-color:#242a33}.theme--dark.v-tabs-items{background-color:transparent}.theme--dark .cart-popup-contents,.theme--dark.shipping-options,.theme--dark.v-sheet,.theme--dark.v-tabs-items,.v-dialog .theme--dark.v-sheet{background-color:#242a33}.theme--dark.v-sheet.company-card,.theme--dark.v-sheet.company-list-card,.theme--dark.v-sheet.post-card,.theme--dark.v-sheet.product-card,.theme--dark.v-sheet.recent-news-card{background-color:#fff;border:7px solid #15191e}.theme--dark.v-card>.v-card__text,.theme--dark.v-card>.v-card__title{color:#000}.theme--dark.slide-up{background-color:#242a33}.appBarHeight{height:calc(60px + env(safe-area-inset-top))}.mobileNotch{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)!important;height:inherit!important}header.mobileNotch{max-height:100px}.v-card__subtitle,.v-card__text{line-height:1.975rem;letter-spacing:0!important}.v-application .body-1{letter-spacing:0!important}.v-application .primary{background-color:#6fa7e0;border-color:#6fa7e0}.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:90%}.v-dialog--scrollable>.v-sheet{overflow-y:scroll!important}@media screen and (max-width:600px){.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:100%}}.admin-container{margin-top:0;margin-bottom:15px;padding-top:0;padding-left:0;padding-right:0}.avatar-elevation{border:4px solid #fff}.no-break{word-break:break-word}.v-application a{text-decoration:none;color:#6fa7e0!important}.missing-image{opacity:.25}.company-card .title,.post-card .name,.product-card .name{word-break:break-word;line-height:1.33em;letter-spacing:-.3px!important}.slide-left-enter-active,.slide-left-leave-active,.slide-right-enter-active,.slide-right-leave-active{transition-duration:.5s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.55,0,.1,1);overflow:hidden}.slide-left-enter,.slide-right-leave-active{opacity:0;transform:translate(2em)}.slide-left-leave-active,.slide-right-enter{opacity:0;transform:translate(-2em)}.phoneNumberInput .input-tel__input{border-right:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input,.phoneNumberInput .input-tel__input{font-size:16px!important;border-top:3px solid hsla(0,0%,46.3%,.05)!important;border-bottom:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input{border-left:3px solid hsla(0,0%,46.3%,.05)!important;height:62px!important}.phoneNumberInput .country-selector__toggle{top:20px!important}.phoneNumberInput .country-selector__country-flag{top:27px!important}.v-text-field--outlined fieldset{border-color:#f1f0ef!important}.country-selector.has-hint .country-selector__input,.country-selector.has-value .country-selector__input{padding-top:0!important}.alertBtn{font-size:1.45rem;font-weight:600;letter-spacing:1px;text-transform:capitalize;color:#fff}.borderButton,.borderInput{border:3px solid #f1f0ef;background-color:#f8f9fa}details>summary{font-size:17px;margin:10px 0;border-bottom:1px solid #fefefe;padding:15px 0 30px}.v-list--rounded.v-list--three-line .v-list-item,.v-list--rounded.v-list--three-line .v-list-item:before,.v-list--rounded.v-list--three-line .v-list-item>.v-ripple__container{border-radius:32px!important}.v-list--rounded .v-list-item,.v-list--rounded .v-list-item:before,.v-list--rounded .v-list-item>.v-ripple__container{border-radius:15px!important}.myshout .theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled){border:2px solid #f0f0ef;background:#f9f9f9;margin-bottom:15px}.myshout .v-list-item__title{font-size:1rem;font-weight:600}.myshout .v-list-item__subtitle{font-size:.9rem}.myshout .v-list-item__icon{width:80px;height:80px;border-radius:20px;text-align:center}.myshout .v-list-item__icon .v-icon{font-size:33px;width:100%}.v-application--is-ltr .myshout .v-list-item__action:first-child,.v-application--is-ltr .myshout .v-list-item__icon:first-child{margin-right:10px}.v-input--checkbox.v-input--indeterminate.v-input--is-disabled{opacity:.6}.v-input--checkbox.v-input--dense{margin-top:4px}",""]),t.exports=r},800:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var o,p=new Promise((function(c,l){n(o=t[e].apply(t,r)).then(c,l)}));return p.request=o,p}function o(t,e,n){var p=r(t,e,n);return p.then((function(t){if(t)return new v(t,p.request)}))}function c(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function l(t,e,n,o){o.forEach((function(o){o in n.prototype&&(t.prototype[o]=function(){return r(this[e],o,arguments)})}))}function h(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function f(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return o(this[e],r,arguments)})}))}function d(t){this._index=t}function v(cursor,t){this._cursor=cursor,this._request=t}function m(t){this._store=t}function y(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function _(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new y(n)}function w(t){this._db=t}function x(t,e,n){var p=r(indexedDB,"open",[t,e]),o=p.request;return o&&(o.onupgradeneeded=function(t){n&&n(new _(o.result,t.oldVersion,o.transaction))}),p.then((function(t){return new w(t)}))}function k(t){return r(indexedDB,"deleteDatabase",[t])}c(d,"_index",["name","keyPath","multiEntry","unique"]),l(d,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),f(d,"_index",IDBIndex,["openCursor","openKeyCursor"]),c(v,"_cursor",["direction","key","primaryKey","value"]),l(v,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(v.prototype[t]=function(){var cursor=this,e=arguments;return Promise.resolve().then((function(){return cursor._cursor[t].apply(cursor._cursor,e),n(cursor._request).then((function(t){if(t)return new v(t,cursor._request)}))}))})})),m.prototype.createIndex=function(){return new d(this._store.createIndex.apply(this._store,arguments))},m.prototype.index=function(){return new d(this._store.index.apply(this._store,arguments))},c(m,"_store",["name","keyPath","indexNames","autoIncrement"]),l(m,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),f(m,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),h(m,"_store",IDBObjectStore,["deleteIndex"]),y.prototype.objectStore=function(){return new m(this._tx.objectStore.apply(this._tx,arguments))},c(y,"_tx",["objectStoreNames","mode"]),h(y,"_tx",IDBTransaction,["abort"]),_.prototype.createObjectStore=function(){return new m(this._db.createObjectStore.apply(this._db,arguments))},c(_,"_db",["name","version","objectStoreNames"]),h(_,"_db",IDBDatabase,["deleteObjectStore","close"]),w.prototype.transaction=function(){return new y(this._db.transaction.apply(this._db,arguments))},c(w,"_db",["name","version","objectStoreNames"]),h(w,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[m,d].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],o=this._store||this._index,c=o[t].apply(o,n.slice(0,-1));c.onsuccess=function(){r(c.result)}})}))})),[d,m].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(o){n.iterateCursor(t,(function(cursor){cursor?(r.push(cursor.value),void 0===e||r.length!=e?cursor.continue():o(r)):o(r)}))}))})})),t.openDb=x,t.deleteDb=k,Object.defineProperty(t,"__esModule",{value:!0})}(e)},801:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return iu})),n.d(e,"b",(function(){return Qs})),n.d(e,"c",(function(){return yc})),n.d(e,"d",(function(){return bc})),n.d(e,"e",(function(){return pc})),n.d(e,"f",(function(){return fc})),n.d(e,"g",(function(){return A})),n.d(e,"h",(function(){return Ys})),n.d(e,"i",(function(){return dc})),n.d(e,"j",(function(){return mc})),n.d(e,"k",(function(){return Ic})),n.d(e,"l",(function(){return Rc})),n.d(e,"m",(function(){return Nc})),n.d(e,"n",(function(){return Oc})),n.d(e,"o",(function(){return Cc})),n.d(e,"p",(function(){return gc})),n.d(e,"q",(function(){return jc})),n.d(e,"r",(function(){return Sc})),n.d(e,"s",(function(){return Tc})),n.d(e,"t",(function(){return Pc}));var r=n(741),o=n(744),c=n(752),l=n(782),h=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();h.o=-1;var f={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.__extends)(e,t),e}(Error),v=new c.Logger("@firebase/firestore");function m(){return v.logLevel}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(v.logLevel<=c.LogLevel.DEBUG){var i=e.map(x);v.debug.apply(v,Object(r.__spreadArray)(["Firestore (8.10.1): "+t],i))}}function _(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(v.logLevel<=c.LogLevel.ERROR){var i=e.map(x);v.error.apply(v,Object(r.__spreadArray)(["Firestore (8.10.1): "+t],i))}}function w(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(v.logLevel<=c.LogLevel.WARN){var i=e.map(x);v.warn.apply(v,Object(r.__spreadArray)(["Firestore (8.10.1): "+t],i))}}function x(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function k(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw _(e),new Error(e)}function I(t,e){t||k()}function T(t,e){return t}function O(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var E=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=O(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function q(t,e){return t<e?-1:t>e?1:0}function S(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function C(t){return t+"\0"}var A=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new d(f.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new d(f.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new d(f.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new d(f.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?q(this.nanoseconds,t.nanoseconds):q(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),j=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new A(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function N(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function P(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var D=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&k(),void 0===n?n=t.length-e:n>t.length-e&&k(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new d(f.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(D),L=/^[_a-zA-Z][_a-zA-Z0-9]*$/,F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return L.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new d(f.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new d(f.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new d(f.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new d(f.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(D),U=function(){function t(t){this.fields=t,t.sort(F.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return S(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),V=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return q(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();V.EMPTY_BYTE_STRING=new V("");var B=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function K(t){if(I(!!t),"string"==typeof t){var e=0,n=B.exec(t);if(I(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:H(t.seconds),nanos:H(t.nanos)}}function H(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function G(t){return"string"==typeof t?V.fromBase64String(t):V.fromUint8Array(t)}function rt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function W(t){var e=t.mapValue.fields.__previous_value__;return rt(e)?W(e):e}function z(t){var e=K(t.mapValue.fields.__local_write_time__.timestampValue);return new A(e.seconds,e.nanos)}function $(t){return null==t}function Q(t){return 0===t&&1/t==-1/0}function Y(t){return"number"==typeof t&&Number.isInteger(t)&&!Q(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var X=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(M.fromString(e))},t.fromName=function(e){return new t(M.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===M.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return M.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new M(e.slice()))},t}();function J(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rt(t)?4:10:k()}function Z(t,e){var n=J(t);if(n!==J(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return z(t).isEqual(z(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=K(t.timestampValue),r=K(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return G(t.bytesValue).isEqual(G(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return H(t.geoPointValue.latitude)===H(e.geoPointValue.latitude)&&H(t.geoPointValue.longitude)===H(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return H(t.integerValue)===H(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=H(t.doubleValue),r=H(e.doubleValue);return n===r?Q(n)===Q(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return S(t.arrayValue.values||[],e.arrayValue.values||[],Z);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(N(n)!==N(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Z(n[i],r[i])))return!1;return!0}(t,e);default:return k()}}function tt(t,e){return void 0!==(t.values||[]).find((function(t){return Z(t,e)}))}function dt(t,e){var n=J(t),r=J(e);if(n!==r)return q(n,r);switch(n){case 0:return 0;case 1:return q(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=H(t.integerValue||t.doubleValue),r=H(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return et(t.timestampValue,e.timestampValue);case 4:return et(z(t),z(e));case 5:return q(t.stringValue,e.stringValue);case 6:return function(t,e){var n=G(t),r=G(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=q(n[i],r[i]);if(0!==o)return o}return q(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=q(H(t.latitude),H(e.latitude));return 0!==n?n:q(H(t.longitude),H(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=dt(n[i],r[i]);if(o)return o}return q(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=q(r[s],o[s]);if(0!==u)return u;var a=dt(n[r[s]],i[o[s]]);if(0!==a)return a}return q(r.length,o.length)}(t.mapValue,e.mapValue);default:throw k()}}function et(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return q(t,e);var n=K(t),r=K(e),i=q(n.seconds,r.seconds);return 0!==i?i:q(n.nanos,r.nanos)}function nt(t){return it(t)}function it(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=K(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?G(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,X.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=it(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+it(t.fields[o])}return e+"}"}(t.mapValue):k();var e,n}function ot(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function at(t){return!!t&&"integerValue"in t}function st(t){return!!t&&"arrayValue"in t}function ut(t){return!!t&&"nullValue"in t}function ct(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lt(t){return!!t&&"mapValue"in t}function ht(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return P(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ht(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ht(t.arrayValue.values[r]);return n}return Object.assign({},t)}var ft=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!lt(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ht(e)},t.prototype.setAll=function(t){var e=this,n=F.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ht(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());lt(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Z(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];lt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){P(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ht(this.value))},t}();function pt(t){var e=[];return P(t.fields,(function(t,n){var r=new F([t]);if(lt(n)){var i=pt(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new U(e)}var vt=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,j.min(),ft.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ft.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ft.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ft.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ft.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),gt=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function mt(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new gt(t,e,n,r,i,o,s)}function yt(t){var e=T(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+nt(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),$(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=jt(e.startAt)),e.endAt&&(n+="|ub:",n+=jt(e.endAt)),e.h=n}return e.h}function _t(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Pt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Z(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dt(t.startAt,e.startAt)&&Dt(t.endAt,e.endAt)}function bt(t){return X.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var wt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new xt(t,n,r):"array-contains"===n?new Ot(t,r):"in"===n?new Et(t,r):"not-in"===n?new St(t,r):"array-contains-any"===n?new Ct(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new kt(t,n):new It(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(dt(e,this.value)):null!==e&&J(this.value)===J(e)&&this.m(dt(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return k()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),xt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=X.fromName(r.referenceValue),i}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=X.comparator(t.key,this.key);return this.m(e)},e}(wt),kt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Tt("in",n),r}return Object(r.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(wt),It=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Tt("not-in",n),r}return Object(r.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(wt);function Tt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return X.fromName(t.referenceValue)}))}var Ot=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return st(e)&&tt(e.arrayValue,this.value)},e}(wt),Et=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&tt(this.value.arrayValue,e)},e}(wt),St=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){if(tt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!tt(this.value.arrayValue,e)},e}(wt),Ct=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!st(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return tt(e.value.arrayValue,t)}))},e}(wt),At=function(t,e){this.position=t,this.before=e};function jt(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return nt(t)})).join(",")}var Nt=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Pt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Rt(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?X.comparator(X.fromName(s.referenceValue),n.key):dt(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Dt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Z(t.position[n],e.position[n]))return!1;return!0}var Mt=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.p=null,this.T=null,this.startAt,this.endAt};function Lt(t,e,n,r,i,o,s,u){return new Mt(t,e,n,r,i,o,s,u)}function Ft(t){return new Mt(t)}function Ut(t){return!$(t.limit)&&"F"===t.limitType}function qt(t){return!$(t.limit)&&"L"===t.limitType}function Vt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Bt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Kt(t){return null!==t.collectionGroup}function Ht(t){var e=T(t);if(null===e.p){e.p=[];var n=Bt(e),r=Vt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Nt(n)),e.p.push(new Nt(F.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var u=s[o];e.p.push(u),u.field.isKeyField()&&(i=!0)}if(!i){var a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Nt(F.keyField(),a))}}}return e.p}function Gt(t){var e=T(t);if(!e.T)if("F"===e.limitType)e.T=mt(e.path,e.collectionGroup,Ht(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ht(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Nt(o.field,s))}var u=e.endAt?new At(e.endAt.position,!e.endAt.before):null,a=e.startAt?new At(e.startAt.position,!e.startAt.before):null;e.T=mt(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.T}function Wt(t,e,n){return new Mt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zt(t,e){return _t(Gt(t),Gt(e))&&t.limitType===e.limitType}function $t(t){return yt(Gt(t))+"|lt:"+t.limitType}function Qt(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+nt(e.value);var e})).join(", ")+"]"),$(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+jt(t.startAt)),t.endAt&&(e+=", endAt: "+jt(t.endAt)),"Target("+e+")"}(Gt(t))+"; limitType="+t.limitType+")"}function Yt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):X.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Rt(t.startAt,Ht(t),e)||t.endAt&&Rt(t.endAt,Ht(t),e))}(t,e)}function Xt(t){return function(e,n){for(var r=!1,i=0,o=Ht(t);i<o.length;i++){var s=o[i],u=Jt(s,e,n);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Jt(t,e,n){var r=t.field.isKeyField()?X.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?dt(r,i):k()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return k()}}function Zt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q(e)?"-0":e}}function te(t){return{integerValue:""+t}}function ee(t,e){return Y(e)?te(e):Zt(t,e)}var ne=function(){this._=void 0};function re(t,e,n){return t instanceof ae?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof se?ue(t,e):t instanceof ce?le(t,e):function(t,e){var n=oe(t,e),r=fe(n)+fe(t.A);return at(n)&&at(t.A)?te(r):Zt(t.R,r)}(t,e)}function ie(t,e,n){return t instanceof se?ue(t,e):t instanceof ce?le(t,e):n}function oe(t,e){return t instanceof he?at(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e}(ne),se=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.__extends)(e,t),e}(ne);function ue(t,e){for(var n=de(e),r=function(t){n.some((function(e){return Z(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ce=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.__extends)(e,t),e}(ne);function le(t,e){for(var n=de(e),r=function(t){n=n.filter((function(e){return!Z(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var he=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(r.__extends)(e,t),e}(ne);function fe(t){return H(t.integerValue||t.doubleValue)}function de(t){return st(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var pe=function(t,e){this.field=t,this.transform=e},ve=function(t,e){this.version=t,this.transformResults=e},ge=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function me(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ye=function(){};function _e(t,e,n){t instanceof Ie?function(t,e,n){var r=t.value.clone(),i=Ee(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Te?function(t,e,n){if(me(t.precondition,e)){var r=Ee(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Oe(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function be(t,e,n){t instanceof Ie?function(t,e,n){if(me(t.precondition,e)){var r=t.value.clone(),i=Se(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ke(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Te?function(t,e,n){if(me(t.precondition,e)){var r=Se(t.fieldTransforms,n,e),i=e.data;i.setAll(Oe(t)),i.setAll(r),e.convertToFoundDocument(ke(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){me(t.precondition,e)&&e.convertToNoDocument(j.min())}(t,e)}function we(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),u=oe(o.transform,s||null);null!=u&&(null==n&&(n=ft.empty()),n.set(o.field,u))}return n||null}function xe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&S(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof se&&e instanceof se||t instanceof ce&&e instanceof ce?S(t.elements,e.elements,Z):t instanceof he&&e instanceof he?Z(t.A,e.A):t instanceof ae&&e instanceof ae}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ke(t){return t.isFoundDocument()?t.version:j.min()}var Ie=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(r.__extends)(e,t),e}(ye),Te=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(r.__extends)(e,t),e}(ye);function Oe(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ee(t,e,n){var r=new Map;I(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,ie(s,u,n[i]))}return r}function Se(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,a=n.data.field(s.field);r.set(s.field,re(u,a,e))}return r}var Ce,Ae,je=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(r.__extends)(e,t),e}(ye),Ne=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(r.__extends)(e,t),e}(ye),Pe=function(t){this.count=t};function Re(t){switch(t){case f.OK:return k();case f.CANCELLED:case f.UNKNOWN:case f.DEADLINE_EXCEEDED:case f.RESOURCE_EXHAUSTED:case f.INTERNAL:case f.UNAVAILABLE:case f.UNAUTHENTICATED:return!1;case f.INVALID_ARGUMENT:case f.NOT_FOUND:case f.ALREADY_EXISTS:case f.PERMISSION_DENIED:case f.FAILED_PRECONDITION:case f.ABORTED:case f.OUT_OF_RANGE:case f.UNIMPLEMENTED:case f.DATA_LOSS:return!0;default:return k()}}function De(t){if(void 0===t)return _("GRPC error has no .code"),f.UNKNOWN;switch(t){case Ce.OK:return f.OK;case Ce.CANCELLED:return f.CANCELLED;case Ce.UNKNOWN:return f.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return f.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return f.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return f.INTERNAL;case Ce.UNAVAILABLE:return f.UNAVAILABLE;case Ce.UNAUTHENTICATED:return f.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return f.INVALID_ARGUMENT;case Ce.NOT_FOUND:return f.NOT_FOUND;case Ce.ALREADY_EXISTS:return f.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return f.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return f.FAILED_PRECONDITION;case Ce.ABORTED:return f.ABORTED;case Ce.OUT_OF_RANGE:return f.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return f.UNIMPLEMENTED;case Ce.DATA_LOSS:return f.DATA_LOSS;default:return k()}}(Ae=Ce||(Ce={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";var Me=function(){function t(t,e){this.comparator=t,this.root=e||Fe.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fe.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fe.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Le(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Le(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Le(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Le(this.root,t,this.comparator,!0)},t}(),Le=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Fe=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw k();if(this.right.isRed())throw k();var t=this.left.check();if(t!==this.right.check())throw k();return t+(this.isRed()?0:1)},t}();Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1,Fe.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw k()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Fe(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ue=function(){function t(t){this.comparator=t,this.data=new Me(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new qe(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new qe(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),qe=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Ve=new Me(X.comparator);function Be(){return Ve}var Ke=new Me(X.comparator);function He(){return Ke}var Ge=new Me(X.comparator);function We(){return Ge}var ze=new Ue(X.comparator);function $e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ze,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Qe=new Ue(q);function Ye(){return Qe}var Xe=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Je.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(j.min(),r,Ye(),Be(),$e())},t}(),Je=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(V.EMPTY_BYTE_STRING,n,$e(),$e(),$e())},t}(),Ze=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},tn=function(t,e){this.targetId=t,this.V=e},en=function(t,e,n,r){void 0===n&&(n=V.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},nn=function(){function t(){this.S=0,this.D=an(),this.C=V.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=$e(),e=$e(),n=$e();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:k()}})),new Je(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=an()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),rn=function(){function t(t){this.W=t,this.G=new Map,this.H=Be(),this.J=on(),this.Y=new Ue(q)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:k()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(bt(i))if(0===n){var o=new X(i.path);this.tt(e,o,vt.newNoDocument(o,j.min()))}else I(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&bt(o.target)){var s=new X(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,vt.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=$e();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Xe(t,n,this.Y,this.H,r);return this.H=Be(),this.J=on(),this.Y=new Ue(q),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new nn,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ue(q),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||y("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new nn),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function on(){return new Me(X.comparator)}function an(){return new Me(X.comparator)}var sn={asc:"ASCENDING",desc:"DESCENDING"},un={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cn=function(t,e){this.databaseId=t,this.I=e};function ln(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function hn(t,e){return t.I?e.toBase64():e.toUint8Array()}function fn(t,e){return ln(t,e.toTimestamp())}function dn(t){return I(!!t),j.fromTimestamp(function(t){var e=K(t);return new A(e.seconds,e.nanos)}(t))}function pn(t,e){return function(t){return new M(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function vn(t){var e=M.fromString(t);return I(Un(e)),e}function gn(t,e){return pn(t.databaseId,e.path)}function mn(t,e){var n=vn(e);if(n.get(1)!==t.databaseId.projectId)throw new d(f.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new d(f.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(wn(n))}function yn(t,e){return pn(t.databaseId,e)}function _n(t){var e=vn(t);return 4===e.length?M.emptyPath():wn(e)}function bn(t){return new M(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wn(t){return I(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function xn(t,e,n){return{name:gn(t,e),fields:n.value.mapValue.fields}}function kn(t,e,n){var r=mn(t,e.name),i=dn(e.updateTime),o=new ft({mapValue:{fields:e.fields}}),s=vt.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function In(t,e){var n;if(e instanceof Ie)n={update:xn(t,e.key,e.value)};else if(e instanceof je)n={delete:gn(t,e.key)};else if(e instanceof Te)n={update:xn(t,e.key,e.data),updateMask:Fn(e.fieldMask)};else{if(!(e instanceof Ne))return k();n={verify:gn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ae)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof se)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ce)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof he)return{fieldPath:e.field.canonicalString(),increment:n.A};throw k()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:fn(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:k()}(t,e.precondition)),n}function Tn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ge.updateTime(dn(t.updateTime)):void 0!==t.exists?ge.exists(t.exists):ge.none()}(e.currentDocument):ge.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)I("REQUEST_TIME"===e.setToServerValue),n=new ae;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new se(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ce(i)}else"increment"in e?n=new he(t,e.increment):k();var o=F.fromServerFormat(e.fieldPath);return new pe(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=mn(t,e.update.name),o=new ft({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new U(e.map((function(t){return F.fromServerFormat(t)})))}(e.updateMask);return new Te(i,o,s,n,r)}return new Ie(i,o,n,r)}if(e.delete){var u=mn(t,e.delete);return new je(u,n)}if(e.verify){var a=mn(t,e.verify);return new Ne(a,n)}return k()}function On(t,e){return{documents:[yn(t,e.path)]}}function En(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=yn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=yn(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ct(t.value))return{unaryFilter:{field:Rn(t.field),op:"IS_NAN"}};if(ut(t.value))return{unaryFilter:{field:Rn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ct(t.value))return{unaryFilter:{field:Rn(t.field),op:"IS_NOT_NAN"}};if(ut(t.value))return{unaryFilter:{field:Rn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rn(t.field),op:Pn(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Rn(t.field),direction:Nn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||$(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=An(e.startAt)),e.endAt&&(n.structuredQuery.endAt=An(e.endAt)),n}function Sn(t){var e=_n(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){I(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Cn(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Nt(Dn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return $(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=jn(n.startAt));var l=null;return n.endAt&&(l=jn(n.endAt)),Lt(e,i,u,s,a,"F",c,l)}function Cn(t){return t?void 0!==t.unaryFilter?[Ln(t)]:void 0!==t.fieldFilter?[Mn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Cn(t)})).reduce((function(t,e){return t.concat(e)})):k():[]}function An(t){return{before:t.before,values:t.position}}function jn(t){var e=!!t.before,n=t.values||[];return new At(n,e)}function Nn(t){return sn[t]}function Pn(t){return un[t]}function Rn(t){return{fieldPath:t.canonicalString()}}function Dn(t){return F.fromServerFormat(t.fieldPath)}function Mn(t){return wt.create(Dn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ln(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Dn(t.unaryFilter.field);return wt.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Dn(t.unaryFilter.field);return wt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Dn(t.unaryFilter.field);return wt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Dn(t.unaryFilter.field);return wt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return k()}}function Fn(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Un(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function qn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Bn(e)),e=Vn(t.get(n),e);return Bn(e)}function Vn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Bn(t){return t+""}function tr(t){var e=t.length;if(I(e>=2),2===e)return I(""===t.charAt(0)&&""===t.charAt(1)),M.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&k(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:k()}o=s+2}return new M(r)}var Kn=function(t,e){this.seconds=t,this.nanoseconds=e},Hn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Hn.store="owner",Hn.key="owner";var Gn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Gn.store="mutationQueues",Gn.keyPath="userId";var Wn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Wn.store="mutations",Wn.keyPath="batchId",Wn.userMutationsIndex="userMutationsIndex",Wn.userMutationsKeyPath=["userId","batchId"];var zn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,qn(e)]},t.key=function(t,e,n){return[t,qn(e),n]},t}();zn.store="documentMutations",zn.PLACEHOLDER=new zn;var $n=function(t,e){this.path=t,this.readTime=e},Qn=function(t,e){this.path=t,this.version=e},Yn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Yn.store="remoteDocuments",Yn.readTimeIndex="readTimeIndex",Yn.readTimeIndexPath="readTime",Yn.collectionReadTimeIndex="collectionReadTimeIndex",Yn.collectionReadTimeIndexPath=["parentPath","readTime"];var Xn=function(t){this.byteSize=t};Xn.store="remoteDocumentGlobal",Xn.key="remoteDocumentGlobalKey";var hr=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};hr.store="targets",hr.keyPath="targetId",hr.queryTargetsIndexName="queryTargetsIndex",hr.queryTargetsKeyPath=["canonicalId","targetId"];var Jn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Jn.store="targetDocuments",Jn.keyPath=["targetId","path"],Jn.documentTargetsIndex="documentTargetsIndex",Jn.documentTargetsKeyPath=["path","targetId"];var Zn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Zn.key="targetGlobalKey",Zn.store="targetGlobal";var er=function(t,e){this.collectionId=t,this.parent=e};er.store="collectionParents",er.keyPath=["collectionId","parent"];var nr=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};nr.store="clientMetadata",nr.keyPath="clientId";var rr=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};rr.store="bundles",rr.keyPath="bundleId";var ir=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ir.store="namedQueries",ir.keyPath="name";var or=Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__spreadArray)(Object(r.__spreadArray)([],[Gn.store,Wn.store,zn.store,Yn.store,hr.store,Hn.store,Zn.store,Jn.store]),[nr.store])),[Xn.store])),[er.store])),[rr.store,ir.store]),ar="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sr=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),br=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ur=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),cr=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new br,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new dr(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=yr(e.target.error);n.ft.reject(new dr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new dr(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(y("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new vr(e)},t}(),lr=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(Object(o.getUA)())&&_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return y("SimpleDb","Removing database:",t),gr(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=Object(o.getUA)(),n=e._t(t),r=0<n&&n<10,c=e.Et(t),s=0<c&&c<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.Tt)},e.It=function(t,e){return t.store(e)},e._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(y("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new dr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new d(f.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new dr(t,n))},i.onupgradeneeded=function(t){y("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){y("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,i,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s,u,a,c;return Object(r.__generator)(this,(function(l){switch(l.label){case 0:o="readonly"===e,s=0,u=function(){var e,u,c,l,h;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=r.sent(),e=cr.open(a.db,t,o?"readonly":"readwrite",i),u=n(e).catch((function(t){return e.abort(t),ur.reject(t)})).toPromise(),c={},u.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(r.sent(),u),c)];case 4:return l=r.sent(),h="FirebaseError"!==l.name&&s<3,y("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},a=this,l.label=1;case 1:return[5,u()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),fr=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return gr(this.Pt.delete())},t}(),dr=function(t){function e(e,n){var r=this;return(r=t.call(this,f.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.__extends)(e,t),e}(d);function pr(t){return"IndexedDbTransactionError"===t.name}var vr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(y("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(y("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),gr(n)},t.prototype.add=function(t){return y("SimpleDb","ADD",this.store.name,t,t),gr(this.store.add(t))},t.prototype.get=function(t){var e=this;return gr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),y("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return y("SimpleDb","DELETE",this.store.name,t),gr(this.store.delete(t))},t.prototype.count=function(){return y("SimpleDb","COUNT",this.store.name),gr(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){y("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new ur((function(n,r){e.onerror=function(t){var e=yr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new ur((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new fr(i),s=e(i.primaryKey,i.value,o);if(s instanceof ur){var u=s.catch((function(t){return o.done(),ur.reject(t)}));n.push(u)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return ur.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function gr(t){return new ur((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=yr(t.target.error);n(e)}}))}var mr=!1;function yr(t){var e=lr._t(Object(o.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new d("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return mr||(mr=!0,setTimeout((function(){throw r}),0)),r}}return t}var _r=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(r.__extends)(e,t),e}(sr);function wr(t,e){var n=T(t);return lr.It(n.Mt,e)}var xr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&_e(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&be(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&be(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(j.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),$e())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&S(this.mutations,t.mutations,(function(t,e){return xe(t,e)}))&&S(this.baseMutations,t.baseMutations,(function(t,e){return xe(t,e)}))},t}(),kr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){I(e.mutations.length===r.length);for(var i=We(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ir=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=j.min()),void 0===o&&(o=j.min()),void 0===s&&(s=V.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Tr=function(t){this.Lt=t};function Or(t,e){if(e.document)return kn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=X.fromSegments(e.noDocument.path),r=jr(e.noDocument.readTime),i=vt.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=X.fromSegments(e.unknownDocument.path);return r=jr(e.unknownDocument.version),vt.newUnknownDocument(o,r)}return k()}function Er(t,e,n){var r=Sr(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:gn(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ln(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Yn(null,null,o,s,r,i)}if(e.isNoDocument()){var u=e.key.path.toArray(),a=Ar(e.version);return s=e.hasCommittedMutations,new Yn(null,new $n(u,a),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Ar(e.version);return new Yn(new Qn(c,l),null,null,!0,r,i)}return k()}function Sr(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Cr(t){var e=new A(t[0],t[1]);return j.fromTimestamp(e)}function Ar(t){var e=t.toTimestamp();return new Kn(e.seconds,e.nanoseconds)}function jr(t){var e=new A(t.seconds,t.nanoseconds);return j.fromTimestamp(e)}function Nr(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Tn(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Tn(t.Lt,e)})),u=A.fromMillis(e.localWriteTimeMs);return new xr(e.batchId,u,n,s)}function Pr(t){var e,n,r=jr(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?jr(t.lastLimboFreeSnapshotVersion):j.min();return void 0!==t.query.documents?(I(1===(n=t.query).documents.length),e=Gt(Ft(_n(n.documents[0])))):e=function(t){return Gt(Sn(t))}(t.query),new Ir(e,t.targetId,0,t.lastListenSequenceNumber,r,i,V.fromBase64String(t.resumeToken))}function Rr(t,e){var n,r=Ar(e.snapshotVersion),i=Ar(e.lastLimboFreeSnapshotVersion);n=bt(e.target)?On(t.Lt,e.target):En(t.Lt,e.target);var o=e.resumeToken.toBase64();return new hr(e.targetId,yt(e.target),r,o,e.sequenceNumber,i,n)}function Dr(t){var e=Sn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Wt(e,e.limit,"L"):e}var Mr=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Lr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:jr(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Lr(t).put({bundleId:(n=e).id,createTime:Ar(dn(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Fr(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Dr(e.bundledQuery),readTime:jr(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Fr(t).put(function(t){return{name:t.name,readTime:Ar(dn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Lr(t){return wr(t,rr.store)}function Fr(t){return wr(t,ir.store)}var Ur=function(){function t(){this.Bt=new qr}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ur.resolve()},t.prototype.getCollectionParents=function(t,e){return ur.resolve(this.Bt.getEntries(e))},t}(),qr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ue(M.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ue(M.comparator)).toArray()},t}(),Vr=function(){function t(){this.qt=new qr}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:qn(i)};return Br(t).put(o)}return ur.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[C(e),""],!1,!0);return Br(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(tr(o.parent))}return n}))},t}();function Br(t){return wr(t,er.store)}var Kr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Gr(t,e,n){var r=t.store(Wn.store),i=t.store(zn.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.$t({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){I(1===u)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=zn.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return ur.waitFor(o).next((function(){return c}))}function Wr(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw k();e=t.noDocument}return JSON.stringify(e).length}Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(41943040,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);var zr=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return I(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qr(t).$t({index:Wn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Yr(t),s=Qr(t);return s.add({}).next((function(u){I("number"==typeof u);for(var a=new xr(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return In(t.Lt,e)})),i=n.mutations.map((function(e){return In(t.Lt,e)}));return new Wn(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,a),l=[],h=new Ue((function(t,e){return q(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=zn.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,zn.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[u]=a.keys()})),ur.waitFor(l).next((function(){return a}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Qr(t).get(e).next((function(t){return t?(I(t.userId===n.userId),Nr(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?ur.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Qr(t).$t({index:Wn.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(I(e.batchId>=r),o=Nr(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Qr(t).$t({index:Wn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qr(t).Nt(Wn.userMutationsIndex,n).next((function(t){return t.map((function(t){return Nr(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=zn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Yr(t).$t({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],l=tr(a);if(u===n.userId&&e.path.isEqual(l))return Qr(t).get(c).next((function(t){if(!t)throw k();I(t.userId===n.userId),o.push(Nr(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ue(q),i=[];return e.forEach((function(e){var o=zn.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Yr(t).$t({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=tr(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),ur.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=zn.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Ue(q);return Yr(t).$t({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],l=tr(a);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Wt(t,u)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Qr(t).get(e).next((function(t){if(null===t)throw k();I(t.userId===n.userId),r.push(Nr(n.R,t))})))})),ur.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Gr(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),ur.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return ur.resolve();var r=IDBKeyRange.lowerBound(zn.prefixForUser(e.userId)),i=[];return Yr(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=tr(t[1]);i.push(o)}else r.done()})).next((function(){I(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return $r(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Xr(t).get(this.userId).next((function(t){return t||new Gn(e.userId,-1,"")}))},t}();function $r(t,e,n){var r=zn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Yr(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Qr(t){return wr(t,Wn.store)}function Yr(t){return wr(t,zn.store)}function Xr(t){return wr(t,Gn.store)}var Jr=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Zr=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Jr(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return j.fromTimestamp(new A(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return ti(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return I(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ti(t).$t((function(s,u){var a=Pr(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.removeTargetData(t,a)))})).next((function(){return ur.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return ti(t).$t((function(t,n){var r=Pr(n);e(r)}))},t.prototype.Xt=function(t){return li(t).get(Zn.key).next((function(t){return I(null!==t),t}))},t.prototype.Zt=function(t,e){return li(t).put(Zn.key,e)},t.prototype.te=function(t,e){return ti(t).put(Rr(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=yt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ti(t).$t({range:r,index:hr.queryTargetsIndexName},(function(t,n,r){var o=Pr(n);_t(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=ei(t);return e.forEach((function(e){var s=qn(e.path);i.push(o.put(new Jn(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),ur.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=ei(t);return ur.forEach(e,(function(e){var o=qn(e.path);return ur.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ei(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ei(t),i=$e();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=tr(t[1]),o=new X(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=qn(e.path),r=IDBKeyRange.bound([n],[C(n)],!1,!0),i=0;return ei(t).$t({index:Jn.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return ti(t).get(e).next((function(t){return t?Pr(t):null}))},t}();function ti(t){return wr(t,hr.store)}function li(t){return wr(t,Zn.store)}function ei(t){return wr(t,Jn.store)}function ni(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){if(t.code!==f.FAILED_PRECONDITION||t.message!==ar)throw t;return y("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function ri(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=q(n,i);return 0===s?q(r,o):s}var ii=function(){function t(t){this.ne=t,this.buffer=new Ue(ri),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ri(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),oi=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,i=this.oe?3e5:6e4;y("LruGarbageCollector","Garbage collection scheduled in "+i+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return pr(e=n.sent())?(y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ni(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ai=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ur.resolve(h.o);var r=new ii(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(y("LruGarbageCollector","Garbage collection skipped; disabled"),ur.resolve(Kr)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(y("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Kr):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,u,a,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(y("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return a=Date.now(),m()<=c.LogLevel.DEBUG&&y("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),ur.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),si=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ai(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ui(t,n)},t.prototype.removeReference=function(t,e,n){return ui(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ui(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Xr(t).Ot((function(r){return $r(t,r,e).next((function(t){return t&&(n=!0),ur.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,u){if(u<=e){var a=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),ei(t).delete([0,qn(s.path)])}))}));i.push(a)}})).next((function(){return ur.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ui(t,e)},t.prototype.we=function(t,e){var n,r=ei(t),i=h.o;return r.$t({index:Jn.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,u=r.sequenceNumber;0===o?(i!==h.o&&e(new X(tr(n)),i),i=u,n=s):i=h.o})).next((function(){i!==h.o&&e(new X(tr(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ui(t,e){return ei(t).put(function(t,e){return new Jn(0,qn(t.path),e)}(e,t.currentSequenceNumber))}var ci=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.equalsFn(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){P(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.isEmpty=function(){return R(this.inner)},t}(),hi=function(){function t(){this.changes=new ci((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:j.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:vt.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ur.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),fi=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return vi(t).put(gi(e),n)},t.prototype.removeEntry=function(t,e){var n=vi(t),r=gi(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return vi(t).get(gi(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return vi(t).get(gi(e)).next((function(t){return{document:n.ye(e,t),size:Wr(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Be();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Be(),i=new Me(X.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Wr(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ur.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return vi(t).$t({range:r},(function(t,e,r){for(var s=X.fromSegments(t);o&&X.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Be(),o=e.path.length+1,s={};if(n.isEqual(j.min())){var u=e.path.toArray();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.toArray(),c=Sr(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Yn.collectionReadTimeIndex}return vi(t).$t(s,(function(t,n,s){if(t.length===o){var u=Or(r.R,n);e.path.isPrefixOf(u.key.path)?Yt(e,u)&&(i=i.insert(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new di(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return pi(t).get(Xn.key).next((function(t){return I(!!t),t}))},t.prototype.me=function(t,e){return pi(t).put(Xn.key,e)},t.prototype.ye=function(t,e){if(e){var n=Or(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(j.min()))return n}return vt.newInvalidDocument(t)},t}(),di=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ci((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(r.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ue((function(t,e){return q(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var u=e.Ae.get(o);if(s.document.isValidDocument()){var a=Er(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Wr(a);r+=c-u,n.push(e.Ie.addEntry(t,o,a))}else if(r-=u,e.trackRemovals){var l=Er(e.Ie.R,vt.newNoDocument(o,j.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),ur.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(hi);function pi(t){return wr(t,Xn.store)}function vi(t){return wr(t,Yn.store)}function gi(t){return t.path.toArray()}var mi=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;I(n<r&&n>=0&&r<=11);var o=new cr("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Hn.store)}(t),function(t){t.createObjectStore(Gn.store,{keyPath:Gn.keyPath}),t.createObjectStore(Wn.store,{keyPath:Wn.keyPath,autoIncrement:!0}).createIndex(Wn.userMutationsIndex,Wn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(zn.store)}(t),yi(t),function(t){t.createObjectStore(Yn.store)}(t));var s=ur.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Jn.store),t.deleteObjectStore(hr.store),t.deleteObjectStore(Zn.store)}(t),yi(t)),s=s.next((function(){return function(t){var e=t.store(Zn.store),n=new Zn(0,0,j.min().toTimestamp(),0);return e.put(Zn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Wn.store).Nt().next((function(n){t.deleteObjectStore(Wn.store),t.createObjectStore(Wn.store,{keyPath:Wn.keyPath,autoIncrement:!0}).createIndex(Wn.userMutationsIndex,Wn.userMutationsKeyPath,{unique:!0});var r=e.store(Wn.store),i=n.map((function(t){return r.put(t)}));return ur.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(nr.store,{keyPath:nr.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Xn.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Yn.store);e.createIndex(Yn.readTimeIndex,Yn.readTimeIndexPath,{unique:!1}),e.createIndex(Yn.collectionReadTimeIndex,Yn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(rr.store,{keyPath:rr.keyPath})}(t),function(t){t.createObjectStore(ir.store,{keyPath:ir.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(Yn.store).$t((function(t,n){e+=Wr(n)})).next((function(){var n=new Xn(e);return t.store(Xn.store).put(Xn.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Gn.store),r=t.store(Wn.store);return n.Nt().next((function(n){return ur.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Wn.userMutationsIndex,i).next((function(r){return ur.forEach(r,(function(r){I(r.userId===n.userId);var i=Nr(e.R,r);return Gr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Jn.store),n=t.store(Yn.store);return t.store(Zn.store).get(Zn.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new M(n),s=function(t){return[0,qn(t)]}(o);r.push(e.get(s).next((function(n){return n?ur.resolve():function(n){return e.put(new Jn(0,qn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ur.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(er.store,{keyPath:er.keyPath});var n=e.store(er.store),r=new qr,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:qn(i)})}};return e.store(Yn.store).$t({Ft:!0},(function(t,e){var n=new M(t);return i(n.popLast())})).next((function(){return e.store(zn.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=tr(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(hr.store);return n.$t((function(t,r){var i=Pr(r),o=Rr(e.R,i);return n.put(o)}))},t}();function yi(t){t.createObjectStore(Jn.store,{keyPath:Jn.keyPath}).createIndex(Jn.documentTargetsIndex,Jn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hr.store,{keyPath:hr.keyPath}).createIndex(hr.queryTargetsIndexName,hr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Zn.store)}var _i="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bi=function(){function t(e,n,r,i,o,s,u,a,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=u,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new d(f.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new si(this,i),this.Le=n+"main",this.R=new Tr(a),this.Be=new lr(this.Le,11,new mi(this.R)),this.qe=new Zr(this.referenceDelegate,this.R),this.Ut=new Vr,this.Ue=function(t,e){return new fi(t,e)}(this.R,this.Ut),this.Ke=new Mr,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new d(f.FAILED_PRECONDITION,_i);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new h(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(i){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return this.started?[2,t(i)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(i){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return null===i.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return xi(e).put(new nr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(pr(e))return y("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return wi(t).get(Hn.key).next((function(t){return ur.resolve(e.tn(t))}))},t.prototype.en=function(t){return xi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e,n,i,o=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=wr(t,nr.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ur.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=r.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)i=n[e],this.Qe.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ur.resolve(!0):wi(t).get(Hn.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new d(f.FAILED_PRECONDITION,_i);return!1}}return!(!e.networkEnabled||!e.inForeground)||xi(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&y("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t=this;return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Hn.store,nr.store],(function(e){var n=new _r(e,h.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return xi(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return zr.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;y("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,or,(function(o){return i=new _r(o,r.Ne?r.Ne.next():h.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw _("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new d(f.FAILED_PRECONDITION,ar);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return wi(t).get(Hn.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new d(f.FAILED_PRECONDITION,_i)}))},t.prototype.Ze=function(t){var e=new Hn(this.clientId,this.allowTabSynchronization,Date.now());return wi(t).put(Hn.key,e)},t.yt=function(){return lr.yt()},t.prototype.Xe=function(t){var e=this,n=wi(t);return n.get(Hn.key).next((function(t){return e.tn(t)?(y("IndexedDbPersistence","Releasing primary lease."),n.delete(Hn.key)):ur.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(_("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),Object(o.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return y("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return _("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){_("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function wi(t){return wr(t,Hn.store)}function xi(t){return wr(t,nr.store)}function ki(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ii=function(t,e){this.progress=t,this.wn=e},Ti=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return X.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Kt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new X(e)).next((function(t){var e=He();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=He();return this.Ut.getCollectionParents(t,i).next((function(s){return ur.forEach(s,(function(s){var u=function(t,e){return new Mt(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,u,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,l=r.get(c);null==l&&(l=vt.newInvalidDocument(c),r=r.insert(c,l)),be(a,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Yt(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=$e(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Te&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Oi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=$e(),i=$e(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ei=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(j.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Ut(e)||qt(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(m()<=c.LogLevel.DEBUG&&y("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Qt(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ue(Xt(t));return e.forEach((function(e,r){Yt(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return m()<=c.LogLevel.DEBUG&&y("QueryEngine","Using full collection scan to execute query:",Qt(e)),this.Sn.getDocumentsMatchingQuery(t,e,j.min())},t}(),Si=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Me(q),this.Fn=new ci((function(t){return yt(t)}),_t),this.$n=j.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ti(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function Ci(t,e,n,r){return new Si(t,e,n,r)}function Ai(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=T(t),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n._n.getAllMutationBatches(t).next((function(s){return r=s,i=n.persistence.getMutationQueue(e),o=new Ti(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)})).next((function(e){for(var n=[],i=[],s=$e(),u=0,a=r;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];i.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];s=s.add(g.key)}}return o.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return s=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),s)]}}))}))}function ji(t,e){var n=T(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ur.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);I(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Ni(t){var e=T(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Pi(t,e){var n=T(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var a=e.resumeToken;if(a.approximateByteSize()>0){var c=u.withResumeToken(a,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return I(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var u=Be();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Ri(t,o,e.documentUpdates,r,void 0).next((function(t){u=t}))),!r.isEqual(j.min())){var a=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(a)}return ur.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,u)})).next((function(){return u}))})).then((function(t){return n.kn=i,t}))}function Ri(t,e,n,r,i){var o=$e();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Be();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(j.min())?(e.removeEntry(n,a),o=o.insert(n,s)):!u.isValidDocument()||s.version.compareTo(u.version)>0||0===s.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(s,a),o=o.insert(n,s)):y("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}function Di(t,e){var n=T(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Mi(t,e){var n=T(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,ur.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ir(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Li(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,u;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=T(t),o=n.kn.get(e),s=i?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),i?[3,3]:[4,n.persistence.runTransaction("Release target",s,(function(t){return n.persistence.referenceDelegate.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!pr(u=r.sent()))throw u;return y("LocalStore","Failed to update sequence numbers for target "+e+": "+u),[3,5];case 5:return n.kn=n.kn.remove(e),n.Fn.delete(o.target),[2]}}))}))}function Fi(t,e,n){var r=T(t),i=j.min(),o=$e();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=T(t),i=r.Fn.get(n);return void 0!==i?ur.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Gt(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:j.min(),n?o:$e())})).next((function(t){return{documents:t,Bn:o}}))}))}function Ui(t,e){var n=T(t),r=T(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function qi(t){var e=T(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=T(t),i=Be(),o=Sr(n),s=vi(e),u=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Yn.readTimeIndex,range:u},(function(t,e){var n=Or(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Cr(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Vi(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){return[2,(e=T(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=vi(t),n=j.min();return e.$t({index:Yn.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Cr(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Bi(t,e,i,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s,u,a,c,l,h,f,d,p;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:for(o=T(t),s=$e(),u=Be(),a=We(),c=0,l=i;c<l.length;c++)h=l[c],f=e.qn(h.metadata.name),h.document&&(s=s.add(f)),u=u.insert(f,e.Un(h)),a=a.insert(f,e.Kn(h.metadata.readTime));return d=o.On.newChangeBuffer({trackRemovals:!0}),[4,Mi(o,function(t){return Gt(Ft(M.fromString("__bundle__/docs/"+t)))}(n))];case 1:return p=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ri(t,d,u,j.min(),a).next((function(e){return d.apply(t),e})).next((function(e){return o.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return o.qe.addMatchingKeys(t,s,p.targetId)})).next((function(){return o.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Ki(t,e,i){return void 0===i&&(i=$e()),Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Mi(t,Gt(Dr(e.bundledQuery)))];case 1:return n=r.sent(),[2,(o=T(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var r=dn(e.readTime);if(n.snapshotVersion.compareTo(r)>=0)return o.Ke.saveNamedQuery(t,e);var s=n.withResumeToken(V.EMPTY_BYTE_STRING,r);return o.kn=o.kn.insert(s.targetId,s),o.qe.updateTargetData(t,s).next((function(){return o.qe.removeMatchingKeysForTargetId(t,n.targetId)})).next((function(){return o.qe.addMatchingKeys(t,i,n.targetId)})).next((function(){return o.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var Hi=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ur.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:dn(n.createTime)}),ur.resolve()},t.prototype.getNamedQuery=function(t,e){return ur.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Dr(t.bundledQuery),readTime:dn(t.readTime)}}(e)),ur.resolve()},t}(),Gi=function(){function t(){this.Wn=new Ue(Wi.Gn),this.zn=new Ue(Wi.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Wi(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Wi(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new X(new M([])),r=new Wi(n,t),i=new Wi(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new X(new M([])),n=new Wi(e,t),r=new Wi(e,t+1),i=$e();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Wi(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Wi=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return X.comparator(t.key,e.key)||q(t.ns,e.ns)},t.Hn=function(t,e){return q(t.ns,e.ns)||X.comparator(t.key,e.key)},t}(),zi=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ue(Wi.Gn)}return t.prototype.checkEmpty=function(t){return ur.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new xr(i,e,n,r);this._n.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.rs=this.rs.add(new Wi(a.key,i)),this.Ut.addToCollectionParentIndex(t,a.key.path.popLast())}return ur.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ur.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return ur.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ur.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ur.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Wi(e,0),i=new Wi(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),ur.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ue(q);return e.forEach((function(t){var e=new Wi(t,0),i=new Wi(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),ur.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;X.isDocumentKey(i)||(i=i.child(""));var o=new Wi(new X(i),0),s=new Ue(q);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),ur.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;I(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ur.forEach(e.mutations,(function(i){var o=new Wi(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Wi(e,0),r=this.rs.firstAfterOrEqual(n);return ur.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,ur.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),$i=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Me(X.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ur.resolve(n?n.document.clone():vt.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Be();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():vt.newInvalidDocument(t))})),ur.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Be(),i=new X(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),u=s.key,a=s.value,c=a.document,l=a.readTime;if(!e.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||Yt(e,c)&&(r=r.insert(c.key,c.clone()))}return ur.resolve(r)},t.prototype.fs=function(t,e){return ur.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Qi(this)},t.prototype.getSize=function(t){return ur.resolve(this.size)},t}(),Qi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(r.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),ur.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(hi),Yi=function(){function t(t){this.persistence=t,this.ds=new ci((function(t){return yt(t)}),_t),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.ws=0,this._s=new Gi,this.targetCount=0,this.ys=Jr.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),ur.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ur.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ur.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ur.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ur.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Jr(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ur.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ur.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ur.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,u.targetId)),i++)})),ur.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return ur.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ur.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ur.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),ur.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ur.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ur.resolve(n)},t.prototype.containsKey=function(t,e){return ur.resolve(this._s.containsKey(e))},t}(),Xi=function(){function t(t,e){var n=this;this.gs={},this.Ne=new h(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Yi(this),this.Ut=new Ur,this.Ue=function(t,e){return new $i(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Tr(e),this.Ke=new Hi(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new zi(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;y("MemoryPersistence","Starting transaction:",t);var i=new Ji(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return ur.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Ji=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(r.__extends)(e,t),e}(sr),Zi=function(){function t(t){this.persistence=t,this.As=new Gi,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw k()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ur.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ur.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ur.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ur.forEach(this.vs,(function(r){var i=X.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ur.or([function(){return ur.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),to=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function eo(t,e){return"firestore_clients_"+t+"_"+e}function no(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function ro(t,e){return"firestore_targets_"+t+"_"+e}to.UNAUTHENTICATED=new to(null),to.GOOGLE_CREDENTIALS=new to("google-credentials-uid"),to.FIRST_PARTY=new to("first-party-uid"),to.MOCK_USER=new to("mock-user");var io=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new d(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(_("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),oo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new d(i.error.code,i.error.message)),o?new t(e,i.state,r):(_("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ao=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ye(),s=0;i&&s<r.activeTargetIds.length;++s)i=Y(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(_("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),so=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(_("SharedClientState","Failed to parse online state: "+e),null)},t}(),uo=function(){function t(){this.activeTargetIds=Ye()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),co=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Me(q),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=eo(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new uo),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e,n,i,o,s,u,a,c,l,h,f=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Ns&&(o=this.getItem(eo(this.persistenceKey,i)))&&(s=ao.Vs(i,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(u=this.storage.getItem(this.Us))&&(a=this.js(u))&&this.Ws(a),c=0,l=this.$s;c<l.length;c++)h=l[c],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(ro(this.persistenceKey,t));if(n){var r=oo.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(ro(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return y("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){y("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){y("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,i=t;if(i.storageArea===this.storage){if(y("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Os)return void _("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){var t,e,n,o,s,u;return Object(r.__generator)(this,(function(r){if(this.started){if(null!==i.key)if(this.Ls.test(i.key)){if(null==i.newValue)return t=this.ti(i.key),[2,this.ei(t,null)];if(e=this.ni(i.key,i.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(i.key)){if(null!==i.newValue&&(n=this.si(i.key,i.newValue)))return[2,this.ii(n)]}else if(this.qs.test(i.key)){if(null!==i.newValue&&(o=this.ri(i.key,i.newValue)))return[2,this.oi(o)]}else if(i.key===this.Us){if(null!==i.newValue&&(s=this.js(i.newValue)))return[2,this.Ws(s)]}else if(i.key===this.Ms)(u=function(t){var e=h.o;if(null!=t)try{var n=JSON.parse(t);I("number"==typeof n),e=n}catch(t){_("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(i.newValue))!==h.o&&this.sequenceNumberHandler(u);else if(i.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(i);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new io(this.currentUser,t,e,n),i=no(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=no(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=ro(this.persistenceKey,t),i=new oo(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ao.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return io.Vs(new to(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return oo.Vs(r,e)},t.prototype.js=function(t){return so.Vs(t)},t.prototype.ii=function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(y("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.syncEngine.hi(s,u).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ye();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),lo=function(){function t(){this.li=new uo,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new uo,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ho=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),fo=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),po={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},vo=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),go=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(r.__extends)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new l.g;s.listenOnce(l.c.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case l.a.NO_ERROR:var e=s.getResponseJson();y("Connection","XHR received:",JSON.stringify(e)),i(e);break;case l.a.TIMEOUT:y("Connection",'RPC "'+t+'" timed out'),o(new d(f.DEADLINE_EXCEEDED,"Request time out"));break;case l.a.HTTP_ERROR:var n=s.getStatus();if(y("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(f).indexOf(e)>=0?e:f.UNKNOWN}(r.status);o(new d(u,r.message))}else o(new d(f.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new d(f.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{y("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(l.h)(),i=Object(l.i)(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new l.d({})),this.ki(c.initMessageHeaders,e),Object(o.isMobileCordova)()||Object(o.isReactNative)()||Object(o.isElectron)()||Object(o.isIE)()||Object(o.isUWP)()||Object(o.isBrowserExtension)()||(c.httpHeadersOverwriteParam="$httpHeaders");var h=n.join("");y("Connection","Creating WebChannel: "+h,c);var v=r.createWebChannel(h,c),p=!1,m=!1,_=new vo({Ei:function(t){m?y("Connection","Not sending because WebChannel is closed:",t):(p||(y("Connection","Opening WebChannel transport."),v.open(),p=!0),y("Connection","WebChannel sending:",t),v.send(t))},Ti:function(){return v.close()}}),x=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return x(v,l.f.EventType.OPEN,(function(){m||y("Connection","WebChannel transport opened.")})),x(v,l.f.EventType.CLOSE,(function(){m||(m=!0,y("Connection","WebChannel transport closed"),_.Vi())})),x(v,l.f.EventType.ERROR,(function(t){m||(m=!0,w("Connection","WebChannel transport errored:",t),_.Vi(new d(f.UNAVAILABLE,"The operation could not be completed")))})),x(v,l.f.EventType.MESSAGE,(function(t){var e;if(!m){var n=t.data[0];I(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){y("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ce[t];if(void 0!==e)return De(e)}(o),u=i.message;void 0===s&&(s=f.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),m=!0,_.Vi(new d(s,u)),v.close()}else y("Connection","WebChannel received:",n),_.Si(n)}})),x(i,l.b.STAT_EVENT,(function(t){t.stat===l.e.PROXY?y("Connection","Detected buffering proxy"):t.stat===l.e.NOPROXY&&y("Connection","Detected no buffering proxy")})),setTimeout((function(){_.Pi()}),0),_},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);y("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return y("RestConnection","Received: ",t),t}),(function(e){throw w("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=po[t];return this.Di+"/v1/"+e+":"+n},t}());function mo(){return"undefined"!=typeof window?window:null}function yo(){return"undefined"!=typeof document?document:null}function _o(t){return new cn(t,!0)}var bo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&y("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),wo=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new bo(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===f.RESOURCE_EXHAUSTED?(_(e.toString()),_("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===f.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new d(f.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return y("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),xo=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(r.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:k()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(I(void 0===e||"string"==typeof e),V.fromBase64String(e||"")):(I(void 0===e||e instanceof Uint8Array),V.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?f.UNKNOWN:De(t.code);return new d(e,t.message||"")}(u);n=new en(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=mn(t,r.document.name),o=dn(r.document.updateTime);var u=new ft({mapValue:{fields:r.document.fields}}),a=(s=vt.newFoundDocument(i,o,u),r.targetIds||[]),c=r.removedTargetIds||[];n=new Ze(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=mn(t,r.document),o=r.readTime?dn(r.readTime):j.min(),u=vt.newNoDocument(i,o),s=r.removedTargetIds||[],n=new Ze([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=mn(t,r.document),o=r.removedTargetIds||[],n=new Ze([],o,i,null);else{if(!("filter"in e))return k();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Pe(r),o=l.targetId,n=new tn(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return j.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?j.min():e.readTime?dn(e.readTime):j.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=bn(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=bt(r)?{documents:On(t,r)}:{query:En(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=hn(t,e.resumeToken):e.snapshotVersion.compareTo(j.min())>0&&(n.readTime=ln(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return k()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=bn(this.R),e.removeTarget=t,this.cr(e)},e}(wo),ko=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(I(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(I(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?dn(t.updateTime):dn(e);return n.isEqual(j.min())&&(n=dn(e)),new ve(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=dn(t.commitTime);return this.listener.Tr(n,e)}return I(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=bn(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return In(e.R,t)}))};this.cr(n)},e}(wo),Io=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(r.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new d(f.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===f.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new d(f.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===f.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new d(f.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),To=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(_(e),this.Vr=!1):y("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Oo=function(t,e,i,n,s){var u=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=s,this.Lr.di((function(t){i.enqueueAndForget((function(){return Object(r.__awaiter)(u,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return Do(this)?(y("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return(e=T(t)).Or.add(4),[4,So(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Eo(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new To(i,n)};function Eo(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(!Do(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function So(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Co(t,e){var n=T(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Ro(n)?Po(n):Yo(n).er()&&jo(n,e))}function Ao(t,e){var n=T(t),r=Yo(n);n.$r.delete(e),r.er()&&No(n,e),0===n.$r.size&&(r.er()?r.ir():Do(n)&&n.Br.set("Unknown"))}function jo(t,e){t.qr.U(e.targetId),Yo(t).mr(e)}function No(t,e){t.qr.U(e),Yo(t).yr(e)}function Po(t){t.qr=new rn({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Yo(t).start(),t.Br.Sr()}function Ro(t){return Do(t)&&!Yo(t).tr()&&t.$r.size>0}function Do(t){return 0===T(t).Or.size}function Mo(t){t.qr=void 0}function Lo(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return t.$r.forEach((function(e,n){jo(t,e)})),[2]}))}))}function Fo(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(n){return Mo(t),Ro(t)?(t.Br.Nr(e),Po(t)):t.Br.set("Unknown"),[2]}))}))}function Uo(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,s,u;return Object(r.__generator)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof en&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(s=o[i],t.$r.has(s)?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]):[3,5];case 2:r.sent(),t.$r.delete(s),t.qr.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return n=a.sent(),y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),[4,qo(t,n)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ze?t.qr.X(e):e instanceof tn?t.qr.rt(e):t.qr.et(e),i.isEqual(j.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Ni(t.localStore)];case 8:return s=a.sent(),i.compareTo(s)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(V.EMPTY_BYTE_STRING,n.snapshotVersion)),No(t,e);var r=new Ir(n.target,e,1,n.sequenceNumber);jo(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,i)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return y("RemoteStore","Failed to raise snapshot:",u=a.sent()),[4,qo(t,u)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function qo(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n=this;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:if(!pr(e))throw e;return t.Or.add(1),[4,So(t)];case 1:return s.sent(),t.Br.set("Offline"),i||(i=function(){return Ni(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return y("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return e.sent(),t.Or.delete(1),[4,Eo(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Vo(t,e){return e().catch((function(n){return qo(t,n,e)}))}function Bo(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,n,i,o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:e=T(t),n=Xo(e),i=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Do(t)&&t.Fr.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Di(e.localStore,i)];case 3:return null===(o=r.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(i=o.batchId,function(t,e){t.Fr.push(e);var n=Xo(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,qo(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Ko(e)&&Ho(e),[2]}}))}))}function Ko(t){return Do(t)&&!Xo(t).tr()&&t.Fr.length>0}function Ho(t){Xo(t).start()}function Go(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return Xo(t).Ar(),[2]}))}))}function Wo(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,n,i,o;return Object(r.__generator)(this,(function(r){for(e=Xo(t),n=0,i=t.Fr;n<i.length;n++)o=i[n],e.Er(o.mutations);return[2]}))}))}function zo(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=t.Fr.shift(),o=kr.from(n,e,i),[4,Vo(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return r.sent(),[4,Bo(t)];case 2:return r.sent(),[2]}}))}))}function $o(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(i){switch(i.label){case 0:return e&&Xo(t).pr?[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return Re(i=e.code)&&i!==f.ABORTED?(n=t.Fr.shift(),Xo(t).sr(),[4,Vo(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,Bo(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return Ko(t)&&Ho(t),[2]}}))}))}function Qo(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=T(t),e?(n.Or.delete(2),[4,Eo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,So(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Yo(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=T(t);return r.br(),new xo(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Lo.bind(null,t),Ri:Fo.bind(null,t),_r:Uo.bind(null,t)}),t.Mr.push((function(i){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return i?(t.Ur.sr(),Ro(t)?Po(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Mo(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Xo(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=T(t);return r.br(),new ko(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Go.bind(null,t),Ri:$o.bind(null,t),Ir:Wo.bind(null,t),Tr:zo.bind(null,t)}),t.Mr.push((function(i){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return i?(t.Kr.sr(),[4,Bo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(y("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var Jo=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new d(f.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Zo(t,e){if(_("AsyncQueue",e+": "+t),pr(t))return new d(f.UNAVAILABLE,e+": "+t);throw t}var ta=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||X.comparator(e.key,n.key)}:function(t,e){return X.comparator(t.key,e.key)},this.keyedMap=He(),this.sortedSet=new Me(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ea=function(){function t(){this.Qr=new Me(X.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):k():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),na=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ta.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zt(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ra=function(){this.Wr=void 0,this.listeners=[]},ia=function(){this.queries=new ci((function(t){return $t(t)}),zt),this.onlineState="Unknown",this.Gr=new Set};function oa(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(n=T(t),i=e.query,o=!1,(s=n.queries.get(i))||(o=!0,s=new ra),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),u=s,[4,n.onListen(i)];case 2:return u.Wr=r.sent(),[3,4];case 3:return a=r.sent(),c=Zo(a,"Initialization of query '"+Qt(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(i,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ca(n),[2]}}))}))}function aa(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u;return Object(r.__generator)(this,(function(r){return n=T(t),i=e.query,o=!1,(s=n.queries.get(i))&&(u=s.listeners.indexOf(e))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]}))}))}function sa(t,e){for(var n=T(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,l=a.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);a.Wr=s}}r&&ca(n)}function ua(t,e,n){var r=T(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ca(t){t.Gr.forEach((function(t){t.next()}))}var la=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new na(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=na.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ha=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),fa=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return mn(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?kn(this.R,t.document,!1):vt.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return dn(t)},t}(),da=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=pa(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new fa(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),u=0,a=o.metadata.queries;u<a.length;u++){var c=a[u],l=(e.get(c)||$e()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e,n,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Bi(this.localStore,new fa(this.R),this.documents,this.ro.id)];case 1:t=r.sent(),e=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?(o=i[n],[4,Ki(this.localStore,o,e.get(o.name))]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ii(Object.assign({},this.progress),t))]}}))}))},t}();function pa(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var va=function(t){this.key=t},ga=function(t){this.key=t},ma=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=$e(),this.mutatedKeys=$e(),this.lo=Xt(t),this.fo=new ta(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new ea,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,u=!1,a=Ut(this.query)&&i.size===this.query.limit?i.last():null,c=qt(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Yt(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(a&&n.lo(h,a)>0||c&&n.lo(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(a||c)&&(u=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Ut(this.query)||qt(this.query))for(;s.size>this.query.limit;){var l=Ut(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:u,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],u=0===this.ho.size&&this.current?1:0,a=u!==this.ao;return this.ao=u,0!==o.length||a?{snapshot:new na(this.query,t.fo,i,o,t.mutatedKeys,0===u,a,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ea,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=$e(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new ga(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new va(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=$e();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return na.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ya=function(t,e,n){this.query=t,this.targetId=e,this.view=n},_a=function(t){this.key=t,this.bo=!1},ba=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ci((function(t){return $t(t)}),zt),this.Vo=new Map,this.So=new Set,this.Do=new Me(X.comparator),this.Co=new Map,this.No=new Gi,this.xo={},this.ko=new Map,this.Fo=Jr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function wa(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=Ya(t),(s=n.Po.get(e))?(i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),o=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Mi(n.localStore,Gt(e))];case 2:return u=r.sent(),a=n.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,[4,xa(n,e,i,"current"===a)];case 3:o=r.sent(),n.isPrimaryClient&&Co(n.remoteStore,u),r.label=4;case 4:return[2,o]}}))}))}function xa(t,e,i,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var s,u,a,o,c,l;return Object(r.__generator)(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,i,n){return function(t,e,i,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s,u;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return(o=e.view._o(i)).Nn?[4,Fi(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=n&&n.targetChanges.get(e.targetId),u=e.view.applyChanges(o,t.isPrimaryClient,s),[2,(Da(t,e.targetId,u.To),u.snapshot)]}}))}))}(t,e,i,n)},[4,Fi(t.localStore,e,!0)];case 1:return s=h.sent(),u=new ma(e,s.Bn),a=u._o(s.documents),o=Je.createSynthesizedTargetChangeForCurrentChange(i,n&&"Offline"!==t.onlineState),c=u.applyChanges(a,t.isPrimaryClient,o),Da(t,i,c.To),l=new ya(e,i,u),[2,(t.Po.set(e,l),t.Vo.has(i)?t.Vo.get(i).push(e):t.Vo.set(i,[e]),c.snapshot)]}}))}))}function ka(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=T(t),i=n.Po.get(e),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter((function(t){return!zt(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,Li(n.localStore,i.targetId,!1).then((function(){n.sharedClientState.clearQueryState(i.targetId),Ao(n.remoteStore,i.targetId),Pa(n,i.targetId)})).catch(ni)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Pa(n,i.targetId),[4,Li(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Ia(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,u;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=Xa(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=T(t),i=A.now(),o=e.reduce((function(t,e){return t.add(e.key)}),$e());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],l=we(c,n.get(c.key));null!=l&&s.push(new Te(c.key,l,pt(l.value.mapValue),ge.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(n.localStore,e)];case 2:return o=r.sent(),n.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Me(q)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(n,o.batchId,i),[4,Fa(n,o.changes)];case 3:return r.sent(),[4,Bo(n.remoteStore)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),u=Zo(s,"Failed to persist write"),i.reject(u),[3,6];case 6:return[2]}}))}))}function Ta(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=T(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Pi(n.localStore,e)];case 2:return i=r.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(I(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?I(r.bo):t.removedDocuments.size>0&&(I(r.bo),r.bo=!1))})),[4,Fa(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,ni(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Oa(t,e,n){var r=T(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=T(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&ca(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ea(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,u,a,c;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return(n=T(t)).sharedClientState.updateQueryState(e,"rejected",i),o=n.Co.get(e),(s=o&&o.key)?(u=(u=new Me(X.comparator)).insert(s,vt.newNoDocument(s,j.min())),a=$e().add(s),c=new Xe(j.min(),new Map,new Ue(q),u,a),[4,Ta(n,c)]):[3,2];case 1:return r.sent(),n.Do=n.Do.remove(s),n.Co.delete(e),La(n),[3,4];case 2:return[4,Li(n.localStore,e,!1).then((function(){return Pa(n,e,i)})).catch(ni)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function Sa(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=T(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,ji(n.localStore,e)];case 2:return o=r.sent(),Na(n,i,null),ja(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,Fa(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,ni(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ca(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=T(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=T(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return I(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(n.localStore,e)];case 2:return o=r.sent(),Na(n,e,i),ja(n,e),n.sharedClientState.updateMutationState(e,"rejected",i),[4,Fa(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,ni(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Aa(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:Do((n=T(t)).remoteStore)||y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=T(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.ko.get(i)||[]).push(e),n.ko.set(i,o),[3,4]);case 3:return s=r.sent(),u=Zo(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(u),[3,4];case 4:return[2]}}))}))}function ja(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Na(t,e,n){var r=T(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Pa(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ra(t,e)}))}function Ra(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ao(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),La(t))}function Da(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof va?(t.No.addReference(o.key,e),Ma(t,o)):o instanceof ga?(y("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ra(t,o.key)):k()}}function Ma(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(y("SyncEngine","New document in limbo: "+n),t.So.add(r),La(t))}function La(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new X(M.fromString(e)),r=t.Fo.next();t.Co.set(r,new _a(n)),t.Do=t.Do.insert(n,r),Co(t.remoteStore,new Ir(Gt(Ft(n.path)),r,2,h.o))}}function Fa(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,s,u,a;return Object(r.__generator)(this,(function(o){switch(o.label){case 0:return n=T(t),s=[],u=[],a=[],n.Po.isEmpty()?[3,3]:(n.Po.forEach((function(t,r){a.push(n.Oo(r,e,i).then((function(t){if(t){n.isPrimaryClient&&n.sharedClientState.updateQueryState(r.targetId,t.fromCache?"not-current":"current"),s.push(t);var e=Oi.Pn(r.targetId,t);u.push(e)}})))})),[4,Promise.all(a)]);case 1:return o.sent(),n.vo._r(s),[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c,l,h;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=T(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ur.forEach(e,(function(e){return ur.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return ur.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!pr(i=r.sent()))throw i;return y("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)u=s[o],a=u.targetId,u.fromCache||(c=n.kn.get(a),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(a,h));return[2]}}))}))}(n.localStore,u)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Ua(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return(n=T(t)).currentUser.isEqual(e)?[3,3]:(y("SyncEngine","User change. New user:",e.toKey()),[4,Ai(n.localStore,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new d(f.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),[4,Fa(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function qa(t,e){var n=T(t),r=n.Co.get(e);if(r&&r.bo)return $e().add(r.key);var i=$e(),o=n.Vo.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Po.get(a);i=i.unionWith(c.view.wo)}return i}function Va(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Fi((n=T(t)).localStore,e.query,!0)];case 1:return i=r.sent(),o=e.view.Ao(i),[2,(n.isPrimaryClient&&Da(n,e.targetId,o.To),o)]}}))}))}function Ba(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){return[2,qi((e=T(t)).localStore).then((function(t){return Fa(e,t)}))]}))}))}function Ka(t,e,i,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=T(t),r=T(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):ur.resolve(null)}))}))}((o=T(t)).localStore,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==i?[3,3]:[4,Bo(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===i||"rejected"===i?(Na(o,e,n||null),ja(o,e),function(t,e){T(T(t)._n).Gt(e)}(o.localStore,e)):k(),r.label=4;case 4:return[4,Fa(o,s)];case 5:return r.sent(),[3,7];case 6:y("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Ha(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c,l;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return Ya(n=T(t)),Xa(n),!0!==e||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,Ga(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,Qo(n.remoteStore,!0)];case 2:for(r.sent(),s=0,u=o;s<u.length;s++)a=u[s],Co(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return Pa(n,e),Li(n.localStore,e,!0)})),Ao(n.remoteStore,e)})),[4,l]);case 4:return r.sent(),[4,Ga(n,c)];case 5:return r.sent(),function(t){var e=T(t);e.Co.forEach((function(t,n){Ao(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Me(X.comparator)}(n),n.$o=!1,[4,Qo(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Ga(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c,l,h,f,d,p,v,m;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=T(t),i=[],o=[],s=0,u=e,r.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(l=n.Vo.get(a))&&0!==l.length?[4,Mi(n.localStore,Gt(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Va(n,p)]):[3,6];case 4:(v=r.sent()).snapshot&&o.push(v.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ui(n.localStore,a)];case 8:return m=r.sent(),[4,Mi(n.localStore,m)];case 9:return c=r.sent(),[4,xa(n,Wa(m),a,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(o),i)]}}))}))}function Wa(t){return Lt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function za(t){var e=T(t);return T(T(e.localStore).persistence).fn()}function $a(t,e,i,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s,u;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return(o=T(t)).$o?(y("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,qi(o.localStore)];case 3:return s=r.sent(),u=Xe.createSynthesizedRemoteEventForCurrentChange(e,"current"===i),[4,Fa(o,s,u)];case 4:return r.sent(),[3,8];case 5:return[4,Li(o.localStore,e,!0)];case 6:return r.sent(),Pa(o,e,n),[3,8];case 7:k(),r.label=8;case 8:return[2]}}))}))}function Qa(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,u,a,c,l,h,f,d;return Object(r.__generator)(this,(function(p){switch(p.label){case 0:if(!(n=Ya(t)).$o)return[3,10];o=0,s=e,p.label=1;case 1:return o<s.length?(u=s[o],n.Vo.has(u)?(y("SyncEngine","Adding an already active target "+u),[3,5]):[4,Ui(n.localStore,u)]):[3,6];case 2:return a=p.sent(),[4,Mi(n.localStore,a)];case 3:return c=p.sent(),[4,xa(n,Wa(a),c.targetId,!1)];case 4:p.sent(),Co(n.remoteStore,c),p.label=5;case 5:return o++,[3,1];case 6:l=function(t){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return n.Vo.has(t)?[4,Li(n.localStore,t,!1).then((function(){Ao(n.remoteStore,t),Pa(n,t)})).catch(ni)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=i,p.label=7;case 7:return h<f.length?(d=f[h],[5,l(d)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ya(t){var e=T(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ta.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qa.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ea.bind(null,e),e.vo._r=sa.bind(null,e.eventManager),e.vo.Mo=ua.bind(null,e.eventManager),e}function Xa(t){var e=T(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sa.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ca.bind(null,e),e}function Ja(t,e,i){var n=T(t);(function(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,u,a,c;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return n=r.sent(),[4,function(t,e){var n=T(t),r=dn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,n)];case 2:return r.sent()?[4,e.close()]:[3,4];case 3:return[2,(r.sent(),void i._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(n)))];case 4:return i._updateProgress(pa(n)),o=new da(n,t.localStore,e.R),[4,e.Lo()];case 5:s=r.sent(),r.label=6;case 6:return s?[4,o.oo(s)]:[3,10];case 7:return(u=r.sent())&&i._updateProgress(u),[4,e.Lo()];case 8:s=r.sent(),r.label=9;case 9:return[3,6];case 10:return[4,o.complete()];case 11:return a=r.sent(),[4,Fa(t,a.wn,void 0)];case 12:return r.sent(),[4,function(t,e){var n=T(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,n)];case 13:return r.sent(),i._completeWith(a.progress),[3,15];case 14:return w("SyncEngine","Loading bundle failed with "+(c=r.sent())),i._failWith(c),[3,15];case 15:return[2]}}))}))})(n,e,i).then((function(){n.sharedClientState.notifyBundleLoaded()}))}var Za=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return this.R=_o(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Ci(this.persistence,new Ei,t.initialUser,this.R)},t.prototype.qo=function(t){return new Xi(Zi.bs,this.R)},t.prototype.Bo=function(t){return new lo},t.prototype.terminate=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),ts=function(t){function i(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r.__extends)(i,t),i.prototype.initialize=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Vi(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,Xa(this.Qo.syncEngine)];case 4:return r.sent(),[4,Bo(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},i.prototype.Ko=function(t){return Ci(this.persistence,new Ei,t.initialUser,this.R)},i.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new oi(e,t.asyncQueue)},i.prototype.qo=function(t){var e=ki(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new bi(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,mo(),yo(),this.R,this.sharedClientState,!!this.forceOwnership)},i.prototype.Bo=function(t){return new lo},i}(Za),es=function(t){function i(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r.__extends)(i,t),i.prototype.initialize=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,n=this;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return s.sent(),i=this.Qo.syncEngine,this.sharedClientState instanceof co?(this.sharedClientState.syncEngine={ui:Ka.bind(null,i),ai:$a.bind(null,i),hi:Qa.bind(null,i),fn:za.bind(null,i),ci:Ba.bind(null,i)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He((function(t){return Object(r.__awaiter)(n,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Ha(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return s.sent(),[2]}}))}))},i.prototype.Bo=function(t){var e=mo();if(!co.yt(e))throw new d(f.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ki(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new co(e,t.asyncQueue,n,t.clientId,t.initialUser)},i}(ts),ns=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Oa(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ua.bind(null,this.syncEngine),[4,Qo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new ia},t.prototype.createDatastore=function(t){var e,n=_o(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new go(e));return function(t,e,n){return new Io(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Oa(s.syncEngine,t,0)},o=fo.yt()?new fo:new ho,new Oo(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var u=new ba(t,e,n,r,i,o);return s&&(u.$o=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=T(t),y("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,So(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();function rs(t,e){void 0===e&&(e=10240);var i=0;return{read:function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){return i<t.byteLength?(n={value:t.slice(i,i+e),done:!1},[2,(i+=e,n)]):[2,{done:!0}]}))}))},cancel:function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var is=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),os=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new br,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e,n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new ha(JSON.parse(i),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),as=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,i=this;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new d(f.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,u,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=T(t),i=bn(n.R)+"/documents",o={documents:e.map((function(t){return gn(n.R,t)}))},[4,n.$i("BatchGetDocuments",i,o)];case 1:return s=r.sent(),u=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){I(!!e.found),e.found.name,e.found.updateTime;var n=mn(t,e.found.name),r=dn(e.found.updateTime),i=new ft({mapValue:{fields:e.found.fields}});return vt.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){I(!!e.missing),I(!!e.readTime);var n=mn(t,e.missing),r=dn(e.readTime);return vt.newNoDocument(n,r)}(t,e):k()}(n.R,t);u.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=u.get(t.toString());I(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=n.sent()).forEach((function(t){return i.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new je(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return Object(r.__generator)(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=X.fromPath(n);e.mutations.push(new Ne(r,e.precondition(r)))})),[4,function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=T(t),i=bn(n.R)+"/documents",o={writes:e.map((function(t){return In(n.R,t)}))},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return i.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw k();e=j.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new d(f.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ge.updateTime(e):ge.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(j.min()))throw new d(f.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ge.updateTime(e)}return ge.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ss=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new bo(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){var t,e,n=this;return Object(r.__generator)(this,(function(r){return t=new as(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!$(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Re(e)}return!1},t}(),us=function(){function t(t,e,i){var n=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=i,this.user=to.UNAUTHENTICATED,this.clientId=E.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(r.__awaiter)(n,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return y("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new d(f.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Zo(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function cs(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,n,s=this;return Object(r.__generator)(this,(function(u){switch(u.label){case 0:return t.asyncQueue.verifyOperationInProgress(),y("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return i=u.sent(),[4,e.initialize(i)];case 2:return u.sent(),n=i.initialUser,t.setCredentialChangeListener((function(t){return Object(r.__awaiter)(s,void 0,void 0,(function(){return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n.isEqual(t)?[3,2]:[4,Ai(e.localStore,t)];case 1:r.sent(),n=t,r.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function ls(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,n;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,hs(t)];case 1:return i=s.sent(),y("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return n=s.sent(),[4,e.initialize(i,n)];case 3:return s.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return(n=T(t)).asyncQueue.verifyOperationInProgress(),y("RemoteStore","RemoteStore received new credentials"),i=Do(n),n.Or.add(3),[4,So(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return r.sent(),n.Or.delete(3),[4,Eo(n)];case 3:return r.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function hs(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(y("FirestoreClient","Using default OfflineComponentProvider"),[4,cs(t,new Za)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function fs(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(y("FirestoreClient","Using default OnlineComponentProvider"),[4,ls(t,new ns)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function ds(t){return hs(t).then((function(t){return t.persistence}))}function ps(t){return hs(t).then((function(t){return t.localStore}))}function vs(t){return fs(t).then((function(t){return t.remoteStore}))}function gs(t){return fs(t).then((function(t){return t.syncEngine}))}function ms(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,fs(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=wa.bind(null,e.syncEngine),n.onUnlisten=ka.bind(null,e.syncEngine),n)]}}))}))}function ys(t,e,i){var n=this;void 0===i&&(i={});var s=new br;return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t,e,n,r,i){var o=new is({next:function(o){e.enqueueAndForget((function(){return aa(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new d(f.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new d(f.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new la(Ft(n.path),o,{includeMetadataChanges:!0,so:!0});return oa(t,s)},[4,ms(t)];case 1:return[2,n.apply(void 0,[r.sent(),t.asyncQueue,e,i,s])]}}))}))})),s.promise}function _s(t,e,i){var n=this;void 0===i&&(i={});var s=new br;return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t,e,n,r,i){var o=new is({next:function(n){e.enqueueAndForget((function(){return aa(t,s)})),n.fromCache&&"server"===r.source?i.reject(new d(f.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new la(n,o,{includeMetadataChanges:!0,so:!0});return oa(t,s)},[4,ms(t)];case 1:return[2,n.apply(void 0,[r.sent(),t.asyncQueue,e,i,s])]}}))}))})),s.promise}var bs=function(t,e,n,r,i,o,s,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u},ws=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),xs=new Map,ks=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Is=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(to.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ts=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Os=function(){function t(t){var e=this;this.currentUser=to.UNAUTHENTICATED,this.oc=new br,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){y("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(y("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(y("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(I("string"==typeof n.accessToken),new ks(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var i=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return I(null===t||"string"==typeof t),new to(t)},t}(),Es=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=to.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Ss=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Es(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(to.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Cs(t,e,n){if(!n)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function As(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new d(f.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function js(t,e,n,r){if(!0===e&&!0===r)throw new d(f.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ns(t){if(!X.isDocumentKey(t))throw new d(f.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ps(t){if(X.isDocumentKey(t))throw new d(f.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Rs(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":k()}function Ds(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new d(f.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Rs(t);throw new d(f.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ms(t,e){if(e<=0)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ls=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new d(f.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new d(f.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,js("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Fs=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ls({}),this._settingsFrozen=!1,t instanceof ws?(this._databaseId=t,this._credentials=new Is):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new d(f.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws(t.options.projectId)}(t),this._credentials=new Os(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new d(f.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new d(f.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ls(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Is;switch(t.type){case"gapi":var e=t.client;return I(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ss(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new d(f.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=xs.get(this))&&(y("ComponentProvider","Removing Datastore"),xs.delete(this),t.terminate()),Promise.resolve();var t},t}(),Us=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Vs(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),qs=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Vs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ft(r))||this)._path=r,i.type="collection",i}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Us(this.firestore,null,new X(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(qs);function Bs(t,e){for(var n,i=[],c=2;c<arguments.length;c++)i[c-2]=arguments[c];if(t=Object(o.getModularInstance)(t),Cs("collection","path",e),t instanceof Fs)return Ps(n=M.fromString.apply(M,Object(r.__spreadArray)([e],i))),new Vs(t,null,n);if(!(t instanceof Us||t instanceof Vs))throw new d(f.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ps(n=M.fromString.apply(M,Object(r.__spreadArray)([t.path],i)).child(M.fromString(e))),new Vs(t.firestore,null,n)}function Ks(t,e){for(var n,i=[],c=2;c<arguments.length;c++)i[c-2]=arguments[c];if(t=Object(o.getModularInstance)(t),1===arguments.length&&(e=E.u()),Cs("doc","path",e),t instanceof Fs)return Ns(n=M.fromString.apply(M,Object(r.__spreadArray)([e],i))),new Us(t,null,new X(n));if(!(t instanceof Us||t instanceof Vs))throw new d(f.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ns(n=t._path.child(M.fromString.apply(M,Object(r.__spreadArray)([e],i)))),new Us(t.firestore,t instanceof Vs?t.converter:null,new X(n))}function Hs(t,e){return t=Object(o.getModularInstance)(t),e=Object(o.getModularInstance)(e),(t instanceof Us||t instanceof Vs)&&(e instanceof Us||e instanceof Vs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Gs(t,e){return t=Object(o.getModularInstance)(t),e=Object(o.getModularInstance)(e),t instanceof qs&&e instanceof qs&&t.firestore===e.firestore&&zt(t._query,e._query)&&t.converter===e.converter}var Ws=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new bo(this,"async_queue_retry"),this.Ic=function(){var e=yo();e&&y("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=yo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=yo();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new br;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!pr(t=n.sent()))throw t;return y("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,_("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Jo.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&k()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t;return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function zs(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var $s=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Qs=-1,Ys=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Ws,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(r.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Js(this),this._firestoreClient.terminate()},e}(Fs);function Xs(t){return t._firestoreClient||Js(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Js(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new bs(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new us(t._credentials,t._queue,r)}function Zs(t,e,i){var n=this,s=new br;return t.asyncQueue.enqueue((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,cs(t,i)];case 1:return r.sent(),[4,ls(t,e)];case 2:return r.sent(),s.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===f.FAILED_PRECONDITION||t.code===f.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n=r.sent()))throw n;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),s.reject(n),[3,4];case 4:return[2]}}))}))})).then((function(){return s.promise}))}function tu(t){if(t._initialized||t._terminated)throw new d(f.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var eu=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new d(f.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new F(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),nu=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(V.fromBase64String(e))}catch(e){throw new d(f.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(V.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ru=function(t){this._methodName=t},iu=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new d(f.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new d(f.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return q(this._lat,t._lat)||q(this._long,t._long)},t}(),ou=/^__.*__$/,au=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Te(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ie(t,this.data,e,this.fieldTransforms)},t}(),su=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Te(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function uu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}var cu=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Cu(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(uu(this.Nc)&&ou.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),lu=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||_o(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new cu({Nc:t,methodName:e,qc:n,path:F.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function hu(t){var e=t._freezeSettings(),n=_o(t._databaseId);return new lu(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fu(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Tu("Data must be an object, but it was:",s,r);var u,a,c=ku(r,s);if(o.merge)u=new U(s.fieldMask),a=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,v=o.mergeFields;h<v.length;h++){var m=Ou(e,v[h],n);if(!s.contains(m))throw new d(f.INVALID_ARGUMENT,"Field '"+m+"' is specified in your field mask but missing from your input data.");Au(l,m)||l.push(m)}u=new U(l),a=s.fieldTransforms.filter((function(t){return u.covers(t.field)}))}else u=null,a=s.fieldTransforms;return new au(new ft(c),u,a)}var du=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ru);function pu(t,e,n){return new cu({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var vu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new pe(t.path,new ae)},e.prototype.isEqual=function(t){return t instanceof e},e}(ru),gu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=pu(this,t,!0),n=this.Kc.map((function(t){return xu(t,e)})),r=new se(n);return new pe(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ru),mu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=pu(this,t,!0),n=this.Kc.map((function(t){return xu(t,e)})),r=new ce(n);return new pe(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ru),yu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(r.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new he(t.R,ee(t.R,this.Qc));return new pe(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ru);function _u(t,e,n,r){var i=t.Uc(1,e,n);Tu("Data must be an object, but it was:",i,r);var c=[],s=ft.empty();P(r,(function(t,r){var u=Su(e,t,n);r=Object(o.getModularInstance)(r);var a=i.Oc(u);if(r instanceof du)c.push(u);else{var l=xu(r,a);null!=l&&(c.push(u),s.set(u,l))}}));var u=new U(c);return new su(s,u,i.fieldTransforms)}function bu(t,e,n,r,i,c){var s=t.Uc(1,e,n),u=[Ou(e,r,n)],a=[i];if(c.length%2!=0)throw new d(f.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<c.length;l+=2)u.push(Ou(e,c[l])),a.push(c[l+1]);for(var h=[],v=ft.empty(),m=u.length-1;m>=0;--m)if(!Au(h,u[m])){var p=u[m],y=a[m];y=Object(o.getModularInstance)(y);var _=s.Oc(p);if(y instanceof du)h.push(p);else{var w=xu(y,_);null!=w&&(h.push(p),v.set(p,w))}}var g=new U(h);return new su(v,g,s.fieldTransforms)}function wu(t,e,n,r){return void 0===r&&(r=!1),xu(n,t.Uc(r?4:3,e))}function xu(t,e){if(Iu(t=Object(o.getModularInstance)(t)))return Tu("Unsupported field value:",e,t),ku(t,e);if(t instanceof ru)return function(t,e){if(!uu(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=xu(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(o.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ee(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=A.fromDate(t);return{timestampValue:ln(e.R,n)}}if(t instanceof A)return n=new A(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ln(e.R,n)};if(t instanceof iu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nu)return{bytesValue:hn(e.R,t._byteString)};if(t instanceof Us){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:pn(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Rs(t))}(t,e)}function ku(t,e){var n={};return R(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):P(t,(function(t,r){var i=xu(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Iu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof A||t instanceof iu||t instanceof nu||t instanceof Us||t instanceof ru)}function Tu(t,e,n){if(!Iu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Rs(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Ou(t,e,n){if((e=Object(o.getModularInstance)(e))instanceof eu)return e._internalPath;if("string"==typeof e)return Su(t,e);throw Cu("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Eu=new RegExp("[~\\*/\\[\\]]");function Su(t,e,n){if(e.search(Eu)>=0)throw Cu("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(eu.bind.apply(eu,Object(r.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(r){throw Cu("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cu(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new d(f.INVALID_ARGUMENT,(u+=". ")+t+a)}function Au(t,e){return t.some((function(t){return t.isEqual(e)}))}var ju=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Us(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Nu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Pu("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Nu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ju);function Pu(t,e){return"string"==typeof e?Su(t,e):e instanceof eu?e._internalPath:e._delegate._internalPath}var Ru=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Du=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this)._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return Object(r.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Pu("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ju),Mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Du),Lu=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ru(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Mu(n._firestore,n._userDataWriter,r.key,r,new Ru(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new d(f.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Mu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ru(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Mu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ru(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Fu(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Fu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}function Uu(t,e){return t instanceof Du&&e instanceof Du?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Lu&&e instanceof Lu&&t._firestore===e._firestore&&Gs(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function qu(t){if(qt(t)&&0===t.explicitOrderBy.length)throw new d(f.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vu=function(){};function Bu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Ku=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=hu(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new d(f.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Yu(s,o);for(var a=[],c=0,l=s;c<l.length;c++){var h=l[c];a.push(Qu(r,t,h))}u={arrayValue:{values:a}}}else u=Qu(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Yu(s,o),u=wu(n,"where",s,"in"===o||"not-in"===o);var v=wt.create(i,o,u);return function(t,e){if(e.g()){var n=Bt(t);if(null!==n&&!n.isEqual(e.field))throw new d(f.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Vt(t);null!==r&&Xu(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new d(f.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new d(f.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,v),v}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new qs(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Mt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Vu),Hu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new d(f.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new d(f.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Nt(e,n);return function(t,e){if(null===Vt(t)){var n=Bt(t);null!==n&&Xu(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new qs(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Mt(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Vu),Gu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){return new qs(t.firestore,t.converter,Wt(t._query,this.Hc,this.Jc))},e}(Vu),Wu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=$u(t,this.type,this.Yc,this.Xc);return new qs(t.firestore,t.converter,function(t,e){return new Mt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Vu),zu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(r.__extends)(e,t),e.prototype._apply=function(t){var e=$u(t,this.type,this.Yc,this.Xc);return new qs(t.firestore,t.converter,function(t,e){return new Mt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Vu);function $u(t,e,n,r){if(n[0]=Object(o.getModularInstance)(n[0]),n[0]instanceof ju)return function(t,e,n,r,i){if(!r)throw new d(f.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Ht(t);s<u.length;s++){var a=u[s];if(a.field.isKeyField())o.push(ot(e,r.key));else{var c=r.data.field(a.field);if(rt(c))throw new d(f.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=a.field.canonicalString();throw new d(f.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new At(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=hu(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new d(f.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.isKeyField()){if("string"!=typeof c)throw new d(f.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Kt(t)&&-1!==c.indexOf("/"))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(M.fromString(c));if(!X.isDocumentKey(l))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new X(l);u.push(ot(e,h))}else{var v=wu(n,r,c);u.push(v)}}return new At(u,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Qu(t,e,n){if("string"==typeof(n=Object(o.getModularInstance)(n))){if(""===n)throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kt(e)&&-1!==n.indexOf("/"))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(M.fromString(n));if(!X.isDocumentKey(r))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ot(t,new X(r))}if(n instanceof Us)return ot(t,n._key);throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Rs(n)+".")}function Yu(t,e){if(!Array.isArray(t)||0===t.length)throw new d(f.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new d(f.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Xu(t,e,n){if(!n.isEqual(e))throw new d(f.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Ju=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),J(t)){case 0:return null;case 1:return t.booleanValue;case 2:return H(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(G(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw k()}},t.prototype.convertObject=function(t,e){var n=this,r={};return P(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new iu(H(t.latitude),H(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=W(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(z(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=K(t);return new A(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=M.fromString(t);I(Un(n));var r=new ws(n.get(1),n.get(3)),i=new X(n.popFirst(5));return r.isEqual(e)||_("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Zu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var tc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.__extends)(e,t),e.prototype.convertBytes=function(t){return new nu(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Us(this.firestore,null,e)},e}(Ju),ec=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=hu(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=nc(t,this._firestore),i=Zu(r.converter,e,n),o=fu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ge.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var c,s=nc(t,this._firestore);return c="string"==typeof(e=Object(o.getModularInstance)(e))||e instanceof eu?bu(this._dataReader,"WriteBatch.update",s._key,e,n,r):_u(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,ge.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=nc(t,this._firestore);return this._mutations=this._mutations.concat(new je(e._key,ge.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new d(f.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function nc(t,e){if((t=Object(o.getModularInstance)(t)).firestore!==e)throw new d(f.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var rc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.__extends)(e,t),e.prototype.convertBytes=function(t){return new nu(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Us(this.firestore,null,e)},e}(Ju);function ic(t,e,n){t=Ds(t,Us);var r=Ds(t.firestore,Ys),i=Zu(t.converter,e,n);return sc(r,[fu(hu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ge.none())])}function oc(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ds(t,Us);var c=Ds(t.firestore,Ys),s=hu(c);return sc(c,[("string"==typeof(e=Object(o.getModularInstance)(e))||e instanceof eu?bu(s,"updateDoc",t._key,e,n,r):_u(s,"updateDoc",t._key,e)).toMutation(t._key,ge.exists(!0))])}function ac(t){for(var e,i,n,s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];t=Object(o.getModularInstance)(t);var a={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||zs(s[c])||(a=s[c],c++);var l,h,f,p={includeMetadataChanges:a.includeMetadataChanges};if(zs(s[c])){var d=s[c];s[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),s[c+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),s[c+2]=null===(n=d.complete)||void 0===n?void 0:n.bind(d)}if(t instanceof Us)h=Ds(t.firestore,Ys),f=Ft(t._key.path),l={next:function(e){s[c]&&s[c](uc(h,t,e))},error:s[c+1],complete:s[c+2]};else{var v=Ds(t,qs);h=Ds(v.firestore,Ys),f=v._query;var m=new rc(h);l={next:function(t){s[c]&&s[c](new Lu(h,m,v,t))},error:s[c+1],complete:s[c+2]},qu(t._query)}return function(t,e,i,n){var s=this,u=new is(n),a=new la(e,u,i);return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(s,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=oa,[4,ms(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){u.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(s,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=aa,[4,ms(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Xs(h),f,p,l)}function sc(t,e){return function(t,e){var i=this,n=new br;return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return o=Ia,[4,gs(t)];case 1:return[2,o.apply(void 0,[r.sent(),e,n])]}}))}))})),n.promise}(Xs(t),e)}function uc(t,e,n){var r=n.docs.get(e._key),i=new rc(t);return new Du(t,i,e._key,r,new Ru(n.hasPendingWrites,n.fromCache),e.converter)}var cc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(r.__extends)(e,t),e.prototype.get=function(e){var n=this,r=nc(e,this._firestore),i=new rc(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Du(n._firestore,i,r._key,t._document,new Ru(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=hu(t)}return t.prototype.get=function(t){var e=this,n=nc(t,this._firestore),r=new tc(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return k();var i=t[0];if(i.isFoundDocument())return new ju(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ju(e._firestore,r,n._key,null,n.converter);throw k()}))},t.prototype.set=function(t,e,n){var r=nc(t,this._firestore),i=Zu(r.converter,e,n),o=fu(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var c,s=nc(t,this._firestore);return c="string"==typeof(e=Object(o.getModularInstance)(e))||e instanceof eu?bu(this._dataReader,"Transaction.update",s._key,e,n,r):_u(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this},t.prototype.delete=function(t){var e=nc(t,this._firestore);return this._transaction.delete(e._key),this},t}());function lc(){if("undefined"==typeof Uint8Array)throw new d(f.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hc(){if("undefined"==typeof atob)throw new d(f.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fc=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return hc(),new t(nu.fromBase64String(e))},t.fromUint8Array=function(e){return lc(),new t(nu.fromUint8Array(e))},t.prototype.toBase64=function(){return hc(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return lc(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),dc=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){tu(t=Ds(t,Ys));var n=Xs(t),r=t._freezeSettings(),i=new ns;return Zs(n,i,new ts(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){tu(t=Ds(t,Ys));var e=Xs(t),n=t._freezeSettings(),r=new ns;return Zs(e,r,new es(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new d(f.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new br;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return lr.yt()?(e=t+"main",[4,lr.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(ki(t._databaseId,t._persistenceKey))];case 1:return n.sent(),i.resolve(),[3,3];case 2:return e=n.sent(),i.reject(e),[3,3];case 3:return[2]}}))}))})),i.promise}(t._delegate)},t}(),pc=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ws||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||w("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var c=(t=Ds(t,Fs))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&w("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},c),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,u;if("string"==typeof r.mockUserToken)s=r.mockUserToken,u=to.MOCK_USER;else{s=Object(o.createMockUserToken)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new d(f.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new to(a)}t._credentials=new Ts(new ks(s,u))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,ds(t)];case 1:return e=r.sent(),[4,vs(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=T(t);return e.Or.delete(0),Eo(e)}(n))]}}))}))}))}(Xs(Ds(this._delegate,Ys)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e,i;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return[4,ds(t)];case 1:return e=n.sent(),[4,vs(t)];case 2:return i=n.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return(e=T(t)).Or.add(0),[4,So(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(i))]}}))}))}))}(Xs(Ds(this._delegate,Ys)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&js("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,i=new br;return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=Aa,[4,gs(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))})),i.promise}(Xs(Ds(this._delegate,Ys)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var i=this,n=new is(e);return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return e=function(t,e){T(t).Gr.add(e),e.next()},[4,ms(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),function(){n.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return e=function(t,e){T(t).Gr.delete(e)},[4,ms(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))}))}}(Xs(t=Ds(t,Ys)),zs(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new d(f.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Cc(this,Bs(this._delegate,t))}catch(t){throw wc(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new bc(this,Ks(this._delegate,t))}catch(t){throw wc(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Oc(this,function(t,e){if(t=Ds(t,Fs),Cs("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new d(f.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new qs(t,null,function(t){return new Mt(M.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw wc(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var i=this,n=new br;return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,function(t){return fs(t).then((function(t){return t.datastore}))}(t)];case 1:return o=r.sent(),new ss(t.asyncQueue,o,e,n).run(),[2]}}))}))})),n.promise}(Xs(t),(function(n){return e(new cc(t,n))}))}(this._delegate,(function(n){return t(new mc(e,n))}))},t.prototype.batch=function(){var t=this;return Xs(this._delegate),new yc(new ec(this._delegate,(function(e){return sc(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new d(f.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new d(f.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),vc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.__extends)(e,t),e.prototype.convertBytes=function(t){return new fc(new nu(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return bc.eu(e,this.firestore,null)},e}(Ju);function gc(t){var e;e=t,v.setLogLevel(e)}var mc=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new vc(t)}return t.prototype.get=function(t){var e=this,n=Ac(t);return this._delegate.get(n).then((function(t){return new Ic(e._firestore,new Du(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Ac(t);return n?(As("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Ac(t);return 2===arguments.length?this._delegate.update(u,e):(i=this._delegate).update.apply(i,Object(r.__spreadArray)([u,e,n],o)),this},t.prototype.delete=function(t){var e=Ac(t);return this._delegate.delete(e),this},t}(),yc=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ac(t);return n?(As("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Ac(t);return 2===arguments.length?this._delegate.update(u,e):(i=this._delegate).update.apply(i,Object(r.__spreadArray)([u,e,n],o)),this},t.prototype.delete=function(t){var e=Ac(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),_c=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Mu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Tc(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new vc(e),n),i.set(n,o)),o},t}();_c.su=new WeakMap;var bc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vc(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new d(f.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Us(n._delegate,r,new X(e)))},t.eu=function(e,n,r){return new t(n,new Us(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Cc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Cc(this.firestore,Bs(this._delegate,t))}catch(t){throw wc(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(o.getModularInstance)(t))instanceof Us&&Hs(this._delegate,t)},t.prototype.set=function(t,e){e=As("DocumentReference.set",e);try{return e?ic(this._delegate,t,e):ic(this._delegate,t)}catch(t){throw wc(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?oc(this._delegate,t):oc.apply(void 0,Object(r.__spreadArray)([this._delegate,t,e],n))}catch(t){throw wc(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return sc(Ds((t=this._delegate).firestore,Ys),[new je(t._key,ge.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xc(e),i=kc(e,(function(e){return new Ic(t.firestore,new Du(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return ac(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ds(t,Us);var e=Ds(t.firestore,Ys),i=Xs(e),n=new rc(e);return function(t,e){var i=this,n=new br;return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var i;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:return i=function(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=T(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(o=r.sent()).isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new d(f.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=r.sent(),o=Zo(n,"Failed to get document '"+e+" from cache"),i.reject(o),[3,3];case 3:return[2]}}))}))},[4,ps(t)];case 1:return[2,i.apply(void 0,[s.sent(),e,n])]}}))}))})),n.promise}(i,t._key).then((function(r){return new Du(e,n,t._key,r,new Ru(null!==r&&r.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ds(t,Us);var e=Ds(t.firestore,Ys);return ys(Xs(e),t._key,{source:"server"}).then((function(n){return uc(e,t,n)}))}(this._delegate):function(t){t=Ds(t,Us);var e=Ds(t.firestore,Ys);return ys(Xs(e),t._key).then((function(n){return uc(e,t,n)}))}(this._delegate)).then((function(t){return new Ic(e.firestore,new Du(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(_c.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function wc(t,e,n){return t.message=t.message.replace(e,n),t}function xc(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!zs(r))return r}return{}}function kc(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=zs(t[0])?t[0]:zs(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ic=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new bc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Uu(this._delegate,t._delegate)},t}(),Tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Ic),Oc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vc(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Bu(this._delegate,function(t,e,n){var r=e,i=Pu("where",t);return new Ku(i,r,n)}(e,n,r)))}catch(e){throw wc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Bu(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Pu("orderBy",t);return new Hu(r,n)}(e,n)))}catch(e){throw wc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Bu(this._delegate,function(t){return Ms("limit",t),new Gu("limit",t,"F")}(e)))}catch(e){throw wc(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Bu(this._delegate,function(t){return Ms("limitToLast",t),new Gu("limitToLast",t,"L")}(e)))}catch(e){throw wc(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wu("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw wc(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wu("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw wc(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zu("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw wc(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zu("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw wc(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Gs(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ds(t,qs);var e=Ds(t.firestore,Ys),i=Xs(e),n=new rc(e);return function(t,e){var i=this,n=new br;return t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var i;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:return i=function(t,e,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,u,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Fi(t,e,!0)];case 1:return a=r.sent(),n=new ma(e,a.Bn),o=n._o(a.documents),s=n.applyChanges(o,!1),i.resolve(s.snapshot),[3,3];case 2:return u=r.sent(),a=Zo(u,"Failed to execute query '"+e+" against cache"),i.reject(a),[3,3];case 3:return[2]}}))}))},[4,ps(t)];case 1:return[2,i.apply(void 0,[s.sent(),e,n])]}}))}))})),n.promise}(i,t._query).then((function(r){return new Lu(e,n,t,r)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ds(t,qs);var e=Ds(t.firestore,Ys),n=Xs(e),r=new rc(e);return _s(n,t._query,{source:"server"}).then((function(n){return new Lu(e,r,t,n)}))}(this._delegate):function(t){t=Ds(t,qs);var e=Ds(t.firestore,Ys),n=Xs(e),r=new rc(e);return qu(t._query),_s(n,t._query).then((function(n){return new Lu(e,r,t,n)}))}(this._delegate)).then((function(t){return new Sc(e.firestore,new Lu(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xc(e),i=kc(e,(function(e){return new Sc(t.firestore,new Lu(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return ac(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(_c.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Ec=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Tc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Sc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Oc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Tc(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Ec(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Tc(n._firestore,r))}))},t.prototype.isEqual=function(t){return Uu(this._delegate,t._delegate)},t}(),Cc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new bc(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new bc(this.firestore,void 0===t?Ks(this._delegate):Ks(this._delegate,t))}catch(t){throw wc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ds(t.firestore,Ys),r=Ks(t),i=Zu(t.converter,e);return sc(n,[fu(hu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ge.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new bc(e.firestore,t)}))},e.prototype.isEqual=function(t){return Hs(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(_c.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Oc);function Ac(t){return Ds(t,Us)}var jc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(eu.bind.apply(eu,Object(r.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(F.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(o.getModularInstance)(t))instanceof eu&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Nc=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new vu("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new du("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gu("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mu("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new yu("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();function Pc(t){return function(t,e){var i=Xs(t=Ds(t,Ys)),n=new $s;return function(t,e,i,n){var s=this,u=function(t,e){return function(t,e){return new os(t,e)}(function(t,e){if(t instanceof Uint8Array)return rs(t,e);if(t instanceof ArrayBuffer)return rs(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(i,_o(e));t.asyncQueue.enqueueAndForget((function(){return Object(r.__awaiter)(s,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return e=Ja,[4,gs(t)];case 1:return e.apply(void 0,[r.sent(),u,n]),[2]}}))}))}))}(i,t._databaseId,e,n),n}(this._delegate,t)}function Rc(t){var e,i,n=this;return(e=this._delegate,i=t,function(t,e){var i=this;return t.asyncQueue.enqueue((function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=T(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,ps(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Xs(e=Ds(e,Ys)),i).then((function(t){return t?new qs(e,null,t.query):null}))).then((function(t){return t?new Oc(n,t):null}))}}).call(this,n(284))},803:function(t,e,n){"use strict";n.r(e);var r=n(826),o=n(806),c=n(163),l=n(263),h=n(790),f=n(0),d=(n(19),n(4),n(47),n(59),n(14),n(5)),v=n(76),m=n.n(v),y=Object(d.b)({name:"ChatViewsearchmembers",setup:function(t,e){var n=e.emit,r=Object(d.l)(),o=r.$system,c=r.$helper,l=Object(d.q)(),h=l.dispatch,v=l.state,y=Object(d.i)(!1),_=Object(d.a)((function(){return v.user.data})),w=Object(d.i)(!1),x=Object(d.i)([]),k=Object(d.i)([]),I=Object(d.i)(),T=Object(d.i)([]),O=function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y.value=!0,t.next=4,h("user/friends/getAll",{uid:_.value.uid}).then((function(t){!1!==t&&(x.value=t,k.value=t)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),o.log({comp:"Newchat",msg:"getFriends",val:t.t0});case 9:return t.prev=9,y.value=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T.value=c.arrToggle(T.value,e),n("friendsSelected",T.value);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I.value&&I.value.length>=3?(e=I.value.toLowerCase(),x.value=m.a.filter(k.value,(function(t){return!(!t.first_name||!t.first_name.toLowerCase().includes(e))||(!(!t.last_name||!t.last_name.toLowerCase().includes(e))||(!(!t.username||!t.username.toLowerCase().includes(e))||(!(!t.phone||!t.phone.toLowerCase().includes(e))||void 0)))}))):x.value=k.value;case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.f)(Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y.value=!0,t.next=4,O();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),o.log({comp:"ChatViewsearchmembers",msg:"getFriends",val:t.t0});case 9:return t.prev=9,y.value=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))),{loading:y,showBottomSheet:w,friends:x,searchFriendInput:I,toggleFriend:E,searchFriends:S}}}),_=y,w=n(37),component=Object(w.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.friends&&0!==t.friends.length?n(h.a,{attrs:{label:t.$t("contacts.search_friends"),placeholder:t.$t("contacts.search_friends"),"append-icon":"mdi-magnify",filled:"",rounded:""},nativeOn:{keyup:function(e){return t.searchFriends.apply(null,arguments)}},model:{value:t.searchFriendInput,callback:function(e){t.searchFriendInput=e},expression:"searchFriendInput"}}):n("div",[t.loading?t._e():n("ElementH4",{staticClass:"my-5",attrs:{align:"center",text:t.$t("contacts.no_contacts")}})],1),t._v(" "),n(l.a,[t._l(t.friends,(function(u,e){return[n("UserListitem",{key:e,staticClass:"mb-2",attrs:{user:u,urlBase:"/users/user/"},scopedSlots:t._u([{key:"action",fn:function(){return["approved"===u.status?n(r.a,{on:{click:function(e){return t.toggleFriend(u.id)}}}):n(o.a,{attrs:{color:"myshoutOrange",title:u.status}},[n(c.a,{staticClass:"pr-3"},[t._v("mdi-update")])],1)]},proxy:!0}],null,!0)})]}))],2)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ElementH4:n(399).default,UserListitem:n(756).default})},806:function(t,e,n){"use strict";n(15),n(17),n(23),n(16),n(24);var r=n(13),o=n(2),c=(n(4),n(19),n(775),n(28)),l=n(280),h=n(94),f=n(52),d=n(175),v=n(49),m=n(69),y=n(115),_=n(176),w=n(29);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=Object(c.a)(f.a,_.a,y.a,v.a,Object(d.a)("chipGroup"),Object(m.b)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return k(k(k(k({"v-chip":!0},y.a.options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(y.a.options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var t=this;[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]].forEach((function(e){var n=Object(r.a)(e,2),o=n[0],c=n[1];t.$attrs.hasOwnProperty(o)&&Object(w.a)(o,c,t)}))},methods:{click:function(t){this.$emit("click",t),this.chipGroup&&this.toggle()},genFilter:function(){var t=[];return this.isActive&&t.push(this.$createElement(h.a,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(l.b,t)},genClose:function(){var t=this;return this.$createElement(h.a,{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.$emit("click:close"),t.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(t){var e=[this.genContent()],n=this.generateRouteLink(),r=n.tag,data=n.data;data.attrs=k(k({},data.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:data.attrs.tabindex}),data.directives.push({name:"show",value:this.active}),data=this.setBackgroundColor(this.color,data);var o=this.textColor||this.outlined&&this.color;return t(r,this.setTextColor(o,data),e)}})},815:function(t,e,n){"use strict";var r,o=n(729),c=n(801),l=n(748),h=(n(744),n(752),n(782),{Firestore:c.e,GeoPoint:c.a,Timestamp:c.g,Blob:c.f,Transaction:c.j,WriteBatch:c.c,DocumentReference:c.d,DocumentSnapshot:c.k,Query:c.n,QueryDocumentSnapshot:c.s,QuerySnapshot:c.r,CollectionReference:c.o,FieldPath:c.q,FieldValue:c.m,setLogLevel:c.p,CACHE_SIZE_UNLIMITED:c.b});(function(t,e){t.INTERNAL.registerComponent(new l.Component("firestore",(function(t){return function(t,s){return new c.e(t,new c.h(t,s),new c.i)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},h)))})(r=o.default),r.registerVersion("@firebase/firestore","2.4.1")},816:function(t,e,n){"use strict";var r=n(729),o=n(741),c=n(748),l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(t){function e(code,n,details){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r.code=code,r.details=details,r}return Object(o.__extends)(e,t),e}(Error);var f=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t;return Object(o.__generator)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function d(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var v=function(){function t(){}return t.prototype.encode=function(data){var t=this;if(null==data)return null;if(data instanceof Number&&(data=data.valueOf()),"number"==typeof data&&isFinite(data))return data;if(!0===data||!1===data)return data;if("[object String]"===Object.prototype.toString.call(data))return data;if(data instanceof Date)return data.toISOString();if(Array.isArray(data))return data.map((function(e){return t.encode(e)}));if("function"==typeof data||"object"==typeof data)return d(data,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+data)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?d(t,(function(t){return e.decode(t)})):t},t}();var m=function(){function t(t,e,n,r,o,c){var l=this;void 0===o&&(o="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=c,this.serializer=new v,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(l.deleteService())}},this.contextProvider=new f(e,n),this.cancelAllRequests=new Promise((function(t){l.deleteService=function(){return t()}}));try{var h=new URL(o);this.customDomain=h.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=o}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(data){return n.call(t,data,e||{})}},t.prototype.postJSON=function(t,body,e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,c;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return e["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(n=o.sent())&&(e["X-Firebase-AppCheck"]=n),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(body),headers:e})];case 3:return r=o.sent(),[3,5];case 4:return o.sent(),[2,{status:0,json:null}];case 5:c=null,o.label=6;case 6:return o.trys.push([6,8,,9]),[4,r.json()];case 7:return c=o.sent(),[3,9];case 8:return o.sent(),[3,9];case 9:return[2,{status:r.status,json:c}]}}))}))},t.prototype.getAppCheckToken=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t;return Object(o.__generator)(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,data,e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,body,r,c,f,d,v,m,_,w,x;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n=this._url(t),data=this.serializer.encode(data),body={data:data},r={},[4,this.contextProvider.getContext()];case 1:return(c=o.sent()).authToken&&(r.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(r["Firebase-Instance-ID-Token"]=c.instanceIdToken),f=e.timeout||7e4,d=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new h("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(f),v=d.timer,m=d.promise,[4,Promise.race([y(v,this.postJSON(n,body,r)),m,y(v,this.cancelAllRequests)])];case 2:if(!(_=o.sent()))throw new h("cancelled","Firebase Functions instance was deleted.");if(w=function(t,e,n){var code=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),r=code,details=void 0;try{var o=e&&e.error;if(o){var c=o.status;if("string"==typeof c){if(!l[c])return new h("internal","internal");code=l[c],r=c}var f=o.message;"string"==typeof f&&(r=f),void 0!==(details=o.details)&&(details=n.decode(details))}}catch(t){}return"ok"===code?null:new h(code,r,details)}(_.status,_.json,this.serializer))throw w;if(!_.json)throw new h("internal","Response is not valid JSON object.");if(void 0===(x=_.json.data)&&(x=_.json.result),void 0===x)throw new h("internal","Response is missing data field.");return[2,{data:this.serializer.decode(x)}]}}))}))},t}();function y(t,e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}var _,w,x;_=r.default,w=fetch.bind(self),x={Functions:m},_.INTERNAL.registerComponent(new c.Component("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),c=t.getProvider("app-check-internal"),l=t.getProvider("messaging");return new m(r,o,l,c,n,w)}),"PUBLIC").setServiceProps(x).setMultipleInstances(!0)),r.default.registerVersion("@firebase/functions","0.6.16")},817:function(t,e,n){"use strict";n(765);var r,o,c=n(748),l=n(744),h=n(741),f=n(800),d=n(729),v=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["permission-default"]="The notification permission was not granted and dismissed instead.",r["permission-blocked"]="The notification permission was not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",r["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",r["invalid-vapid-key"]="The public VAPID key must be a string.",r["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r),m=new l.ErrorFactory("messaging","Messaging",v),y="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_="google.c.a.c_id";function w(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(h.__spreadArray)([],Object(h.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function x(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(o||(o={}));var k="fcm_token_details_db",I="fcm_token_object_Store";function T(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o=this;return Object(h.__generator)(this,(function(c){switch(c.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=c.sent(),n=e.map((function(t){return t.name})),!n.includes(k))return[2,null];c.label=2;case 2:return r=null,[4,Object(f.openDb)(k,5,(function(e){return Object(h.__awaiter)(o,void 0,void 0,(function(){var n,o,c,l;return Object(h.__generator)(this,(function(h){switch(h.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(I)?[4,(n=e.transaction.objectStore(I)).index("fcmSenderId").get(t)]:[2];case 1:return o=h.sent(),[4,n.clear()];case 2:if(h.sent(),!o)return[2];if(2===e.oldVersion){if(!(c=o).auth||!c.p256dh||!c.endpoint)return[2];r={token:c.fcmToken,createTime:null!==(l=c.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:"string"==typeof c.vapidKey?c.vapidKey:w(c.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(r={token:(c=o).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:w(c.auth),p256dh:w(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:w(c.vapidKey)}});return[2]}}))}))}))];case 3:return c.sent().close(),[4,Object(f.deleteDb)(k)];case 4:return c.sent(),[4,Object(f.deleteDb)("fcm_vapid_details_db")];case 5:return c.sent(),[4,Object(f.deleteDb)("undefined")];case 6:return c.sent(),[2,O(r)?r:null]}}))}))}function O(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var E="firebase-messaging-store",S=null;function C(){return S||(S=Object(f.openDb)("firebase-messaging-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(E)}))),S}function A(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(h.__generator)(this,(function(o){switch(o.label){case 0:return e=P(t),[4,C()];case 1:return[4,o.sent().transaction(E).objectStore(E).get(e)];case 2:return(n=o.sent())?[2,n]:[3,3];case 3:return[4,T(t.appConfig.senderId)];case 4:return(r=o.sent())?[4,j(t,r)]:[3,6];case 5:return o.sent(),[2,r];case 6:return[2]}}))}))}function j(t,e){return Object(h.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return Object(h.__generator)(this,(function(c){switch(c.label){case 0:return n=P(t),[4,C()];case 1:return r=c.sent(),[4,(o=r.transaction(E,"readwrite")).objectStore(E).put(e,n)];case 2:return c.sent(),[4,o.complete];case 3:return c.sent(),[2,e]}}))}))}function N(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(h.__generator)(this,(function(o){switch(o.label){case 0:return e=P(t),[4,C()];case 1:return n=o.sent(),[4,(r=n.transaction(E,"readwrite")).objectStore(E).delete(e)];case 2:return o.sent(),[4,r.complete];case 3:return o.sent(),[2]}}))}))}function P(t){return t.appConfig.appId}function R(t,e){return Object(h.__awaiter)(this,void 0,void 0,(function(){var n,body,r,o,c,l;return Object(h.__generator)(this,(function(h){switch(h.label){case 0:return[4,F(t)];case 1:n=h.sent(),body=U(e),r={method:"POST",headers:n,body:JSON.stringify(body)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(L(t.appConfig),r)];case 3:return[4,h.sent().json()];case 4:return o=h.sent(),[3,6];case 5:throw c=h.sent(),m.create("token-subscribe-failed",{errorInfo:c});case 6:if(o.error)throw l=o.error.message,m.create("token-subscribe-failed",{errorInfo:l});if(!o.token)throw m.create("token-subscribe-no-token");return[2,o.token]}}))}))}function D(t,e){return Object(h.__awaiter)(this,void 0,void 0,(function(){var n,body,r,o,c,l;return Object(h.__generator)(this,(function(h){switch(h.label){case 0:return[4,F(t)];case 1:n=h.sent(),body=U(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(body)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(L(t.appConfig)+"/"+e.token,r)];case 3:return[4,h.sent().json()];case 4:return o=h.sent(),[3,6];case 5:throw c=h.sent(),m.create("token-update-failed",{errorInfo:c});case 6:if(o.error)throw l=o.error.message,m.create("token-update-failed",{errorInfo:l});if(!o.token)throw m.create("token-update-no-token");return[2,o.token]}}))}))}function M(t,e){return Object(h.__awaiter)(this,void 0,void 0,(function(){var n,r,o,c,l;return Object(h.__generator)(this,(function(h){switch(h.label){case 0:return[4,F(t)];case 1:n=h.sent(),r={method:"DELETE",headers:n},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(L(t.appConfig)+"/"+e,r)];case 3:return[4,h.sent().json()];case 4:if((o=h.sent()).error)throw c=o.error.message,m.create("token-unsubscribe-failed",{errorInfo:c});return[3,6];case 5:throw l=h.sent(),m.create("token-unsubscribe-failed",{errorInfo:l});case 6:return[2]}}))}))}function L(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function F(t){var e=t.appConfig,n=t.installations;return Object(h.__awaiter)(this,void 0,void 0,(function(){var t;return Object(h.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function U(t){var e=t.p256dh,n=t.auth,r=t.endpoint,o=t.vapidKey,body={web:{endpoint:r,auth:n,p256dh:e}};return o!==y&&(body.web.applicationPubKey=o),body}function V(t,e,n){return Object(h.__awaiter)(this,void 0,void 0,(function(){var r,o,c,l;return Object(h.__generator)(this,(function(h){switch(h.label){case 0:if("granted"!==Notification.permission)throw m.create("permission-blocked");return[4,G(e,n)];case 1:return r=h.sent(),[4,A(t)];case 2:return o=h.sent(),c={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:w(r.getKey("auth")),p256dh:w(r.getKey("p256dh"))},o?[3,3]:[2,H(t,c)];case 3:if(f=o.subscriptionOptions,v=(d=c).vapidKey===f.vapidKey,y=d.endpoint===f.endpoint,_=d.auth===f.auth,x=d.p256dh===f.p256dh,v&&y&&_&&x)return[3,8];h.label=4;case 4:return h.trys.push([4,6,,7]),[4,M(t,o.token)];case 5:return h.sent(),[3,7];case 6:return l=h.sent(),console.warn(l),[3,7];case 7:return[2,H(t,c)];case 8:return Date.now()>=o.createTime+6048e5?[2,K({token:o.token,createTime:Date.now(),subscriptionOptions:c},t,e)]:[2,o.token];case 9:return[2]}var f,d,v,y,_,x}))}))}function B(t,e){return Object(h.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(h.__generator)(this,(function(o){switch(o.label){case 0:return[4,A(t)];case 1:return(n=o.sent())?[4,M(t,n.token)]:[3,4];case 2:return o.sent(),[4,N(t)];case 3:o.sent(),o.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=o.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function K(t,e,n){return Object(h.__awaiter)(this,void 0,void 0,(function(){var r,o,c;return Object(h.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,5]),[4,D(e,t)];case 1:return r=l.sent(),o=Object(h.__assign)(Object(h.__assign)({},t),{token:r,createTime:Date.now()}),[4,j(e,o)];case 2:return l.sent(),[2,r];case 3:return c=l.sent(),[4,B(e,n)];case 4:throw l.sent(),c;case 5:return[2]}}))}))}function H(t,e){return Object(h.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(h.__generator)(this,(function(o){switch(o.label){case 0:return[4,R(t,e)];case 1:return n=o.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,j(t,r)];case 2:return o.sent(),[2,r.token]}}))}))}function G(t,e){return Object(h.__awaiter)(this,void 0,void 0,(function(){var n;return Object(h.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:x(e)})]}}))}))}function W(data){return"object"==typeof data&&!!data&&_ in data}function z(t){return new Promise((function(e){setTimeout(e,t)}))}var $=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw m.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(h.__awaiter)(this,void 0,void 0,(function(){var n;return Object(h.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,A(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:y,r.label=2;case 2:return[2,V(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return B(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw m.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw m.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw m.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw m.create("only-available-in-window")},t.prototype.onMessage=function(){throw m.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw m.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return Object(h.__generator)(this,(function(c){switch(c.label){case 0:return e=function(t){var data=t.data;if(!data)return null;try{return data.json()}catch(t){return null}}(t),e?[4,J()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=c.sent())?[2,X(n,e)]:(r=!1,e.notification?[4,Z(Q(e))]:[3,3]);case 2:c.sent(),r=!0,c.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o=function(t){var e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(e.notification){t.notification={};var title=e.notification.title;title&&(t.notification.title=title);var body=e.notification.body;body&&(t.notification.body=body);var image=e.notification.image;image&&(t.notification.image=image)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var link=e.fcmOptions.link;link&&(t.fcmOptions.link=link);var n=e.fcmOptions.analytics_label;n&&(t.fcmOptions.analyticsLabel=n)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,z(1e3)]);case 4:return c.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(h.__awaiter)(this,void 0,void 0,(function(){var r;return Object(h.__generator)(this,(function(o){switch(o.label){case 0:return t.newSubscription?[3,2]:[4,B(this.firebaseDependencies,self.registration)];case 1:case 5:return o.sent(),[2];case 2:return[4,A(this.firebaseDependencies)];case 3:return r=o.sent(),[4,B(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,V(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:y)]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(h.__awaiter)(this,void 0,void 0,(function(){var r,link,c,l,f;return Object(h.__generator)(this,(function(h){switch(h.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),link=function(t){var e,n,r,link=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(link)return link;return W(t.data)?self.location.origin:null}(r),link?(c=new URL(link,self.location.href),l=new URL(self.location.origin),c.host!==l.host?[2]:[4,Y(c)]):[2]):[2];case 1:return(f=h.sent())?[3,4]:[4,self.clients.openWindow(link)];case 2:return f=h.sent(),[4,z(3e3)];case 3:return h.sent(),[3,6];case 4:return[4,f.focus()];case 5:f=h.sent(),h.label=6;case 6:return f?(r.messageType=o.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,f.postMessage(r)]):[2]}}))}))},t}();function Q(t){var e,n=Object(h.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Y(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,c,l,f;return Object(h.__generator)(this,(function(d){switch(d.label){case 0:return[4,J()];case 1:e=d.sent();try{for(n=Object(h.__values)(e),r=n.next();!r.done;r=n.next())if(o=r.value,c=new URL(o.url,self.location.href),t.host===c.host)return[2,o]}catch(t){l={error:t}}finally{try{r&&!r.done&&(f=n.return)&&f.call(n)}finally{if(l)throw l.error}}return[2,null]}}))}))}function X(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=o.PUSH_RECEIVED;try{for(var c=Object(h.__values)(t),l=c.next();!l.done;l=c.next()){l.value.postMessage(e)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}function J(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Z(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var tt=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(h.__generator)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===o.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),W(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){return Object(h.__generator)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw m.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,V(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){return Object(h.__generator)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=y),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(h.__awaiter)(this,void 0,void 0,(function(){return Object(h.__generator)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw m.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(h.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(h.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),m.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(h.__awaiter)(this,void 0,void 0,(function(){return Object(h.__generator)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,B(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(h.__awaiter)(this,void 0,void 0,(function(){var t;return Object(h.__generator)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?m.create("permission-blocked"):m.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw m.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw m.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw m.create("invalid-sw-registration");if(this.swRegistration)throw m.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw m.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw m.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,data){return Object(h.__awaiter)(this,void 0,void 0,(function(){var e;return Object(h.__generator)(this,(function(n){switch(n.label){case 0:return e=function(t){switch(t){case o.NOTIFICATION_CLICKED:return"notification_open";case o.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return n.sent().logEvent(e,{message_id:data["google.c.a.c_id"],message_name:data["google.c.a.c_l"],message_time:data["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function et(t){return m.create("missing-app-config-values",{valueName:t})}var nt={isSupported:it};function it(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}d.default.INTERNAL.registerComponent(new c.Component("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw et("App Configuration Object");if(!t.name)throw et("App Name");var r=t.options;try{for(var o=Object(h.__values)(["projectId","apiKey","appId","messagingSenderId"]),c=o.next();!c.done;c=o.next()){var l=c.value;if(!r[l])throw et(l)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),r={app:e,appConfig:n,installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!it())throw m.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new $(r):new tt(r)}),"PUBLIC").setServiceProps(nt))},818:function(t,e,n){"use strict";var r=n(729),o=n(741),c=n(744),l=n(748),h="firebasestorage.googleapis.com",f=function(t){function e(code,n){var r=t.call(this,d(code),"Firebase Storage: "+n+" ("+d(code)+")")||this;return r.customData={serverResponse:null},r._baseMessage=r.message,Object.setPrototypeOf(r,e.prototype),r}return Object(o.__extends)(e,t),e.prototype._codeEquals=function(code){return d(code)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(c.FirebaseError);function d(code){return"storage/"+code}function v(){return new f("unknown","An unknown error occurred, please check the error payload for server response.")}function m(){return new f("canceled","User canceled the upload/download.")}function y(){return new f("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _(t){return new f("invalid-argument",t)}function w(){return new f("app-deleted","The Firebase app was deleted.")}function x(t){return new f("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function k(t,e){return new f("invalid-format","String does not match format '"+t+"': "+e)}function I(t){throw new f("internal-error","Internal error: "+t)}var T={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},O=function(data,t){this.data=data,this.contentType=t||null};function E(t,e){switch(t){case T.RAW:return new O(S(e));case T.BASE64:case T.BASE64URL:return new O(C(t,e));case T.DATA_URL:return new O((n=new A(e)).base64?C(T.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw k(T.DATA_URL,"Malformed data URL.")}return S(e)}(n.rest),function(t){return new A(t).contentType}(e))}var n;throw v()}function S(t){for(var b=[],i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<=127)b.push(e);else if(e<=2047)b.push(192|e>>6,128|63&e);else if(55296==(64512&e))if(i<t.length-1&&56320==(64512&t.charCodeAt(i+1)))e=65536|(1023&e)<<10|1023&t.charCodeAt(++i),b.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|63&e);else b.push(239,191,189);else 56320==(64512&e)?b.push(239,191,189):b.push(224|e>>12,128|e>>6&63,128|63&e)}return new Uint8Array(b)}function C(t,e){switch(t){case T.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw k(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case T.BASE64URL:var o=-1!==e.indexOf("+"),c=-1!==e.indexOf("/");if(o||c)throw k(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var l;try{l=atob(e)}catch(e){throw k(t,"Invalid character found")}for(var h=new Uint8Array(l.length),i=0;i<l.length;i++)h[i]=l.charCodeAt(i);return h}var A=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw k(T.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(s=n,r=";base64",s.length>=r.length&&s.substring(s.length-r.length)===r),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var s,r};var j,N={STATE_CHANGED:"state_changed"},P={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function R(t){switch(t){case"running":case"pausing":case"canceling":return P.RUNNING;case"paused":return P.PAUSED;case"success":return P.SUCCESS;case"canceled":return P.CANCELED;default:return P.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(j||(j={}));var D=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=j.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=j.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=j.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,body,n){if(this.sent_)throw I("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==n)for(var r in n)n.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,n[r].toString());return void 0!==body?this.xhr_.send(body):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw I("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw I("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw I("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(header){return this.xhr_.getResponseHeader(header)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var M=function(){function t(){}return t.prototype.createConnection=function(){return new D},t}(),L=function(){function t(t,path){this.bucket=t,this.path_=path}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new f("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,o="([A-Za-z0-9.\\-_]+)";var c=new RegExp("^gs://"+o+"(/(.*))?$","i");function l(t){t.path_=decodeURIComponent(t.path)}for(var d=n.replace(/[.]/g,"\\."),v=[{regex:c,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+d+"/v[A-Za-z0-9_]+/b/"+o+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp("^https?://"+(n===h?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+o+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:l}],i=0;i<v.length;i++){var m=v[i],y=m.regex.exec(e);if(y){var _=y[m.indices.bucket],w=y[m.indices.path];w||(w=""),r=new t(_,w),m.postModify(r);break}}if(null==r)throw function(t){return new f("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),F=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function U(p){return"string"==typeof p||p instanceof String}function V(p){return B()&&p instanceof Blob}function B(){return"undefined"!=typeof Blob}function K(t,e,n,r){if(r<e)throw _("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw _("Invalid value for '"+t+"'. Expected "+n+" or less.")}function H(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function G(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var W=function(){function t(t,e,n,body,r,o,c,l,h,f,d){var v=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=body,this.successCodes_=r.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=f,this.timeout_=h,this.pool_=d,this.promise_=new Promise((function(t,e){v.resolve_=t,v.reject_=e,v.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,o=t.resolve_,c=t.reject_,l=n.connection;if(n.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());void 0!==h?o(h):o()}catch(t){c(t)}else null!==l?((r=v()).serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,r)):c(r)):n.canceled?c(r=t.appDelete_?w():m()):c(r=new f("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new z(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,c=null,l=!1,h=0;function f(){return 2===h}var d=!1;function v(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d||(d=!0,e.apply(null,t))}function m(e){c=setTimeout((function(){c=null,t(y,f())}),e)}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!d)if(t)v.call.apply(v,Object(o.__spreadArray)([null,t],e));else{var c;f()||l?v.call.apply(v,Object(o.__spreadArray)([null,t],e)):(r<64&&(r*=2),1===h?(h=2,c=0):c=1e3*(r+Math.random()),m(c))}}var _=!1;function w(t){_||(_=!0,d||(null!==c?(t||(h=2),clearTimeout(c),m(0)):t||(h=1)))}return m(0),setTimeout((function(){l=!0,w(!0)}),n),w}((function(e,n){if(n)e(!1,new z(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(o),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(o),t.pendingConnection_=null;var n=r.getErrorCode()===j.NO_ERROR,c=r.getStatus();if(n&&!t.isRetryStatusCode_(c)){var l=-1!==t.successCodes_.indexOf(c);e(!0,new z(l,r))}else{var h=r.getErrorCode()===j.ABORT;e(!1,new z(!1,null,h))}}))}function o(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),z=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function $(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=$();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(B())return new Blob(t);throw new f("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Y=function(){function t(data,t){var e=0,n="";V(data)?(this.data_=data,e=data.size,n=data.type):data instanceof ArrayBuffer?(t?this.data_=new Uint8Array(data):(this.data_=new Uint8Array(data.byteLength),this.data_.set(new Uint8Array(data))),e=this.data_.length):data instanceof Uint8Array&&(t?this.data_=data:(this.data_=new Uint8Array(data.length),this.data_.set(data)),e=data.length),this.size_=e,this.type_=n}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(V(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(B()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Q.apply(null,r))}var o=e.map((function(t){return U(t)?E(T.RAW,t).data:t.data_})),c=0;o.forEach((function(t){c+=t.byteLength}));var l=new Uint8Array(c),h=0;return o.forEach((function(t){for(var i=0;i<t.length;i++)l[h++]=t[i]})),new t(l,!0)},t.prototype.uploadData=function(){return this.data_},t}();function X(s){var t,p;try{t=JSON.parse(s)}catch(t){return null}return"object"!=typeof(p=t)||Array.isArray(p)?null:t}function J(path){var t=path.lastIndexOf("/",path.length-2);return-1===t?path:path.slice(t+1)}function Z(t,e){return e}var tt=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Z},et=null;function nt(){if(et)return et;var t=[];t.push(new tt("bucket")),t.push(new tt("generation")),t.push(new tt("metageneration")),t.push(new tt("name","fullPath",!0));var e=new tt("name");e.xform=function(t,e){return function(t){return!U(t)||t.length<2?t:J(t)}(e)},t.push(e);var n=new tt("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new tt("timeCreated")),t.push(new tt("updated")),t.push(new tt("md5Hash",null,!0)),t.push(new tt("cacheControl",null,!0)),t.push(new tt("contentDisposition",null,!0)),t.push(new tt("contentEncoding",null,!0)),t.push(new tt("contentLanguage",null,!0)),t.push(new tt("contentType",null,!0)),t.push(new tt("metadata","customMetadata",!0)),et=t}function it(t,e,n){for(var r={type:"file"},o=n.length,i=0;i<o;i++){var c=n[i];r[c.local]=c.xform(r,e[c.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,path=t.fullPath,r=new L(n,path);return e._makeStorageReference(r)}})}(r,t),r}function ot(t,e,n){var r=X(e);return null===r?null:it(t,r,n)}function at(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function st(t,e,n){var r=X(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var o=0,c=n.prefixes;o<c.length;o++){var l=c[o].replace(/\/$/,""),h=t._makeStorageReference(new L(e,l));r.prefixes.push(h)}if(n.items)for(var f=0,d=n.items;f<d.length;f++){var v=d[f];h=t._makeStorageReference(new L(e,v.name)),r.items.push(h)}return r}(t,e,r)}var ut=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ct(t){if(!t)throw v()}function lt(t,e){return function(n,text){var r=ot(t,text,e);return ct(null!==r),r}}function ht(t,e){return function(n,text){var r=ot(t,text,e);return ct(null!==r),function(t,e,n){var r=X(e);if(null===r)return null;if(!U(r.downloadTokens))return null;var o=r.downloadTokens;if(0===o.length)return null;var c=encodeURIComponent;return o.split(",").map((function(e){var r=t.bucket,path=t.fullPath;return H("/b/"+c(r)+"/o/"+c(path),n)+G({alt:"media",token:e})}))[0]}(r,text,t.host)}}function ft(t){return function(e,n){var r,path,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new f("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new f("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new f("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(path=t.path,r=new f("unauthorized","User does not have permission to access '"+path+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function pt(t){var e=ft(t);return function(n,r){var path,o=e(n,r);return 404===n.getStatus()&&(path=t.path,o=new f("object-not-found","Object '"+path+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function vt(t,e,n){var r=H(e.fullServerUrl(),t.host),o=t.maxOperationRetryTime,c=new ut(r,"GET",lt(t,n),o);return c.errorHandler=pt(e),c}function gt(t,e,n,r,o){var c={};e.isRoot?c.prefix="":c.prefix=e.path+"/",n&&n.length>0&&(c.delimiter=n),r&&(c.pageToken=r),o&&(c.maxResults=o);var l=H(e.bucketOnlyServerUrl(),t.host),h=t.maxOperationRetryTime,f=new ut(l,"GET",function(t,e){return function(n,text){var r=st(t,e,text);return ct(null!==r),r}}(t,e.bucket),h);return f.urlParams=c,f.errorHandler=ft(e),f}function mt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var yt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function _t(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ct(!1)}return ct(!!n&&-1!==(e||["active"]).indexOf(n)),n}var bt=262144;function wt(t,e,n,r,o,c,l,h){var d=new yt(0,0);if(l?(d.current=l.current,d.total=l.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw new f("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var v=d.total-d.current,m=v;o>0&&(m=Math.min(m,o));var _=d.current,w=_+m,x={"X-Goog-Upload-Command":m===v?"upload, finalize":"upload","X-Goog-Upload-Offset":""+d.current},body=r.slice(_,w);if(null===body)throw y();var k=e.maxUploadRetryTime,I=new ut(n,"POST",(function(t,text){var n,o=_t(t,["active","final"]),l=d.current+m,h=r.size();return n="final"===o?lt(e,c)(t,text):null,new yt(l,h,"final"===o,n)}),k);return I.headers=x,I.body=body.uploadData(),I.progressCallback=h||null,I.errorHandler=ft(t),I}var xt=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function kt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var It=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=nt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],o=n[1];switch(e._state){case"running":t(r,o);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,o){var c=e.bucketOnlyServerUrl(),l=mt(e,r,o),h={name:l.fullPath},f=H(c,t.host),d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},body=at(l,n),v=t.maxUploadRetryTime,m=new ut(f,"POST",(function(t){var e;_t(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ct(!1)}return ct(U(e)),e}),v);return m.urlParams=h,m.headers=d,m.body=body,m.errorHandler=ft(e),m}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),o=t._ref.storage._makeRequest(r,e,n);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var o=function(t,e,n,r){var o=t.maxUploadRetryTime,c=new ut(n,"POST",(function(t){var e=_t(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ct(!1)}n||ct(!1);var o=Number(n);return ct(!isNaN(o)),new yt(o,r.size(),"final"===e)}),o);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=ft(e),c}(t._ref.storage,t._ref._location,e,t._blob),c=t._ref.storage._makeRequest(o,n,r);t._request=c,c.getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=bt*this._chunkMultiplier,n=new yt(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(o,c){var l;try{l=wt(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var h=t._ref.storage._makeRequest(l,o,c);t._request=h,h.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){bt*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=vt(t._ref.storage,t._ref._location,t._mappings),o=t._ref.storage._makeRequest(r,e,n);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,o){var c=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},h=function(){for(var t="",i=0;i<2;i++)t+=Math.random().toString().slice(2);return t}();l["Content-Type"]="multipart/related; boundary="+h;var f=mt(e,r,o),d="--"+h+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+at(f,n)+"\r\n--"+h+"\r\nContent-Type: "+f.contentType+"\r\n\r\n",v="\r\n--"+h+"--",body=Y.getBlob(d,r,v);if(null===body)throw y();var m={name:f.fullPath},_=H(c,t.host),w=t.maxUploadRetryTime,x=new ut(_,"POST",lt(t,n),w);return x.urlParams=m,x.headers=l,x.body=body.uploadData(),x.errorHandler=ft(e),x}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),o=t._ref.storage._makeRequest(r,e,n);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=m(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=R(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var o=this,c=new xt(e,n,r);return this._addObserver(c),function(){o._removeObserver(c)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var i=this._observers.indexOf(t);-1!==i&&this._observers.splice(i,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(R(this._state)){case P.SUCCESS:kt(this._resolve.bind(null,this.snapshot))();break;case P.CANCELED:case P.ERROR:kt(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(R(this._state)){case P.RUNNING:case P.PAUSED:t.next&&kt(t.next.bind(t,this.snapshot))();break;case P.SUCCESS:t.complete&&kt(t.complete.bind(t))();break;default:t.error&&kt(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Tt=function(){function t(t,e){this._service=t,this._location=e instanceof L?e:L.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new L(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return J(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(path){if(0===path.length)return null;var t=path.lastIndexOf("/");return-1===t?"":path.slice(0,t)}(this._location.path);if(null===e)return null;var n=new L(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw x(t)},t}();function Ot(t){var e={prefixes:[],items:[]};return Et(t,e).then((function(){return e}))}function Et(t,e,n){return Object(o.__awaiter)(this,void 0,void 0,(function(){var r,c,l;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return[4,St(t,{pageToken:n})];case 1:return r=o.sent(),(c=e.prefixes).push.apply(c,r.prefixes),(l=e.items).push.apply(l,r.items),null==r.nextPageToken?[3,3]:[4,Et(t,e,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function St(t,e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&K("options.maxResults",1,1e3,e.maxResults),n=e||{},r=gt(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,o.sent().getPromise()]}}))}))}function Ct(t,e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var o=H(e.fullServerUrl(),t.host),body=at(n,r),c=t.maxOperationRetryTime,l=new ut(o,"PATCH",lt(t,r),c);return l.headers={"Content-Type":"application/json; charset=utf-8"},l.body=body,l.errorHandler=pt(e),l}(t.storage,t._location,e,nt()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function At(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=H(e.fullServerUrl(),t.host),o=t.maxOperationRetryTime,c=new ut(r,"GET",ht(t,n),o);return c.errorHandler=pt(e),c}(t.storage,t._location,nt()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new f("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function jt(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=H(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,o=new ut(n,"DELETE",(function(t,e){}),r);return o.successCodes=[200,204],o.errorHandler=pt(e),o}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Nt(t,e){var n=function(path,t){var e=t.split("/").filter((function(component){return component.length>0})).join("/");return 0===path.length?e:path+"/"+e}(t._location.path,e),r=new L(t._location.bucket,n);return new Tt(t.storage,r)}function Pt(path){return/^[A-Za-z]+:\/\//.test(path)}function Rt(t,path){if(t instanceof Lt){var e=t;if(null==e._bucket)throw new f("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var n=new Tt(e,e._bucket);return null!=path?Rt(n,path):n}return void 0!==path?Nt(t,path):t}function Dt(t,e){if(e&&Pt(e)){if(t instanceof Lt)return new Tt(t,e);throw _("To use ref(service, url), the first argument must be a Storage instance.")}return Rt(t,e)}function Mt(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:L.makeFromBucketSpec(n,t)}var Lt=function(){function t(t,e,n,r,o,c){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=h,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?L.makeFromBucketSpec(o,this._host):Mt(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=L.makeFromBucketSpec(this._url,t):this._bucket=Mt(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(time){K("time",0,Number.POSITIVE_INFINITY,time),this._maxUploadRetryTime=time},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(time){K("time",0,Number.POSITIVE_INFINITY,time),this._maxOperationRetryTime=time},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t;return Object(o.__generator)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Tt(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new F(w());var o=function(t,e,n,r,o,c){var l=G(t.urlParams),h=t.url+l,f=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(f,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(f,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(f,c),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(f,r),new W(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(o),o.getPromise().then((function(){return r._requests.delete(o)}),(function(){return r._requests.delete(o)})),o},t.prototype.makeRequestWithTokens=function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=o.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function Ft(t,data,e){return function(t,data,e){return t._throwIfRoot("uploadBytesResumable"),new It(t,new Y(data),e)}(t=Object(c.getModularInstance)(t),data,e)}function Ut(t){return function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=vt(t.storage,t._location,nt()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(c.getModularInstance)(t))}function qt(t,e){return Dt(t=Object(c.getModularInstance)(t),e)}function Vt(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var o=r.mockUserToken;o&&(t._overrideAuthToken="string"==typeof o?o:Object(c.createMockUserToken)(o,t.app.options.projectId))}(t,e,n,r)}var Bt,Kt,Ht=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Gt=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Ht(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Ht(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var o=this,c=void 0;return e&&(c="function"==typeof e?function(t){return e(new Ht(t,o,o._ref))}:{next:e.next?function(t){return e.next(new Ht(t,o,o._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,c,n||void 0,r||void 0)},t}(),Wt=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new zt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new zt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),zt=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return Nt(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(data,t){return this._throwIfRoot("put"),new Gt(Ft(this._delegate,data,t),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=T.RAW),this._throwIfRoot("putString");var data=E(e,t),r=Object(o.__assign)({},n);return null==r.contentType&&null!=data.contentType&&(r.contentType=data.contentType),new Gt(new It(this._delegate,new Y(data.data,!0),r),this)},t.prototype.listAll=function(){var t=this;return function(t){return Ot(t=Object(c.getModularInstance)(t))}(this._delegate).then((function(e){return new Wt(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return St(t=Object(c.getModularInstance)(t),e)}(this._delegate,t||void 0).then((function(t){return new Wt(t,e.storage)}))},t.prototype.getMetadata=function(){return Ut(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Ct(t=Object(c.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return At(t=Object(c.getModularInstance)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return jt(t=Object(c.getModularInstance)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw x(t)},t}(),$t=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(path){if(Pt(path))throw _("ref() expected a child path but got a URL, use refFromURL instead.");return new zt(qt(this._delegate,path),this)},t.prototype.refFromURL=function(t){if(!Pt(t))throw _("refFromURL() expected a full URL but got a child path, use ref() instead.");try{L.makeFromUrl(t,this._delegate.host)}catch(t){throw _("refFromUrl() expected a valid full URL but got an invalid one.")}return new zt(qt(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(time){this._delegate.maxUploadRetryTime=time},t.prototype.setMaxOperationRetryTime=function(time){this._delegate.maxOperationRetryTime=time},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Vt(this._delegate,t,e,n)},t}();function Qt(t,e){var n=e.instanceIdentifier,o=t.getProvider("app").getImmediate(),c=t.getProvider("auth-internal"),l=t.getProvider("app-check-internal");return new $t(o,new Lt(o,c,l,new M,n,r.default.SDK_VERSION))}Bt=r.default,Kt={TaskState:P,TaskEvent:N,StringFormat:T,Storage:Lt,Reference:zt},Bt.INTERNAL.registerComponent(new l.Component("storage",Qt,"PUBLIC").setServiceProps(Kt).setMultipleInstances(!0)),Bt.registerVersion("@firebase/storage","0.7.1")},819:function(t,e,n){"use strict";var r,o,c=n(741),l=n(729),h=(n(765),n(752)),f=n(744),d=n(748),v="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(r||(r={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(o||(o={}));var m,y=new h.Logger("@firebase/analytics");function _(t,e,n,o,l,h){return Object(c.__awaiter)(this,void 0,void 0,(function(){var f,d,v,m;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:f=o[l],c.label=1;case 1:return c.trys.push([1,7,,8]),f?[4,e[f]]:[3,3];case 2:return c.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return d=c.sent(),(v=d.find((function(t){return t.measurementId===l})))?[4,e[v.appId]]:[3,6];case 5:c.sent(),c.label=6;case 6:return[3,8];case 7:return m=c.sent(),y.error(m),[3,8];case 8:return t(r.CONFIG,l,h),[2]}}))}))}function w(t,e,n,o,l){return Object(c.__awaiter)(this,void 0,void 0,(function(){var h,f,d,v,m,_,w,x;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),h=[],l&&l.send_to?(f=l.send_to,Array.isArray(f)||(f=[f]),[4,Promise.all(n)]):[3,2];case 1:for(d=c.sent(),v=function(t){var n=d.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return h=[],"break";h.push(r)},m=0,_=f;m<_.length&&(w=_[m],"break"!==v(w));m++);c.label=2;case 2:return 0===h.length&&(h=Object.values(e)),[4,Promise.all(h)];case 3:return c.sent(),t(r.EVENT,o,l||{}),[3,5];case 4:return x=c.sent(),y.error(x),[3,5];case 5:return[2]}}))}))}function x(t,e,n,o,l){var h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[o].push(arguments)};return window[l]&&"function"==typeof window[l]&&(h=window[l]),window[l]=function(t,e,n,o){return function(l,h,f){return Object(c.__awaiter)(this,void 0,void 0,(function(){var d;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),l!==r.EVENT?[3,2]:[4,w(t,e,n,h,f)];case 1:return c.sent(),[3,5];case 2:return l!==r.CONFIG?[3,4]:[4,_(t,e,n,o,h,f)];case 3:return c.sent(),[3,5];case 4:t(r.SET,h),c.label=5;case 5:return[3,7];case 6:return d=c.sent(),y.error(d),[3,7];case 7:return[2]}}))}))}}(h,t,e,n),{gtagCore:h,wrappedGtag:window[l]}}var k=((m={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",m["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",m["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",m["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",m["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",m["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",m["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",m["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',m["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',m),I=new f.ErrorFactory("analytics","Analytics",k),T=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function O(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function E(t){var e;return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,o,l,h,f,d;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,o={method:"GET",headers:O(r)},l="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(l,o)];case 1:if(200===(h=c.sent()).status||304===h.status)return[3,6];f="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,h.json()];case 3:return d=c.sent(),(null===(e=d.error)||void 0===e?void 0:e.message)&&(f=d.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw I.create("config-fetch-failed",{httpStatus:h.status,responseMessage:f});case 6:return[2,h.json()]}}))}))}function S(t,e,n,r){var o=e.throttleEndTimeMillis,l=e.backoffCount;return void 0===r&&(r=T),Object(c.__awaiter)(this,void 0,void 0,(function(){var e,h,d,v,m,_,w;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:e=t.appId,h=t.measurementId,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,C(n,o)];case 2:return c.sent(),[3,4];case 3:if(d=c.sent(),h)return y.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+h+' provided in the "measurementId" field in the local Firebase config. ['+d.message+"]"),[2,{appId:e,measurementId:h}];throw d;case 4:return c.trys.push([4,6,,7]),[4,E(t)];case 5:return v=c.sent(),r.deleteThrottleMetadata(e),[2,v];case 6:if(!function(t){if(!(t instanceof f.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(m=c.sent())){if(r.deleteThrottleMetadata(e),h)return y.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+h+' provided in the "measurementId" field in the local Firebase config. ['+m.message+"]"),[2,{appId:e,measurementId:h}];throw m}return _=503===Number(m.customData.httpStatus)?Object(f.calculateBackoffMillis)(l,r.intervalMillis,30):Object(f.calculateBackoffMillis)(l,r.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:l+1},r.setThrottleMetadata(e,w),y.debug("Calling attemptFetch again in "+_+" millis"),[2,S(t,w,n,r)];case 7:return[2]}}))}))}function C(t,e){return new Promise((function(n,r){var o=Math.max(e-Date.now(),0),c=setTimeout(n,o);t.addEventListener((function(){clearTimeout(c),r(I.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var A=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function j(t,e,n,o,l,h){return Object(c.__awaiter)(this,void 0,void 0,(function(){var d,m,_,w,x,k,O;return Object(c.__generator)(this,(function(E){switch(E.label){case 0:return d=function(t,e,n){return void 0===e&&(e=T),Object(c.__awaiter)(this,void 0,void 0,(function(){var r,o,l,h,f,d,v=this;return Object(c.__generator)(this,(function(m){if(r=t.options,o=r.appId,l=r.apiKey,h=r.measurementId,!o)throw I.create("no-app-id");if(!l){if(h)return[2,{measurementId:h,appId:o}];throw I.create("no-api-key")}return f=e.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new A,setTimeout((function(){return Object(c.__awaiter)(v,void 0,void 0,(function(){return Object(c.__generator)(this,(function(t){return d.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,S({appId:o,apiKey:l,measurementId:h},f,d,e)]}))}))}(t),d.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&y.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return y.error(t)})),e.push(d),m=function(){return Object(c.__awaiter)(this,void 0,void 0,(function(){var t;return Object(c.__generator)(this,(function(e){switch(e.label){case 0:return Object(f.isIndexedDBAvailable)()?[3,1]:(y.warn(I.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(f.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),y.warn(I.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?o.getId():void 0})),[4,Promise.all([d,m])];case 1:return _=E.sent(),w=_[0],x=_[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(v))return r}return null}()||function(t,e){var script=document.createElement("script");script.src=v+"?l="+t+"&id="+e,script.async=!0,document.head.appendChild(script)}(h,w.measurementId),l("js",new Date),(O={}).origin="firebase",O.update=!0,k=O,null!=x&&(k.firebase_id=x),l(r.CONFIG,w.measurementId,k),[2,w.measurementId]}}))}))}var N,P,R={},D=[],M={},L="dataLayer",F="gtag",U=!1;function V(t){if(U)throw I.create("already-initialized");t.dataLayerName&&(L=t.dataLayerName),t.gtagName&&(F=t.gtagName)}function B(t,e){!function(){var t=[];if(Object(f.isBrowserExtension)()&&t.push("This is a browser extension environment."),Object(f.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var details=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),e=I.create("invalid-analytics-context",{errorInfo:details});y.warn(e.message)}}();var n=t.options.appId;if(!n)throw I.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw I.create("no-api-key");y.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=R[n])throw I.create("already-exists",{id:n});if(!U){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(L);var o=x(R,D,M,L,F),l=o.wrappedGtag,h=o.gtagCore;P=l,N=h,U=!0}R[n]=j(t,D,M,e,N,L);var d={app:t,logEvent:function(t,e,o){(function(t,e,n,o,l){return Object(c.__awaiter)(this,void 0,void 0,(function(){var h,f;return Object(c.__generator)(this,(function(d){switch(d.label){case 0:return l&&l.global?(t(r.EVENT,n,o),[2]):[3,1];case 1:return[4,e];case 2:h=d.sent(),f=Object(c.__assign)(Object(c.__assign)({},o),{send_to:h}),t(r.EVENT,n,f),d.label=3;case 3:return[2]}}))}))})(P,R[n],t,e,o).catch((function(t){return y.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,o){return Object(c.__awaiter)(this,void 0,void 0,(function(){var l;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return o&&o.global?(t(r.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:l=c.sent(),t(r.CONFIG,l,{update:!0,screen_name:n}),c.label=3;case 3:return[2]}}))}))})(P,R[n],t,e).catch((function(t){return y.error(t)}))},setUserId:function(t,e){(function(t,e,n,o){return Object(c.__awaiter)(this,void 0,void 0,(function(){var l;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return o&&o.global?(t(r.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:l=c.sent(),t(r.CONFIG,l,{update:!0,user_id:n}),c.label=3;case 3:return[2]}}))}))})(P,R[n],t,e).catch((function(t){return y.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,o){return Object(c.__awaiter)(this,void 0,void 0,(function(){var l,h,f,d,v;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:if(!o||!o.global)return[3,1];for(l={},h=0,f=Object.keys(n);h<f.length;h++)d=f[h],l["user_properties."+d]=n[d];return t(r.SET,l),[2,Promise.resolve()];case 1:return[4,e];case 2:v=c.sent(),t(r.CONFIG,v,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(P,R[n],t,e).catch((function(t){return y.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(R[n],t).catch((function(t){return y.error(t)}))},INTERNAL:{delete:function(){return delete R[n],Promise.resolve()}}};return d}var K,H="analytics";function G(){return Object(c.__awaiter)(this,void 0,void 0,(function(){return Object(c.__generator)(this,(function(t){switch(t.label){case 0:if(Object(f.isBrowserExtension)())return[2,!1];if(!Object(f.areCookiesEnabled)())return[2,!1];if(!Object(f.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(f.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}(K=l.default).INTERNAL.registerComponent(new d.Component(H,(function(t){return B(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:V,EventName:o,isSupported:G})),K.INTERNAL.registerComponent(new d.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider(H).getImmediate().logEvent}}catch(t){throw I.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),K.registerVersion("@firebase/analytics","0.6.18")},820:function(t,e,n){"use strict";var r,o=n(729),c=(n(765),n(741)),l=n(744),h=n(752),f=n(748),d=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,l;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=c.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return o=c.sent(),l=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&l.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(l)];case 3:return c.sent(),[2,o]}}))}))},t}(),v=((r={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",r["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",r["registration-api-key"]="Undefined API key. Check Firebase app initialization.",r["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",r["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",r["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",r["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",r["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",r["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",r["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',r["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',r["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",r["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",r),m=new l.ErrorFactory("remoteconfig","Remote Config",v);var y=function(){function t(t,e,n,r,o,c){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=o,this.appId=c}return t.prototype.fetch=function(t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,l,h,f,d,v,y,_,w,x,k,I,T,O,E,S;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=c.sent(),n=e[0],r=e[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",l=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,h={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},f={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===C&&(C=navigator),C.languages&&C.languages[0]||C.language)},d={method:"POST",headers:h,body:JSON.stringify(f)},v=fetch(l,d),y=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),c.label=2;case 2:return c.trys.push([2,5,,6]),[4,Promise.race([v,y])];case 3:return c.sent(),[4,v];case 4:return _=c.sent(),[3,6];case 5:throw w=c.sent(),x="fetch-client-network","AbortError"===w.name&&(x="fetch-timeout"),m.create(x,{originalErrorMessage:w.message});case 6:if(k=_.status,I=_.headers.get("ETag")||void 0,200!==_.status)return[3,11];E=void 0,c.label=7;case 7:return c.trys.push([7,9,,10]),[4,_.json()];case 8:return E=c.sent(),[3,10];case 9:throw S=c.sent(),m.create("fetch-client-parse",{originalErrorMessage:S.message});case 10:T=E.entries,O=E.state,c.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===O?k=500:"NO_CHANGE"===O?k=304:"NO_TEMPLATE"!==O&&"EMPTY_CONFIG"!==O||(T={}),304!==k&&200!==k)throw m.create("fetch-status",{httpStatus:k});return[2,{status:k,eTag:I,config:T}]}var C}))}))},t}(),_=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),w=["1","true","t","yes","y","on"],x=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&w.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),k=function(){function t(t,e,n,r,o){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=h.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=h.LogLevel.SILENT;break;default:this._logger.logLevel=h.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(c.__awaiter)(this,void 0,void 0,(function(){var t,e,n;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(c.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(c.__generator)(this,(function(o){switch(o.label){case 0:t=new _,setTimeout((function(){return Object(c.__awaiter)(r,void 0,void 0,(function(){return Object(c.__generator)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return e=o.sent(),f="fetch-throttle",n=(h=e)instanceof l.FirebaseError&&-1!==h.code.indexOf(f)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw o.sent(),e;case 6:return[2]}var h,f}))}))},t.prototype.fetchAndActivate=function(){return Object(c.__awaiter)(this,void 0,void 0,(function(){return Object(c.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Object(c.__assign)(Object(c.__assign)({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new x("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new x("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new x("static"))},t}();function I(t,e){var n=t.target.error||void 0;return m.create(e,{originalErrorMessage:n&&n.message})}var T="app_namespace_store";var O=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(I(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(T,{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,o){var c=e.transaction([T],"readonly").objectStore(T),l=n.createCompositeKey(t);try{var h=c.get(l);h.onerror=function(t){o(I(t,"storage-get"))},h.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){o(m.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return Object(c.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return n=o.sent(),[2,new Promise((function(o,c){var l=n.transaction([T],"readwrite").objectStore(T),h=r.createCompositeKey(t);try{var f=l.put({compositeKey:h,value:e});f.onerror=function(t){c(I(t,"storage-set"))},f.onsuccess=function(){o()}}catch(t){c(m.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,o){var c=e.transaction([T],"readwrite").objectStore(T),l=n.createCompositeKey(t);try{var h=c.delete(l);h.onerror=function(t){o(I(t,"storage-delete"))},h.onsuccess=function(){r()}}catch(t){o(m.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),E=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(c.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,o,l;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=c.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(o=c.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,n];case 3:return(l=c.sent())&&(this.activeConfig=l),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function S(t,e){return new Promise((function(n,r){var o=Math.max(e-Date.now(),0),c=setTimeout(n,o);t.addEventListener((function(){clearTimeout(c),r(m.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var C,A=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var e;return Object(c.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(c.__awaiter)(this,void 0,void 0,(function(){var e,o,h;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return[4,S(t.signal,n)];case 1:c.sent(),c.label=2;case 2:return c.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=c.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return c.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof l.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o=c.sent()))throw o;return h={throttleEndTimeMillis:Date.now()+Object(l.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(h)];case 6:return c.sent(),[2,this.attemptFetch(t,h)];case 7:return[2]}}))}))},t}(),j="@firebase/remote-config";(C=o.default).INTERNAL.registerComponent(new f.Component("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),o=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw m.create("registration-window");var c=r.options,l=c.projectId,f=c.apiKey,v=c.appId;if(!l)throw m.create("registration-project-id");if(!f)throw m.create("registration-api-key");if(!v)throw m.create("registration-app-id");n=n||"firebase";var _=new O(v,r.name,n),w=new E(_),x=new h.Logger(j);x.logLevel=h.LogLevel.ERROR;var I=new y(o,C.SDK_VERSION,n,l,f,v),T=new A(I,_),S=new d(T,_,w,x),N=new k(r,S,w,_,x);return N.ensureInitialized(),N}),"PUBLIC").setMultipleInstances(!0)),C.registerVersion(j,"0.1.43")},826:function(t,e,n){"use strict";n(15),n(17),n(19),n(23),n(16),n(24);var r=n(86),o=n(2),c=(n(4),n(85),n(788),n(778),n(94)),l=n(770),h=n(781),f=["title"];function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=h.a.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return v(v({},l.a.options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(t){var e=this;this.$nextTick((function(){return e.inputIndeterminate=t}))},inputIndeterminate:function(t){this.$emit("update:indeterminate",t)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var t=this.attrs$,e=(t.title,Object(r.a)(t,f));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(c.a,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",v(v({},e),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}})},833:function(t,e,n){"use strict";n.r(e);var r=n(1027),o=n(720),c=n(693),l=n(75),h=n(281),f=n(73),d=n(0),v=(n(25),n(14),n(5)),m=n(76),y=n.n(m),_=Object(v.b)({name:"ChatAddmemberstochatbtn",directives:{Touch:h.a},props:{chat:{type:Object,default:function(){return{}}}},setup:function(t){var e=Object(v.l)(),n=e.$system,r=e.$notify,o=e.i18n,c=Object(v.q)().dispatch,l=Object(v.p)(),h=Object(v.i)(!1),m=Object(v.i)(!1),_=Object(v.i)([]),w=function(){var t=Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{h.value=!0,m.value=!0}catch(t){n.log({comp:"ChatsIndex",msg:"getChats",val:t})}finally{h.value=!1}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(regeneratorRuntime.mark((function e(){var v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==_.value.length){e.next=3;break}return r.show({text:o.t("chats.select_friend_first"),color:"error"}),e.abrupt("return");case 3:return e.prev=3,h.value=!0,(v=y.a.cloneDeep(t.chat)).participants=[].concat(Object(f.a)(v.participants),Object(f.a)(_.value)),e.next=9,c("chats/update",v).then(function(){var e=Object(d.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1===n){e.next=4;break}return e.next=3,l.push("/chats/chat/".concat(t.chat.id));case 3:r.show({text:o.t("notify.success"),color:"success"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),n.log({comp:"ChatAddmemberstochatbtn",msg:"startChat",val:e.t0});case 14:return e.prev=14,h.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return{loading:h,showBottomSheet:m,newChat:w,startChat:x,swipe:function(t){"Down"===t&&(m.value=!1)},friendsSelected:function(t){_.value=t}}}}),w=_,x=n(37),component=Object(x.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n(c.a,{staticClass:"justify-center primary elevation-0",on:{click:t.newChat}},[t._v("\n    "+t._s(t.$t("chats.add_member"))+"\n  ")]),t._v(" "),n(o.a,{attrs:{scrollable:!0,"max-width":"700"},model:{value:t.showBottomSheet,callback:function(e){t.showBottomSheet=e},expression:"showBottomSheet"}},[n(l.a,{staticClass:"rounded-t-xl pb-14",attrs:{height:"80vh"}},[n("div",{staticClass:"ma-3",staticStyle:{"padding-bottom":"180px"}},[n("GlobalSlidebar",{directives:[{def:h.b,name:"touch",rawName:"v-touch",value:{down:function(){return t.swipe("Down")}},expression:"{ down: () => swipe('Down') }"}],nativeOn:{click:function(e){return t.swipe("Down")}}}),t._v(" "),t.loading?n("ElementH3",{attrs:{align:"center",text:t.$t("is_loading")}}):t._e(),t._v(" "),n("ElementH1",{attrs:{align:"center",text:t.$t("chats.add_member")}}),t._v(" "),n("ElementP",{attrs:{text:t.$t("chats.select_friends")}}),t._v(" "),n("ChatViewsearchmembers",{on:{friendsSelected:t.friendsSelected}}),t._v(" "),n(r.a,{staticClass:"mb-16",staticStyle:{top:"90%","margin-bottom":"20px"},attrs:{color:"rgba(0,0,0,0)",flat:"",bottom:"",fixed:""}},[n("div",{staticClass:"text-center",staticStyle:{width:"100%"}},[n(c.a,{staticClass:"primary elevation-0",attrs:{rounded:"",large:""},on:{click:t.startChat}},[t._v("\n              "+t._s(t.$t("btn.add"))+"\n            ")])],1)])],1)])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{GlobalSlidebar:n(400).default,ElementH3:n(395).default,ElementH1:n(728).default,ElementP:n(745).default,ChatViewsearchmembers:n(803).default})},834:function(t,e,n){"use strict";n.d(e,"a",(function(){return o.default}));var r,o=n(729),c=(n(772),n(838),n(815),n(801)),l=n(744),h=n(752);n(782);(r=c.e).prototype.loadBundle=c.t,r.prototype.namedQuery=c.l;n(816),n(817),n(818),n(765);var f,d,v,m=n(741),y=n(748),_="0.4.18",w=_,x="FB-PERF-TRACE-MEASURE",k="_wt_",I="_fcp",T="_fid",O="@firebase/performance/config",E="@firebase/performance/configexpire",S="Performance",C=((f={})["trace started"]="Trace {$traceName} was started before.",f["trace stopped"]="Trace {$traceName} is not running.",f["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",f["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",f["no window"]="Window is not available.",f["no app id"]="App id is not available.",f["no project id"]="Project id is not available.",f["no api key"]="Api key is not available.",f["invalid cc log"]="Attempted to queue invalid cc event",f["FB not default"]="Performance can only start when Firebase app instance is the default one.",f["RC response not ok"]="RC response is not ok",f["invalid attribute name"]="Attribute name {$attributeName} is invalid.",f["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",f["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",f["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",f),A=new l.ErrorFactory("performance",S,C),j=new h.Logger(S);j.logLevel=h.LogLevel.INFO;var N,P=function(){function t(t){if(this.window=t,!t)throw A.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(l.isIndexedDBAvailable)()||(j.info("IndexedDB is not supported by current browswer"),!1):(j.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var o=r[n];e(o)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===d&&(d=new t(v)),d},t}();function R(t,e){var n=t.length-e.length;if(n<0||n>1)throw A.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var D,M,L=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=R("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=R("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw A.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw A.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw A.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===N&&(N=new t),N},t}();function F(){return D}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(M||(M={}));var U=["firebase_","google_","ga_"],V=new RegExp("^[a-zA-Z]\\w*$");function B(){var t=P.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function K(){switch(P.getInstance().document.visibilityState){case"visible":return M.VISIBLE;case"hidden":return M.HIDDEN;default:return M.UNKNOWN}}function H(){var t=P.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var G="0.0.1",W=!0,z="FIREBASE_INSTALLATIONS_AUTH";function $(t){var e=function(){var t=P.getInstance().localStorage;if(!t)return;var e=t.getItem(E);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem(O);if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(Y(e),Promise.resolve()):function(t){return(e=L.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+L.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+L.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:z+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:L.getInstance().getAppId(),app_version:w,sdk_version:G})});return fetch(r).then((function(t){if(t.ok)return t.json();throw A.create("RC response not ok")}))})).catch((function(){j.info(Q)}));var e}(t).then(Y).then((function(t){return function(t){var e=P.getInstance().localStorage;if(!t||!e)return;e.setItem(O,JSON.stringify(t)),e.setItem(E,String(Date.now()+60*L.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}var Q="Could not fetch config, will use default configs";function Y(t){if(!t)return t;var e=L.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=W,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=X(e.tracesSamplingRate),e.logNetworkAfterSampling=X(e.networkRequestsSamplingRate),t}function X(t){return Math.random()<=t}var J,Z=1;function tt(){return Z=2,J=J||function(){var t=P.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=L.getInstance().installationsService.getId()).then((function(t){D=t})),t;var t})).then((function(t){return $(t)})).then((function(){return et()}),(function(){return et()}))}function et(){Z=3}var nt,it=1e4,ot=3,at=[],st=!1;function ut(t){setTimeout((function(){var t,e;if(0!==ot)return at.length?(t=at.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(data,t){return function(data){var t=L.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(data)})}(data).then((function(t){return t.ok||j.info("Call to Firebase backend failed."),t.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=it;isNaN(n)||(r=Math.max(n,r));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(at=Object(m.__spreadArray)(Object(m.__spreadArray)([],t),at),j.info("Retry transport request later.")),ot=3,ut(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:L.getInstance().logSource,log_event:e},t).catch((function(){at=Object(m.__spreadArray)(Object(m.__spreadArray)([],t),at),ot--,j.info("Tries left: "+ot+"."),ut(it)}))):ut(it)}),t)}function ct(t){if(!t.eventTime||!t.message)throw A.create("invalid cc log");at=Object(m.__spreadArray)(Object(m.__spreadArray)([],at),[t])}function lt(t,e){nt||(nt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];ct({message:t.apply(void 0,e),eventTime:Date.now()})}}(pt)),nt(t,e)}function ht(t){var e=L.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&P.getInstance().requiredApisAvailable()&&(t.isAuto&&K()!==M.VISIBLE||(3===Z?ft(t):tt().then((function(){return ft(t)}),(function(){return ft(t)}))))}function ft(t){if(F()){var e=L.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return lt(t,1)}),0)}}function pt(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},o={application_info:vt(),network_request_metric:r},JSON.stringify(o)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:vt(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,o}function vt(){return{google_app_id:L.getInstance().getAppId(),app_instance_id:F(),web_app_info:{sdk_version:w,page_url:P.getInstance().getUrl(),service_worker_status:B(),visibility_state:K(),effective_connection_type:H()},application_process_state:0}}var gt=["_fp",I,T];var mt=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=P.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw A.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw A.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ht(this)},t.prototype.record=function(t,e,n){if(t<=0)throw A.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw A.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(m.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var c=o[r];isNaN(Number(n.metrics[c]))||(this.counters[c]=Number(Math.floor(n.metrics[c])))}ht(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=t,c=this.name,0===o.length||o.length>100||!(c&&c.startsWith(k)&&gt.indexOf(o)>-1)&&o.startsWith("_"))throw A.create("invalid custom metric name",{customMetricName:t});var n,r,o,c;this.counters[t]=(n=e,(r=Math.floor(n))<n&&j.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||U.some((function(t){return n.startsWith(t)}))||!n.match(V)),o=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&o)this.customAttributes[t]=e;else{if(!r)throw A.create("invalid attribute name",{attributeName:t});if(!o)throw A.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(m.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var o=P.getInstance().getUrl();if(o){var c=new t(k+o,!0),l=Math.floor(1e3*P.getInstance().getTimeOrigin());c.setStartTime(l),e&&e[0]&&(c.setDuration(Math.floor(1e3*e[0].duration)),c.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),c.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),c.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var h=n.find((function(t){return"first-paint"===t.name}));h&&h.startTime&&c.putMetric("_fp",Math.floor(1e3*h.startTime));var f=n.find((function(t){return"first-contentful-paint"===t.name}));f&&f.startTime&&c.putMetric(I,Math.floor(1e3*f.startTime)),r&&c.putMetric(T,Math.floor(1e3*r))}ht(c)}},t.createUserTimingTrace=function(e){ht(new t(e,!1,e))},t}();function yt(t){var e=t;if(e&&void 0!==e.responseStart){var n=P.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),o=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,c=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=L.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==o&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return lt(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:c})}}function _t(){F()&&(setTimeout((function(){return function(){var t=P.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){mt.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),mt.createOobTrace(e,n,t))}))}else mt.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=P.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){yt(r[n])}t.setupObserver("resource",yt)}()}),0),setTimeout((function(){return function(){for(var t=P.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){bt(r[n])}t.setupObserver("measure",bt)}()}),0))}function bt(t){var e=t.name;e.substring(0,x.length)!==x&&mt.createUserTimingTrace(e)}var wt,xt,kt=function(){function t(t){this.app=t,P.getInstance().requiredApisAvailable()&&Object(l.validateIndexedDBOpenable)().then((function(t){t&&(st||(ut(5500),st=!0),tt().then(_t,_t))})).catch((function(t){j.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new mt(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return L.getInstance().instrumentationEnabled},set:function(t){L.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return L.getInstance().dataCollectionEnabled},set:function(t){L.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();wt=o.default,xt=function(t,e){if("[DEFAULT]"!==t.name)throw A.create("FB not default");if("undefined"==typeof window)throw A.create("no window");return function(t){v=t}(window),L.getInstance().firebaseAppInstance=t,L.getInstance().installationsService=e,new kt(t)},wt.INTERNAL.registerComponent(new y.Component("performance",(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return xt(e,n)}),"PUBLIC")),wt.registerVersion("@firebase/performance",_);n(819),n(820),n(840);var It="8.10.1";o.default.registerVersion("firebase",It,"app"),o.default.SDK_VERSION=It;console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),o.default.registerVersion("firebase","8.10.1")},838:function(t,e,n){"use strict";(function(t,e){var r=n(729),o=n(748),c=n(744),l=n(741),h=n(752),f="";function d(t){f=t}var v,m=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(c.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(c.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),y=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(c.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),_=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new m(e)}}catch(t){}return new y},w=_("localStorage"),x=_("sessionStorage"),k=new h.Logger("@firebase/database"),I=(v=1,function(){return v++}),T=function(t){var e=Object(c.stringToByteArray)(t),n=new c.Sha1;n.update(e);var r=n.digest();return c.base64.encodeByteArray(r)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++){var r=t[i];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=O.apply(null,r):n+="object"==typeof r?Object(c.stringify)(r):r,n+=" "}return n},E=null,S=!0,C=function(t,e){Object(c.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(k.logLevel=h.LogLevel.VERBOSE,E=k.log.bind(k),e&&x.set("logging_enabled",!0)):"function"==typeof t?E=t:(E=null,x.remove("logging_enabled"))},A=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===S&&(S=!1,null===E&&!0===x.get("logging_enabled")&&C(!0)),E){var n=O.apply(null,t);E(n)}},j=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];A.apply(void 0,Object(l.__spreadArray)([t],Object(l.__read)(e)))}},N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+O.apply(void 0,Object(l.__spreadArray)([],Object(l.__read)(t)));k.error(n)},P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+O.apply(void 0,Object(l.__spreadArray)([],Object(l.__read)(t)));throw k.error(n),new Error(n)},R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+O.apply(void 0,Object(l.__spreadArray)([],Object(l.__read)(t)));k.warn(n)},D=function(data){return"number"==typeof data&&(data!=data||data===Number.POSITIVE_INFINITY||data===Number.NEGATIVE_INFINITY)},M="[MIN_NAME]",L="[MAX_NAME]",F=function(a,b){if(a===b)return 0;if(a===M||b===L)return-1;if(b===M||a===L)return 1;var t=Q(a),e=Q(b);return null!==t?null!==e?t-e==0?a.length-b.length:t-e:-1:null!==e?1:a<b?-1:1},U=function(a,b){return a===b?0:a<b?-1:1},V=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(c.stringify)(e))},B=function(t){if("object"!=typeof t||null===t)return Object(c.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(c.stringify)(e[i]),r+=":",r+=B(t[e[i]]);return r+="}"},K=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],o=0;o<n;o+=e)o+e>n?r.push(t.substring(o,n)):r.push(t.substring(o,o+e));return r};function H(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var G=function(t){Object(c.assert)(!D(t),"Invalid JSON number");var s,e,n,r,i,o=1023;0===t?(e=0,n=0,s=1/t==-1/0?1:0):(s=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(e=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),o))+o,n=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(e=0,n=Math.round(t/Math.pow(2,-1074))));var l=[];for(i=52;i;i-=1)l.push(n%2?1:0),n=Math.floor(n/2);for(i=11;i;i-=1)l.push(e%2?1:0),e=Math.floor(e/2);l.push(s?1:0),l.reverse();var h=l.join(""),f="";for(i=0;i<64;i+=8){var d=parseInt(h.substr(i,8),2).toString(16);1===d.length&&(d="0"+d),f+=d}return f.toLowerCase()};var W=new RegExp("^-?(0*)\\d{1,10}$"),z=-2147483648,$=2147483647,Q=function(t){if(W.test(t)){var e=Number(t);if(e>=z&&e<=$)return e}return null},Y=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw R("Exception was thrown by user callback.",e),t}),Math.floor(0))}},X=function(t,time){var e=setTimeout(t,time);return"object"==typeof e&&e.unref&&e.unref(),e},J=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){R('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Z=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(A("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',R(t)},t}(),tt=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),et="5",nt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,it="websocket",ot="long_polling",at=function(){function t(t,e,n,r,o,c,l){void 0===o&&(o=!1),void 0===c&&(c=""),void 0===l&&(l=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=w.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&w.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function st(t,e,n){var r;if(Object(c.assert)("string"==typeof e,"typeof type must == string"),Object(c.assert)("object"==typeof n,"typeof params must == object"),e===it)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ot)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return H(n,(function(t,e){o.push(t+"="+e)})),r+o.join("&")}var ut=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(c.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(c.deepCopy)(this.counters_)},t}(),ct={},lt={};function ht(t){var e=t.toString();return ct[e]||(ct[e]=new ut),ct[e]}var ft=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,data){var e=this;this.pendingResponses[t]=data;for(var n=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var n=function(i){t[i]&&Y((function(){e.onMessage_(t[i])}))},i=0;i<t.length;++i)n(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum];){if("break"===n())break}},t}(),pt="start",vt="close",gt=function(){function t(t,e,n,r,o,c,l){var h=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.transportSessionId=c,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=j(t),this.stats_=ht(e),this.urlFn=function(t){return h.appCheckToken&&(t.ac=h.appCheckToken),st(e,ot,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ft(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(c.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new mt((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(l.__read)(t,5),o=r[0],c=r[1],h=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===pt)n.id=c,n.password=h;else{if(o!==vt)throw new Error("Unrecognized command received: "+o);c?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(c,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(l.__read)(t,2),o=r[0],data=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,data)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v=et,n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&nt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Object(c.isNodeSdk)()&&(!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(data){var t=Object(c.stringify)(data);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e=Object(c.base64Encode)(t),n=K(e,1840),i=0;i<n.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(c.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(c.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),mt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(c.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=I(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var script="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))script='<script>document.domain="'+document.domain+'";<\/script>';var l="<html><body>"+script+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(t){A("frame writing exception"),t.stack&&A(t.stack),A(t)}}}return t.createIFrame_=function(){var iframe=document.createElement("iframe");if(iframe.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(iframe);try{iframe.contentWindow.document||A("No IE domain setting required")}catch(e){var t=document.domain;iframe.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return iframe.contentDocument?iframe.doc=iframe.contentDocument:iframe.contentWindow?iframe.doc=iframe.contentWindow.document:iframe.document&&(iframe.doc=iframe.document),iframe},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,data){this.pendingSegs.push({seg:t,ts:e,d:data}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(o),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(c.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){A("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),yt=null;"undefined"!=typeof MozWebSocket?yt=MozWebSocket:"undefined"!=typeof WebSocket&&(yt=WebSocket);var _t=function(){function e(t,n,r,o,c,l,h){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=j(this.connId),this.stats_=ht(n),this.connURL=e.connectionURL_(n,l,h,o),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,e,n,r){var o={};return o.v=et,!Object(c.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&nt.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),st(t,it,o)},e.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,w.set("previous_websocket_failure",!0);try{if(Object(c.isNodeSdk)()){var o=this.nodeAdmin?"AdminNode":"Node",l={headers:{"User-Agent":"Firebase/5/"+f+"/"+t.platform+"/"+o,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);var h=t.env,d=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;d&&(l.proxy={origin:d}),this.mySock=new yt(this.connURL,[],l)}else{l={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new yt(this.connURL,[],l)}}catch(t){this.log_("Error instantiating WebSocket.");var v=t.message||t.data;return v&&this.log_(v),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==yt&&!e.forceDisallow_},e.previouslyFailed=function(){return w.isInMemoryStorage||!0===w.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){w.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(data){if(this.frames.push(data),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var e=Object(c.jsonEval)(t);this.onMessage(e)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(data){if(Object(c.assert)(null===this.frames,"We already have a frame buffer"),data.length<=6){var t=Number(data);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),data},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var data=t.data;if(this.bytesReceived+=data.length,this.stats_.incrementCounter("bytes_received",data.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(data);else{var e=this.extractFrameCount_(data);null!==e&&this.appendFrame_(e)}}},e.prototype.send=function(data){this.resetKeepAlive();var t=Object(c.stringify)(data);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=K(t,16384);e.length>1&&this.sendString_(String(e.length));for(var i=0;i<e.length;i++)this.sendString_(e[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),bt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[gt,_t]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=_t&&_t.isAvailable(),c=o&&!_t.previouslyFailed();if(e.webSocketOnly&&(o||R("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),c=!0),c)this.transports_=[_t];else{var h=this.transports_=[];try{for(var f=Object(l.__values)(t.ALL_TRANSPORTS),d=f.next();!d.done;d=f.next()){var v=d.value;v&&v.isAvailable()&&h.push(v)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),wt=function(){function t(t,e,n,r,o,c,l,h,f,d){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=c,this.onReady_=l,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=j("c:"+this.id+":"),this.transportManager_=new bt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=X((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(o)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=V("t",t),data=V("d",t);if("c"===e)this.onSecondaryControl_(data);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(data)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=V("t",t),data=V("d",t);"c"===e?this.onControl_(data):"d"===e&&this.onDataMessage_(data)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=V("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?N("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):N("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),et!==n&&R("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),X((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):X((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(w.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(data){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(data)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),xt=function(){function t(){}return t.prototype.put=function(t,data,e,n){},t.prototype.merge=function(t,data,e,n){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,data,e){},t.prototype.onDisconnectMerge=function(t,data,e){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),kt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(c.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(l.__spreadArray)([],Object(l.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(c.assert)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),It=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(c.isMobileCordova)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(l.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(c.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(kt),Tt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",i=this.pieceNum_;i<this.pieces_.length;i++)""!==this.pieces_[i]&&(t+="/"+this.pieces_[i]);return t||"/"},t}();function Ot(){return new Tt("")}function Et(path){return path.pieceNum_>=path.pieces_.length?null:path.pieces_[path.pieceNum_]}function St(path){return path.pieces_.length-path.pieceNum_}function Ct(path){var t=path.pieceNum_;return t<path.pieces_.length&&t++,new Tt(path.pieces_,t)}function At(path){return path.pieceNum_<path.pieces_.length?path.pieces_[path.pieces_.length-1]:null}function jt(path,t){return void 0===t&&(t=0),path.pieces_.slice(path.pieceNum_+t)}function Nt(path){if(path.pieceNum_>=path.pieces_.length)return null;for(var t=[],i=path.pieceNum_;i<path.pieces_.length-1;i++)t.push(path.pieces_[i]);return new Tt(t,0)}function Pt(path,t){for(var e=[],i=path.pieceNum_;i<path.pieces_.length;i++)e.push(path.pieces_[i]);if(t instanceof Tt)for(i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{var n=t.split("/");for(i=0;i<n.length;i++)n[i].length>0&&e.push(n[i])}return new Tt(e,0)}function Rt(path){return path.pieceNum_>=path.pieces_.length}function Dt(t,e){var n=Et(t),r=Et(e);if(null===n)return e;if(n===r)return Dt(Ct(t),Ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Mt(t,e){for(var n=jt(t,0),r=jt(e,0),i=0;i<n.length&&i<r.length;i++){var o=F(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Lt(path,t){if(St(path)!==St(t))return!1;for(var i=path.pieceNum_,e=t.pieceNum_;i<=path.pieces_.length;i++,e++)if(path.pieces_[i]!==t.pieces_[e])return!1;return!0}function Ft(path,t){var i=path.pieceNum_,e=t.pieceNum_;if(St(path)>St(t))return!1;for(;i<path.pieces_.length;){if(path.pieces_[i]!==t.pieces_[e])return!1;++i,++e}return!0}var Ut=function(path,t){this.errorPrefix_=t,this.parts_=jt(path,0),this.byteLength_=Math.max(1,this.parts_.length);for(var i=0;i<this.parts_.length;i++)this.byteLength_+=Object(c.stringLength)(this.parts_[i]);qt(this)};function qt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vt(t))}function Vt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Bt,Kt,Ht=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(l.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(c.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(kt),Gt=1e3,Wt=function(t){function e(n,r,o,l,h,f,d,v){var m=t.call(this)||this;if(m.repoInfo_=n,m.applicationId_=r,m.onDataUpdate_=o,m.onConnectStatus_=l,m.onServerInfoUpdate_=h,m.authTokenProvider_=f,m.appCheckTokenProvider_=d,m.authOverride_=v,m.id=e.nextPersistentConnectionId_++,m.log_=j("p:"+m.id+":"),m.interruptReasons_={},m.listens=new Map,m.outstandingPuts_=[],m.outstandingGets_=[],m.outstandingPutCount_=0,m.outstandingGetCount_=0,m.onDisconnectRequestQueue_=[],m.connected_=!1,m.reconnectDelay_=Gt,m.maxReconnectDelay_=3e5,m.securityDebugCallback_=null,m.lastSessionId=null,m.establishConnectionTimer_=null,m.visible_=!1,m.requestCBHash_={},m.requestNumber_=0,m.realtime_=null,m.authToken_=null,m.appCheckToken_=null,m.forceTokenRefresh_=!1,m.invalidAuthTokenCount_=0,m.invalidAppCheckTokenCount_=0,m.firstConnection_=!0,m.lastConnectionAttemptTime_=null,m.lastConnectionEstablishedTime_=null,v&&!Object(c.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ht.getInstance().on("visible",m.onVisible_,m),-1===n.host.indexOf("fblocal")&&It.getInstance().on("online",m.onOnline_,m),m}return Object(l.__extends)(e,t),e.prototype.sendRequest=function(t,body,e){var n=++this.requestNumber_,r={r:n,a:t,b:body};this.log_(Object(c.stringify)(r)),Object(c.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),e&&(this.requestCBHash_[n]=e)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new c.Deferred,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var o=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,o,!1,null),n.resolve(o)):n.reject(o)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var l=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[l];void 0!==t&&o===t&&(delete e.outstandingGets_[l],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+l+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(l),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),Object(c.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(c.assert)(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");var h={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(l).set(o,h),this.connected_&&this.sendListen_(h)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,o=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+o+" for "+c);var l={p:o};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,(function(l){var h=l.d,f=l.s;e.warnOnListenWarnings_(h,r),(n.listens.get(o)&&n.listens.get(o).get(c))===t&&(n.log_("listen response",l),"ok"!==f&&n.removeListen_(o,c),t.onComplete&&t.onComplete(f,h))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(c.contains)(t,"w")){var n=Object(c.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();R("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(c.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(c.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,data=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,data))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,data=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,data)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(c.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var o={p:t};r&&(o.q=n,o.t=r),this.sendRequest("n",o)},e.prototype.onDisconnectPut=function(t,data,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,data,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:data,onComplete:e})},e.prototype.onDisconnectMerge=function(t,data,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,data,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:data,onComplete:e})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,data,n){var r={p:e,d:data};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(function(t){n&&setTimeout((function(){n(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,data,e,n){this.putInternal("p",t,data,e,n)},e.prototype.merge=function(t,data,e,n){this.putInternal("m",t,data,e,n)},e.prototype.putInternal=function(t,e,data,n,r){this.initConnection_();var o={p:e,d:data};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:n}),this.outstandingPutCount_++;var c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),o&&o(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(c.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,body){this.log_("handleServerMessage",t,body),"d"===t?this.onDataUpdate_(body.p,body.d,!1,body.t):"m"===t?this.onDataUpdate_(body.p,body.d,!0,body.t):"c"===t?this.onListenRevoked_(body.p,body.q):"ac"===t?this.onAuthRevoked_(body.s,body.d):"apc"===t?this.onAppCheckRevoked_(body.s,body.d):"sd"===t?this.onSecurityDebugPacket_(body):N("Unrecognized action received from server: "+Object(c.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(c.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Gt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gt),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(l.__awaiter)(this,void 0,void 0,(function(){var t,n,r,o,h,f,d,v,m,y,_,w,x,k,I=this;return Object(l.__generator)(this,(function(T){switch(T.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,h=this.lastSessionId,f=!1,d=null,v=function(){d?d.close():(f=!0,r())},m=function(t){Object(c.assert)(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(t)},this.realtime_={close:v,sendRequest:m},y=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,T.label=1;case 1:return T.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)])];case 2:return _=l.__read.apply(void 0,[T.sent(),2]),w=_[0],x=_[1],f?A("getToken() completed but was canceled"):(A("getToken() completed. Creating connection."),this.authToken_=w&&w.accessToken,this.appCheckToken_=x&&x.token,d=new wt(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){R(t+" ("+I.repoInfo_.toString()+")"),I.interrupt("server_kill")}),h)),[3,4];case 3:return k=T.sent(),this.log_("Failed to get token: "+k),f||(this.repoInfo_.nodeAdmin&&R(k),v()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){A("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){A("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(c.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Gt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var i=0;i<this.outstandingPuts_.length;i++){var t=this.outstandingPuts_[i];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(q){return B(q)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Tt(t).toString();if(this.listens.has(r)){var map=this.listens.get(r);n=map.get(e),map.delete(e),0===map.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){A("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){A("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(body){this.securityDebugCallback_?this.securityDebugCallback_(body):"msg"in body&&console.log("FIREBASE: "+body.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var o=Object(l.__values)(this.listens.values()),c=o.next();!c.done;c=o.next()){var h=c.value;try{for(var f=(n=void 0,Object(l.__values)(h.values())),d=f.next();!d.done;d=f.next()){var v=d.value;this.sendListen_(v)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){var m=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(m.action,m.pathString,m.data,m.onComplete)}for(i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(c.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+f.replace(/\./g,"-")]=1,Object(c.isMobileCordova)()?t["framework.cordova"]=1:Object(c.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=It.getInstance().currentlyOnline();return Object(c.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(xt),zt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),$t=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new zt(M,t),r=new zt(M,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return zt.MIN},t}(),Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Bt},set:function(t){Bt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(a,b){return F(a.name,b.name)},e.prototype.isDefinedOn=function(t){throw Object(c.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return zt.MIN},e.prototype.maxPost=function(){return new zt(L,Bt)},e.prototype.makePost=function(t,e){return Object(c.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new zt(t,Bt)},e.prototype.toString=function(){return".key"},e}($t),Yt=new Qt,Xt=function(){function t(t,e,n,r,o){void 0===o&&(o=null),this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];for(var c=1;!t.isEmpty();)if(c=e?n(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Jt=function(){function t(e,n,r,o,c){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=o?o:te.EMPTY_NODE,this.right=null!=c?c:te.EMPTY_NODE}return t.prototype.copy=function(e,n,r,o,c){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,o=n(t,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return te.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return te.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Zt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,o){return this},t.prototype.insert=function(t,e,n){return new Jt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),te=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Jt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Jt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Xt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Xt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Xt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Xt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Zt,t}();function ee(t,e){return F(t.name,e.name)}function ne(t,e){return F(t,e)}var re,ie,oe,ae=function(t){return"number"==typeof t?"number:"+G(t):"string:"+t},se=function(t){if(t.isLeafNode()){var e=t.val();Object(c.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(c.contains)(e,".sv"),"Priority must be a string or number.")}else Object(c.assert)(t===Kt||t.isEmpty(),"priority of unexpected type.");Object(c.assert)(t===Kt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ue=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(c.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),se(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return re},set:function(t){re=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(path){return Rt(path)?this:".priority"===Et(path)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(path,e){var n=Et(path);return null===n?e:e.isEmpty()&&".priority"!==n?this:(Object(c.assert)(".priority"!==n||1===St(path),".priority must be the last token in a path"),this.updateImmediateChild(n,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ct(path),e)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ae(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?G(this.value_):this.value_,this.lazyHash_=T(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(c.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),l=t.VALUE_TYPE_ORDER.indexOf(r);return Object(c.assert)(o>=0,"Unknown leaf type: "+n),Object(c.assert)(l>=0,"Unknown leaf type: "+r),o===l?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var ce,le,he=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.__extends)(e,t),e.prototype.compare=function(a,b){var t=a.node.getPriority(),e=b.node.getPriority(),n=t.compareTo(e);return 0===n?F(a.name,b.name):n},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return zt.MIN},e.prototype.maxPost=function(){return new zt(L,new ue("[PRIORITY-POST]",oe))},e.prototype.makePost=function(t,e){var n=ie(t);return new zt(e,new ue("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}($t),fe=new he,de=Math.log(2),pe=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/de,10)),this.current_=this.count-1;var n,mask=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&mask}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ve=function(t,e,n,r){t.sort(e);var o=function(e,r){var c,l,h=r-e;if(0===h)return null;if(1===h)return c=t[e],l=n?n(c):c,new Jt(l,c.node,Jt.BLACK,null,null);var f=parseInt(h/2,10)+e,d=o(e,f),v=o(f+1,r);return c=t[f],l=n?n(c):c,new Jt(l,c.node,Jt.BLACK,d,v)},c=function(e){for(var r=null,c=null,l=t.length,h=function(e,r){var c=l-e,h=l;l-=e;var d=o(c+1,h),v=t[c],m=n?n(v):v;f(new Jt(m,v.node,r,null,d))},f=function(t){r?(r.left=t,r=t):(c=t,r=t)},i=0;i<e.count;++i){var d=e.nextBitIsOne(),v=Math.pow(2,e.count-(i+1));d?h(v,Jt.BLACK):(h(v,Jt.BLACK),h(v,Jt.RED))}return c}(new pe(t.length));return new te(r||e,c)},ge={},me=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(c.assert)(ge&&fe,"ChildrenNode.ts has not been loaded"),ce=ce||new t({".priority":ge},{".priority":fe})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(c.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof te?e:null},t.prototype.hasIndex=function(t){return Object(c.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(c.assert)(e!==Yt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,o=[],h=!1,f=n.getIterator(zt.Wrap),d=f.getNext();d;)h=h||e.isDefinedOn(d.node),o.push(d),d=f.getNext();r=h?ve(o,e.getCompare()):ge;var v=e.toString(),m=Object(l.__assign)({},this.indexSet_);m[v]=e;var y=Object(l.__assign)({},this.indexes_);return y[v]=r,new t(y,m)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(c.map)(this.indexes_,(function(t,o){var l=Object(c.safeGet)(r.indexSet_,o);if(Object(c.assert)(l,"Missing index implementation for "+o),t===ge){if(l.isDefinedOn(e.node)){for(var h=[],f=n.getIterator(zt.Wrap),d=f.getNext();d;)d.name!==e.name&&h.push(d),d=f.getNext();return h.push(e),ve(h,l.getCompare())}return ge}var v=n.get(e.name),m=t;return v&&(m=m.remove(new zt(e.name,v))),m.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(c.map)(this.indexes_,(function(t){if(t===ge)return t;var r=n.get(e.name);return r?t.remove(new zt(e.name,r)):t})),this.indexSet_)},t}(),ye=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&se(this.priorityNode_),this.children_.isEmpty()&&Object(c.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return le||(le=new t(new te(ne),null,me.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||le},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?le:e},t.prototype.getChild=function(path){var t=Et(path);return null===t?this:this.getImmediateChild(t).getChild(Ct(path))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(c.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new zt(e,n),o=void 0,l=void 0;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(r,this.children_));var h=o.isEmpty()?le:this.priorityNode_;return new t(o,h,l)},t.prototype.updateChild=function(path,t){var e=Et(path);if(null===e)return t;Object(c.assert)(".priority"!==Et(path)||1===St(path),".priority must be the last token in a path");var n=this.getImmediateChild(e).updateChild(Ct(path),t);return this.updateImmediateChild(e,n)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,o=0,c=!0;if(this.forEachChild(fe,(function(l,h){n[l]=h.val(e),r++,c&&t.INTEGER_REGEXP_.test(l)?o=Math.max(o,Number(l)):c=!1})),!e&&c&&o<2*r){var l=[];for(var h in n)l[h]=n[h];return l}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ae(this.getPriority().val())+":"),this.forEachChild(fe,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":T(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var o=r.getPredecessorKey(new zt(t,e));return o?o.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new zt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new zt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,zt.Wrap),o=r.peek();null!=o&&e.compare(o,t)<0;)r.getNext(),o=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,zt.Wrap),o=r.peek();null!=o&&e.compare(o,t)>0;)r.getNext(),o=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_e?-1:0},t.prototype.withIndex=function(e){if(e===Yt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Yt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(fe),r=e.getIterator(fe),o=n.getNext(),c=r.getNext();o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=n.getNext(),c=r.getNext()}return null===o&&null===c}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Yt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),_e=new(function(t){function e(){return t.call(this,new te(ne),ye.EMPTY_NODE,me.Default)||this}return Object(l.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ye.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ye));Object.defineProperties(zt,{MIN:{value:new zt(M,ye.EMPTY_NODE)},MAX:{value:new zt(L,_e)}}),Qt.__EMPTY_NODE=ye.EMPTY_NODE,ue.__childrenNodeConstructor=ye,Kt=_e,function(t){oe=t}(_e);function be(t,e){if(void 0===e&&(e=null),null===t)return ye.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(c.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new ue(t,be(e));if(t instanceof Array){var n=ye.EMPTY_NODE;return H(t,(function(e,r){if(Object(c.contains)(t,e)&&"."!==e.substring(0,1)){var o=be(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}})),n.updatePriority(be(e))}var r=[],o=!1;if(H(t,(function(t,e){if("."!==t.substring(0,1)){var n=be(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new zt(t,n)))}})),0===r.length)return ye.EMPTY_NODE;var l=ve(r,ee,(function(t){return t.name}),ne);if(o){var h=ve(r,fe.getCompare());return new ye(l,be(e),new me({".priority":h},{".priority":fe}))}return new ye(l,be(e),me.Default)}!function(t){ie=t}(be);var we,xe,ke=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(c.assert)(!Rt(e)&&".priority"!==Et(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(l.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(a,b){var t=this.extractChild(a.node),e=this.extractChild(b.node),n=t.compareTo(e);return 0===n?F(a.name,b.name):n},e.prototype.makePost=function(t,e){var n=be(t),r=ye.EMPTY_NODE.updateChild(this.indexPath_,n);return new zt(e,r)},e.prototype.maxPost=function(){var t=ye.EMPTY_NODE.updateChild(this.indexPath_,_e);return new zt(L,t)},e.prototype.toString=function(){return jt(this.indexPath_,0).join("/")},e}($t),Ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.__extends)(e,t),e.prototype.compare=function(a,b){var t=a.node.compareTo(b.node);return 0===t?F(a.name,b.name):t},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return zt.MIN},e.prototype.maxPost=function(){return zt.MAX},e.prototype.makePost=function(t,e){var n=be(t);return new zt(e,n)},e.prototype.toString=function(){return".value"},e}($t),Te=new Ie,Oe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ee=(we=0,xe=[],function(t){var i,e=t===we;we=t;var n=new Array(8);for(i=7;i>=0;i--)n[i]=Oe.charAt(t%64),t=Math.floor(t/64);Object(c.assert)(0===t,"Cannot push at time == 0");var r=n.join("");if(e){for(i=11;i>=0&&63===xe[i];i--)xe[i]=0;xe[i]++}else for(i=0;i<12;i++)xe[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)r+=Oe.charAt(xe[i]);return Object(c.assert)(20===r.length,"nextPushId: Length should be 20."),r}),Se=function(t){if("2147483647"===t)return"-";var e=Q(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return L;var source=n[i],o=Oe.charAt(Oe.indexOf(source)+1);return n[i]=o,n.slice(0,i+1).join("")},Ce=function(t){if("-2147483648"===t)return M;var e=Q(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),i=0;i<n.length;i++)n[i]=t.charAt(i);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Oe.charAt(Oe.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function Ae(t){return{type:"value",snapshotNode:t}}function je(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ne(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Pe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Re=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,source,o){Object(c.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var l=t.getImmediateChild(e);return l.getChild(r).equals(n.getChild(r))&&l.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Ne(e,l)):Object(c.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(je(e,n)):o.trackChildChange(Pe(e,n,l))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(fe,(function(t,r){e.hasChild(t)||n.trackChildChange(Ne(t,r))})),e.isLeafNode()||e.forEachChild(fe,(function(e,r){if(t.hasChild(e)){var o=t.getImmediateChild(e);o.equals(r)||n.trackChildChange(Pe(e,r,o))}else n.trackChildChange(je(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ye.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),De=function(){function t(e){this.indexedFilter_=new Re(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,source,o){return this.matches(new zt(e,n))||(n=ye.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,source,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ye.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ye.EMPTY_NODE);var o=this;return e.forEachChild(fe,(function(t,e){o.matches(new zt(t,e))||(r=r.updateImmediateChild(t,ye.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Me=function(){function t(t){this.rangedFilter_=new De(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,source,o){return this.rangedFilter_.matches(new zt(e,n))||(n=ye.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,source,o):this.fullLimitUpdateChild_(t,e,n,source,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ye.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ye.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var c=0;o.hasNext()&&c<this.limit_;){var l=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),l)<=0:this.index_.compare(l,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(l.name,l.node),c++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ye.EMPTY_NODE);var h=void 0,f=void 0,d=void 0;o=void 0;if(this.reverse_){o=r.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),f=this.rangedFilter_.getStartPost();var v=this.index_.getCompare();d=function(a,b){return v(b,a)}}else o=r.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),f=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();c=0;for(var m=!1;o.hasNext();){l=o.getNext();!m&&d(h,l)<=0&&(m=!0),m&&c<this.limit_&&d(l,f)<=0?c++:r=r.updateImmediateChild(l.name,ye.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,source,r){var o;if(this.reverse_){var l=this.index_.getCompare();o=function(a,b){return l(b,a)}}else o=this.index_.getCompare();var h=t;Object(c.assert)(h.numChildren()===this.limit_,"");var f=new zt(e,n),d=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(f);if(h.hasChild(e)){for(var m=h.getImmediateChild(e),y=source.getChildAfterChild(this.index_,d,this.reverse_);null!=y&&(y.name===e||h.hasChild(y.name));)y=source.getChildAfterChild(this.index_,y,this.reverse_);var _=null==y?1:o(y,f);if(v&&!n.isEmpty()&&_>=0)return null!=r&&r.trackChildChange(Pe(e,n,m)),h.updateImmediateChild(e,n);null!=r&&r.trackChildChange(Ne(e,m));var w=h.updateImmediateChild(e,ye.EMPTY_NODE);return null!=y&&this.rangedFilter_.matches(y)?(null!=r&&r.trackChildChange(je(y.name,y.node)),w.updateImmediateChild(y.name,y.node)):w}return n.isEmpty()?t:v&&o(d,f)>=0?(null!=r&&(r.trackChildChange(Ne(d.name,d.node)),r.trackChildChange(je(e,n))),h.updateImmediateChild(e,n).updateImmediateChild(d.name,ye.EMPTY_NODE)):t},t}(),Le=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fe}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(c.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(c.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:M},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(c.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(c.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:L},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(c.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===fe},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Fe(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ue(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function qe(t,e){var n=t.copy();return n.index_=e,n}function Ve(t){var e,n={};return t.isDefault()||(t.index_===fe?e="$priority":t.index_===Te?e="$value":t.index_===Yt?e="$key":(Object(c.assert)(t.index_ instanceof ke,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(c.stringify)(e),t.startSet_&&(n.startAt=Object(c.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(c.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(c.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(c.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Be(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==fe&&(e.i=t.index_.toString()),e}var Ke=function(t){function e(e,n,r,o){var c=t.call(this)||this;return c.repoInfo_=e,c.onDataUpdate_=n,c.authTokenProvider_=r,c.appCheckTokenProvider_=o,c.log_=j("p:rest:"),c.listens_={},c}return Object(l.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(c.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var l=this,h=t._path.toString();this.log_("Listen called for "+h+" "+t._queryIdentifier);var f=e.getListenId_(t,r),d={};this.listens_[f]=d;var v=Ve(t._queryParams);this.restRequest_(h+".json",v,(function(t,e){var data=e;(404===t&&(data=null,t=null),null===t&&l.onDataUpdate_(h,data,!1,r),Object(c.safeGet)(l.listens_,f)===d)&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ve(t._queryParams),r=t._path.toString(),o=new c.Deferred;return this.restRequest_(r+".json",n,(function(t,n){var data=n;404===t&&(data=null,t=null),null===t?(e.onDataUpdate_(r,data,!1,null),o.resolve(data)):o.reject(new Error(data))})),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(o){var h=Object(l.__read)(o,2),f=h[0],d=h[1];f&&f.accessToken&&(e.auth=f.accessToken),d&&d.token&&(e.ac=d.token);var v=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(c.querystring)(e);r.log_("Sending REST request for "+v);var m=new XMLHttpRequest;m.onreadystatechange=function(){if(n&&4===m.readyState){r.log_("REST Response for "+v+" received. status:",m.status,"response:",m.responseText);var t=null;if(m.status>=200&&m.status<300){try{t=Object(c.jsonEval)(m.responseText)}catch(t){R("Failed to parse JSON response for "+v+": "+m.responseText)}n(null,t)}else 401!==m.status&&404!==m.status&&R("Got unsuccessful REST response for "+v+" Status: "+m.status),n(m.status);n=null}},m.open("GET",v,!0),m.send()}))},e}(xt),He=function(){function t(){this.rootNode_=ye.EMPTY_NODE}return t.prototype.getNode=function(path){return this.rootNode_.getChild(path)},t.prototype.updateSnapshot=function(path,t){this.rootNode_=this.rootNode_.updateChild(path,t)},t}();function Ge(){return{value:null,children:new Map}}function We(t,path,data){if(Rt(path))t.value=data,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(path,data);else{var e=Et(path);t.children.has(e)||t.children.set(e,Ge()),We(t.children.get(e),path=Ct(path),data)}}function ze(t,path){if(Rt(path))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var e=t.value;return t.value=null,e.forEachChild(fe,(function(e,n){We(t,new Tt(e),n)})),ze(t,path)}if(t.children.size>0){var n=Et(path);if(path=Ct(path),t.children.has(n))ze(t.children.get(n),path)&&t.children.delete(n);return 0===t.children.size}return!0}function $e(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){$e(r,new Tt(e.toString()+"/"+t),n)}))}var Qe,Ye=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(l.__assign)({},t);return this.last_&&H(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Xe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ye(t);var n=1e4+2e4*Math.random();X(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;H(e,(function(e,o){o>0&&Object(c.contains)(t.statsToReport_,e)&&(n[e]=o,r=!0)})),r&&this.server_.reportStats(n),X(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();function Je(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Qe||(Qe={}));var Ze,tn=function(){function t(path,t,e){this.path=path,this.affectedTree=t,this.revert=e,this.type=Qe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Rt(this.path)){if(null!=this.affectedTree.value)return Object(c.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Tt(e));return new t(Ot(),n,this.revert)}return Object(c.assert)(Et(this.path)===e,"operationForChild called for unrelated child."),new t(Ct(this.path),this.affectedTree,this.revert)},t}(),en=function(){function t(source,path){this.source=source,this.path=path,this.type=Qe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Rt(this.path)?new t(this.source,Ot()):new t(this.source,Ct(this.path))},t}(),nn=function(){function t(source,path,t){this.source=source,this.path=path,this.snap=t,this.type=Qe.OVERWRITE}return t.prototype.operationForChild=function(e){return Rt(this.path)?new t(this.source,Ot(),this.snap.getImmediateChild(e)):new t(this.source,Ct(this.path),this.snap)},t}(),rn=function(){function t(source,path,t){this.source=source,this.path=path,this.children=t,this.type=Qe.MERGE}return t.prototype.operationForChild=function(e){if(Rt(this.path)){var n=this.children.subtree(new Tt(e));return n.isEmpty()?null:n.value?new nn(this.source,Ot(),n.value):new t(this.source,Ot(),n)}return Object(c.assert)(Et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ct(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),on=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(path){if(Rt(path))return this.isFullyInitialized()&&!this.filtered_;var t=Et(path);return this.isCompleteForChild(t)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),an=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function sn(t,e,n,r,o,l){var h=r.filter((function(t){return t.type===n}));h.sort((function(a,b){return function(t,a,b){if(null==a.childName||null==b.childName)throw Object(c.assertionError)("Should only compare child_ events.");var e=new zt(a.childName,a.snapshotNode),n=new zt(b.childName,b.snapshotNode);return t.index_.compare(e,n)}(t,a,b)})),h.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,l);o.forEach((function(o){o.respondsTo(n.type)&&e.push(o.createEvent(r,t.query_))}))}))}function un(t,e){return{eventCache:t,serverCache:e}}function cn(t,e,n,r){return un(new on(e,n,r),t.serverCache)}function ln(t,e,n,r){return un(t.eventCache,new on(e,n,r))}function hn(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function fn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var dn=function(){function t(t,e){void 0===e&&(Ze||(Ze=new te(U)),e=Ze),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return H(e,(function(t,e){n=n.set(new Tt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ot(),value:this.value};if(Rt(t))return null;var n=Et(t),r=this.children.get(n);if(null!==r){var o=r.findRootMostMatchingPathAndValue(Ct(t),e);return null!=o?{path:Pt(new Tt(n),o.path),value:o.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(Rt(e))return this;var n=Et(e),r=this.children.get(n);return null!==r?r.subtree(Ct(e)):new t(null)},t.prototype.set=function(e,n){if(Rt(e))return new t(n,this.children);var r=Et(e),o=(this.children.get(r)||new t(null)).set(Ct(e),n),c=this.children.insert(r,o);return new t(this.value,c)},t.prototype.remove=function(e){if(Rt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=Et(e),r=this.children.get(n);if(r){var o=r.remove(Ct(e)),c=void 0;return c=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&c.isEmpty()?new t(null):new t(this.value,c)}return this},t.prototype.get=function(t){if(Rt(t))return this.value;var e=Et(t),n=this.children.get(e);return n?n.get(Ct(t)):null},t.prototype.setTree=function(e,n){if(Rt(e))return n;var r=Et(e),o=(this.children.get(r)||new t(null)).setTree(Ct(e),n),c=void 0;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,c)},t.prototype.fold=function(t){return this.fold_(Ot(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,o){n[r]=o.fold_(Pt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(path,t){return this.findOnPath_(path,Ot(),t)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Rt(t))return null;var o=Et(t),c=this.children.get(o);return c?c.findOnPath_(Ct(t),Pt(e,o),n):null},t.prototype.foreachOnPath=function(path,t){return this.foreachOnPath_(path,Ot(),t)},t.prototype.foreachOnPath_=function(e,n,r){if(Rt(e))return this;this.value&&r(n,this.value);var o=Et(e),c=this.children.get(o);return c?c.foreachOnPath_(Ct(e),Pt(n,o),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(Ot(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Pt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),pn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new dn(null))},t}();function vn(t,path,e){if(Rt(path))return new pn(new dn(e));var n=t.writeTree_.findRootMostValueAndPath(path);if(null!=n){var r=n.path,o=n.value,c=Dt(r,path);return o=o.updateChild(c,e),new pn(t.writeTree_.set(r,o))}var l=new dn(e),h=t.writeTree_.setTree(path,l);return new pn(h)}function gn(t,path,e){var n=t;return H(e,(function(t,e){n=vn(n,Pt(path,t),e)})),n}function mn(t,path){if(Rt(path))return pn.empty();var e=t.writeTree_.setTree(path,new dn(null));return new pn(e)}function yn(t,path){return null!=_n(t,path)}function _n(t,path){var e=t.writeTree_.findRootMostValueAndPath(path);return null!=e?t.writeTree_.get(e.path).getChild(Dt(e.path,path)):null}function bn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(fe,(function(t,n){e.push(new zt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new zt(t,n.value))})),e}function wn(t,path){if(Rt(path))return t;var e=_n(t,path);return new pn(null!=e?new dn(e):t.writeTree_.subtree(path))}function xn(t){return t.writeTree_.isEmpty()}function kn(t,e){return In(Ot(),t.writeTree_,e)}function In(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,o){".priority"===e?(Object(c.assert)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=In(Pt(t,e),o,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Pt(t,".priority"),r)),n}function Tn(t,path){return Fn(path,t)}function On(t,e){var n=t.allWrites.findIndex((function(s){return s.writeId===e}));Object(c.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,l=!1,i=t.allWrites.length-1;o&&i>=0;){var h=t.allWrites[i];h.visible&&(i>=n&&En(h,r.path)?o=!1:Ft(r.path,h.path)&&(l=!0)),i--}if(o){if(l)return function(t){t.visibleWrites=Cn(t.allWrites,Sn,Ot()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=mn(t.visibleWrites,r.path):H(r.children,(function(e){t.visibleWrites=mn(t.visibleWrites,Pt(r.path,e))}));return!0}return!1}function En(t,path){if(t.snap)return Ft(t.path,path);for(var e in t.children)if(t.children.hasOwnProperty(e)&&Ft(Pt(t.path,e),path))return!0;return!1}function Sn(t){return t.visible}function Cn(t,filter,e){for(var n=pn.empty(),i=0;i<t.length;++i){var r=t[i];if(filter(r)){var o=r.path,l=void 0;if(r.snap)Ft(e,o)?n=vn(n,l=Dt(e,o),r.snap):Ft(o,e)&&(l=Dt(o,e),n=vn(n,Ot(),r.snap.getChild(l)));else{if(!r.children)throw Object(c.assertionError)("WriteRecord should have .snap or .children");if(Ft(e,o))n=gn(n,l=Dt(e,o),r.children);else if(Ft(o,e))if(Rt(l=Dt(o,e)))n=gn(n,Ot(),r.children);else{var h=Object(c.safeGet)(r.children,Et(l));if(h){var f=h.getChild(Ct(l));n=vn(n,Ot(),f)}}}}}return n}function An(t,e,n,r,o){if(r||o){var c=wn(t.visibleWrites,e);if(!o&&xn(c))return n;if(o||null!=n||yn(c,Ot())){return kn(Cn(t.allWrites,(function(t){return(t.visible||o)&&(!r||!~r.indexOf(t.writeId))&&(Ft(t.path,e)||Ft(e,t.path))}),e),n||ye.EMPTY_NODE)}return null}var l=_n(t.visibleWrites,e);if(null!=l)return l;var h=wn(t.visibleWrites,e);return xn(h)?n:null!=n||yn(h,Ot())?kn(h,n||ye.EMPTY_NODE):null}function jn(t,e,n,r){return An(t.writeTree,t.treePath,e,n,r)}function Nn(t,e){return function(t,e,n){var r=ye.EMPTY_NODE,o=_n(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(fe,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var c=wn(t.visibleWrites,e);return n.forEachChild(fe,(function(t,e){var n=kn(wn(c,new Tt(t)),e);r=r.updateImmediateChild(t,n)})),bn(c).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return bn(wn(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Pn(t,path,e,n){return function(t,e,n,r,o){Object(c.assert)(r||o,"Either existingEventSnap or existingServerSnap must exist");var path=Pt(e,n);if(yn(t.visibleWrites,path))return null;var l=wn(t.visibleWrites,path);return xn(l)?o.getChild(n):kn(l,o.getChild(n))}(t.writeTree,t.treePath,path,e,n)}function Rn(t,path){return function(t,path){return _n(t.visibleWrites,path)}(t.writeTree,Pt(t.treePath,path))}function Dn(t,e,n,r,o,c){return function(t,e,n,r,o,c,l){var h,f=wn(t.visibleWrites,e),d=_n(f,Ot());if(null!=d)h=d;else{if(null==n)return[];h=kn(f,n)}if((h=h.withIndex(l)).isEmpty()||h.isLeafNode())return[];for(var v=[],m=l.getCompare(),y=c?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l),_=y.getNext();_&&v.length<o;)0!==m(_,r)&&v.push(_),_=y.getNext();return v}(t.writeTree,t.treePath,e,n,r,o,c)}function Mn(t,e,n){return function(t,e,n,r){var path=Pt(e,n),o=_n(t.visibleWrites,path);return null!=o?o:r.isCompleteForChild(n)?kn(wn(t.visibleWrites,path),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Ln(t,e){return Fn(Pt(t.treePath,e),t.writeTree)}function Fn(path,t){return{treePath:path,writeTree:t}}var Un=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(c.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(c.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,Pe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,Ne(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,je(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(c.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Pe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),qn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Vn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new on(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fn(this.viewCache_),o=Dn(this.writes_,r,e,1,n,t);return 0===o.length?null:o[0]},t}();function Bn(t,e,n,r,o){var l,h,f=new Un;if(n.type===Qe.OVERWRITE){var d=n;d.source.fromUser?l=Gn(t,e,d.path,d.snap,r,o,f):(Object(c.assert)(d.source.fromServer,"Unknown source."),h=d.source.tagged||e.serverCache.isFiltered()&&!Rt(d.path),l=Hn(t,e,d.path,d.snap,r,o,h,f))}else if(n.type===Qe.MERGE){var v=n;v.source.fromUser?l=function(t,e,path,n,r,o,c){var l=e;return n.foreach((function(n,h){var f=Pt(path,n);Wn(e,Et(f))&&(l=Gn(t,l,f,h,r,o,c))})),n.foreach((function(n,h){var f=Pt(path,n);Wn(e,Et(f))||(l=Gn(t,l,f,h,r,o,c))})),l}(t,e,v.path,v.children,r,o,f):(Object(c.assert)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=$n(t,e,v.path,v.children,r,o,h,f))}else if(n.type===Qe.ACK_USER_WRITE){var m=n;l=m.revert?function(t,e,path,n,r,o){var l;if(null!=Rn(n,path))return e;var source=new Vn(n,e,r),h=e.eventCache.getNode(),f=void 0;if(Rt(path)||".priority"===Et(path)){var d=void 0;if(e.serverCache.isFullyInitialized())d=jn(n,fn(e));else{var v=e.serverCache.getNode();Object(c.assert)(v instanceof ye,"serverChildren would be complete if leaf node"),d=Nn(n,v)}f=t.filter.updateFullNode(h,d,o)}else{var m=Et(path),y=Mn(n,m,e.serverCache);null==y&&e.serverCache.isCompleteForChild(m)&&(y=h.getImmediateChild(m)),(f=null!=y?t.filter.updateChild(h,m,y,Ct(path),source,o):e.eventCache.getNode().hasChild(m)?t.filter.updateChild(h,m,ye.EMPTY_NODE,Ct(path),source,o):h).isEmpty()&&e.serverCache.isFullyInitialized()&&(l=jn(n,fn(e))).isLeafNode()&&(f=t.filter.updateFullNode(f,l,o))}return l=e.serverCache.isFullyInitialized()||null!=Rn(n,Ot()),cn(e,f,l,t.filter.filtersNodes())}(t,e,m.path,r,o,f):function(t,e,n,r,o,c,l){if(null!=Rn(o,n))return e;var h=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(Rt(n)&&f.isFullyInitialized()||f.isCompleteForPath(n))return Hn(t,e,n,f.getNode().getChild(n),o,c,h,l);if(Rt(n)){var d=new dn(null);return f.getNode().forEachChild(Yt,(function(t,e){d=d.set(new Tt(t),e)})),$n(t,e,n,d,o,c,h,l)}return e}var v=new dn(null);return r.foreach((function(t,e){var r=Pt(n,t);f.isCompleteForPath(r)&&(v=v.set(t,f.getNode().getChild(r)))})),$n(t,e,n,v,o,c,h,l)}(t,e,m.path,m.affectedTree,r,o,f)}else{if(n.type!==Qe.LISTEN_COMPLETE)throw Object(c.assertionError)("Unknown operation type: "+n.type);l=function(t,e,path,n,r){var o=e.serverCache,c=ln(e,o.getNode(),o.isFullyInitialized()||Rt(path),o.isFiltered());return Kn(t,c,path,n,qn,r)}(t,e,n.path,r,f)}var y=f.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var o=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=hn(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&n.push(Ae(hn(e)))}}(e,l,y),{viewCache:l,changes:y}}function Kn(t,e,n,r,source,o){var l=e.eventCache;if(null!=Rn(r,n))return e;var h=void 0,f=void 0;if(Rt(n))if(Object(c.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var d=fn(e),v=Nn(r,d instanceof ye?d:ye.EMPTY_NODE);h=t.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{var m=jn(r,fn(e));h=t.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{var y=Et(n);if(".priority"===y){Object(c.assert)(1===St(n),"Can't have a priority with additional path components");var _=l.getNode(),w=Pn(r,n,_,f=e.serverCache.getNode());h=null!=w?t.filter.updatePriority(_,w):l.getNode()}else{var x=Ct(n),k=void 0;if(l.isCompleteForChild(y)){f=e.serverCache.getNode();var I=Pn(r,n,l.getNode(),f);k=null!=I?l.getNode().getImmediateChild(y).updateChild(x,I):l.getNode().getImmediateChild(y)}else k=Mn(r,y,e.serverCache);h=null!=k?t.filter.updateChild(l.getNode(),y,k,x,source,o):l.getNode()}}return cn(e,h,l.isFullyInitialized()||Rt(n),t.filter.filtersNodes())}function Hn(t,e,n,r,o,c,l,h){var f,d=e.serverCache,v=l?t.filter:t.filter.getIndexedFilter();if(Rt(n))f=v.updateFullNode(d.getNode(),r,null);else if(v.filtersNodes()&&!d.isFiltered()){var m=d.getNode().updateChild(n,r);f=v.updateFullNode(d.getNode(),m,null)}else{var y=Et(n);if(!d.isCompleteForPath(n)&&St(n)>1)return e;var _=Ct(n),w=d.getNode().getImmediateChild(y).updateChild(_,r);f=".priority"===y?v.updatePriority(d.getNode(),w):v.updateChild(d.getNode(),y,w,_,qn,null)}var x=ln(e,f,d.isFullyInitialized()||Rt(n),v.filtersNodes());return Kn(t,x,n,o,new Vn(o,x,c),h)}function Gn(t,e,n,r,o,c,l){var h,f,d=e.eventCache,source=new Vn(o,e,c);if(Rt(n))f=t.filter.updateFullNode(e.eventCache.getNode(),r,l),h=cn(e,f,!0,t.filter.filtersNodes());else{var v=Et(n);if(".priority"===v)f=t.filter.updatePriority(e.eventCache.getNode(),r),h=cn(e,f,d.isFullyInitialized(),d.isFiltered());else{var m=Ct(n),y=d.getNode().getImmediateChild(v),_=void 0;if(Rt(m))_=r;else{var w=source.getCompleteChild(v);_=null!=w?".priority"===At(m)&&w.getChild(Nt(m)).isEmpty()?w:w.updateChild(m,r):ye.EMPTY_NODE}if(y.equals(_))h=e;else h=cn(e,t.filter.updateChild(d.getNode(),v,_,m,source,l),d.isFullyInitialized(),t.filter.filtersNodes())}}return h}function Wn(t,e){return t.eventCache.isCompleteForChild(e)}function zn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function $n(t,e,path,n,r,o,c,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var h,f=e;h=Rt(path)?n:new dn(null).setTree(path,n);var d=e.serverCache.getNode();return h.children.inorderTraversal((function(n,h){if(d.hasChild(n)){var v=zn(0,e.serverCache.getNode().getImmediateChild(n),h);f=Hn(t,f,new Tt(n),v,r,o,c,l)}})),h.children.inorderTraversal((function(n,h){var v=!e.serverCache.isCompleteForChild(n)&&void 0===h.value;if(!d.hasChild(n)&&!v){var m=zn(0,e.serverCache.getNode().getImmediateChild(n),h);f=Hn(t,f,new Tt(n),m,r,o,c,l)}})),f}var Qn,Yn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,o=new Re(r.getIndex()),filter=(n=r).loadsAllData()?new Re(n.getIndex()):n.hasLimit()?new Me(n):new De(n);this.processor_=function(filter){return{filter:filter}}(filter);var c=e.serverCache,l=e.eventCache,h=o.updateFullNode(ye.EMPTY_NODE,c.getNode(),null),f=filter.updateFullNode(ye.EMPTY_NODE,l.getNode(),null),d=new on(h,c.isFullyInitialized(),o.filtersNodes()),v=new on(f,l.isFullyInitialized(),filter.filtersNodes());this.viewCache_=un(v,d),this.eventGenerator_=new an(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Xn(view,path){var t=fn(view.viewCache_);return t&&(view.query._queryParams.loadsAllData()||!Rt(path)&&!t.getImmediateChild(Et(path)).isEmpty())?t.getChild(path):null}function Jn(view){return 0===view.eventRegistrations_.length}function Zn(view,t,e){var n=[];if(e){Object(c.assert)(null==t,"A cancel should cancel all event registrations.");var r=view.query._path;view.eventRegistrations_.forEach((function(t){var o=t.createCancelEvent(e,r);o&&n.push(o)}))}if(t){for(var o=[],i=0;i<view.eventRegistrations_.length;++i){var l=view.eventRegistrations_[i];if(l.matches(t)){if(t.hasAnyCallback()){o=o.concat(view.eventRegistrations_.slice(i+1));break}}else o.push(l)}view.eventRegistrations_=o}else view.eventRegistrations_=[];return n}function er(view,t,e,n){t.type===Qe.MERGE&&null!==t.source.queryId&&(Object(c.assert)(fn(view.viewCache_),"We should always have a full cache before handling merges"),Object(c.assert)(hn(view.viewCache_),"Missing event cache, even though we have a server cache"));var r,o,l=view.viewCache_,h=Bn(view.processor_,l,t,e,n);return r=view.processor_,o=h.viewCache,Object(c.assert)(o.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),Object(c.assert)(o.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed"),Object(c.assert)(h.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),view.viewCache_=h.viewCache,nr(view,h.changes,h.viewCache.eventCache.getNode(),null)}function nr(view,t,e,n){var r=n?[n]:view.eventRegistrations_;return function(t,e,n,r){var o=[],c=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&c.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),sn(t,o,"child_removed",e,r,n),sn(t,o,"child_added",e,r,n),sn(t,o,"child_moved",c,r,n),sn(t,o,"child_changed",e,r,n),sn(t,o,"value",e,r,n),o}(view.eventGenerator_,t,e,r)}var rr,ir=function(){this.views=new Map};function or(t,e,n,r){var o,h,f=e.source.queryId;if(null!==f){var view=t.views.get(f);return Object(c.assert)(null!=view,"SyncTree gave us an op for an invalid query."),er(view,e,n,r)}var d=[];try{for(var v=Object(l.__values)(t.views.values()),m=v.next();!m.done;m=v.next()){view=m.value;d=d.concat(er(view,e,n,r))}}catch(t){o={error:t}}finally{try{m&&!m.done&&(h=v.return)&&h.call(v)}finally{if(o)throw o.error}}return d}function ar(t,e,n,r,o){var c=e._queryIdentifier,view=t.views.get(c);if(!view){var l=jn(n,o?r:null),h=!1;l?h=!0:r instanceof ye?(l=Nn(n,r),h=!1):(l=ye.EMPTY_NODE,h=!1);var f=un(new on(l,h,!1),new on(r,o,!1));return new Yn(e,f)}return view}function sr(t,e,n,r,o,c){var view=ar(t,e,r,o,c);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,view),function(view,t){view.eventRegistrations_.push(t)}(view,n),function(view,t){var e=view.viewCache_.eventCache,n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(fe,(function(t,e){n.push(je(t,e))})),e.isFullyInitialized()&&n.push(Ae(e.getNode())),nr(view,n,e.getNode(),t)}(view,n)}function ur(t,e,n,r){var o,h,f=e._queryIdentifier,d=[],v=[],m=pr(t);if("default"===f)try{for(var y=Object(l.__values)(t.views.entries()),_=y.next();!_.done;_=y.next()){var w=Object(l.__read)(_.value,2),x=w[0],view=w[1];v=v.concat(Zn(view,n,r)),Jn(view)&&(t.views.delete(x),view.query._queryParams.loadsAllData()||d.push(view.query))}}catch(t){o={error:t}}finally{try{_&&!_.done&&(h=y.return)&&h.call(y)}finally{if(o)throw o.error}}else(view=t.views.get(f))&&(v=v.concat(Zn(view,n,r)),Jn(view)&&(t.views.delete(f),view.query._queryParams.loadsAllData()||d.push(view.query)));return m&&!pr(t)&&d.push(new(Object(c.assert)(Qn,"Reference.ts has not been loaded"),Qn)(e._repo,e._path)),{removed:d,events:v}}function cr(t){var e,n,r=[];try{for(var o=Object(l.__values)(t.views.values()),c=o.next();!c.done;c=o.next()){var view=c.value;view.query._queryParams.loadsAllData()||r.push(view)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function lr(t,path){var e,n,r=null;try{for(var o=Object(l.__values)(t.views.values()),c=o.next();!c.done;c=o.next()){var view=c.value;r=r||Xn(view,path)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function fr(t,e){if(e._queryParams.loadsAllData())return vr(t);var n=e._queryIdentifier;return t.views.get(n)}function dr(t,e){return null!=fr(t,e)}function pr(t){return null!=vr(t)}function vr(t){var e,n;try{for(var r=Object(l.__values)(t.views.values()),o=r.next();!o.done;o=r.next()){var view=o.value;if(view.query._queryParams.loadsAllData())return view}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var gr=1,mr=function(t){this.listenProvider_=t,this.syncPointTree_=new dn(null),this.pendingWriteTree_={visibleWrites:pn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function yr(t,path,e,n,r){return function(t,path,e,n,r){Object(c.assert)(n>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),t.allWrites.push({path:path,snap:e,writeId:n,visible:r}),r&&(t.visibleWrites=vn(t.visibleWrites,path,e)),t.lastWriteId=n}(t.pendingWriteTree_,path,e,n,r),r?Er(t,new nn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},path,e)):[]}function _r(t,path,e,n){!function(t,path,e,n){Object(c.assert)(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:path,children:e,writeId:n,visible:!0}),t.visibleWrites=gn(t.visibleWrites,path,e),t.lastWriteId=n}(t.pendingWriteTree_,path,e,n);var r=dn.fromObject(e);return Er(t,new rn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},path,r))}function wr(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var i=0;i<t.allWrites.length;i++){var n=t.allWrites[i];if(n.writeId===e)return n}return null}(t.pendingWriteTree_,e);if(On(t.pendingWriteTree_,e)){var o=new dn(null);return null!=r.snap?o=o.set(Ot(),!0):H(r.children,(function(t){o=o.set(new Tt(t),!0)})),Er(t,new tn(r.path,o,n))}return[]}function xr(t,path,e){return Er(t,new nn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path,e))}function kr(t,e,n,r){var path=e._path,o=t.syncPointTree_.get(path),c=[];if(o&&("default"===e._queryIdentifier||dr(o,e))){var l=ur(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(path));var h=l.removed;c=l.events;var f=-1!==h.findIndex((function(t){return t._queryParams.loadsAllData()})),d=t.syncPointTree_.findOnPath(path,(function(t,e){return pr(e)}));if(f&&!d){var v=t.syncPointTree_.subtree(path);if(!v.isEmpty())for(var m=function(t){return t.fold((function(t,e,n){if(e&&pr(e))return[vr(e)];var r=[];return e&&(r=cr(e)),H(n,(function(t,e){r=r.concat(e)})),r}))}(v),i=0;i<m.length;++i){var view=m[i],y=view.query,_=Ar(t,view);t.listenProvider_.startListening(Mr(y),jr(t,y),_.hashFn,_.onComplete)}}if(!d&&h.length>0&&!r)if(f){t.listenProvider_.stopListening(Mr(e),null)}else h.forEach((function(e){var n=t.queryToTagMap.get(Nr(e));t.listenProvider_.stopListening(Mr(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var o=Nr(r),c=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(c)}}}(t,h)}return c}function Ir(t,e,n){var path=e._path,r=null,o=!1;t.syncPointTree_.foreachOnPath(path,(function(t,e){var n=Dt(t,path);r=r||lr(e,n),o=o||pr(e)}));var l,h=t.syncPointTree_.get(path);(h?(o=o||pr(h),r=r||lr(h,Ot())):(h=new ir,t.syncPointTree_=t.syncPointTree_.set(path,h)),null!=r)?l=!0:(l=!1,r=ye.EMPTY_NODE,t.syncPointTree_.subtree(path).foreachChild((function(t,e){var n=lr(e,Ot());n&&(r=r.updateImmediateChild(t,n))})));var f=dr(h,e);if(!f&&!e._queryParams.loadsAllData()){var d=Nr(e);Object(c.assert)(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");var v=gr++;t.queryToTagMap.set(d,v),t.tagToQueryMap.set(v,d)}var m=sr(h,e,n,Tn(t.pendingWriteTree_,path),r,l);if(!f&&!o){var view=fr(h,e);m=m.concat(function(t,e,view){var path=e._path,n=jr(t,e),r=Ar(t,view),o=t.listenProvider_.startListening(Mr(e),n,r.hashFn,r.onComplete),l=t.syncPointTree_.subtree(path);if(n)Object(c.assert)(!pr(l.value),"If we're adding a query, it shouldn't be shadowed");else for(var h=l.fold((function(t,e,n){if(!Rt(t)&&e&&pr(e))return[vr(e).query];var r=[];return e&&(r=r.concat(cr(e).map((function(view){return view.query})))),H(n,(function(t,e){r=r.concat(e)})),r})),i=0;i<h.length;++i){var f=h[i];t.listenProvider_.stopListening(Mr(f),jr(t,f))}return o}(t,e,view))}return m}function Tr(t,path,e){var n=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(path,(function(t,e){var n=lr(e,Dt(t,path));if(n)return n}));return An(n,path,r,e,!0)}function Or(t,e){var path=e._path,n=null;t.syncPointTree_.foreachOnPath(path,(function(t,e){var r=Dt(t,path);n=n||lr(e,r)}));var r=t.syncPointTree_.get(path);r?n=n||lr(r,Ot()):(r=new ir,t.syncPointTree_=t.syncPointTree_.set(path,r));var o=null!=n,c=o?new on(n,!0,!1):null;return function(view){return hn(view.viewCache_)}(ar(r,e,Tn(t.pendingWriteTree_,e._path),o?c.getNode():ye.EMPTY_NODE,o))}function Er(t,e){return Sr(e,t.syncPointTree_,null,Tn(t.pendingWriteTree_,Ot()))}function Sr(t,e,n,r){if(Rt(t.path))return Cr(t,e,n,r);var o=e.get(Ot());null==n&&null!=o&&(n=lr(o,Ot()));var c=[],l=Et(t.path),h=t.operationForChild(l),f=e.children.get(l);if(f&&h){var d=n?n.getImmediateChild(l):null,v=Ln(r,l);c=c.concat(Sr(h,f,d,v))}return o&&(c=c.concat(or(o,t,r,n))),c}function Cr(t,e,n,r){var o=e.get(Ot());null==n&&null!=o&&(n=lr(o,Ot()));var c=[];return e.children.inorderTraversal((function(e,o){var l=n?n.getImmediateChild(e):null,h=Ln(r,e),f=t.operationForChild(e);f&&(c=c.concat(Cr(f,o,l,h)))})),o&&(c=c.concat(or(o,t,r,n))),c}function Ar(t,view){var e=view.query,n=jr(t,e);return{hashFn:function(){var t=function(view){return view.viewCache_.serverCache.getNode()}(view)||ye.EMPTY_NODE;return t.hash()},onComplete:function(r){if("ok"===r)return n?function(t,path,e){var n=Pr(t,e);if(n){var r=Rr(n),o=r.path,c=r.queryId,l=Dt(o,path);return Dr(t,o,new en(Je(c),l))}return[]}(t,e._path,n):function(t,path){return Er(t,new en({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path))}(t,e._path);var o=function(code,t){var e="Unknown Error";"too_big"===code?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===code?e="Client doesn't have permission to access the desired data.":"unavailable"===code&&(e="The service is unavailable");var n=new Error(code+" at "+t._path.toString()+": "+e);return n.code=code.toUpperCase(),n}(r,e);return kr(t,e,null,o)}}}function jr(t,e){var n=Nr(e);return t.queryToTagMap.get(n)}function Nr(t){return t._path.toString()+"$"+t._queryIdentifier}function Pr(t,e){return t.tagToQueryMap.get(e)}function Rr(t){var e=t.indexOf("$");return Object(c.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Tt(t.substr(0,e))}}function Dr(t,e,n){var r=t.syncPointTree_.get(e);return Object(c.assert)(r,"Missing sync point for query tag that we're tracking"),or(r,n,Tn(t.pendingWriteTree_,e),null)}function Mr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(c.assert)(rr,"Reference.ts has not been loaded"),rr)(t._repo,t._path):t}var Lr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Fr=function(){function t(t,path){this.syncTree_=t,this.path_=path}return t.prototype.getImmediateChild=function(e){var n=Pt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Tr(this.syncTree_,this.path_)},t}(),Ur=function(t,e,n){return t&&"object"==typeof t?(Object(c.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?qr(t[".sv"],e,n):"object"==typeof t[".sv"]?Vr(t[".sv"],e):void Object(c.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},qr=function(t,e,n){if("timestamp"===t)return n.timestamp;Object(c.assert)(!1,"Unexpected server value: "+t)},Vr=function(t,e,n){t.hasOwnProperty("increment")||Object(c.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(c.assert)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(c.assert)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var l=o.getValue();return"number"!=typeof l?r:l+r},Br=function(path,t,e,n){return Hr(t,new Fr(e,path),n)},Kr=function(t,e,n){return Hr(t,new Lr(e),n)};function Hr(t,e,n){var r,o=t.getPriority().val(),c=Ur(o,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var l=t,h=Ur(l.getValue(),e,n);return h!==l.getValue()||c!==l.getPriority().val()?new ue(h,be(c)):t}var f=t;return r=f,c!==f.getPriority().val()&&(r=r.updatePriority(new ue(c))),f.forEachChild(fe,(function(t,o){var c=Hr(o,e.getImmediateChild(t),n);c!==o&&(r=r.updateImmediateChild(t,c))})),r}var Gr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Wr(t,e){for(var path=e instanceof Tt?e:new Tt(e),n=t,r=Et(path);null!==r;){var o=Object(c.safeGet)(n.node.children,r)||{children:{},childCount:0};n=new Gr(r,n,o),r=Et(path=Ct(path))}return n}function zr(t){return t.node.value}function $r(t,e){t.node.value=e,Zr(t)}function Qr(t){return t.node.childCount>0}function Yr(t,e){H(t.node.children,(function(n,r){e(new Gr(n,t,r))}))}function Xr(t,e,n,r){n&&!r&&e(t),Yr(t,(function(t){Xr(t,e,!0,r)})),n&&r&&e(t)}function Jr(t){return new Tt(null===t.parent?t.name:Jr(t.parent)+"/"+t.name)}function Zr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===zr(t)&&!Qr(t)}(n),o=Object(c.contains)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Zr(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,Zr(t))}(t.parent,t.name,t)}var ti=/[\[\].#$\/\u0000-\u001F\u007F]/,ei=/[\[\].#$\u0000-\u001F\u007F]/,ni=10485760,ri=function(t){return"string"==typeof t&&0!==t.length&&!ti.test(t)},ii=function(t){return"string"==typeof t&&0!==t.length&&!ei.test(t)},oi=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!D(t)||t&&"object"==typeof t&&Object(c.contains)(t,".sv")},ai=function(t,e,path,n){n&&void 0===e||si(Object(c.errorPrefix)(t,"value"),e,path)},si=function(t,data,e){var path=e instanceof Tt?new Ut(e,t):e;if(void 0===data)throw new Error(t+"contains undefined "+Vt(path));if("function"==typeof data)throw new Error(t+"contains a function "+Vt(path)+" with contents = "+data.toString());if(D(data))throw new Error(t+"contains "+data.toString()+" "+Vt(path));if("string"==typeof data&&data.length>ni/3&&Object(c.stringLength)(data)>ni)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Vt(path)+" ('"+data.substring(0,50)+"...')");if(data&&"object"==typeof data){var n=!1,r=!1;if(H(data,(function(e,o){if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!ri(e)))throw new Error(t+" contains an invalid key ("+e+") "+Vt(path)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var l,h;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(c.stringLength)(e),qt(t)}(path,e),si(t,o,path),h=(l=path).parts_.pop(),l.byteLength_-=Object(c.stringLength)(h),l.parts_.length>0&&(l.byteLength_-=1)})),n&&r)throw new Error(t+' contains ".value" child '+Vt(path)+" in addition to actual children.")}},ui=function(t,data,path,e){if(!e||void 0!==data){var n=Object(c.errorPrefix)(t,"values");if(!data||"object"!=typeof data||Array.isArray(data))throw new Error(n+" must be an object containing the children to replace.");var r=[];H(data,(function(t,e){var o=new Tt(t);if(si(n,e,Pt(path,o)),".priority"===At(o)&&!oi(e))throw new Error(n+"contains an invalid value for '"+o.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(o)})),function(t,e){var i,n;for(i=0;i<e.length;i++)for(var r=jt(n=e[i]),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!ri(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Mt);var c=null;for(i=0;i<e.length;i++){if(n=e[i],null!==c&&Ft(c,n))throw new Error(t+"contains a path "+c.toString()+" that is ancestor of another path "+n.toString());c=n}}(n,r)}},ci=function(t,e,n){if(!n||void 0!==e){if(D(e))throw new Error(Object(c.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!oi(e))throw new Error(Object(c.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},hi=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(c.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},fi=function(t,e,n,r){if(!(r&&void 0===n||ri(n)))throw new Error(Object(c.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},di=function(t,e,n,r){if(!(r&&void 0===n||ii(n)))throw new Error(Object(c.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pi=function(t,path){if(".info"===Et(path))throw new Error(t+" failed = Can't modify data under /.info/")},vi=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ri(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ii(t)}(n))throw new Error(Object(c.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},gi=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(c.errorPrefix)(t,e)+"must be a boolean.")},mi=function(){this.eventLists_=[],this.recursionDepth_=0};function yi(t,e){for(var n=null,i=0;i<e.length;i++){var data=e[i],path=data.getPath();null===n||Lt(path,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:path}),n.events.push(data)}n&&t.eventLists_.push(n)}function _i(t,path,e){yi(t,e),wi(t,(function(t){return Lt(t,path)}))}function bi(t,e,n){yi(t,n),wi(t,(function(t){return Ft(t,e)||Ft(e,t)}))}function wi(t,e){t.recursionDepth_++;for(var n=!0,i=0;i<t.eventLists_.length;i++){var r=t.eventLists_[i];if(r)e(r.path)?(xi(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function xi(t){for(var i=0;i<t.events.length;i++){var e=t.events[i];if(null!==e){t.events[i]=null;var n=e.getEventRunner();E&&A("event: "+e.toString()),Y(n)}}}var ki="repo_interrupt",Ii=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ge(),this.transactionQueueTree_=new Gr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Ti(t,e,n){if(t.stats_=ht(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ke(t.repoInfo_,(function(e,data,n,r){Si(t,e,data,n,r)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Ci(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(c.stringify)(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Wt(t.repoInfo_,e,(function(e,data,n,r){Si(t,e,data,n,r)}),(function(e){Ci(t,e)}),(function(e){!function(t,e){H(e,(function(e,n){Ai(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o,l;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,o=function(){return new Xe(t.stats_,t.server_)},l=r.toString(),lt[l]||(lt[l]=o()),lt[l]),t.infoData_=new He,t.infoSyncTree_=new mr({startListening:function(e,n,r,o){var c=[],l=t.infoData_.getNode(e._path);return l.isEmpty()||(c=xr(t.infoSyncTree_,e._path,l),setTimeout((function(){o("ok")}),0)),c},stopListening:function(){}}),Ai(t,"connected",!1),t.serverSyncTree_=new mr({startListening:function(e,n,r,o){return t.server_.listen(e,r,n,(function(n,data){var r=o(n,data);bi(t.eventQueue_,e._path,r)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function Oi(t){var e=t.infoData_.getNode(new Tt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Ei(t){return(e=(e={timestamp:Oi(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Si(t,e,data,n,r){t.dataUpdateCount++;var path=new Tt(e);data=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,data):data;var o=[];if(r)if(n){var l=Object(c.map)(data,(function(t){return be(t)}));o=function(t,path,e,n){var r=Pr(t,n);if(r){var o=Rr(r),c=o.path,l=o.queryId,h=Dt(c,path),f=dn.fromObject(e);return Dr(t,c,new rn(Je(l),h,f))}return[]}(t.serverSyncTree_,path,l,r)}else{var h=be(data);o=function(t,path,e,n){var r=Pr(t,n);if(null!=r){var o=Rr(r),c=o.path,l=o.queryId,h=Dt(c,path);return Dr(t,c,new nn(Je(l),h,e))}return[]}(t.serverSyncTree_,path,h,r)}else if(n){var f=Object(c.map)(data,(function(t){return be(t)}));o=function(t,path,e){var n=dn.fromObject(e);return Er(t,new rn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path,n))}(t.serverSyncTree_,path,f)}else{var d=be(data);o=xr(t.serverSyncTree_,path,d)}var v=path;o.length>0&&(v=Vi(t,path)),bi(t.eventQueue_,v,o)}function Ci(t,e){Ai(t,"connected",e),!1===e&&function(t){Li(t,"onDisconnectEvents");var e=Ei(t),n=Ge();$e(t.onDisconnect_,Ot(),(function(path,r){var o=Br(path,r,t.serverSyncTree_,e);We(n,path,o)}));var r=[];$e(n,Ot(),(function(path,e){r=r.concat(xr(t.serverSyncTree_,path,e));var n=Wi(t,path);Vi(t,n)})),t.onDisconnect_=Ge(),bi(t.eventQueue_,Ot(),r)}(t)}function Ai(t,e,n){var path=new Tt("/.info/"+e),r=be(n);t.infoData_.updateSnapshot(path,r);var o=xr(t.infoSyncTree_,path,r);bi(t.eventQueue_,path,o)}function ji(t){return t.nextWriteId_++}function Ni(t,path,e,n,r){Li(t,"set",{path:path.toString(),value:e,priority:n});var o=Ei(t),c=be(e,n),l=Tr(t.serverSyncTree_,path),h=Kr(c,l,o),f=ji(t),d=yr(t.serverSyncTree_,path,h,f,!0);yi(t.eventQueue_,d),t.server_.put(path.toString(),c.val(!0),(function(e,n){var o="ok"===e;o||R("set at "+path+" failed: "+e);var c=wr(t.serverSyncTree_,f,!o);bi(t.eventQueue_,path,c),Fi(t,r,e,n)}));var v=Wi(t,path);Vi(t,v),bi(t.eventQueue_,v,[])}function Pi(t,path,e){t.server_.onDisconnectCancel(path.toString(),(function(n,r){"ok"===n&&ze(t.onDisconnect_,path),Fi(t,e,n,r)}))}function Ri(t,path,e,n){var r=be(e);t.server_.onDisconnectPut(path.toString(),r.val(!0),(function(e,o){"ok"===e&&We(t.onDisconnect_,path,r),Fi(t,n,e,o)}))}function Di(t,e,n){var r;r=".info"===Et(e._path)?kr(t.infoSyncTree_,e,n):kr(t.serverSyncTree_,e,n),_i(t.eventQueue_,e._path,r)}function Mi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ki)}function Li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),A.apply(void 0,Object(l.__spreadArray)([r],Object(l.__read)(e)))}function Fi(t,e,n,r){e&&Y((function(){if("ok"===n)e(null);else{var code=(n||"error").toUpperCase(),t=code;r&&(t+=": "+r);var o=new Error(t);o.code=code,e(o)}}))}function Ui(t,path,e){return Tr(t.serverSyncTree_,path,e)||ye.EMPTY_NODE}function qi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Gi(t,e),zr(e)){var n=Ki(t,e);Object(c.assert)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,path,e){for(var n=e.map((function(t){return t.currentWriteId})),r=Ui(t,path,n),o=r,l=r.hash(),i=0;i<e.length;i++){var h=e[i];Object(c.assert)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;var f=Dt(path,h.path);o=o.updateChild(f,h.currentOutputSnapshotRaw)}var d=o.val(!0),v=path;t.server_.put(v.toString(),d,(function(n){Li(t,"transaction put response",{path:v.toString(),status:n});var r=[];if("ok"===n){for(var o=[],c=function(i){e[i].status=2,r=r.concat(wr(t.serverSyncTree_,e[i].currentWriteId)),e[i].onComplete&&o.push((function(){return e[i].onComplete(null,!0,e[i].currentOutputSnapshotResolved)})),e[i].unwatcher()},i=0;i<e.length;i++)c(i);Gi(t,Wr(t.transactionQueueTree_,path)),qi(t,t.transactionQueueTree_),bi(t.eventQueue_,path,r);for(i=0;i<o.length;i++)Y(o[i])}else{if("datastale"===n)for(i=0;i<e.length;i++)3===e[i].status?e[i].status=4:e[i].status=0;else{R("transaction at "+v.toString()+" failed: "+n);for(i=0;i<e.length;i++)e[i].status=4,e[i].abortReason=n}Vi(t,path)}}),l)}(t,Jr(e),n)}else Qr(e)&&Yr(e,(function(e){qi(t,e)}))}function Vi(t,e){var n=Bi(t,e),path=Jr(n);return function(t,e,path){if(0===e.length)return;for(var n=[],r=[],o=e.filter((function(q){return 0===q.status})).map((function(q){return q.currentWriteId})),l=function(i){var l,h,f=e[i],d=Dt(path,f.path),v=!1;if(Object(c.assert)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)v=!0,l=f.abortReason,r=r.concat(wr(t.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)v=!0,l="maxretry",r=r.concat(wr(t.serverSyncTree_,f.currentWriteId,!0));else{var m=Ui(t,f.path,o);f.currentInputSnapshot=m;var y=e[i].update(m.val());if(void 0!==y){si("transaction failed: Data returned ",y,f.path);var _=be(y);"object"==typeof y&&null!=y&&Object(c.contains)(y,".priority")||(_=_.updatePriority(m.getPriority()));var w=f.currentWriteId,x=Ei(t),k=Kr(_,m,x);f.currentOutputSnapshotRaw=_,f.currentOutputSnapshotResolved=k,f.currentWriteId=ji(t),o.splice(o.indexOf(w),1),r=(r=r.concat(yr(t.serverSyncTree_,f.path,k,f.currentWriteId,f.applyLocally))).concat(wr(t.serverSyncTree_,w,!0))}else v=!0,l="nodata",r=r.concat(wr(t.serverSyncTree_,f.currentWriteId,!0))}bi(t.eventQueue_,path,r),r=[],v&&(e[i].status=2,h=e[i].unwatcher,setTimeout(h,Math.floor(0)),e[i].onComplete&&("nodata"===l?n.push((function(){return e[i].onComplete(null,!1,e[i].currentInputSnapshot)})):n.push((function(){return e[i].onComplete(new Error(l),!1,null)}))))},i=0;i<e.length;i++)l(i);Gi(t,t.transactionQueueTree_);for(i=0;i<n.length;i++)Y(n[i]);qi(t,t.transactionQueueTree_)}(t,Ki(t,n),path),path}function Bi(t,path){var e,n=t.transactionQueueTree_;for(e=Et(path);null!==e&&void 0===zr(n);)n=Wr(n,e),e=Et(path=Ct(path));return n}function Ki(t,e){var n=[];return Hi(t,e,n),n.sort((function(a,b){return a.order-b.order})),n}function Hi(t,e,n){var r=zr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Yr(e,(function(e){Hi(t,e,n)}))}function Gi(t,e){var n=zr(e);if(n){for(var r=0,o=0;o<n.length;o++)2!==n[o].status&&(n[r]=n[o],r++);n.length=r,$r(e,n.length>0?n:void 0)}Yr(e,(function(e){Gi(t,e)}))}function Wi(t,path){var e=Jr(Bi(t,path)),n=Wr(t.transactionQueueTree_,path);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(n,(function(e){zi(t,e)})),zi(t,n),Xr(n,(function(e){zi(t,e)})),e}function zi(t,e){var n=zr(e);if(n){for(var r=[],o=[],l=-1,i=0;i<n.length;i++)3===n[i].status||(1===n[i].status?(Object(c.assert)(l===i-1,"All SENT items should be at beginning of queue."),l=i,n[i].status=3,n[i].abortReason="set"):(Object(c.assert)(0===n[i].status,"Unexpected transaction status in abort"),n[i].unwatcher(),o=o.concat(wr(t.serverSyncTree_,n[i].currentWriteId,!0)),n[i].onComplete&&r.push(n[i].onComplete.bind(null,new Error("set"),!1,null))));-1===l?$r(e,void 0):n.length=l+1,bi(t.eventQueue_,Jr(e),o);for(i=0;i<r.length;i++)Y(r[i])}}var $i=function(t,e){var n=Qi(t),r=n.namespace;"firebase.com"===n.domain&&P(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||P("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&R("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var o="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new at(n.host,n.secure,r,e,o,"",r!==n.subdomain),path:new Tt(n.pathString)}},Qi=function(t){var e="",n="",r="",o="",c="",h=!0,f="https",d=443;if("string"==typeof t){var v=t.indexOf("//");v>=0&&(f=t.substring(0,v-1),t=t.substring(v+2));var m=t.indexOf("/");-1===m&&(m=t.length);var y=t.indexOf("?");-1===y&&(y=t.length),e=t.substring(0,Math.min(m,y)),m<y&&(o=function(t){for(var e="",n=t.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}e+="/"+r}return e}(t.substring(m,y)));var _=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(l.__values)(t.split("&")),c=o.next();!c.done;c=o.next()){var h=c.value;if(0!==h.length){var f=h.split("=");2===f.length?r[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):R("Invalid query segment '"+h+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,y)));(v=e.indexOf(":"))>=0?(h="https"===f||"wss"===f,d=parseInt(e.substring(v+1),10)):v=e.length;var w=e.slice(0,v);if("localhost"===w.toLowerCase())n="localhost";else if(w.split(".").length<=2)n=w;else{var x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),n=e.substring(x+1),c=r}"ns"in _&&(c=_.ns)}return{host:e,port:d,domain:n,subdomain:r,secure:h,scheme:f,pathString:o,namespace:c}},Yi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(c.stringify)(this.snapshot.exportVal())},t}(),Xi=function(){function t(t,e,path){this.eventRegistration=t,this.error=e,this.path=path}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ji=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(c.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Zi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new c.Deferred;return Pi(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){pi("OnDisconnect.remove",this._path);var t=new c.Deferred;return Ri(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){pi("OnDisconnect.set",this._path),ai("OnDisconnect.set",t,this._path,!1);var e=new c.Deferred;return Ri(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){pi("OnDisconnect.setWithPriority",this._path),ai("OnDisconnect.setWithPriority",t,this._path,!1),ci("OnDisconnect.setWithPriority",e,!1);var n=new c.Deferred;return function(t,path,e,n,r){var o=be(e,n);t.server_.onDisconnectPut(path.toString(),o.val(!0),(function(e,n){"ok"===e&&We(t.onDisconnect_,path,o),Fi(0,r,e,n)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){pi("OnDisconnect.update",this._path),ui("OnDisconnect.update",t,this._path,!1);var e=new c.Deferred;return function(t,path,e,n){if(Object(c.isEmpty)(e))return A("onDisconnect().update() called with empty data.  Don't do anything."),void Fi(0,n,"ok",void 0);t.server_.onDisconnectMerge(path.toString(),e,(function(r,o){"ok"===r&&H(e,(function(e,n){var r=be(n);We(t.onDisconnect_,Pt(path,e),r)})),Fi(0,n,r,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),to=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return Rt(this._path)?null:At(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new io(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Be(this._queryParams),e=B(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Be(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(c.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Lt(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&r&&o},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(path){for(var t="",i=path.pieceNum_;i<path.pieces_.length;i++)""!==path.pieces_[i]&&(t+="/"+encodeURIComponent(String(path.pieces_[i])));return t||"/"}(this._path)},t}();function eo(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function no(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Yt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==M)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==L)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===fe){if(null!=e&&!oi(e)||null!=n&&!oi(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(c.assert)(t.getIndex()instanceof ke||t.getIndex()===Te,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ro(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var io=function(t){function e(e,path){return t.call(this,e,path,new Le,!1)||this}return Object(l.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Nt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(to),oo=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(path){var e=new Tt(path),n=uo(this.ref,path);return new t(this._node.getChild(e),n,fe)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,o){return e(new t(o,uo(n.ref,r),fe))}))},t.prototype.hasChild=function(path){var t=new Tt(path);return!this._node.getChild(t).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function ao(t,path){return(t=Object(c.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==path?uo(t._root,path):t._root}function so(t,e){(t=Object(c.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=$i(e,t._repo.repoInfo_.nodeAdmin);vi("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||P("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),ao(t,n.path.toString())}function uo(t,path){var e,n,r,o;return null===Et((t=Object(c.getModularInstance)(t))._path)?(e="child",n="path",o=!1,(r=path)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),di(e,n,r,o)):di("child","path",path,!1),new io(t._repo,Pt(t._path,path))}function co(t,e){t=Object(c.getModularInstance)(t),pi("push",t._path),ai("push",e,t._path,!0);var n,r=Oi(t._repo),o=Ee(r),l=uo(t,o),h=uo(t,o);return n=null!=e?ho(h,e).then((function(){return h})):Promise.resolve(h),l.then=n.then.bind(n),l.catch=n.then.bind(n,void 0),l}function lo(t){return pi("remove",t._path),ho(t,null)}function ho(t,e){t=Object(c.getModularInstance)(t),pi("set",t._path),ai("set",e,t._path,!1);var n=new c.Deferred;return Ni(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function fo(t,e){t=Object(c.getModularInstance)(t),pi("setPriority",t._path),ci("setPriority",e,!1);var n=new c.Deferred;return Ni(t._repo,Pt(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function po(t,e,n){if(pi("setWithPriority",t._path),ai("setWithPriority",e,t._path,!1),ci("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new c.Deferred;return Ni(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function vo(t,e){ui("update",e,t._path,!1);var n=new c.Deferred;return function(t,path,e,n){Li(t,"update",{path:path.toString(),value:e});var r=!0,o=Ei(t),c={};if(H(e,(function(e,n){r=!1,c[e]=Br(Pt(path,e),be(n),t.serverSyncTree_,o)})),r)A("update() called with empty data.  Don't do anything."),Fi(0,n,"ok",void 0);else{var l=ji(t),h=_r(t.serverSyncTree_,path,c,l);yi(t.eventQueue_,h),t.server_.merge(path.toString(),e,(function(e,r){var o="ok"===e;o||R("update at "+path+" failed: "+e);var c=wr(t.serverSyncTree_,l,!o),h=c.length>0?Vi(t,path):path;bi(t.eventQueue_,h,c),Fi(0,n,e,r)})),H(e,(function(e){var n=Wi(t,Pt(path,e));Vi(t,n)})),bi(t.eventQueue_,path,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function go(t){return function(t,e){var n=Or(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=be(n).withIndex(e._queryParams.getIndex()),o=xr(t.serverSyncTree_,e._path,r);return _i(t.eventQueue_,e._path,o),Promise.resolve(r)}),(function(n){return Li(t,"get for query "+Object(c.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Object(c.getModularInstance)(t))._repo,t).then((function(e){return new oo(e,new io(t._repo,t._path),t._queryParams.getIndex())}))}var mo=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Yi("value",this,new oo(t.snapshotNode,new io(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,path){return this.callbackContext.hasCancelCallback?new Xi(this,t,path):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),yo=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,path){return this.callbackContext.hasCancelCallback?new Xi(this,t,path):null},t.prototype.createEvent=function(t,e){Object(c.assert)(null!=t.childName,"Child events should have a childName.");var n=uo(new io(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Yi(t.type,this,new oo(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function _o(t,e,n,r,o){var c;if("object"==typeof r&&(c=void 0,o=r),"function"==typeof r&&(c=r),o&&o.onlyOnce){var l=n,h=function(e,n){Di(t._repo,t,d),l(e,n)};h.userCallback=n.userCallback,h.context=n.context,n=h}var f=new Ji(n,c||void 0),d="value"===e?new mo(f):new yo(e,f);return function(t,e,n){var r;r=".info"===Et(e._path)?Ir(t.infoSyncTree_,e,n):Ir(t.serverSyncTree_,e,n),_i(t.eventQueue_,e._path,r)}(t._repo,t,d),function(){return Di(t._repo,t,d)}}function bo(t,e,n,r){return _o(t,"value",e,n,r)}function wo(t,e,n,r){return _o(t,"child_added",e,n,r)}function xo(t,e,n,r){return _o(t,"child_changed",e,n,r)}function ko(t,e,n,r){return _o(t,"child_moved",e,n,r)}function Io(t,e,n,r){return _o(t,"child_removed",e,n,r)}function To(t,e,n){var r=null,o=n?new Ji(n):null;"value"===e?r=new mo(o):e&&(r=new yo(e,o)),Di(t._repo,t,r)}var Oo=function(){},Eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(l.__extends)(e,t),e.prototype._apply=function(t){ai("endAt",this._value,t._path,!0);var e=Ue(t._queryParams,this._value,this._key);if(ro(e),no(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new to(t._repo,t._path,e,t._orderByCalled)},e}(Oo);function So(t,e){return fi("endAt","key",e,!0),new Eo(t,e)}var Co=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(l.__extends)(e,t),e.prototype._apply=function(t){ai("endBefore",this._value,t._path,!1);var e,n,r,o,c=(e=t._queryParams,n=this._value,r=this._key,e.index_===Yt?("string"==typeof n&&(n=Ce(n)),o=Ue(e,n,r)):o=Ue(e,n,null==r?M:Ce(r)),o.endBeforeSet_=!0,o);if(ro(c),no(c),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new to(t._repo,t._path,c,t._orderByCalled)},e}(Oo);function Ao(t,e){return fi("endBefore","key",e,!0),new Co(t,e)}var jo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(l.__extends)(e,t),e.prototype._apply=function(t){ai("startAt",this._value,t._path,!0);var e=Fe(t._queryParams,this._value,this._key);if(ro(e),no(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new to(t._repo,t._path,e,t._orderByCalled)},e}(Oo);function No(t,e){return void 0===t&&(t=null),fi("startAt","key",e,!0),new jo(t,e)}var Po=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(l.__extends)(e,t),e.prototype._apply=function(t){ai("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===Yt?("string"==typeof e&&(e=Se(e)),r=Fe(t,e,n)):r=Fe(t,e,null==n?L:Se(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(ro(e),no(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new to(t._repo,t._path,e,t._orderByCalled)},e}(Oo);function Ro(t,e){return fi("startAfter","key",e,!0),new Po(t,e)}var Do=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(l.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new to(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(Oo);function Mo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Do(t)}var Lo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(l.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new to(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(Oo);function Fo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Lo(t)}var Uo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(l.__extends)(e,t),e.prototype._apply=function(t){eo(t,"orderByChild");var e=new Tt(this._path);if(Rt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ke(e),r=qe(t._queryParams,n);return no(r),new to(t._repo,t._path,r,!0)},e}(Oo);function qo(path){if("$key"===path)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===path)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===path)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return di("orderByChild","path",path,!1),new Uo(path)}var Vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.__extends)(e,t),e.prototype._apply=function(t){eo(t,"orderByKey");var e=qe(t._queryParams,Yt);return no(e),new to(t._repo,t._path,e,!0)},e}(Oo);function Bo(){return new Vo}var Ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.__extends)(e,t),e.prototype._apply=function(t){eo(t,"orderByPriority");var e=qe(t._queryParams,fe);return no(e),new to(t._repo,t._path,e,!0)},e}(Oo);function Ho(){return new Ko}var Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.__extends)(e,t),e.prototype._apply=function(t){eo(t,"orderByValue");var e=qe(t._queryParams,Te);return no(e),new to(t._repo,t._path,e,!0)},e}(Oo);function Wo(){return new Go}var zo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(l.__extends)(e,t),e.prototype._apply=function(t){if(ai("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Eo(this._value,this._key)._apply(new jo(this._value,this._key)._apply(t))},e}(Oo);function $o(t,e){return fi("equalTo","key",e,!0),new zo(t,e)}function Qo(t){for(var e,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var h=Object(c.getModularInstance)(t);try{for(var f=Object(l.__values)(r),d=f.next();!d.done;d=f.next()){var v=d.value;h=v._apply(h)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return h}!function(t){Object(c.assert)(!Qn,"__referenceConstructor has already been defined"),Qn=t}(io),function(t){Object(c.assert)(!rr,"__referenceConstructor has already been defined"),rr=t}(io);var Yo={},Xo=!1;function Jo(e,n,r,o,c){var l=o||e.options.databaseURL;void 0===l&&(e.options.projectId||P("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),A("Using default host for project ",e.options.projectId),l=e.options.projectId+"-default-rtdb.firebaseio.com");var h,f=$i(l,c),d=f.repoInfo,v=void 0;void 0!==t&&(v=t.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(h=!0,l="http://"+v+"?ns="+d.namespace,d=(f=$i(l,c)).repoInfo):h=!f.repoInfo.secure;var m=c&&h?new tt(tt.OWNER):new Z(e.name,e.options,n);vi("Invalid Firebase Database URL",f),Rt(f.path)||P("Database URL must point to the root of a Firebase Database (not including a child path).");var y=function(t,e,n,r){var o=Yo[e.name];o||(o={},Yo[e.name]=o);var c=o[t.toURLString()];c&&P("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return c=new Ii(t,Xo,n,r),o[t.toURLString()]=c,c}(d,e,m,new J(e.name,r));return new Zo(y,e)}var Zo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(Ti(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new io(this._repo,Ot())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=Yo[e])&&n[t.key]===t||P("Database "+e+"("+t.repoInfo_+") has already been deleted."),Mi(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&P("Cannot call "+t+" on a deleted database.")},t}();function ta(t,e,n,r){void 0===r&&(r={}),(t=Object(c.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&P("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,l=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&P('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new tt(tt.OWNER);else if(r.mockUserToken){var h="string"==typeof r.mockUserToken?r.mockUserToken:Object(c.createMockUserToken)(r.mockUserToken,t.app.options.projectId);l=new tt(h)}!function(t,e,n,r){t.repoInfo_=new at(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,l)}function ea(t){(t=Object(c.getModularInstance)(t))._checkNotDeleted("goOffline"),Mi(t._repo)}function na(t){var e;(t=Object(c.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(ki)}var ra={".sv":"timestamp"};var ia=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function oa(t,e,n){var r;if(t=Object(c.getModularInstance)(t),pi("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,l=new c.Deferred,h=bo(t,(function(){}));return function(t,path,e,n,r,o){Li(t,"transaction on "+path);var l={path:path,update:e,onComplete:n,status:null,order:I(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Ui(t,path,void 0);l.currentInputSnapshot=h;var f=l.update(h.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{si("transaction failed: Data returned ",f,l.path),l.status=0;var d=Wr(t.transactionQueueTree_,path),v=zr(d)||[];v.push(l),$r(d,v);var m=void 0;"object"==typeof f&&null!==f&&Object(c.contains)(f,".priority")?(m=Object(c.safeGet)(f,".priority"),Object(c.assert)(oi(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(Tr(t.serverSyncTree_,path)||ye.EMPTY_NODE).getPriority().val();var y=Ei(t),_=be(f,m),w=Kr(_,h,y);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=w,l.currentWriteId=ji(t);var x=yr(t.serverSyncTree_,path,w,l.currentWriteId,l.applyLocally);bi(t.eventQueue_,path,x),qi(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var o=null;e?l.reject(e):(o=new oo(r,new io(t._repo,t._path),fe),l.resolve(new ia(n,o)))}),h,o),l.promise}var aa=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(c.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),Object(c.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(c.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),Object(c.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(c.validateArgCount)("OnDisconnect.set",1,2,arguments.length),Object(c.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(c.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(c.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(c.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,R("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(c.validateCallback)("OnDisconnect.update","onComplete",e,!0);var r=this._delegate.update(t);return e&&r.then((function(){return e(null)}),(function(t){return e(t)})),r},t}(),sa=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(c.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ua=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(c.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(c.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(c.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(c.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(path){return Object(c.validateArgCount)("DataSnapshot.child",0,1,arguments.length),path=String(path),di("DataSnapshot.child","path",path,!1),new t(this._database,this._delegate.child(path))},t.prototype.hasChild=function(path){return Object(c.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),di("DataSnapshot.hasChild","path",path,!1),this._delegate.hasChild(path)},t.prototype.getPriority=function(){return Object(c.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(c.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),Object(c.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(c.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(c.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(c.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ca=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var l,h=this;Object(c.validateArgCount)("Query.on",2,4,arguments.length),Object(c.validateCallback)("Query.on","callback",n,!1);var f=t.getCancelAndContextArgs_("Query.on",r,o),d=function(t,e){n.call(f.context,new ua(h.database,t),e)};d.userCallback=n,d.context=f.context;var v=null===(l=f.cancel)||void 0===l?void 0:l.bind(f.context);switch(e){case"value":return bo(this._delegate,d,v),n;case"child_added":return wo(this._delegate,d,v),n;case"child_removed":return Io(this._delegate,d,v),n;case"child_changed":return xo(this._delegate,d,v),n;case"child_moved":return ko(this._delegate,d,v),n;default:throw new Error(Object(c.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(c.validateArgCount)("Query.off",0,3,arguments.length),hi("Query.off",t,!0),Object(c.validateCallback)("Query.off","callback",e,!0),Object(c.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,To(this._delegate,t,r)}else To(this._delegate,t)},t.prototype.get=function(){var t=this;return go(this._delegate).then((function(e){return new ua(t.database,e)}))},t.prototype.once=function(e,n,r,o){var l=this;Object(c.validateArgCount)("Query.once",1,4,arguments.length),Object(c.validateCallback)("Query.once","callback",n,!0);var h=t.getCancelAndContextArgs_("Query.once",r,o),f=new c.Deferred,d=function(t,e){var r=new ua(l.database,t);n&&n.call(h.context,r,e),f.resolve(r)};d.userCallback=n,d.context=h.context;var v=function(t){h.cancel&&h.cancel.call(h.context,t),f.reject(t)};switch(e){case"value":bo(this._delegate,d,v,{onlyOnce:!0});break;case"child_added":wo(this._delegate,d,v,{onlyOnce:!0});break;case"child_removed":Io(this._delegate,d,v,{onlyOnce:!0});break;case"child_changed":xo(this._delegate,d,v,{onlyOnce:!0});break;case"child_moved":ko(this._delegate,d,v,{onlyOnce:!0});break;default:throw new Error(Object(c.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return f.promise},t.prototype.limitToFirst=function(e){return Object(c.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,Qo(this._delegate,Mo(e)))},t.prototype.limitToLast=function(e){return Object(c.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,Qo(this._delegate,Fo(e)))},t.prototype.orderByChild=function(path){return Object(c.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,Qo(this._delegate,qo(path)))},t.prototype.orderByKey=function(){return Object(c.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,Qo(this._delegate,Bo()))},t.prototype.orderByPriority=function(){return Object(c.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,Qo(this._delegate,Ho()))},t.prototype.orderByValue=function(){return Object(c.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,Qo(this._delegate,Wo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(c.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,Qo(this._delegate,No(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(c.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,Qo(this._delegate,Ro(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(c.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,Qo(this._delegate,So(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(c.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,Qo(this._delegate,Ao(e,n)))},t.prototype.equalTo=function(e,n){return Object(c.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,Qo(this._delegate,$o(e,n)))},t.prototype.toString=function(){return Object(c.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(c.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(c.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(c.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,Object(c.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(c.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new la(this.database,new io(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),la=function(t){function e(e,n){var r=t.call(this,e,new to(n._repo,n._path,new Le,!1))||this;return r.database=e,r._delegate=n,r}return Object(l.__extends)(e,t),e.prototype.getKey=function(){return Object(c.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(c.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,uo(this._delegate,t))},e.prototype.getParent=function(){Object(c.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(c.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(c.validateArgCount)("Reference.set",1,2,arguments.length),Object(c.validateCallback)("Reference.set","onComplete",e,!0);var n=ho(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(c.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,R("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pi("Reference.update",this._delegate._path),Object(c.validateCallback)("Reference.update","onComplete",e,!0);var r=vo(this._delegate,t);return e&&r.then((function(){return e(null)}),(function(t){return e(t)})),r},e.prototype.setWithPriority=function(t,e,n){Object(c.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),Object(c.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=po(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(c.validateArgCount)("Reference.remove",0,1,arguments.length),Object(c.validateCallback)("Reference.remove","onComplete",t,!0);var e=lo(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(c.validateArgCount)("Reference.transaction",1,3,arguments.length),Object(c.validateCallback)("Reference.transaction","transactionUpdate",t,!1),Object(c.validateCallback)("Reference.transaction","onComplete",e,!0),gi("Reference.transaction","applyLocally",n,!0);var o=oa(this._delegate,t,{applyLocally:n}).then((function(t){return new sa(t.committed,new ua(r.database,t.snapshot))}));return e&&o.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),o},e.prototype.setPriority=function(t,e){Object(c.validateArgCount)("Reference.setPriority",1,2,arguments.length),Object(c.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=fo(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(c.validateArgCount)("Reference.push",0,2,arguments.length),Object(c.validateCallback)("Reference.push","onComplete",n,!0);var o=co(this._delegate,t),l=o.then((function(t){return new e(r.database,t)}));n&&l.then((function(){return n(null)}),(function(t){return n(t)}));var h=new e(this.database,o);return h.then=l.then.bind(l),h.catch=l.catch.bind(l,void 0),h},e.prototype.onDisconnect=function(){return pi("Reference.onDisconnect",this._delegate._path),new aa(new Zi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(ca),ha=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),ta(this._delegate,t,e,n)},t.prototype.ref=function(path){if(Object(c.validateArgCount)("database.ref",0,1,arguments.length),path instanceof la){var t=so(this._delegate,path.toString());return new la(this,t)}t=ao(this._delegate,path);return new la(this,t)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(c.validateArgCount)(e,1,1,arguments.length);var n=so(this._delegate,t);return new la(this,n)},t.prototype.goOffline=function(){return Object(c.validateArgCount)("database.goOffline",0,0,arguments.length),ea(this._delegate)},t.prototype.goOnline=function(){return Object(c.validateArgCount)("database.goOnline",0,0,arguments.length),na(this._delegate)},t.ServerValue={TIMESTAMP:ra,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();var fa=Object.freeze({__proto__:null,forceLongPolling:function(){_t.forceDisallow(),gt.forceAllow()},forceWebSockets:function(){gt.forceDisallow()},isWebSocketsAvailable:function(){return _t.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ye(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);H(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,c=t.customAuthImpl,l=t.namespace,h=t.nodeAdmin,f=void 0!==h&&h;d(r);var v=new o.Provider("auth-internal",new o.ComponentContainer("database-standalone"));return v.setComponent(new o.Component("auth-internal",(function(){return c}),"PRIVATE")),{instance:new ha(Jo(e,v,void 0,n,f),e),namespace:l}}}),da=Wt;Wt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Wt.prototype.echo=function(data,t){this.sendRequest("echo",{d:data},t)};var pa=wt,va=at,ga=Object.freeze({__proto__:null,DataConnection:da,RealTimeConnection:pa,hijackHash:function(t){var e=Wt.prototype.put;return Wt.prototype.put=function(n,data,r,o){void 0!==o&&(o=t()),e.call(this,n,data,r,o)},function(){Wt.prototype.put=e}},ConnectionTarget:va,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Xo=t}(t)}}),ma=ha.ServerValue;!function(t){d(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new o.Component("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),c=t.getProvider("app-check-internal");return new ha(Jo(r,o,c,n),r)}),"PUBLIC").setServiceProps({Reference:la,Query:ca,Database:ha,DataSnapshot:ua,enableLogging:C,INTERNAL:fa,ServerValue:ma,TEST_ACCESS:ga}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.11.0"),Object(c.isNodeSdk)()&&(e.exports=n)}(r.default)}).call(this,n(284),n(839)(t))},839:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},840:function(t,e,n){"use strict";var r=n(729),component=n(748),o=n(741),c=n(744),l=n(752);function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f,d=h(r),v=((f={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",f["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",f["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",f["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",f["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",f["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",f["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",f["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",f["recaptcha-error"]="ReCAPTCHA error.",f),m=new c.ErrorFactory("appCheck","AppCheck",v),y=new Map,_={activated:!1,tokenObservers:[]},w={enabled:!1};function x(t){return y.get(t)||_}function k(t,e){y.set(t,e)}function I(){return w}var T="https://content-firebaseappcheck.googleapis.com/v1beta",O=3e4,E=96e4,S=function(){function t(t,e,n,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new c.Deferred,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new c.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function C(){return self.grecaptcha}function A(t){if(!x(t).activated)throw m.create("use-before-activation",{appName:t.name})}function j(t){return c.base64.encodeString(JSON.stringify(t),!1)}function N(t,e){var n=t.url,body=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,r,c,l,h,f,d,v,y,_;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(r=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=r.getPlatformInfoString()),c={method:"POST",body:JSON.stringify(body),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,c)];case 2:return l=o.sent(),[3,4];case 3:throw h=o.sent(),m.create("fetch-network-error",{originalErrorMessage:h.message});case 4:if(200!==l.status)throw m.create("fetch-status-error",{httpStatus:l.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,l.json()];case 6:return f=o.sent(),[3,8];case 7:throw d=o.sent(),m.create("fetch-parse-error",{originalErrorMessage:d.message});case 8:if(!(v=f.ttl.match(/^([\d.]+)(s)$/))||!v[2]||isNaN(Number(v[1])))throw m.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+f.ttl});return y=1e3*Number(v[1]),_=Date.now(),[2,{token:f.attestationToken,expireTimeMillis:_+y,issuedAtTimeMillis:_}]}}))}))}function P(t,e){var n=t.options,r=n.projectId,o=n.appId,c=n.apiKey;return{url:T+"/projects/"+r+"/apps/"+o+":exchangeRecaptchaToken?key="+c,body:{recaptcha_token:e}}}function R(t,e){var n=t.options,r=n.projectId,o=n.appId,c=n.apiKey;return{url:T+"/projects/"+r+"/apps/"+o+":exchangeDebugToken?key="+c,body:{debug_token:e}}}var D="firebase-app-check-store",M="debug-token",L=null;function F(){return L||(L=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(m.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;if(0===t.oldVersion)e.createObjectStore(D,{keyPath:"compositeKey"})}}catch(t){e(m.create("storage-open",{originalErrorMessage:t.message}))}})),L)}function U(t){return B(K(t))}function V(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,c,l;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,F()];case 1:return n=o.sent(),r=n.transaction(D,"readwrite"),c=r.objectStore(D),l=c.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){l.onsuccess=function(e){t()},r.onerror=function(t){var n;e(m.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function B(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,c;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,F()];case 1:return e=o.sent(),n=e.transaction(D,"readonly"),r=n.objectStore(D),c=r.get(t),[2,new Promise((function(t,e){c.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(m.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function K(t){return t.options.appId+"-"+t.name}var H=new l.Logger("@firebase/app-check");function G(t,e){return c.isIndexedDBAvailable()?function(t,e){return V(K(t),e)}(t,e).catch((function(t){H.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function W(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,B(M)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,V(M,r)).catch((function(t){return H.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}function z(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if((t=I()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}var $={error:"UNKNOWN_ERROR"};function Q(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,c,l,h,f,d,v,m,y,_;return o.__generator(this,(function(w){switch(w.label){case 0:return A(t),r=x(t),c=r.token,l=void 0,c?[3,2]:[4,r.cachedTokenPromise];case 1:(h=w.sent())&&Z(h)&&(c=h,k(t,o.__assign(o.__assign({},r),{token:c})),J(t,{token:c.token})),w.label=2;case 2:return!n&&c&&Z(c)?[2,{token:c.token}]:I().enabled?(d=N,v=R,m=[t],[4,z()]):[3,6];case 3:return[4,d.apply(void 0,[v.apply(void 0,m.concat([w.sent()])),e])];case 4:return f=w.sent(),[4,G(t,f)];case 5:return w.sent(),k(t,o.__assign(o.__assign({},r),{token:f})),[2,{token:f.token}];case 6:return w.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return c=w.sent(),[3,9];case 8:return y=w.sent(),H.error(y),l=y,[3,9];case 9:return c?[3,10]:(_=function(t){return{token:j($),error:t}}(l),[3,12]);case 10:return _={token:c.token},k(t,o.__assign(o.__assign({},r),{token:c})),[4,G(t,c)];case 11:w.sent(),w.label=12;case 12:return J(t,_),[2,_]}}))}))}function Y(t,e,n,r,c){var l=x(t),h={next:r,error:c,type:n},f=o.__assign(o.__assign({},l),{tokenObservers:o.__spreadArray(o.__spreadArray([],l.tokenObservers),[h])});if(!f.tokenRefresher){var d=function(t,e){var n=this;return new S((function(){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return x(t).token?[3,2]:[4,Q(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,Q(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=x(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),O,E)}(t,e);f.tokenRefresher=d}if(!f.tokenRefresher.isRunning()&&l.isTokenAutoRefreshEnabled&&f.tokenRefresher.start(),l.token&&Z(l.token)){var v=l.token;Promise.resolve().then((function(){return r({token:v.token})})).catch((function(){}))}else null==l.token&&l.cachedTokenPromise.then((function(t){t&&Z(t)&&r({token:t.token})})).catch((function(){}));k(t,f)}function X(t,e){var n=x(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),k(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function J(t,e){for(var n=0,r=x(t).tokenObservers;n<r.length;n++){var o=r[n];try{"EXTERNAL"===o.type&&null!=e.error?o.error(e.error):o.next(e)}catch(t){}}}function Z(t){return t.expireTimeMillis-Date.now()>0}var tt="https://www.google.com/recaptcha/api.js";function et(t,e){var n=x(t),r=new c.Deferred;k(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var l="fire_app_check_"+t.name,h=document.createElement("div");h.id=l,h.style.display="none",document.body.appendChild(h);var f,script,d=C();return d?d.ready((function(){it(t,e,d,l),r.resolve(d)})):(f=function(){var n=C();if(!n)throw new Error("no recaptcha");n.ready((function(){it(t,e,n,l),r.resolve(n)}))},(script=document.createElement("script")).src=""+tt,script.onload=f,document.head.appendChild(script)),r.promise}function nt(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return A(t),[4,x(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var o=x(t).reCAPTCHAState;e.ready((function(){n(e.execute(o.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function it(t,e,n,r){var c=n.render(r,{sitekey:e,size:"invisible"}),l=x(t);k(t,o.__assign(o.__assign({},l),{reCAPTCHAState:o.__assign(o.__assign({},l.reCAPTCHAState),{widgetId:c})}))}var ot=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw m.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,nt(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),m.create("recaptcha-error");case 4:return[2,N(P(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,et(t,this._siteKey).catch((function(){}))},t}(),at=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw m.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),e=c.issuedAtTime(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,o.__assign(o.__assign({},t),{issuedAtTimeMillis:n})]}}))}))},t.prototype.initialize=function(t){this._app=t},t}();function st(t,e,n,r){var l=x(t);if(l.activated)throw m.create("already-activated",{appName:t.name});var h=o.__assign(o.__assign({},l),{activated:!0});h.cachedTokenPromise=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!c.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,U(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),H.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}(t).then((function(e){return e&&Z(e)&&k(t,o.__assign(o.__assign({},x(t)),{token:e})),e})),h.provider="string"==typeof e?new ot(e):e instanceof ot||e instanceof at?e:new at({getToken:e.getToken}),h.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,k(t,h),h.provider.initialize(t,n)}function ut(t,e){return{app:t,activate:function(n,r){return st(t,n,e,r)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=x(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),k(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,Q(t,e,n)];case 1:if((r=o.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,o){return function(t,e,n,r,o){var c=function(){},l=function(){};return c=null!=n.next?n.next.bind(n):n,null!=n.error?l=n.error.bind(n):r&&(l=r),Y(t,e,"EXTERNAL",c,l),function(){return X(t,c)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=x(t).tokenObservers;e<n.length;e++){var r=n[e];X(t,r.next)}return Promise.resolve()}}}}var ct="app-check-internal";!function(t){t.INTERNAL.registerComponent(new component.Component("appCheck",(function(t){return ut(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:ot,CustomProvider:at}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider(ct).initialize()}))),t.INTERNAL.registerComponent(new component.Component(ct,(function(t){return function(t,e){return{getToken:function(n){return Q(t,e,n)},addTokenListener:function(n){return Y(t,e,"INTERNAL",n)},removeTokenListener:function(e){return X(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.2")}(d.default),function(){var t=c.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=I();e.enabled=!0;var n=new c.Deferred;e.token=n,"string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(W())}}()},841:function(t,e,n){"use strict";n(15),n(17),n(19),n(4),n(23),n(16),n(24);var r=n(2),o=(n(95),n(94)),c=n(693),l=n(1);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=l.default.extend({name:"v-app-bar-nav-icon",functional:!0,render:function(t,e){var n=e.slots,r=e.listeners,l=e.props,data=e.data,h=Object.assign(data,{staticClass:"v-app-bar__nav-icon ".concat(data.staticClass||"").trim(),props:f(f({},l),{},{icon:!0}),on:r}),d=n().default;return t(c.a,h,d||[t(o.a,"$menu")])}})},849:function(t,e,n){"use strict";n.r(e);var r=n(693),o=n(725),c=n(724),l=n(276),h=n(163),f=n(164),d=n(103),v=n(143),m=n(790),y=n(0),_=(n(14),n(5)),w=n(76),x=n.n(w),k=Object(_.b)({name:"ChatActionsRenamebtn",props:{chatId:{type:String,default:function(){return null}}},setup:function(t){var e=Object(_.l)().$system,n=Object(_.q)().dispatch,r=Object(_.i)(!1),o=Object(_.i)(!1),c=Object(_.i)(),dialog=Object(_.i)(!1),form=Object(_.i)({}),l=function(){var o=Object(y.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,r.value=!0,o.next=4,n("chats/getOne",t.chatId).then((function(t){!1!==t&&(c.value=t,form.value=x.a.cloneDeep(t))}));case 4:o.next=9;break;case 6:o.prev=6,o.t0=o.catch(0),e.log({comp:"ChatActions",msg:"getChat",val:o.t0});case 9:return o.prev=9,r.value=!1,o.finish(9);case 12:case"end":return o.stop()}}),o,null,[[0,6,9,12]])})));return function(){return o.apply(this,arguments)}}(),h=function(){var t=Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.value=!0,t.next=4,n("chats/update",form.value).then((function(t){!1!==t&&(dialog.value=!1)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.log({comp:"ChatActions",msg:"Rename > Save",val:t.t0});case 9:return t.prev=9,r.value=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(){return t.apply(this,arguments)}}();return{loading:r,chat:c,showBottomSheet:o,dialog:dialog,form:form,getChat:l,save:h}}}),I=k,T=n(37),component=Object(T.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(l.a,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n(f.a,t._g(t._b({staticClass:"borderButton rounded-lg mb-2",on:{click:t.getChat}},"v-list-item",o,!1),r),[n(v.a,[n(h.a,[t._v("mdi-pencil")])],1),t._v(" "),n(d.a,[n(d.c,[t._v(t._s(t.$t("chats.rename_chat")))])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n(o.a,{staticClass:"rounded-xl pa-8"},[n("ElementH1",{attrs:{text:t.$t("chats.rename_chat")}}),t._v(" "),n(c.b,{staticClass:"mt-5"},[n(m.a,{attrs:{label:t.$t("chats.chat_name")},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n(c.a,{staticClass:"justify-center"},[n(r.a,{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        "+t._s(t.$t("btn.cancel"))+"\n      ")]),t._v(" "),n(r.a,{staticClass:"elevation-0",attrs:{color:"primary"},on:{click:t.save}},[t._v("\n        "+t._s(t.$t("btn.save"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ElementH1:n(728).default})},850:function(t,e,n){"use strict";n.r(e);var r=n(693),o=n(725),c=n(724),l=n(276),h=n(163),f=n(164),d=n(103),v=n(143),m=(n(53),n(4),n(43),n(60),n(33),n(32),n(17),n(64),n(68),n(35),n(15),n(19),n(23),n(16),n(24),n(2)),y=n(0),_=(n(14),n(5)),w=n(834);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(m.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function I(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var O=Object(_.b)({name:"ChatActionsViewmembersbtn",props:{chatId:{type:String,default:function(){return null}}},setup:function(t){var e=Object(_.l)(),n=e.$system,r=e.$fire,o=Object(_.q)(),c=o.dispatch,l=o.state,h=Object(_.p)(),f=Object(_.i)(!1),d=Object(_.i)(),dialog=Object(_.i)(!1),v=Object(_.i)([]),m=Object(_.i)(!1),x=Object(_.a)((function(){return l.user.data})),T=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.value=!0,e.prev=1,e.next=4,c("chats/getOne",t.chatId).then(function(){var t=Object(y.a)(regeneratorRuntime.mark((function t(e){var n,r,o,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===e){t.next=26;break}d.value=e,d.value.owner===x.value.uid&&(console.log("Yes, is owner"),m.value=!0),v.value=[],n=I(d.value.participants),t.prev=5,n.s();case 7:if((r=n.n()).done){t.next=18;break}if((o=r.value)!==x.value.uid){t.next=12;break}t.next=16;break;case 12:return t.next=14,c("user/getOne",o);case 14:u=t.sent,v.value.push(k({},u));case 16:t.next=7;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(5),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[5,20,23,26]])})));return function(e){return t.apply(this,arguments)}}());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n.log({comp:"ChatActions",msg:"getChat",val:e.t0});case 9:return e.prev=9,f.value=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=Object(y.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d.value.id||!e.id){t.next=12;break}return t.prev=1,t.next=4,r.firestore.doc("Chats/".concat(d.value.id)).update({participants:w.a.firestore.FieldValue.arrayRemove(e.id)});case 4:return t.next=6,r.firestore.doc("Chats/".concat(d.value.id)).get().then((function(t){1===t.data().participants.length&&(c("chats/remove",d.value.id),dialog.value=!1,h.push("/chats"))}));case 6:dialog.value=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return{loading:f,chat:d,dialog:dialog,participants:v,isOwnerOfChat:m,getChat:T,removeChatMember:O}}}),E=O,S=n(37),component=Object(S.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(l.a,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n(f.a,t._g(t._b({staticClass:"borderButton rounded-lg mb-2",on:{click:t.getChat}},"v-list-item",o,!1),r),[n(v.a,[n(h.a,[t._v("mdi-account-supervisor")])],1),t._v(" "),n(d.a,[n(d.c,[t._v(t._s(t.$t("chats.view_members")))])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n(o.a,{staticClass:"rounded-xl py-4"},[n("ElementH1",{attrs:{text:"Members"}}),t._v(" "),n("div",{staticClass:"text-center"},[n("ChatAddmemberstochatbtn",{attrs:{chat:t.chat}})],1),t._v(" "),n(c.b,{staticClass:"mt-5"},[t._l(t.participants,(function(e,o){return[n("UserListitem",{key:o,class:"member-"+e.id+" mt-2",attrs:{user:e},scopedSlots:t._u([{key:"action",fn:function(){return[t.isOwnerOfChat?n(r.a,{attrs:{text:"",color:"red"},on:{click:function(n){return t.removeChatMember(e)}}},[n(h.a,[t._v("mdi-delete")])],1):t._e()]},proxy:!0}],null,!0)})]}))],2),t._v(" "),n(c.a,{staticClass:"justify-center"},[n(r.a,{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        "+t._s(t.$t("btn.close"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ElementH1:n(728).default,ChatAddmemberstochatbtn:n(833).default,UserListitem:n(756).default})},851:function(t,e,n){"use strict";n.r(e);var r=n(693),o=n(725),c=n(724),l=n(276),h=n(163),f=n(164),d=n(103),v=n(143),m=n(0),y=(n(14),n(5)),_=Object(y.b)({name:"ChatActionsRemovechatbtn",props:{chatId:{type:String,default:function(){return null}}},setup:function(t){var e=Object(y.q)().dispatch,n=Object(y.i)(!1),dialog=Object(y.i)(!1),r=Object(y.p)(),o=function(){var n=Object(m.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e("chats/remove",t.chatId);case 2:return dialog.value=!1,n.next=5,r.push("/chats");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{loading:n,removeChat:o,dialog:dialog}}}),w=_,x=n(37),component=Object(x.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(l.a,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n(f.a,t._g(t._b({staticClass:"borderButton rounded-lg mb-2"},"v-list-item",o,!1),r),[n(v.a,[n(h.a,{attrs:{color:"myshoutRed"}},[t._v("mdi-delete")])],1),t._v(" "),n(d.a,{staticStyle:{color:"var(--v-myshoutRed-base)"}},[n(d.c,[t._v(t._s(t.$t("chats.remove_chat")))])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n(o.a,{staticClass:"rounded-xl pa-8"},[n("ElementH1",{attrs:{text:"Are you sure?"}}),t._v(" "),n(c.a,{staticClass:"justify-center"},[n(r.a,{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        "+t._s(t.$t("btn.cancel"))+"\n      ")]),t._v(" "),n(r.a,{staticClass:"elevation-0",attrs:{color:"error"},on:{click:t.removeChat}},[t._v("\n        "+t._s(t.$t("btn.yes_remove"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ElementH1:n(728).default})},856:function(t,e,n){"use strict";var r=n(2),o=(n(56),n(4),n(15),n(17),n(19),n(23),n(16),n(24),n(291)),c=n(106),l=n(286),h=n(290),f=n(28),d=n(3);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y=Object(f.a)(o.a,Object(c.b)(["top","right","bottom","left","absolute"]),l.a,h.a);e.a=y.extend().extend({name:"menuable",props:{allowOverflow:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[Number,String],default:"auto"},minWidth:[Number,String],nudgeBottom:{type:[Number,String],default:0},nudgeLeft:{type:[Number,String],default:0},nudgeRight:{type:[Number,String],default:0},nudgeTop:{type:[Number,String],default:0},nudgeWidth:{type:[Number,String],default:0},offsetOverflow:Boolean,positionX:{type:Number,default:null},positionY:{type:Number,default:null},zIndex:{type:[Number,String],default:null}},data:function(){return{activatorNode:[],absoluteX:0,absoluteY:0,activatedBy:null,activatorFixed:!1,dimensions:{activator:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0,offsetLeft:0},content:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0}},relativeYOffset:0,hasJustFocused:!1,hasWindow:!1,inputActivator:!1,isContentActive:!1,pageWidth:0,pageYOffset:0,stackClass:"v-menu__content--active",stackMinZIndex:6}},computed:{computedLeft:function(){var a=this.dimensions.activator,t=this.dimensions.content,e=(!1!==this.attach?a.offsetLeft:a.left)||0,n=Math.max(a.width,t.width),r=0;if(r+=e,(this.left||this.$vuetify.rtl&&!this.right)&&(r-=n-a.width),this.offsetX){var o=isNaN(Number(this.maxWidth))?a.width:Math.min(a.width,Number(this.maxWidth));r+=this.left?-o:a.width}return this.nudgeLeft&&(r-=parseInt(this.nudgeLeft)),this.nudgeRight&&(r+=parseInt(this.nudgeRight)),r},computedTop:function(){var a=this.dimensions.activator,t=this.dimensions.content,e=0;return this.top&&(e+=a.height-t.height),!1!==this.attach?e+=a.offsetTop:e+=a.top+this.pageYOffset,this.offsetY&&(e+=this.top?-a.height:a.height),this.nudgeTop&&(e-=parseInt(this.nudgeTop)),this.nudgeBottom&&(e+=parseInt(this.nudgeBottom)),e},hasActivator:function(){return!!(this.$slots.activator||this.$scopedSlots.activator||this.activator||this.inputActivator)},absoluteYOffset:function(){return this.pageYOffset-this.relativeYOffset}},watch:{disabled:function(t){t&&this.callDeactivate()},isActive:function(t){this.disabled||(t?this.callActivate():this.callDeactivate())},positionX:"updateDimensions",positionY:"updateDimensions"},beforeMount:function(){this.hasWindow="undefined"!=typeof window,this.hasWindow&&window.addEventListener("resize",this.updateDimensions,!1)},beforeDestroy:function(){this.hasWindow&&window.removeEventListener("resize",this.updateDimensions,!1)},methods:{absolutePosition:function(){return{offsetTop:this.positionY||this.absoluteY,offsetLeft:this.positionX||this.absoluteX,scrollHeight:0,top:this.positionY||this.absoluteY,bottom:this.positionY||this.absoluteY,left:this.positionX||this.absoluteX,right:this.positionX||this.absoluteX,height:0,width:0}},activate:function(){},calcLeft:function(t){return Object(d.h)(!1!==this.attach?this.computedLeft:this.calcXOverflow(this.computedLeft,t))},calcTop:function(){return Object(d.h)(!1!==this.attach?this.computedTop:this.calcYOverflow(this.computedTop))},calcXOverflow:function(t,e){var n=t+e-this.pageWidth+12;return(t=(!this.left||this.right)&&n>0?Math.max(t-n,0):Math.max(t,12))+this.getOffsetLeft()},calcYOverflow:function(t){var e=this.getInnerHeight(),n=this.absoluteYOffset+e,r=this.dimensions.activator,o=this.dimensions.content.height,c=n<t+o;return c&&this.offsetOverflow&&r.top>o?t=this.pageYOffset+(r.top-o):c&&!this.allowOverflow?t=n-o-12:t<this.absoluteYOffset&&!this.allowOverflow&&(t=this.absoluteYOffset+12),t<12?12:t},callActivate:function(){this.hasWindow&&this.activate()},callDeactivate:function(){this.isContentActive=!1,this.deactivate()},checkForPageYOffset:function(){this.hasWindow&&(this.pageYOffset=this.activatorFixed?0:this.getOffsetTop())},checkActivatorFixed:function(){if(!1===this.attach){for(var t=this.getActivator();t;){if("fixed"===window.getComputedStyle(t).position)return void(this.activatorFixed=!0);t=t.offsetParent}this.activatorFixed=!1}else this.activatorFixed=!1},deactivate:function(){},genActivatorListeners:function(){var t=this,e=l.a.options.methods.genActivatorListeners.call(this),n=e.click;return n&&(e.click=function(e){t.openOnClick&&n&&n(e),t.absoluteX=e.clientX,t.absoluteY=e.clientY}),e},getInnerHeight:function(){return this.hasWindow?window.innerHeight||document.documentElement.clientHeight:0},getOffsetLeft:function(){return this.hasWindow?window.pageXOffset||document.documentElement.scrollLeft:0},getOffsetTop:function(){return this.hasWindow?window.pageYOffset||document.documentElement.scrollTop:0},getRoundedBoundedClientRect:function(t){var rect=t.getBoundingClientRect();return{top:Math.round(rect.top),left:Math.round(rect.left),bottom:Math.round(rect.bottom),right:Math.round(rect.right),width:Math.round(rect.width),height:Math.round(rect.height)}},measure:function(t){if(!t||!this.hasWindow)return null;var rect=this.getRoundedBoundedClientRect(t);if(!1!==this.attach){var style=window.getComputedStyle(t);rect.left=parseInt(style.marginLeft),rect.top=parseInt(style.marginTop)}return rect},sneakPeek:function(t){var e=this;requestAnimationFrame((function(){var n=e.$refs.content;n&&"none"===n.style.display?(n.style.display="inline-block",t(),n.style.display="none"):t()}))},startTransition:function(){var t=this;return new Promise((function(e){return requestAnimationFrame((function(){t.isContentActive=t.hasJustFocused=t.isActive,e()}))}))},updateDimensions:function(){var t=this;this.hasWindow="undefined"!=typeof window,this.checkActivatorFixed(),this.checkForPageYOffset(),this.pageWidth=document.documentElement.clientWidth;var e={activator:m({},this.dimensions.activator),content:m({},this.dimensions.content)};if(!this.hasActivator||this.absolute)e.activator=this.absolutePosition();else{var n=this.getActivator();if(!n)return;e.activator=this.measure(n),e.activator.offsetLeft=n.offsetLeft,!1!==this.attach?e.activator.offsetTop=n.offsetTop:e.activator.offsetTop=0}this.sneakPeek((function(){if(t.$refs.content){if(t.$refs.content.offsetParent){var n=t.getRoundedBoundedClientRect(t.$refs.content.offsetParent);t.relativeYOffset=window.pageYOffset+n.top,e.activator.top-=t.relativeYOffset,e.activator.left-=window.pageXOffset+n.left}e.content=t.measure(t.$refs.content)}t.dimensions=e}))}}})},863:function(t,e,n){var content=n(903);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("cb68a1da",content,!0,{sourceMap:!1})},864:function(t,e,n){var content=n(907);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("ddd67898",content,!0,{sourceMap:!1})},869:function(t,e,n){(function(n){var r;!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var t=this||c;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||c;if(t=parseFloat(t),e.ctx||_(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,c.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||c;e.ctx||_(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,c.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||c,i=0;i<t._howls.length;i++)t._howls[i].stop();return t},unload:function(){for(var t=this||c,i=t._howls.length-1;i>=0;i--)t._howls[i].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,_()),t},codecs:function(t){return(this||c)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||c;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||c,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator?t._navigator.userAgent:"",o=r.match(/OPR\/([0-6].)/g),l=o&&parseInt(o[0].split("/")[1],10)<33,h=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),f=r.match(/Version\/(.*?) /),d=h&&f&&parseInt(f[1],10)<15;return t._codecs={mp3:!(l||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(d||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(d||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||c;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(n){t.noAudio=!0;break}for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),c=0;c<o.length;c++){var l=t._howls[i]._soundById(o[c]);l&&l._node&&!l._node._unlocked&&(l._node._unlocked=!0,l._node.load())}t._autoResume();var source=t.ctx.createBufferSource();source.buffer=t._scratchBuffer,source.connect(t.ctx.destination),void 0===source.start?source.noteOn(0):source.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),source.onended=function(){source.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||c;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(audio){var t=this||c;return audio._unlocked&&t._html5AudioPool.push(audio),t},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&c.usingWebAudio){for(var i=0;i<t._howls.length;i++)if(t._howls[i]._webAudio)for(var e=0;e<t._howls[i]._sounds.length;e++)if(!t._howls[i]._sounds[e]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&c.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var c=new o,l=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};l.prototype={init:function(t){var e=this;return c.ctx||_(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=c.usingWebAudio&&!e._html5,void 0!==c.ctx&&c.ctx&&c.autoUnlock&&c._unlockAudio(),c._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(c.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,r;if(t._format&&t._format[i])n=t._format[i];else{if("string"!=typeof(r=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&c.codecs(n)){e=t._src[i];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new h(t),t._webAudio&&d(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var o=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(o++,r=n._sounds[i]._id);1===o?t=null:r=null}}var l=r?n._soundById(r):n._inactiveSound();if(!l)return null;if(r&&!t&&(t=l._sprite||"__default"),"loaded"!==n._state){l._sprite=t,l._ended=!1;var h=l._id;return n._queue.push({event:"play",action:function(){n.play(h)}}),h}if(r&&!l._paused)return e||n._loadQueue("play"),l._id;n._webAudio&&c._autoResume();var f=Math.max(0,l._seek>0?l._seek:n._sprite[t][0]/1e3),d=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-f),v=1e3*d/Math.abs(l._rate),m=n._sprite[t][0]/1e3,y=(n._sprite[t][0]+n._sprite[t][1])/1e3;l._sprite=t,l._ended=!1;var _=function(){l._paused=!1,l._seek=f,l._start=m,l._stop=y,l._loop=!(!l._loop&&!n._sprite[t][2])};if(!(f>=y)){var w=l._node;if(n._webAudio){var x=function(){n._playLock=!1,_(),n._refreshBuffer(l);var t=l._muted||n._muted?0:l._volume;w.gain.setValueAtTime(t,c.ctx.currentTime),l._playStart=c.ctx.currentTime,void 0===w.bufferSource.start?l._loop?w.bufferSource.noteGrainOn(0,f,86400):w.bufferSource.noteGrainOn(0,f,d):l._loop?w.bufferSource.start(0,f,86400):w.bufferSource.start(0,f,d),v!==1/0&&(n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),v)),e||setTimeout((function(){n._emit("play",l._id),n._loadQueue()}),0)};"running"===c.state&&"interrupted"!==c.ctx.state?x():(n._playLock=!0,n.once("resume",x),n._clearTimer(l._id))}else{var k=function(){w.currentTime=f,w.muted=l._muted||n._muted||c._muted||w.muted,w.volume=l._volume*c.volume(),w.playbackRate=l._rate;try{var r=w.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,_(),r.then((function(){n._playLock=!1,w._unlocked=!0,e?n._loadQueue():n._emit("play",l._id)})).catch((function(){n._playLock=!1,n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0}))):e||(n._playLock=!1,_(),n._emit("play",l._id)),w.playbackRate=l._rate,w.paused)return void n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||l._loop?n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),v):(n._endTimers[l._id]=function(){n._ended(l),w.removeEventListener("ended",n._endTimers[l._id],!1)},w.addEventListener("ended",n._endTimers[l._id],!1))}catch(t){n._emit("playerror",l._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===w.src&&(w.src=n._src,w.load());var I=window&&window.ejecta||!w.readyState&&c._navigator.isCocoonJS;if(w.readyState>=3||I)k();else{n._playLock=!0,n._state="loading";var T=function(){n._state="loaded",k(),w.removeEventListener(c._canPlayEvent,T,!1)};w.addEventListener(c._canPlayEvent,T,!1),n._clearTimer(l._id)}}return l._id}n._ended(l)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var r=e._soundById(n[i]);if(r&&!r._paused&&(r._seek=e.seek(n[i]),r._rateSeek=0,r._paused=!0,e._stopFade(n[i]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var o=n._soundById(r[i]);o&&(o._muted=t,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,c.ctx.currentTime):o._node&&(o._node.muted=!!c._muted||t),n._emit("mute",o._id))}return n},volume:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]){var l=r._getSoundIds(),h=l.indexOf(o[0]);h>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else o.length>=2&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var i=0;i<e.length;i++)(n=r._soundById(e[i]))&&(n._volume=t,o[2]||r._stopFade(e[i]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,c.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*c.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,r)}}),o;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),o.volume(t,r);for(var l=o._getSoundIds(r),i=0;i<l.length;i++){var h=o._soundById(l[i]);if(h){if(r||o._stopFade(l[i]),o._webAudio&&!h._muted){var f=c.ctx.currentTime,d=f+n/1e3;h._volume=t,h._node.gain.setValueAtTime(t,f),h._node.gain.linearRampToValueAtTime(e,d)}o._startFadeInterval(h,t,e,n,l[i],void 0===r)}}return o},_startFadeInterval:function(t,e,n,r,o,c){var l=this,h=e,f=n-e,d=Math.abs(f/.01),v=Math.max(4,d>0?r/d:r),m=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var o=(Date.now()-m)/r;m=Date.now(),h+=f*o,h=Math.round(100*h)/100,h=f<0?Math.max(n,h):Math.min(n,h),l._webAudio?t._volume=h:l.volume(h,t._id,!0),c&&(l._volume=h),(n<e&&h<=n||n>e&&h>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,l.volume(n,t._id),l._emit("fade",t._id))}),v)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(c.ctx.currentTime),clearInterval(n._interval),n._interval=null,e.volume(n._fadeTo,t),n._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;t=o[0],r._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var c=r._getSoundIds(e),i=0;i<c.length;i++)(n=r._soundById(c[i]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(c[i])&&(r.pause(c[i],!0),r.play(c[i],!0)))));return r},rate:function(){var t,e,n,r=this,o=arguments;if(0===o.length)e=r._sounds[0]._id;else if(1===o.length){var l=r._getSoundIds(),h=l.indexOf(o[0]);h>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else 2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var i=0;i<e.length;i++)if(n=r._soundById(e[i])){r.playing(e[i])&&(n._rateSeek=r.seek(e[i]),n._playStart=r._webAudio?c.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,c.ctx.currentTime):n._node&&(n._node.playbackRate=t);var f=r.seek(e[i]),d=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-f,v=1e3*d/Math.abs(n._rate);!r._endTimers[e[i]]&&n._paused||(r._clearTimer(e[i]),r._endTimers[e[i]]=setTimeout(r._ended.bind(r,n),v)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)n._sounds.length&&(e=n._sounds[0]._id);else if(1===r.length){var o=n._getSoundIds(),l=o.indexOf(r[0]);l>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var h=n._soundById(e);if(h){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var f=n.playing(e)?c.ctx.currentTime-h._playStart:0,d=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(d+f*Math.abs(h._rate))}return h._node.currentTime}var v=n.playing(e);v&&n.pause(e,!0),h._seek=t,h._ended=!1,n._clearTimer(e),n._webAudio||!h._node||isNaN(h._node.duration)||(h._node.currentTime=t);var m=function(){v&&n.play(e,!0),n._emit("seek",e)};if(v&&!n._webAudio){var y=function(){n._playLock?setTimeout(y,0):m()};setTimeout(y,0)}else m()}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var i=0;i<e._sounds.length;i++)if(!e._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,r=e._soundById(t);return r&&(n=e._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(c._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),c._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=c._howls.indexOf(t);n>=0&&c._howls.splice(n,1);var r=!0;for(i=0;i<c._howls.length;i++)if(c._howls[i]._src===t._src||t._src.indexOf(c._howls[i]._src)>=0){r=!1;break}return f&&r&&delete f[t._src],c.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var o=this["_on"+t];return"function"==typeof e&&o.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this,o=r["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<o.length;i++){var c=n===o[i].id;if(e===o[i].fn&&c||!e&&c){o.splice(i,1);break}}else if(t)r["_on"+t]=[];else{var l=Object.keys(r);for(i=0;i<l.length;i++)0===l[i].indexOf("_on")&&Array.isArray(r[l[i]])&&(r[l[i]]=[])}return r},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this,o=r["_on"+t],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(t,o[i].fn,o[i].id));return r._loadQueue(t),r},_loadQueue:function(t){var e=this;if(e._queue.length>0){var n=e._queue[0];n.event===t&&(e._queue.shift(),e._loadQueue()),t||n.action()}return e},_ended:function(t){var e=this,n=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var r=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=c.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),o)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),c._autoSuspend()),e._webAudio||r||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var n=e._soundById(t);n&&n._node&&n._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var i=0;i<t._sounds.length;i++)if(t._sounds[i]._ended)return t._sounds[i].reset();return new h(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;i>=0;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=c.ctx.createBufferSource(),t._node.bufferSource.buffer=f[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,c.ctx.currentTime),this},_cleanBuffer:function(t){var e=c._navigator&&c._navigator.vendor.indexOf("Apple")>=0;if(c._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=c._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(c._navigator&&c._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var h=function(t){this._parent=t,this.init()};h.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++c._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=c._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),t._node.gain.setValueAtTime(n,c.ctx.currentTime),t._node.paused=!0,t._node.connect(c.masterGain)):c.noAudio||(t._node=c._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(c._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=n*c.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++c._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(c._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var f={},d=function(t){var e=t._src;if(f[e])return t._duration=f[e].duration,void y(t);if(/^data:[^;]+;base64,/.test(e)){for(var data=atob(e.split(",")[1]),n=new Uint8Array(data.length),i=0;i<data.length;++i)n[i]=data.charCodeAt(i);m(n.buffer,t)}else{var r=new XMLHttpRequest;r.open(t._xhr.method,e,!0),r.withCredentials=t._xhr.withCredentials,r.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){r.setRequestHeader(e,t._xhr.headers[e])})),r.onload=function(){var code=(r.status+"")[0];"0"===code||"2"===code||"3"===code?m(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete f[e],t.load())},v(r)}},v=function(t){try{t.send()}catch(e){t.onerror()}},m=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(f[e._src]=t,y(e,t)):n()};"undefined"!=typeof Promise&&1===c.ctx.decodeAudioData.length?c.ctx.decodeAudioData(t).then(r).catch(n):c.ctx.decodeAudioData(t,r,n)},y=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},_=function(){if(c.usingWebAudio){try{"undefined"!=typeof AudioContext?c.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?c.ctx=new webkitAudioContext:c.usingWebAudio=!1}catch(t){c.usingWebAudio=!1}c.ctx||(c.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(c._navigator&&c._navigator.platform),e=c._navigator&&c._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(c._navigator&&c._navigator.userAgent.toLowerCase());c._navigator&&!r&&(c.usingWebAudio=!1)}c.usingWebAudio&&(c.masterGain=void 0===c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),c.masterGain.gain.setValueAtTime(c._muted?0:c._volume,c.ctx.currentTime),c.masterGain.connect(c.ctx.destination)),c._setup()}};void 0===(r=function(){return{Howler:c,Howl:l}}.apply(e,[]))||(t.exports=r),e.Howler=c,e.Howl=l,void 0!==n?(n.HowlerGlobal=o,n.Howler=c,n.Howl=l,n.Sound=h):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=c,window.Howl=l,window.Sound=h)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var r=this;return r.ctx&&r.ctx.listener?(e="number"!=typeof e?r._pos[1]:e,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof t?r._pos:(r._pos=[t,e,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(t,e,n,r,o,c){var l=this;if(!l.ctx||!l.ctx.listener)return l;var h=l._orientation;return e="number"!=typeof e?h[1]:e,n="number"!=typeof n?h[2]:n,r="number"!=typeof r?h[3]:r,o="number"!=typeof o?h[4]:o,c="number"!=typeof c?h[5]:c,"number"!=typeof t?h:(l._orientation=[t,e,n,r,o,c],void 0!==l.ctx.listener.forwardX?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,e,n,r,o,c),l)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var c=r._getSoundIds(n),i=0;i<c.length;i++){var l=r._soundById(c[i]);if(l){if("number"!=typeof t)return l._stereo;l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",l._panner&&l._panner.pan||e(l,o),"spatial"===o?void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",l._id)}}return r},Howl.prototype.pos=function(t,n,r,o){var c=this;if(!c._webAudio)return c;if("loaded"!==c._state)return c._queue.push({event:"pos",action:function(){c.pos(t,n,r,o)}}),c;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof t)return c._pos;c._pos=[t,n,r]}for(var l=c._getSoundIds(o),i=0;i<l.length;i++){var h=c._soundById(l[i]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,n,r],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):h._panner.setPosition(t,n,r)),c._emit("pos",h._id)}}return c},Howl.prototype.orientation=function(t,n,r,o){var c=this;if(!c._webAudio)return c;if("loaded"!==c._state)return c._queue.push({event:"orientation",action:function(){c.orientation(t,n,r,o)}}),c;if(n="number"!=typeof n?c._orientation[1]:n,r="number"!=typeof r?c._orientation[2]:r,void 0===o){if("number"!=typeof t)return c._orientation;c._orientation=[t,n,r]}for(var l=c._getSoundIds(o),i=0;i<l.length;i++){var h=c._soundById(l[i]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,n,r],h._node&&(h._panner||(h._pos||(h._pos=c._pos||[0,0,-.5]),e(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):h._panner.setOrientation(t,n,r)),c._emit("orientation",h._id)}}return c},Howl.prototype.pannerAttr=function(){var t,n,r,o=this,c=arguments;if(!o._webAudio)return o;if(0===c.length)return o._pannerAttr;if(1===c.length){if("object"!=typeof c[0])return(r=o._soundById(parseInt(c[0],10)))?r._pannerAttr:o._pannerAttr;t=c[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===c.length&&(t=c[0],n=parseInt(c[1],10));for(var l=o._getSoundIds(n),i=0;i<l.length;i++)if(r=o._soundById(l[i])){var h=r._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var f=r._panner;f?(f.coneInnerAngle=h.coneInnerAngle,f.coneOuterAngle=h.coneOuterAngle,f.coneOuterGain=h.coneOuterGain,f.distanceModel=h.distanceModel,f.maxDistance=h.maxDistance,f.refDistance=h.refDistance,f.rolloffFactor=h.rolloffFactor,f.panningModel=h.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,e._stereo?n.stereo(e._stereo):e._pos?n.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,n._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,n(77))},872:function(t,e,n){"use strict";n.r(e);var r=n(266),o=n(723),c=n(749),l=(n(53),n(4),n(43),n(60),n(33),n(32),n(17),n(64),n(68),n(35),n(0)),h=(n(14),n(5));function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v=Object(h.b)({name:"ChatTopavatar",props:{chat:{type:Object,default:function(){return{}}}},setup:function(t){var e=Object(h.q)(),n=e.state,r=e.dispatch,o=Object(h.a)((function(){return n.user.profile})),c=Object(h.i)(),d=Object(h.i)(),v=Object(h.i)(),m=0;return t.chat.participants&&(m=t.chat.participants.length-1),Object(h.f)(Object(l.a)(regeneratorRuntime.mark((function e(){var n,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m>=1)){e.next=21;break}n=f(t.chat.participants),e.prev=2,n.s();case 4:if((c=n.n()).done){e.next=13;break}if(l=c.value,o.value.id===l){e.next=11;break}return e.next=9,r("user/getOne",l);case 9:(u=e.sent)&&(v.value=u.initial,d.value=u.photoUrl);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})))),{avatar:c,participantCount:m,profile:o,url:d,initial:v}}}),m=n(37),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.participantCount>1?n(o.a,{attrs:{bordered:"",inline:"",content:"+"+t.participantCount,color:"myshoutOrange"}},[n(r.a,{class:"white--text rounded-lg "+(t.url?"mt-2":""),attrs:{size:"40",color:"primary",rounded:""}},[t.url?n(c.a,{attrs:{src:t.url}}):n("span",{staticClass:"white--text headline"},[t._v(t._s(t.initial))])],1)],1):n(r.a,{staticClass:"white--text rounded-lg",attrs:{size:"40",color:"primary",rounded:""}},[t.url?n(c.a,{attrs:{src:t.url}}):n("span",{staticClass:"white--text headline"},[t._v(t._s(t.initial))])],1)],1)}),[],!1,null,null,null);e.default=component.exports},873:function(t,e,n){"use strict";n.r(e);var r=n(0),o=(n(14),n(97),n(4),n(53),n(43),n(60),n(33),n(32),n(17),n(64),n(68),n(35),n(5)),c=n(76),l=n.n(c);function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=Object(o.b)({name:"ChatUsername",props:{chat:{type:Object,default:function(){return{}}},loggedInUser:{type:Object,default:function(){return{}}}},setup:function(t){var e=Object(o.q)(),n=e.state,c=e.dispatch,title=Object(o.i)(t.chat.title),f=Object(o.a)((function(){var e=l.a.find(n.chats.all,{id:t.chat.id});return e?e.title:t.chat.title})),d=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var r,o,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.title){e.next=3;break}return title.value=n.title,e.abrupt("return");case 3:title.value="",r=h(n.participants),e.prev=5,r.s();case 7:if((o=r.n()).done){e.next=16;break}if((l=o.value)===t.loggedInUser.uid){e.next=14;break}return e.next=12,c("user/getOne",l);case 12:(f=e.sent)&&(t.loggedInUser.uid?t.loggedInUser.uid:t.loggedInUser.data.uid?t.loggedInUser.data.uid:void 0)!==f.id&&(title.value=title.value+"@".concat(f.username," "));case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.f)(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(title.value){e.next=3;break}return e.next=3,d(t.chat);case 3:case"end":return e.stop()}}),e)})))),{title:title,titleN:f}}}),v=d,m=n(37),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{},[t.titleN?n("span",[t._v(t._s(t.titleN))]):n("span",[t._v(t._s(t.title))])])}),[],!1,null,null,null);e.default=component.exports},874:function(t,e,n){"use strict";n.r(e);var r=n(720),o=n(163),c=n(267),l=n(75),h=n(281),f=n(0),d=(n(14),n(5)),v=Object(d.b)({name:"ChatActionsbtn",directives:{Touch:h.a},props:{chatId:{type:String,default:function(){return null}}},setup:function(t){var e=Object(d.l)().$system,n=Object(d.q)().dispatch,r=Object(d.i)(!1),o=Object(d.i)(!1),c=Object(d.i)(),l=function(){var l=Object(f.a)(regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,r.value=!0,l.prev=2,r.value=!0,l.next=6,n("chats/getOne",t.chatId).then((function(t){!1!==t&&(c.value=t,o.value=!0)}));case 6:l.next=11;break;case 8:l.prev=8,l.t0=l.catch(2),e.log({comp:"ChatActions",msg:"useFetch",val:l.t0});case 11:return l.prev=11,r.value=!1,l.finish(11);case 14:l.next=19;break;case 16:l.prev=16,l.t1=l.catch(0),e.log({comp:"ChatsIndex",msg:"showChatActions",val:l.t1});case 19:return l.prev=19,r.value=!1,l.finish(19);case 22:case"end":return l.stop()}}),l,null,[[0,16,19,22],[2,8,11,14]])})));return function(){return l.apply(this,arguments)}}();return{loading:r,chat:c,showBottomSheet:o,showChatActions:l,swipe:function(t){"Down"===t&&(o.value=!1)}}}}),m=v,y=n(37),component=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n(o.a,{staticClass:"pa-3 rounded-lg",attrs:{color:"myshoutDarkGrey"},on:{click:function(e){return t.showChatActions()}}},[t._v("\n    mdi-dots-vertical\n  ")]),t._v(" "),n(r.a,{attrs:{scrollable:!0,"max-width":"700"},model:{value:t.showBottomSheet,callback:function(e){t.showBottomSheet=e},expression:"showBottomSheet"}},[n(l.a,{staticClass:"rounded-t-xl",attrs:{height:"50vh"}},[n("div",{staticClass:"ma-3",staticStyle:{"padding-bottom":"180px"}},[n("GlobalSlidebar",{directives:[{def:h.b,name:"touch",rawName:"v-touch",value:{down:function(){return t.swipe("Down")}},expression:"{ down: () => swipe('Down') }"}],nativeOn:{click:function(e){return t.swipe("Down")}}}),t._v(" "),t.loading?n("ElementH3",{attrs:{align:"center",text:t.$t("is_loading")}}):t._e(),t._v(" "),n("ElementH3",{attrs:{align:"center",text:t.$t("actions")}}),t._v(" "),n(c.a,[n("ChatActionsRenamebtn",{attrs:{chatId:t.chatId}}),t._v(" "),n("ChatActionsViewmembersbtn",{attrs:{chatId:t.chatId}}),t._v(" "),n("ChatActionsRemovechatbtn",{attrs:{chatId:t.chatId}})],1)],1)])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{GlobalSlidebar:n(400).default,ElementH3:n(395).default,ChatActionsRenamebtn:n(849).default,ChatActionsViewmembersbtn:n(850).default,ChatActionsRemovechatbtn:n(851).default})},880:function(t,e,n){"use strict";n.r(e);var r=n(266),o=n(749),c=n(5),l=Object(c.b)({name:"ChatAvatar",props:{user:{type:Object,default:function(){return{}}},color:{type:String,default:function(){return"primary"}}},setup:function(t){return{url:Object(c.i)(t.user.photoURL),initial:Object(c.i)(t.user.initial)}}}),h=n(37),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(r.a,{attrs:{size:"30",elevation:"10",color:t.color+" lighten-2",rounded:""}},[t.url?n(o.a,{attrs:{src:t.url}}):n("span",{staticClass:"white--text headline"},[t._v(t._s(t.initial))])],1)}),[],!1,null,null,null);e.default=component.exports},881:function(t,e,n){"use strict";n.r(e);var r=n(693),o=n(163),c=n(5),l=n(869),h=Object(c.b)({name:"ChatPlayaudio",props:{file:{type:String,default:function(){return null}}},setup:function(t){var e=Object(c.l)().$fire,n=Object(c.i)(!1),r=Object(c.i)();return{isPlaying:n,playAudio:function(){n.value=!0;var o=e.auth.currentUser;r.value=new l.Howl({src:[t.file],html5:!0,volume:1,xhr:{method:"POST",headers:{Authorization:"Bearer:"+o.refreshToken},withCredentials:!0},onend:function(){console.log("Finished!"),n.value=!1}}),r.value.play()},stopAudio:function(){r.value.stop(),n.value=!1}}}}),f=n(37),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n(r.a,{attrs:{fab:""},on:{click:function(e){return t.playAudio()}}},[t.isPlaying?n(o.a,[t._v("mdi-motion-play mdi-spin")]):n(o.a,[t._v("mdi-play-circle")])],1),t._v(" "),t.isPlaying?n(r.a,{attrs:{fab:"",small:"",plain:""},on:{click:function(e){return t.stopAudio()}}},[n(o.a,[t._v("mdi-close")])],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},902:function(t,e,n){"use strict";n(863)},903:function(t,e,n){var r=n(38)(!1);r.push([t.i,".v-dialog{box-shadow:none!important}",""]),t.exports=r},904:function(t,e,n){var content=n(905);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("dc0628f2",content,!0,{sourceMap:!1})},905:function(t,e,n){var r=n(38)(!1);r.push([t.i,".input-tel__input{padding:1.75rem!important}.input-tel__input,input.country-selector__input{background:#f6f6f6!important;border:none!important}input.country-selector__input{height:56px!important}.country-selector__country-flag{top:25px}.country-selector__toggle{top:calc(50% - 4px)!important}.theme--light.v-app-bar.v-toolbar.v-sheet,.theme--light.v-application,.theme--light.v-tabs-items{background-color:#eef3ff}.theme--light .cart-popup-contents{background-color:#fff}.theme--light.v-stepper{background:transparent}.theme--light.v-sheet.company-card,.theme--light.v-sheet.company-list-card,.theme--light.v-sheet.post-card,.theme--light.v-sheet.product-card,.theme--light.v-sheet.recent-news-card{background-color:#fff;border:7px solid hsla(0,0%,87.1%,.2)}.theme--light.v-skeleton-loader .v-skeleton-loader__actions,.theme--light.v-skeleton-loader .v-skeleton-loader__article,.theme--light.v-skeleton-loader .v-skeleton-loader__card-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__card-text,.theme--light.v-skeleton-loader .v-skeleton-loader__date-picker,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-avatar-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-text,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-three-line,.theme--light.v-skeleton-loader .v-skeleton-loader__list-item-two-line,.theme--light.v-skeleton-loader .v-skeleton-loader__table-heading,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tbody,.theme--light.v-skeleton-loader .v-skeleton-loader__table-tfoot,.theme--light.v-skeleton-loader .v-skeleton-loader__table-thead{background:transparent!important}.theme--light.slide-up{background-color:#eef3ff}.theme--dark.v-app-bar.v-toolbar.v-sheet,.theme--dark.v-application{background-color:#242a33}.theme--dark.v-navigation-drawer,.theme--dark.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:transparent}.theme--dark.v-bottom-navigation{background-color:#242a33}.theme--dark.v-tabs-items{background-color:transparent}.theme--dark .cart-popup-contents,.theme--dark.shipping-options,.theme--dark.v-sheet,.theme--dark.v-tabs-items,.v-dialog .theme--dark.v-sheet{background-color:#242a33}.theme--dark.v-sheet.company-card,.theme--dark.v-sheet.company-list-card,.theme--dark.v-sheet.post-card,.theme--dark.v-sheet.product-card,.theme--dark.v-sheet.recent-news-card{background-color:#fff;border:7px solid #15191e}.theme--dark.v-card>.v-card__text,.theme--dark.v-card>.v-card__title{color:#000}.theme--dark.slide-up{background-color:#242a33}.appBarHeight{height:calc(60px + env(safe-area-inset-top))}.mobileNotch{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)!important;height:inherit!important}header.mobileNotch{max-height:100px}.v-card__subtitle,.v-card__text{line-height:1.975rem;letter-spacing:0!important}.v-application .body-1{letter-spacing:0!important}.v-application .primary{background-color:#6fa7e0;border-color:#6fa7e0}.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:90%}.v-dialog--scrollable>.v-sheet{overflow-y:scroll!important}@media screen and (max-width:600px){.v-bottom-sheet.v-dialog.v-bottom-sheet--inset{max-width:100%}}.admin-container{margin-top:0;margin-bottom:15px;padding-top:0;padding-left:0;padding-right:0}.avatar-elevation{border:4px solid #fff}.no-break{word-break:break-word}.v-application a{text-decoration:none;color:#6fa7e0!important}.missing-image{opacity:.25}.company-card .title,.post-card .name,.product-card .name{word-break:break-word;line-height:1.33em;letter-spacing:-.3px!important}.slide-left-enter-active,.slide-left-leave-active,.slide-right-enter-active,.slide-right-leave-active{transition-duration:.5s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.55,0,.1,1);overflow:hidden}.slide-left-enter,.slide-right-leave-active{opacity:0;transform:translate(2em)}.slide-left-leave-active,.slide-right-enter{opacity:0;transform:translate(-2em)}.phoneNumberInput .input-tel__input{border-right:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input,.phoneNumberInput .input-tel__input{font-size:16px!important;border-top:3px solid hsla(0,0%,46.3%,.05)!important;border-bottom:3px solid hsla(0,0%,46.3%,.05)!important}.phoneNumberInput .country-selector__input{border-left:3px solid hsla(0,0%,46.3%,.05)!important;height:62px!important}.phoneNumberInput .country-selector__toggle{top:20px!important}.phoneNumberInput .country-selector__country-flag{top:27px!important}.v-text-field--outlined fieldset{border-color:#f1f0ef!important}.country-selector.has-hint .country-selector__input,.country-selector.has-value .country-selector__input{padding-top:0!important}.alertBtn{font-size:1.45rem;font-weight:600;letter-spacing:1px;text-transform:capitalize;color:#fff}.borderButton,.borderInput{border:3px solid #f1f0ef;background-color:#f8f9fa}details>summary{font-size:17px;margin:10px 0;border-bottom:1px solid #fefefe;padding:15px 0 30px}.v-list--rounded.v-list--three-line .v-list-item,.v-list--rounded.v-list--three-line .v-list-item:before,.v-list--rounded.v-list--three-line .v-list-item>.v-ripple__container{border-radius:32px!important}.v-list--rounded .v-list-item,.v-list--rounded .v-list-item:before,.v-list--rounded .v-list-item>.v-ripple__container{border-radius:15px!important}.myshout .theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled){border:2px solid #f0f0ef;background:#f9f9f9;margin-bottom:15px}.myshout .v-list-item__title{font-size:1rem;font-weight:600}.myshout .v-list-item__subtitle{font-size:.9rem}.myshout .v-list-item__icon{width:80px;height:80px;border-radius:20px;text-align:center}.myshout .v-list-item__icon .v-icon{font-size:33px;width:100%}.v-application--is-ltr .myshout .v-list-item__action:first-child,.v-application--is-ltr .myshout .v-list-item__icon:first-child{margin-right:10px}.v-tooltip{display:none}.v-tooltip--attached{display:inline}.v-tooltip__content{background:rgba(97,97,97,.9);color:#fff;border-radius:.25rem;font-size:14px;line-height:22px;display:inline-block;padding:5px 16px;position:absolute;text-transform:none;width:auto;opacity:0;pointer-events:none}.v-tooltip__content.menuable__content__active{opacity:.9}.v-tooltip__content--fixed{position:fixed}.v-tooltip__content[class*=-active]{transition-timing-function:cubic-bezier(0,0,.2,1)}.v-tooltip__content[class*=enter-active]{transition-duration:.15s}.v-tooltip__content[class*=leave-active]{transition-duration:75ms}",""]),t.exports=r},906:function(t,e,n){"use strict";n(864)},907:function(t,e,n){var r=n(38)(!1);r.push([t.i,".isRecording{color:red!important}",""]),t.exports=r},926:function(t,e,n){var content=n(1007);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("1f778b10",content,!0,{sourceMap:!1})},933:function(t,e,n){"use strict";n.r(e);var r=n(693),o=n(163),c=n(2),l=(n(56),n(904),n(286)),h=n(52),f=n(287),d=n(289),v=n(856),m=n(3),y=n(29),_=n(28),w=Object(_.a)(h.a,f.a,d.a,v.a).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!(this.bottom||this.left||this.top||this.right),r=!1!==this.attach?e.offsetLeft:e.left,o=0;return this.top||this.bottom||n?o=r+e.width/2-content.width/2:(this.left||this.right)&&(o=r+(this.right?e.width:-content.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(o,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!1!==this.attach?e.offsetTop:e.top,r=0;return this.top||this.bottom?r=n+(this.bottom?e.height:-content.height)+(this.bottom?10:-10):(this.left||this.right)&&(r=n+e.height/2-content.height/2),this.nudgeTop&&(r-=parseInt(this.nudgeTop)),this.nudgeBottom&&(r+=parseInt(this.nudgeBottom)),!1===this.attach&&(r+=this.pageYOffset),"".concat(this.calcYOverflow(r),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(m.h)(this.maxWidth),minWidth:Object(m.h)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(m.s)(this,"activator",!0)&&Object(y.b)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=l.a.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")}),e.keydown=function(e){e.keyCode===m.x.esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var content=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[content]):content},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(c.a)(t,this.contentClass,!0),Object(c.a)(t,"menuable__content__active",this.isActive),Object(c.a)(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}}),x=(n(53),n(43),n(60),n(32),n(17),n(64),n(68),n(0)),k=(n(14),n(4),n(402),n(33),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(35),n(66),n(25),n(5));function I(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var O=Object(k.b)({name:"ChatRecordaudio",props:{chat:{type:Object,default:function(){return{}}}},setup:function(t){var e=Object(k.l)(),n=e.$capacitor,r=e.$db,o=e.$vuetify,c=Object(k.a)((function(){return f.user})),l=Object(k.q)(),h=l.dispatch,f=l.state,d=Object(k.i)("Press to record"),v=Object(k.i)(d.value),m=Object(k.i)(!1),y=Object(k.i)(null),_=Object(k.i)(120),w=new Set,T=function(){var t=Object(x.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m.value){t.next=2;break}return t.abrupt("return");case 2:return m.value=!0,t.prev=3,v.value="120",w.add(setInterval((function(){_.value--,v.value="".concat(_.value),_.value<=0&&O()}),1e3)),t.next=8,n.microphoneStart();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log("Error starting ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=Object(x.a)(regeneratorRuntime.mark((function e(){var l,f,x,audio;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.value=!1,v.value=d.value,_.value=120,l=I(w);try{for(l.s();!(f=l.n()).done;)x=f.value,w.delete(x),clearInterval(x)}catch(t){l.e(t)}finally{l.f()}return e.prev=5,e.next=8,n.microphoneStop();case 8:if(!(audio=e.sent)){e.next=22;break}return e.next=12,r.upload({path:"/CHATS/".concat(t.chat.id,"/").concat(c.value.data.uid,"-").concat(Date.now(),".wav"),data:audio.recordDataBase64,base64:!0});case 12:return y.value=e.sent,e.next=15,h("chats/messages/add",{chatId:t.chat.id,message:{message:"",owner:c.value.data.uid,audioUrl:y.value}});case 15:return e.prev=15,e.next=18,o.goTo("#bottomOfChat");case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(15);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(5),console.log("ERROR STOPPING",e.t1);case 27:case"end":return e.stop()}}),e,null,[[5,24],[15,20]])})));return function(){return e.apply(this,arguments)}}();return{buttonText:v,isRecording:m,timerCount:_,startRecording:T,stopRecording:O}}}),E=O,S=(n(906),n(37)),component=Object(S.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n(w,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var c=e.on,l=e.attrs;return[n(r.a,t._g(t._b({staticClass:"pa-0",attrs:{color:"transparent",elevation:"0",small:"",fab:""},on:{mousedown:t.startRecording,mouseleave:t.stopRecording,mouseup:t.stopRecording,touchstart:t.startRecording,touchend:t.stopRecording,touchcancel:t.stopRecording}},"v-btn",l,!1),c),[n(o.a,{class:{isRecording:t.isRecording}},[t._v("mdi-microphone")])],1)]}}])},[t._v(" "),n("span",[t._v(t._s(t.buttonText))])])],1)}),[],!1,null,null,null);e.default=component.exports},953:function(t,e,n){"use strict";n.r(e);var r=n(720),o=n(693),c=n(163),l=n(749),h=n(0),f=(n(14),n(5)),d=Object(f.b)({name:"ChatMessage",props:{color:{type:String,default:function(){return"primary"}},message:{type:Object,default:function(){return{}}},chat:{type:Object,default:function(){return{}}}},setup:function(t){var e=Object(f.q)(),n=e.state,r=e.dispatch,o=Object(f.l)(),c=o.$helper,l=o.$fire,d=Object(f.a)((function(){return n.user})),v=Object(f.a)((function(){return n.user.data.uid})),m=Object(f.i)(!1),y=Object(f.i)(!1),_=function(){var e=Object(h.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.value=!0,e.prev=1,document.getElementById("message-".concat(t.message.id)).style.display="none",e.next=5,r("chats/messages/remove",{chatId:t.chat.id,id:t.message.id});case 5:return e.next=7,l.storage.refFromURL(n).delete();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error deleting file",e.t0);case 12:return e.prev=12,y.value=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();return{user:d,userId:v,showMedia:m,loading:y,downloadFile:function(t){return c.downloadFile(t,"recording.wav")},deleteFile:_}}}),v=d,m=(n(902),n(37)),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("main",{staticClass:"mb-3"},[n("div",{class:t.message.owner!==t.userId?"d-flex":"d-flex flex-row-reverse"},[t.message.ownerData?n("ChatAvatar",{staticClass:"mx-2",attrs:{user:t.message.ownerData,color:t.message.owner===t.userId?"primary":"gray"}}):t._e(),t._v(" "),n("div",{staticClass:"white--text break-words rounded-lg py-2 px-3",class:t.message.owner===t.userId?"primary rounded-tr-0 ml-2":"rounded-tl-0 gray mr-2",staticStyle:{"max-width":"350px"}},[t.message.message?n("div",{staticClass:"mb-3"},[t._v("\n            "+t._s(t.message.message)+"\n          ")]):t._e(),t._v(" "),t.message.audioUrl?n("div",[t.message.audioExpired?n("div",{staticClass:"text-center caption font-italic py-4"},[t._v(t._s(t.$t("chat.audio_expired")))]):n("ChatPlayaudio",{attrs:{file:t.message.audioUrl}})],1):t._e(),t._v(" "),t.message.image?n("div",[n(r.a,{staticClass:"elevation-0",staticStyle:{"box-shadow":"none !important"},attrs:{"hide-overlay":!0,scrollable:!1,width:"100%","max-width":"700"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n(l.a,t._g(t._b({attrs:{src:""+t.message.image}},"v-img",o,!1),r))]}}],null,!1,1301520057),model:{value:t.showMedia,callback:function(e){t.showMedia=e},expression:"showMedia"}},[t._v(" "),n("div",{staticStyle:{"margin-bottom":"45%"}},[n(l.a,{staticClass:"elevation-12 rounded-lg mx-1",attrs:{src:""+t.message.image}}),t._v(" "),n("div",{staticClass:"text-center"},[n(o.a,{staticClass:"mt-n7",attrs:{color:"primary",fab:""},on:{click:function(e){t.showMedia=!t.showMedia}}},[n(c.a,[t._v("mdi-close")])],1)],1)],1)])],1):t._e(),t._v(" "),n("div",{staticClass:"caption"},[t._v("\n               "+t._s(t.message.created_at.toDate().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))+"\n            "),t.message.audioUrl?n("span",{staticClass:"pl-3"},[n(o.a,{staticClass:"pa-0 ma-0 white--text text-capitalize",attrs:{plain:"",text:"",small:""},on:{click:function(e){return t.downloadFile(t.message.audioUrl)}}},[t._v(t._s(t.$t("btn.download")))]),t._v(" "),n(o.a,{staticClass:"pa-0 ma-0 white--text text-capitalize",attrs:{loading:t.loading,plain:"",text:"",small:""},on:{click:function(e){return t.deleteFile(t.message.audioUrl)}}},[t._v(t._s(t.$t("btn.delete")))])],1):t._e()])])],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ChatAvatar:n(880).default,ChatPlayaudio:n(881).default})},954:function(t,e,n){"use strict";n.r(e);var r=n(723),o=n(693),c=n(163),l=n(0),h=(n(14),n(25),n(5)),f=Object(h.b)({name:"ChatUploadimage",props:{chat:{type:Object,default:function(){return{}}},currentUrl:{type:String,default:function(){return null}}},emits:["url"],setup:function(t,e){var n=e.emit,r=Object(h.l)(),o=r.$capacitor,c=r.$db,f=Object(h.i)(!1),d=Object(h.i)(!1),v=Object(h.i)(),m=function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){var r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.value=!0,d.value=!1,e.prev=2,e.next=5,o.cameraTakePicture(!1);case 5:return r=e.sent,e.next=8,c.upload({path:"/CHATS/".concat(t.chat.id,"/").concat((new Date).getTime(),".jpg"),data:r,base64:!0});case 8:(l=e.sent)&&(d.value=!0,v.value=l,n("url",v.value)),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:return e.prev=14,f.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,12,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(h.s)((function(){d.value=!!t.currentUrl})),{loadImageHandler:m,imageButtonLoading:f,imageAddedToMessage:d,imageMessageUrl:v}}}),d=f,v=n(37),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(o.a,{staticClass:"pa-0",attrs:{loading:t.imageButtonLoading,color:"transparent",elevation:"0",small:"",fab:""},on:{click:t.loadImageHandler}},[n(r.a,{attrs:{content:1,value:t.imageAddedToMessage,color:"green",overlap:""}},[n(c.a,[t._v("\n      mdi-image\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);