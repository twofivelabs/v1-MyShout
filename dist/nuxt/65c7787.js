(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{1148:function(t,e,n){"use strict";n.r(e);var r=n(0),o=(n(17),n(13)),l=n.n(o),c=n(3),d=n(731),v=Object(c.b)({name:"AdminPagesEdit",middleware:"admin",watch:{"$route.query":"$fetch"},setup:function(){var t=Object(c.r)(),e=t.state,n=t.dispatch,o=Object(c.m)(),v=o.$notify,m=o.$system,f=Object(c.q)(),_=Object(c.p)(),h=Object(c.i)(!0),x=Object(c.i)(e.user.data.role.isVendor),y=Object(c.i)(!0),k=d.a,w=Object(c.i)(null),form=Object(c.i)(l.a.cloneDeep(e.user.default));Object(c.n)(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h.value=!0,t.prev=1,!x.value){t.next=5;break}return f.push("/admin"),t.abrupt("return");case 5:if(!_.value.params.id){t.next=8;break}return t.next=8,n("user/getOne",_.value.params.id).then((function(t){!1!==t&&(form.value=l.a.cloneDeep(t))}));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),m.log({comp:"AdminUserEdit",msg:"useFetch",val:t.t0});case 13:return t.prev=13,h.value=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])}))));var O=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w.value.validate()){t.next=4;break}return t.next=4,j();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!form.value.username){t.next=17;break}return h.value=!0,t.prev=2,t.next=5,n("user/update",form.value);case 5:v.show({text:"Success"}),f.push("/admin/users"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),v.show({text:"Error, try again",color:"error"});case 12:return t.prev=12,h.value=!1,t.finish(12);case 15:t.next=18;break;case 17:v.show({text:"Error, username was not found",color:"error"});case 18:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(){return t.apply(this,arguments)}}();return{loading:h,valid:y,rules:k,form:form,formEl:w,validate:O}}}),m=v,f=n(43),_=n(45),h=n.n(_),x=n(688),y=n(710),k=n(746),w=n(775),O=n(728),j=n(711),C=n(75),V=n(858),A=n(800),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("AdminTitle"),t._v(" "),t.loading?n("div",[n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:""}})],1):n("v-form",{ref:"formEl",on:{submit:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"7"}},[n("v-text-field",{attrs:{label:"Username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),t._v(" "),n("v-text-field",{attrs:{label:"First Name"},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),t._v(" "),n("v-text-field",{attrs:{label:"Last Name"},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}}),t._v(" "),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"City"},model:{value:t.form.location.city,callback:function(e){t.$set(t.form.location,"city",e)},expression:"form.location.city"}})],1),t._v(" "),n("v-col",[n("v-text-field",{attrs:{label:"Country"},model:{value:t.form.location.country,callback:function(e){t.$set(t.form.location,"country",e)},expression:"form.location.country"}})],1)],1)],1),t._v(" "),n("v-col",{staticClass:"pa-6 rounded-lg",staticStyle:{"background-color":"rgba(0, 0, 0, 0.03)"},attrs:{cols:"12",sm:"5"}},[n("v-sheet",{staticClass:"pa-4 mb-6 caption",attrs:{elevation:"0",outlined:"",rounded:""}},[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",[n("tr",[n("td",[t._v("Is Admin")]),n("td",[t._v(t._s(t.form.role.isAdmin?t.form.role.isAdmin:"false"))])]),t._v(" "),t.form.created_at?n("tr",[n("td",[t._v("Created")]),n("td",[t._v(t._s(t.form.created_at))])]):t._e(),t._v(" "),n("tr",[n("td",[t._v("PIN")]),n("td",[t._v(t._s(t.form.securityPin))])]),t._v(" "),n("tr",[n("td",[t._v("Location Enabled")]),n("td",[t._v(t._s(t.form.permissions.location))])]),t._v(" "),n("tr",[n("td",[t._v("Share Location With Friends")]),n("td",[t._v(t._s(t.form.permissions.shareLocationWithFriends))])])])]},proxy:!0}])})],1)],1)],1),t._v(" "),n("v-row",[n("v-col",{staticClass:"text-center"},[n("v-btn",{staticClass:"text-center",attrs:{disabled:!t.valid,loading:t.loading,color:"success",elevation:"0"},on:{click:t.validate}},[t._v("\n          Save\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{AdminTitle:n(769).default}),h()(component,{VBtn:x.a,VCol:y.a,VContainer:k.a,VForm:w.a,VProgressLinear:O.a,VRow:j.a,VSheet:C.a,VSimpleTable:V.a,VTextField:A.a})},731:function(t,e,n){"use strict";n(33);e.a={email:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],password:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6||"Password must be at least 6 characters"}],phone:[function(t){return!!t||"Phone is required"},function(t){return t&&t.length>=10||"Phone must be valid"}],message:[function(t){return!!t||"Message is required"}],username:[function(t){return!!t||"Username is required"},function(t){return t&&t.length>2||"Username must be a least 3 characters"}],name:[function(t){return!!t||"Is required"}],title:[function(t){return!!t||"Is required"}]}},743:function(t,e,n){var content=n(759);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("2cc3538d",content,!0,{sourceMap:!1})},757:function(t,e,n){"use strict";n.r(e);var r=n(0),o=(n(56),n(68),n(33),n(63),n(17),n(3)),l=Object(o.b)({name:"AdminNavComp",setup:function(){var t=Object(o.r)().state,e=Object(o.p)(),n=Object(o.a)((function(){return t.user})),l=Object(o.i)(n.value.data.role.isAdmin),c=Object(o.i)(n.value.data.role.isVendor),d=Object(o.i)(n.value.data.role.isDriver),v=Object(o.i)([{to:"/admin/users",label:"Users"},{to:"/admin/pages",label:"Pages"},{to:"/admin/posts",label:"Posts"}]),m=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.value||(c.value?v.value=[{to:"/admin/products",label:"Products"},{to:"/admin/posts",label:"Posts"},{to:"/admin/shipping",label:"Shipping"},{to:"/admin/feedback",label:"Feedback"}]:d.value&&(v.value=[]));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var p=e.value.path;return"/admin"!==p&&"/admin/"!==p&&(!p.includes("/edit")&&!p.includes("/users"))};return Object(o.f)((function(){f(),m()})),{canAdd:f,navOptions:v,getRoute:function(){return e.value.fullPath.includes("edit")?e.value.fullPath.replace(e.value.params.id,""):"".concat(e.value.fullPath,"/edit")}}}}),c=l,d=n(43),v=n(45),m=n.n(v),f=n(688),_=n(257),h=n(160),x=n(100),y=n(907),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.canAdd()?n("v-btn",{staticClass:"mr-1 elevation-0",attrs:{to:t.getRoute(),color:"secondary"}},[t._v("\n    + Add\n  ")]):t._e(),t._v(" "),n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"primary",dark:"",elevation:"0"}},"v-btn",o,!1),r),[t._v("\n        Content\n      ")])]}}])},[t._v(" "),n("v-list",t._l(t.navOptions,(function(e,r){return n("v-list-item",{key:r,attrs:{to:e.to,nuxt:""}},[n("v-list-item-content",[n("v-list-item-title",[t._v("\n            "+t._s(e.label)+"\n          ")])],1)],1)})),1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:f.a,VList:_.a,VListItem:h.a,VListItemContent:x.a,VListItemTitle:x.c,VMenu:y.a})},758:function(t,e,n){"use strict";n(743)},759:function(t,e,n){var r=n(38)(!1);r.push([t.i,".v-breadcrumbs li{padding:0}",""]),t.exports=r},769:function(t,e,n){"use strict";n.r(e);n(33),n(77),n(63),n(49);var r={name:"AdminTitleComp",props:{title:{type:String,default:function(){return""}}},methods:{crumbs:function(){var t=this.$nuxt.$route.path.replace(/^\/|\/$/g,"").split("/");return 4===t.length&&t.splice(2,2),t}}},o=(n(758),n(43)),l=n(45),c=n.n(l),d=n(828),v=n(688),m=n(710),f=n(159),_=n(711),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{staticClass:"ma-0 pa-0"},[n("v-col",{staticClass:"ma-0 pa-0"},[n("v-btn",{staticClass:"px-1",attrs:{text:"",to:"/",small:""}},[n("v-icon",[t._v("\n          mdi-arrow-left\n        ")]),t._v("\n        Back To App\n      ")],1)],1)],1),t._v(" "),n("v-row",{staticClass:"align-center mb-3"},[n("v-col",{staticClass:"pa-0 ml-0",attrs:{cols:"5"}},[n("h4",{staticClass:"text-left text-xl-h5"},[n("v-breadcrumbs",{staticClass:"pa-2",staticStyle:{"text-transform":"capitalize"},attrs:{items:t.crumbs(),large:""},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return["admin"===r?n("nuxt-link",{attrs:{to:"/admin"}},[t._v(t._s(r))]):"edit"===r?n("span",[t._v(t._s(r))]):n("nuxt-link",{attrs:{to:"/admin/"+r}},[t._v(t._s(r))])]}},{key:"divider",fn:function(){return[n("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}],null,!0)})],1)]),t._v(" "),n("v-col",{staticClass:"text-right"},[n("AdminNav")],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{AdminNav:n(757).default}),c()(component,{VBreadcrumbs:d.a,VBtn:v.a,VCol:m.a,VIcon:f.a,VRow:_.a})}}]);