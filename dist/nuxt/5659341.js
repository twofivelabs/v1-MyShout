(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{827:function(t,e,n){"use strict";n.r(e);var r=n(0),c=(n(17),n(5),n(56),n(68),n(3)),o=Object(c.b)({name:"UserActionsSendamessagebtn",props:{user:{type:Object,default:function(){return{}}}},setup:function(t){var e=Object(c.m)().$system,n=Object(c.r)(),o=n.state,l=n.dispatch,d=Object(c.i)(!1),dialog=Object(c.i)(!1),f=Object(c.a)((function(){return o.user.data})),v=Object(c.q)(),m=Object(c.i)([]),h=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("chats/search",{field:"owner",operator:"==",term:f.value.uid}).then((function(e){if(e){var n=!1;return e.some((function(e){if(2===e.participants.length&&e.participants.includes(f.value.uid)&&e.participants.includes(t.user.id))return n=e,e})),n}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d.value=!0,n.next=4,h();case 4:if(!(c=n.sent)||!c.id){n.next=9;break}return n.next=8,v.push("/chats/chat/".concat(c.id));case 8:return n.abrupt("return");case 9:return m.value.push(f.value.uid),m.value.push(t.user.id),n.next=13,l("chats/add",{owner:f.value.uid,participants:m.value}).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===e){t.next=3;break}return t.next=3,v.push("/chats/chat/".concat(e.id));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),e.log({comp:"UserActionsSendamessagebtn",msg:"startChat",val:n.t0});case 18:return n.prev=18,d.value=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[0,15,18,21]])})));return function(){return n.apply(this,arguments)}}();return{loading:d,dialog:dialog,startChat:w}}}),l=o,d=n(43),f=n(45),v=n.n(f),m=n(159),h=n(160),w=n(100),j=n(137),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.startChat}},[t._t("default",(function(){return[n("v-list-item",{staticClass:"borderButton rounded-lg mb-2"},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-message-text")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("Send a message")])],1)],1)]}))],2)}),[],!1,null,null,null);e.default=component.exports;v()(component,{VIcon:m.a,VListItem:h.a,VListItemContent:w.a,VListItemIcon:j.a,VListItemTitle:w.c})}}]);