(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{1309:function(e,t,r){"use strict";r.r(t);var n=r(675),l=r(1049),o=r(0),c=(r(15),r(4),r(21),r(14),r(7)),d=Object(c.b)({name:"AdminUsersMap",middleware:"admin",setup:function(){var e=Object(c.q)(),t=e.state,r=e.dispatch,n=Object(c.l)(),l=n.$system,d=n.$helper,m=n.$capacitor,f=n.$vuetify,y=Object(c.i)(!0),v=Object(c.i)(null),T=Object(c.i)([]),w=Object(c.a)((function(){return t.user.gps})),h=Object(c.a)((function(){return t.user})),x=Object(c.i)([]),O=Object(c.i)([]),_=Object(c.i)(!1),j=Object(c.i)(!1),k=Object(c.i)(null),A=Object(c.i)(!1),C=Object(c.i)(!1),R=Object(c.i)(!1),P=Object(c.i)({});m.positionPermissions(),Object(c.m)(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:case"end":return e.stop()}}),e)}))));var $=function(e){var t=e.title,title=void 0===t?"Marker":t,r=e.label,label=void 0===r?null:r,n=e.lat,l=void 0===n?null:n,o=e.lng,c=void 0===o?null:o,d=e.content,content=void 0===d?null:d,m=e.iconUrl,f=void 0===m?"MapIconScaled.svg":m,y=e.iconX,v=void 0===y?30:y,T=e.iconY,w=void 0===T?30:T,h=e.id,x=void 0===h?null:h;P.value[x]=new window.google.maps.Marker({map:k.value,position:new window.google.maps.LatLng(l,c),title:title,label:label,icon:{url:"map/".concat(f),scaledSize:new window.google.maps.Size(v,w),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(v/2,w/2)}});var O='<div id="content">'.concat(content,"</div>"),_=new window.google.maps.InfoWindow({content:O,maxWidth:200});P.value[x].addListener("click",(function(){_.open({anchor:P.value[x],map:k.value,shouldFocus:!1})}))},M=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.value=!0,e.prev=1,e.next=4,r("user/getAll",{where:{},limit:500,order:{by:"username",direction:"asc"}}).then((function(e){!1!==e&&(T.value=e)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),l.log({comp:"AdminUsersMap",msg:"Not able to get users for map",val:e.t0});case 9:return e.prev=9,y.value=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(){return e.apply(this,arguments)}}(),I=function(e){var t,r=e.lat,n=void 0===r?null:r,l=e.lng,o=void 0===l?null:l;n&&o&&(t=new window.google.maps.LatLng(n,o),k.value.panTo(t))},S=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.value&&k.value.addListener("dragend",Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.value=[k.value.getCenter().lat(),k.value.getCenter().lng()],console.log("STICKY: Your dragging the map around, new center is",x.value);case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.sleep(1500);case 2:k.value=new window.google.maps.Map(document.getElementById("map"),{zoom:13,mapTypeId:window.google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0}),window.currentMap=k.value,h.value.gps.lat?(console.log("Init map with a center of",h.value.gps.lat),I({lat:h.value.gps.lat,lng:h.value.gps.lng})):console.log("STICKY: not able to center map with empty coords"),f.theme.dark?k.value.setOptions({styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"geometry",stylers:[{color:"#242A33"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242A33"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#666666"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#666666"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#abc6b4"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#abc6b4"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#666666"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#666666"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#999999"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#b5b5b5"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#b5b5b5"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b5b5b5"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]}):k.value.setOptions({styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"geometry",stylers:[{color:"#F6F8FA"}]},{elementType:"labels.text.stroke",stylers:[{color:"#F6F8FA"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#666666"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#666666"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#abc6b4"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#abc6b4"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#dddddd"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#dddddd"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#999999"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#b5b5b5"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#b5b5b5"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b5b5b5"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#d4e7f9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#d4e7f9"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#d4e7f9"}]}]}),_.value=!0,j.value=!0;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.f)(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.value=!0;try{w.value&&w.value.lat||m.watchPosition()}catch(e){l.log({comp:"MapPage",msg:"Not able to get position",val:e})}finally{y.value=!1}case 2:case"end":return e.stop()}}),e)})))),Object(c.g)((function(){m.clearWatchPosition()})),Object(c.s)(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R.value){e.next=13;break}if(!window.google||!0===_.value||k.value){e.next=13;break}return e.next=4,F();case 4:return e.next=6,S();case 6:if(!h.value.gps||!h.value.gps.lat){e.next=9;break}return e.next=9,$({id:h.value.data.uid,lat:h.value.gps.lat,lng:h.value.gps.lng,title:"You",content:"You"});case 9:if(console.log("STICKY: INIT MAP DONE"),!(!C.value&&T.value&&T.value.length>0)){e.next=13;break}return e.next=13,void((t=T.value)&&(C.value=!0,t.forEach((function(e){e.gps&&e.gps.lat&&e.permissions.shareLocationWithFriends&&$({id:e.id,lat:e.gps.lat,lng:e.gps.lng,iconUrl:"FriendIcon.svg",title:"".concat(e.first_name?e.first_name:e.username),content:'<div class="d-flex align-center"><v-img src="'.concat(e.photoURL,'" /><h4>').concat(e.first_name?e.first_name:e.username,"</h4> </div>")})}))));case 13:case"end":return e.stop()}var t}),e)})))),Object(c.r)(w,(function(e,t){var marker,r,n;console.log("STICKY: WATCH GPS",w.value,t),parseFloat(e.lat)!==t.lat&&w.value&&!0===_.value&&(marker=P[h.value.data.uid],r=w.value.lat,n=w.value.lng,marker&&marker.setPosition(new window.google.maps.LatLng(r,n)))})),{loading:y,friends:T,googleMapEl:v,gps:w,slider:O,mapError:A,user:h,centerOn:I}}}),m=d,f=r(58),component=Object(f.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(l.a,{staticClass:"admin-container"},[r("AdminTitle"),e._v(" "),r(n.a,{staticClass:"mt-3 mb-2 mx-2 elevation-0 primary white--text",attrs:{to:"/admin/users"}},[e._v(e._s(e.$t("view_on_list")))]),e._v(" "),r("div",{ref:"googleMapEl",staticStyle:{width:"calc(100vw)",height:"calc(100vh - 275px)"},attrs:{id:"map"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{AdminTitle:r(811).default})},773:function(e,t,r){var content=r(807);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(52).default)("fb13411c",content,!0,{sourceMap:!1})},803:function(e,t,r){"use strict";r.r(t);var n=r(675),l=r(273),o=r(1141),c=r(1099),d=r(692),m=r(750),f=r(0),y=(r(55),r(31),r(68),r(53),r(14),r(7)),v=Object(y.b)({name:"AdminNavComp",setup:function(){var e=Object(y.q)().state,t=Object(y.o)(),r=Object(y.a)((function(){return e.user})),n=Object(y.i)(r.value.data.role.isAdmin),l=Object(y.i)(r.value.data.role.isVendor),o=Object(y.i)(r.value.data.role.isDriver),c=Object(y.i)([{to:"/admin/users",label:"Users"},{to:"/admin/pages",label:"Pages"},{to:"/admin/posts",label:"Posts"}]),d=function(){var e=Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.value||(l.value?c.value=[{to:"/admin/products",label:"Products"},{to:"/admin/posts",label:"Posts"},{to:"/admin/shipping",label:"Shipping"},{to:"/admin/feedback",label:"Feedback"}]:o.value&&(c.value=[]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var p=t.value.path;return"/admin"!==p&&"/admin/"!==p&&(!p.includes("/edit")&&!p.includes("/users"))};return Object(y.f)((function(){m(),d()})),{canAdd:m,navOptions:c,getRoute:function(){return t.value.fullPath.includes("edit")?t.value.fullPath.replace(t.value.params.id,""):"".concat(t.value.fullPath,"/edit")}}}}),T=v,w=r(58),component=Object(w.a)(T,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.canAdd()?r(n.a,{staticClass:"mr-1 elevation-0",attrs:{to:e.getRoute(),color:"secondary",small:""}},[e._v("\n    + "+e._s(e.$t("btn.add"))+"\n  ")]):e._e(),e._v(" "),r(m.a,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on,o=t.attrs;return[r(n.a,e._g(e._b({attrs:{color:"primary",dark:"",elevation:"0",small:""}},"v-btn",o,!1),l),[e._v("\n        "+e._s(e.$t("btn.content"))+"\n      ")])]}}])},[e._v(" "),r(o.a,[r(c.a,{attrs:{to:"/admin",nuxt:"",color:"primary"}},[r(d.a,[r(d.c,[e._v("\n            Dashboard\n          ")])],1)],1),e._v(" "),e._l(e.navOptions,(function(t,n){return r(c.a,{key:n,attrs:{to:t.to,nuxt:""}},[r(d.a,[r(d.c,[e._v("\n            "+e._s(t.label)+"\n          ")])],1)],1)}))],2)],1),e._v(" "),r(n.a,{staticClass:"elevation-0",attrs:{small:""},on:{click:function(t){return e.$nuxt.refresh()}}},[r(l.a,[e._v("mdi-refresh")])],1)],1)}),[],!1,null,null,null);t.default=component.exports},806:function(e,t,r){"use strict";r(773)},807:function(e,t,r){var n=r(51)(!1);n.push([e.i,"\n.v-breadcrumbs li {\n  padding: 0;\n}\n",""]),e.exports=n},811:function(e,t,r){"use strict";r.r(t);var n=r(675),l=r(273),o=r(805),c=(r(56),r(31),r(53),{name:"AdminTitleComp",props:{title:{type:String,default:function(){return""}}},methods:{crumbs:function(){var e=this.$nuxt.$route.path.replace(/^\/|\/$/g,"").split("/");return 4===e.length&&e.splice(2,2),e},logout:function(){this.$store.dispatch("user/signOut")}}}),d=(r(806),r(58)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"px-2 pt-1 elevation-3 primary lighten-5"},[r("div",{staticClass:"d-flex align-center mb-5"},[r(n.a,{staticClass:"px-1",attrs:{text:"",to:"/",color:"gray",small:""}},[r(l.a,[e._v("mdi-arrow-left")]),e._v(" To App\n    ")],1),e._v(" "),r(o.a),e._v(" "),r(n.a,{staticClass:"px-1",attrs:{text:"",color:"gray",small:""},on:{click:function(t){return e.$store.dispatch("users/signOut")}}},[e._v("\n      Logout "),r(l.a,[e._v("mdi-exit-to-app")])],1)],1),e._v(" "),r("div",{staticClass:"d-flex align-center"},[1===e.crumbs().length?r(n.a,{staticClass:"font-weight-black gray--text",attrs:{to:"/admin",text:"",plain:""}},[e._v("Admin")]):e._e(),e._v(" "),e.crumbs()[1]?r(n.a,{staticClass:"font-weight-black gray--text",attrs:{to:"/admin/"+e.crumbs()[1],text:"",plain:""}},[e._v(e._s(e.crumbs()[1]))]):e._e(),e._v(" "),r(o.a),e._v(" "),r("AdminNav")],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{AdminNav:r(803).default})}}]);