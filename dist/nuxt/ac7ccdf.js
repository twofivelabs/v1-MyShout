(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1094:function(e,t,n){"use strict";n.r(t);var r=n(675),l=n(273),o=n(0),c=(n(14),n(15),n(4),n(7)),d=Object(c.b)({name:"ChatUploadfile",props:{chat:{type:Object,default:function(){return{}}},currentUrl:{type:String,default:function(){return null}}},emits:["url"],setup:function(e,t){var n=t.emit,r=Object(c.l)().$db,l=Object(c.i)(!1),d=Object(c.i)(!1),f=Object(c.i)(null),v=Object(c.i)(null),h=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onerror=function(e){return n(e)},r.readAsDataURL(e)}))},U=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(o){var c,U,path,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("KYLE: handleUpload",o),l.value=!0,t.prev=2,c=o.target.files[0],console.log("KYLE: File",c),c){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,h(c);case 9:return U=t.sent,console.log("KYLE: FileData",U),path="/CHATS/".concat(e.chat.id,"/").concat((new Date).getTime(),".").concat(c.type.split("/")[1]),t.next=14,r.upload({path:path,data:U});case 14:(m=t.sent)&&(d.value=!0,f.value=m,n("url",f.value)),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),console.log("KYLE: Error Uploading File",t.t0);case 21:return t.prev=21,l.value=!1,v.value.value=null,t.finish(21);case 25:case"end":return t.stop()}}),t,null,[[2,18,21,25]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.s)((function(){d.value=!!e.currentUrl})),{beginUpload:function(){v.value.click()},handleUpload:U,fileInput:v,isUploading:l,uploadComplete:d,uploadUrl:f}}}),f=d,v=n(58),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(r.a,{staticClass:"pa-0",attrs:{loading:e.isUploading,disabled:!!e.uploadUrl,color:"transparent",elevation:"0",small:"",fab:""},on:{click:e.beginUpload}},[n("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"*"},on:{change:e.handleUpload}}),e._v(" "),n(l.a,[e._v("\n    mdi-file\n  ")])],1)}),[],!1,null,null,null);t.default=component.exports}}]);