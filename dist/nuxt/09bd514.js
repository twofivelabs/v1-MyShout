(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{1035:function(e,t,n){"use strict";n.r(t);var r=n(282),o=n(760),c=n(174),l=n(783),d=n(0),m=(n(16),n(52),n(6)),v=Object(m.b)({name:"UserProfileavatar",props:{size:{type:Number,default:function(){return 40}},color:{type:String,default:function(){return"black"}},profile:{type:Object,default:function(){return null}}},setup:function(){var e=Object(m.i)(!1),t=Object(m.q)(),n=t.getters,r=t.state,o=t.dispatch,c=Object(m.l)(),l=c.$capacitor,v=c.$db,f=c.$notify,h=c.$system,_=c.i18n,x=Object(m.a)((function(){return r.user.data})),y=Object(m.a)((function(){return n["user/isLoggedIn"]})),w=Object(m.a)((function(){return r.user.profile.initial})),O=Object(m.a)((function(){return r.user.profile.photoURL})),C=Object(m.a)((function(){return r.user.profile.isOnline.status})),k=function(){var t=Object(d.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.value=!0,t.next=4,l.cameraTakePicture();case 4:return n=t.sent,t.next=7,v.upload({path:"/USERS/".concat(x.value.uid,"/profile.jpg"),data:n,base64:!0});case 7:return r=t.sent,t.next=10,o("user/updateField",{photoURL:r});case 10:t.sent?f.show({text:_.t("notify.success"),color:"success"}):f.show({text:_.t("notify.error_try_again"),color:"error"}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),h.log({comp:"UserProfileavatar",msg:"takePhoto",val:t.t0});case 17:return t.prev=17,e.value=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,14,17,20]])})));return function(){return t.apply(this,arguments)}}();return{isLoggedIn:y,loading:e,initial:w,photo:O,onlineStatus:C,takePhoto:k}}}),f=v,h=n(42),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline-block"},on:{click:e.takePhoto}},[n(o.a,{attrs:{top:"",dot:"",overlap:"",bordered:"","offset-x":"6","offset-y":"6",color:"online"===e.onlineStatus?"myshoutGreen":"myshoutRed"}},[n(r.a,{staticClass:"rounded-lg",attrs:{color:e.color,size:e.size,rounded:""}},[e.loading?n(c.a,{attrs:{color:"white"}},[e._v("\n        mdi-autorenew mdi-spin\n      ")]):e._e(),e._v(" "),e.isLoggedIn?e.isLoggedIn&&e.photo?n(l.a,{attrs:{src:e.photo}}):e.isLoggedIn&&!e.loading?n("span",{staticClass:"white--text headline"},[e._v(e._s(e.initial))]):e._e():n(c.a,{attrs:{color:"white"}},[e._v("\n        mdi-account\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},1263:function(e,t,n){"use strict";n.r(t);var r=n(739),o=n(790),c=n(809),l=n(174),d=n(806),m=n(826),v=n(0),f=(n(62),n(16),n(6)),h=n(771),_=n(99),x=Object(f.b)({name:"AuthUsername",layout:"onboarding",middleware:"authenticated",setup:function(){var e=Object(f.l)(),t=e.$config,n=e.$helper,r=e.$notify,o=e.$services,c=e.$capacitor,l=e.i18n,d=Object(f.q)(),m=d.state,x=d.dispatch,y=Object(f.a)((function(){return m.user.profile})),w=Object(f.i)(!1),O=h.a,C=Object(f.i)(6),k=Object(f.i)(),j=Object(f.i)(),form=Object(f.i)({username:"",email:""});Object(f.r)(y.value,(function(e){e&&(console.log("KYLE",e),e.username?e.email||(C.value=2):C.value=1)}));var $=function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.value=!0,e.next=3,k.value.validate();case 3:if(!e.sent){e.next=15;break}return t=n.slugify(form.value.username,""),e.next=8,P(t);case 8:if(!e.sent){e.next=12;break}r.show({text:l.t("notify.username_in_use"),color:"red"}),e.next=15;break;case 12:return e.next=14,x("user/updateField",{username:t});case 14:C.value=y.value.email?3:2;case 15:w.value=!1;case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/search",{field:"username",operator:"==",term:t,limit:3});case 2:return n=e.sent,e.abrupt("return",n.length>0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.value=!0,e.next=3,j.value.validate();case 3:if(!e.sent){e.next=15;break}return t=form.value.email,e.next=8,S(t);case 8:if(!e.sent){e.next=12;break}r.show({text:l.t("onboarding.error_email_in_use"),color:"red"}),e.next=15;break;case 12:return e.next=14,x("user/updateField",{email:t});case 14:C.value=3;case 15:w.value=!1;case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/search",{field:"email",operator:"==",term:t,limit:3});case 2:return n=e.sent,e.abrupt("return",n.length>0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.value=!0,setTimeout(Object(v.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.a.checkPermissions(),e.next=3,c.positionPermissions();case 3:return e.next=5,o.getSetUserGeneralLocation();case 5:return e.next=7,x("user/updateField",{permissions:{location:!0}});case 7:C.value=5,w.value=!1;case 9:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.n)({title:"".concat(t.appTitle),meta:[{hid:"description",name:"description",content:"Discover ".concat(t.appTitle)}]}),{loading:w,user:y,step:C,rules:O,form:form,formUsername:k,formEmail:j,validateUsername:$,validateEmail:R,setLocationPermissions:U,setNotificationPermissions:function(){w.value=!0,setTimeout(Object(v.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.pushNotificationsRequestAndRegisterPermissions().then(Object(v.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.pushNotificationsListeners();case 2:return e.next=4,x("user/updateField",{permissions:{notifications:!0}});case 4:case"end":return e.stop()}}),e)}))));case 2:return e.next=4,c.microphonePermissions();case 4:w.value=!1,C.value=6;case 6:case"end":return e.stop()}}),e)}))),1500)}}},head:{}}),y=x,w=n(42),component=Object(w.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(o.a,{staticClass:"ma-0 pa-0 lightgray",attrs:{height:"100vh",fluid:""}},[n("div",{staticClass:"d-flex flex-column justify-space-between align-center",staticStyle:{height:"100vh"}},[n("div",{staticClass:"d-flex flex-column justify-space-around align-center",staticStyle:{width:"100vw",height:"23vh"}},[n("OnboardingCardheader",{staticClass:"gray--text mx-14",attrs:{h1:e.$t("onboarding.profile_setup_sub")}})],1),e._v(" "),n("div",{directives:[{name:"anime",rawName:"v-anime",value:{translateY:[200,0],opacity:[0,1],easing:"easeInOutQuad",duration:600,delay:600},expression:"{\n      translateY: [200, 0],\n      opacity: [0, 1],\n      easing: 'easeInOutQuad',\n      duration: 600,\n      delay:600\n    }"}],staticClass:"white pa-10 rounded-t-xl rounded-b-0 elevation-13",staticStyle:{width:"100vw","max-width":"700px",height:"77vh"}},[1===e.step?n("div",[n("h5",{staticClass:"text-h5 text-center mb-6"},[e._v(e._s(e.$t("onboarding.username_sub")))]),e._v(" "),n(c.a,{ref:"formUsername",on:{submit:function(t){return t.preventDefault(),e.validateUsername.apply(null,arguments)}}},[n(m.a,{attrs:{rules:e.rules.username,label:e.$t("form.username"),"prepend-inner-icon":"mdi-at",required:"",outlined:"","background-color":"#f8f9fa"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),e._v(" "),n("div",{staticClass:"text-center mt-15"},[n(r.a,{staticClass:"white--text",attrs:{loading:e.loading,color:"primary",fab:"",dark:"","x-large":"",type:"submit"}},[n(l.a,[e._v("mdi-arrow-right")])],1)],1)],1)],1):2===e.step?n("div",[n("h5",{staticClass:"text-h5 text-center mb-6"},[e._v(e._s(e.$t("onboarding.email_sub")))]),e._v(" "),n(c.a,{ref:"formEmail",on:{submit:function(t){return t.preventDefault(),e.validateEmail.apply(null,arguments)}}},[n(m.a,{attrs:{rules:e.rules.email,label:e.$t("form.email"),"prepend-inner-icon":"mdi-at",required:"",outlined:"","background-color":"#f8f9fa"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),n("div",{staticClass:"text-center mt-15"},[n(r.a,{staticClass:"white--text",attrs:{loading:e.loading,color:"primary",fab:"",dark:"","x-large":"",type:"submit"}},[n(l.a,[e._v("mdi-arrow-right")])],1)],1)],1)],1):3===e.step?n("div",{staticClass:"text-center"},[n("h5",{staticClass:"text-h5 text-center mb-6"},[e._v(e._s(e.$t("onboarding.add_photo_sub")))]),e._v(" "),n("UserProfileavatar",{staticClass:"mt-5 mx-auto",attrs:{user:e.user,size:120}}),e._v(" "),n("div",{staticClass:"text-center mt-15"},[n(r.a,{staticClass:"white--text",attrs:{loading:e.loading,color:"primary",fab:"",dark:"","x-large":"",type:"submit"},on:{click:function(t){e.step=4}}},[n(l.a,[e._v("mdi-arrow-right")])],1)],1)],1):4===e.step?n("div",{staticClass:"text-center"},[n("h5",{staticClass:"text-h5 text-center mb-6"},[e._v(e._s(e.$t("onboarding.enable_location_permissions_heading")))]),e._v(" "),n("h5",{staticClass:"text-h5 text-center mb-6"},[e._v("\n          "+e._s(e.$t("onboarding.enable_location_permissions_sub"))+"\n        ")]),e._v(" "),n("h6",{staticClass:"primary--text text-h6 text-center mb-6"},[e._v("\n          "+e._s(e.$t("onboarding.location_requirements_1"))+"\n        ")]),e._v(" "),n("h6",{staticClass:"primary--text text-h6 text-center mb-6"},[e._v("\n          "+e._s(e.$t("onboarding.location_requirements_3"))+"\n        ")]),e._v(" "),e.user.permissions.location?n(l.a,{directives:[{name:"anime",rawName:"v-anime",value:{translateY:[100,0],duration:1200},expression:"{\n              translateY: [100, 0],\n              duration: 1200\n            }"}],staticClass:"mt-7",attrs:{color:"green",size:"120"}},[e._v("\n          mdi-checkbox-marked-circle-outline\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"text-center mt-15"},[n("OnboardingPrivacypolicy",{attrs:{showTermsText:!1}}),e._v(" "),n(r.a,{staticClass:"white--text mt-10",attrs:{loading:e.loading,color:"primary",dark:"","x-large":"",type:"submit"},on:{click:e.setLocationPermissions}},[n(l.a,[e._v("mdi-check")]),e._v("\n            "+e._s(e.$t("btn.yes_i_agree"))+"\n          ")],1)],1)],1):5===e.step?n("div",{staticClass:"text-center"},[n("h5",{staticClass:"text-h5 text-center mb-6"},[e._v("\n          "+e._s(e.$t("onboarding.enable_notification_permissions"))+"\n        ")]),e._v(" "),n("h6",{staticClass:"primary--text text-h6 text-center mb-6"},[e._v("\n          "+e._s(e.$t("onboarding.notification_requirements_1"))+"\n        ")]),e._v(" "),n("h6",{staticClass:"primary--text text-h6 text-center mb-6"},[e._v("\n          "+e._s(e.$t("onboarding.notification_requirements_2"))+"\n        ")]),e._v(" "),n("h6",{staticClass:"primary--text text-h6 text-center mb-6"},[e._v("\n          "+e._s(e.$t("onboarding.notification_requirements_3"))+"\n        ")]),e._v(" "),n("h6",{staticClass:"primary--text text-h6 text-center mb-6"},[n(l.a,[e._v("mdi-microphone")]),e._v(" "+e._s(e.$t("onboarding.notification_requirements_4"))+"\n        ")],1),e._v(" "),e.user.permissions.notifications?n(l.a,{directives:[{name:"anime",rawName:"v-anime",value:{translateY:[100,0],duration:600},expression:"{\n              translateY: [100, 0],\n              duration: 600\n            }"}],staticClass:"mt-7",attrs:{color:"green",size:"120"}},[e._v("\n          mdi-checkbox-marked-circle-outline\n        ")]):e._e(),e._v(" "),n("div",{staticClass:"text-center mt-15"},[n("OnboardingPrivacypolicy",{attrs:{showTermsText:!1}}),e._v(" "),n(r.a,{staticClass:"white--text mt-10",attrs:{loading:e.loading,color:"primary",dark:"","x-large":"",type:"submit"},on:{click:e.setNotificationPermissions}},[n(l.a,[e._v("mdi-check")]),e._v("\n            "+e._s(e.$t("btn.yes_i_agree"))+"\n          ")],1)],1)],1):6===e.step?n("div",{staticClass:"text-center"},[n("div",[n("h5",{staticClass:"text-h5 text-center"},[e._v(e._s(e.$t("onboarding.thank_you_sub")))])]),e._v(" "),n(d.a),e._v(" "),n(r.a,{staticClass:"white--text mt-15",attrs:{color:"primary",fab:"",dark:"","x-large":"",to:"/"}},[n(l.a,[e._v("mdi-arrow-right")])],1)],1):n("div",[e._v(e._s(e.step))])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{OnboardingCardheader:n(797).default,UserProfileavatar:n(1035).default,OnboardingPrivacypolicy:n(792).default})},771:function(e,t,n){"use strict";n(29);t.a={email:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=6||"Password must be at least 6 characters"}],phone:[function(e){return!!e||"Phone is required"},function(e){return e&&e.length>=10||"Phone must be valid"}],message:[function(e){return!!e||"Message is required"}],username:[function(e){return!!e||"Username is required"},function(e){return e&&e.length>2||"Username must be a least 3 characters"}],name:[function(e){return!!e||"Is required"}],title:[function(e){return!!e||"Is required"}]}},792:function(e,t,n){"use strict";n.r(t);var r=n(739),o=n(763),c=n(762),l=n(295),d=n(0),m=(n(16),n(6)),v=Object(m.b)({name:"OnboardingPrivacypolicy",props:{showTermsText:{type:Boolean,default:function(){return!0}}},setup:function(){var dialog=Object(m.i)(!1),e=Object(m.i)(!1),t=Object(m.q)().dispatch,n=Object(m.l)().error,r=Object(m.i)(),o=function(){var o=Object(d.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.value=!0,o.prev=1,o.next=4,t("pages/getOne","privacy").then((function(e){!1!==e&&(r.value=e)}));case 4:o.next=9;break;case 6:o.prev=6,o.t0=o.catch(1),n({statusCode:404});case 9:return o.prev=9,e.value=!1,o.finish(9);case 12:case"end":return o.stop()}}),o,null,[[1,6,9,12]])})));return function(){return o.apply(this,arguments)}}();return{dialog:dialog,loading:e,loadPage:o,page:r}}}),f=v,h=n(42),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(l.a,{attrs:{width:"500",scrollable:!0},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("div",{staticClass:"text-center grey--text caption lighten-1"},[e.showTermsText?n("div",[e._v(e._s(e.$t("onboarding.terms_text")))]):e._e(),e._v(" "),n("div",e._g(e._b({on:{click:e.loadPage}},"div",o,!1),r),[e._v(e._s(e.$t("onboarding.terms_btn"))+".")])])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n(o.a,{staticClass:"pa-2 pt-6 rounded-xl elevation-13"},[n(c.b,[e.loading?n("div",[e._v("\n        "+e._s(e.$t("is_loading"))+"\n      ")]):e.page?n("div",[n("h4",{staticClass:"text-h4 text-center"},[e._v(e._s(e.$lang.get(e.page,"title")))]),e._v(" "),e.page.content?n("div",[e.page.isMarkdown?n("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.$md.render(e.$lang.get(e.page,"content")),expression:"$md.render($lang.get(page, 'content'))"}],staticClass:"mdDoc mt-5"}):n("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.$lang.get(e.page,"content"),expression:"$lang.get(page, 'content')"}],staticClass:"mdDoc mt-5"})]):e._e()]):e._e()]),e._v(" "),n(c.a,{staticClass:"justify-center"},[n(r.a,{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n        "+e._s(e.$t("btn.close"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},797:function(e,t,n){"use strict";n.r(t);var r=n(763),o=n(762),c=n(174),l=n(758),d=n(6),m=Object(d.b)({name:"OnboardingCardheader",props:{h1:{type:String,default:function(){return""}},h2:{type:String,default:function(){return""}},prependIcon:{type:String,default:null}},setup:function(){return{}}}),v=n(42),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(r.a,{directives:[{name:"anime",rawName:"v-anime",value:{translateY:[100,0],duration:1200,opacity:[0,100],easing:"easeInOutQuad"},expression:"{\n      translateY: [100, 0],\n      duration: 1200,\n      opacity: [0, 100],\n      easing: 'easeInOutQuad'\n    }"}],staticClass:"rounded-t-xl",staticStyle:{"box-shadow":"none !important"},attrs:{color:"transparent",height:""}},[n(l.a,{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[n(o.b,{staticClass:"text-center"},[e.h1?n("h1",{staticClass:"display-3 font-weight-bold mb-1 gray--text"},[e.prependIcon?n(c.a,[e._v("\n          "+e._s(e.prependIcon)+"\n        ")]):e._e(),e._v("\n        "+e._s(e.h1)+"\n      ")],1):e._e(),e._v(" "),e.h2?n("h2",{staticClass:"text-h3 gray--text"},[e._v(e._s(e.h2))]):e._e()])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);