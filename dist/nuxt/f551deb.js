(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{1158:function(t,e,n){"use strict";n.r(e);var r=n(695),o=n(718),l=n(753),c=n(784),d=n(737),m=n(717),f=n(74),v=n(865),_=n(807),h=n(0),x=(n(16),n(13)),k=n.n(x),y=n(3),O=n(738),j=Object(y.b)({name:"AdminPagesEdit",middleware:"admin",watch:{"$route.query":"$fetch"},setup:function(){var t=Object(y.r)(),e=t.state,n=t.dispatch,r=Object(y.m)(),o=r.$notify,l=r.$system,c=Object(y.q)(),d=Object(y.p)(),m=Object(y.i)(!0),f=Object(y.i)(e.user.data.role.isVendor),v=Object(y.i)(!0),_=O.a,x=Object(y.i)(null),form=Object(y.i)(k.a.cloneDeep(e.user.default));Object(y.n)(Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m.value=!0,t.prev=1,!f.value){t.next=5;break}return c.push("/admin"),t.abrupt("return");case 5:if(!d.value.params.id){t.next=8;break}return t.next=8,n("user/getOne",d.value.params.id).then((function(t){!1!==t&&(form.value=k.a.cloneDeep(t))}));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),l.log({comp:"AdminUserEdit",msg:"useFetch",val:t.t0});case 13:return t.prev=13,m.value=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])}))));var j=function(){var t=Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x.value.validate()){t.next=4;break}return t.next=4,C();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!form.value.username){t.next=17;break}return m.value=!0,t.prev=2,t.next=5,n("user/update",form.value);case 5:o.show({text:"Success"}),c.push("/admin/users"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),o.show({text:"Error, try again",color:"error"});case 12:return t.prev=12,m.value=!1,t.finish(12);case 15:t.next=18;break;case 17:o.show({text:"Error, username was not found",color:"error"});case 18:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(){return t.apply(this,arguments)}}();return{loading:m,valid:v,rules:_,form:form,formEl:x,validate:j}}}),C=j,w=n(43),component=Object(w.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(l.a,[n("AdminTitle"),t._v(" "),t.loading?n("div",[n(d.a,{staticClass:"mb-0",attrs:{indeterminate:""}})],1):n(c.a,{ref:"formEl",on:{submit:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}}},[n(m.a,[n(o.a,{attrs:{cols:"12",sm:"7"}},[n(_.a,{attrs:{label:"Username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),t._v(" "),n(_.a,{attrs:{label:"First Name"},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),t._v(" "),n(_.a,{attrs:{label:"Last Name"},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}}),t._v(" "),n(m.a,[n(o.a,[n(_.a,{attrs:{label:"City"},model:{value:t.form.location.city,callback:function(e){t.$set(t.form.location,"city",e)},expression:"form.location.city"}})],1),t._v(" "),n(o.a,[n(_.a,{attrs:{label:"Country"},model:{value:t.form.location.country,callback:function(e){t.$set(t.form.location,"country",e)},expression:"form.location.country"}})],1)],1)],1),t._v(" "),n(o.a,{staticClass:"pa-6 rounded-lg",staticStyle:{"background-color":"rgba(0, 0, 0, 0.03)"},attrs:{cols:"12",sm:"5"}},[n(f.a,{staticClass:"pa-4 mb-6 caption",attrs:{elevation:"0",outlined:"",rounded:""}},[n(v.a,{scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",[n("tr",[n("td",[t._v("Is Admin")]),n("td",[t._v(t._s(t.form.role.isAdmin?t.form.role.isAdmin:"false"))])]),t._v(" "),t.form.created_at?n("tr",[n("td",[t._v("Created")]),n("td",[t._v(t._s(t.form.created_at))])]):t._e(),t._v(" "),n("tr",[n("td",[t._v("PIN")]),n("td",[t._v(t._s(t.form.securityPin))])]),t._v(" "),n("tr",[n("td",[t._v("Location Enabled")]),n("td",[t._v(t._s(t.form.permissions.location))])]),t._v(" "),n("tr",[n("td",[t._v("Share Location With Friends")]),n("td",[t._v(t._s(t.form.permissions.shareLocationWithFriends))])])])]},proxy:!0}])})],1)],1)],1),t._v(" "),n(m.a,[n(o.a,{staticClass:"text-center"},[n(r.a,{staticClass:"text-center",attrs:{disabled:!t.valid,loading:t.loading,color:"success",elevation:"0"},on:{click:t.validate}},[t._v("\n          Save\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AdminTitle:n(779).default})},738:function(t,e,n){"use strict";n(34);e.a={email:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],password:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6||"Password must be at least 6 characters"}],phone:[function(t){return!!t||"Phone is required"},function(t){return t&&t.length>=10||"Phone must be valid"}],message:[function(t){return!!t||"Message is required"}],username:[function(t){return!!t||"Username is required"},function(t){return t&&t.length>2||"Username must be a least 3 characters"}],name:[function(t){return!!t||"Is required"}],title:[function(t){return!!t||"Is required"}]}},751:function(t,e,n){var content=n(771);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("f5b1341a",content,!0,{sourceMap:!1})},767:function(t,e,n){"use strict";n.r(e);var r=n(695),o=n(158),l=n(257),c=n(159),d=n(100),m=n(914),f=n(0),v=(n(56),n(67),n(34),n(62),n(16),n(3)),_=Object(v.b)({name:"AdminNavComp",setup:function(){var t=Object(v.r)().state,e=Object(v.p)(),n=Object(v.a)((function(){return t.user})),r=Object(v.i)(n.value.data.role.isAdmin),o=Object(v.i)(n.value.data.role.isVendor),l=Object(v.i)(n.value.data.role.isDriver),c=Object(v.i)([{to:"/admin/users",label:"Users"},{to:"/admin/pages",label:"Pages"},{to:"/admin/posts",label:"Posts"}]),d=function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.value||(o.value?c.value=[{to:"/admin/products",label:"Products"},{to:"/admin/posts",label:"Posts"},{to:"/admin/shipping",label:"Shipping"},{to:"/admin/feedback",label:"Feedback"}]:l.value&&(c.value=[]));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var p=e.value.path;return"/admin"!==p&&"/admin/"!==p&&(!p.includes("/edit")&&!p.includes("/users"))};return Object(v.f)((function(){m(),d()})),{canAdd:m,navOptions:c,getRoute:function(){return e.value.fullPath.includes("edit")?e.value.fullPath.replace(e.value.params.id,""):"".concat(e.value.fullPath,"/edit")}}}}),h=_,x=n(43),component=Object(x.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.canAdd()?n(r.a,{staticClass:"mr-1 elevation-0",attrs:{to:t.getRoute(),color:"secondary"}},[t._v("\n    + Add\n  ")]):t._e(),t._v(" "),n(m.a,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,l=e.attrs;return[n(r.a,t._g(t._b({attrs:{color:"primary",dark:"",elevation:"0"}},"v-btn",l,!1),o),[t._v("\n        Content\n      ")])]}}])},[t._v(" "),n(l.a,t._l(t.navOptions,(function(e,r){return n(c.a,{key:r,attrs:{to:e.to,nuxt:""}},[n(d.a,[n(d.c,[t._v("\n            "+t._s(e.label)+"\n          ")])],1)],1)})),1)],1),t._v(" "),n(r.a,{staticClass:"elevation-0",on:{click:function(e){return t.$nuxt.refresh()}}},[n(o.a,[t._v("mdi-refresh")])],1)],1)}),[],!1,null,null,null);e.default=component.exports},770:function(t,e,n){"use strict";n(751)},771:function(t,e,n){var r=n(38)(!1);r.push([t.i,".v-breadcrumbs li{padding:0}",""]),t.exports=r},779:function(t,e,n){"use strict";n.r(e);var r=n(835),o=n(695),l=n(718),c=n(158),d=n(717),m=(n(34),n(62),n(49),{name:"AdminTitleComp",props:{title:{type:String,default:function(){return""}}},methods:{crumbs:function(){var t=this.$nuxt.$route.path.replace(/^\/|\/$/g,"").split("/");return 4===t.length&&t.splice(2,2),t},logout:function(){this.$store.dispatch("user/signOut")}}}),f=(n(770),n(43)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n(d.a,{staticClass:"ma-0 pa-0"},[n(l.a,{staticClass:"ma-0 pa-0"},[n(o.a,{staticClass:"px-1",attrs:{text:"",to:"/",small:""}},[n(c.a,[t._v("\n          mdi-arrow-left\n        ")]),t._v("\n        Back To App\n      ")],1)],1),t._v(" "),n(l.a,{staticClass:"ma-0 pa-0 text-right"},[n(o.a,{staticClass:"px-1",attrs:{text:"",small:""},on:{click:t.logout}},[t._v("\n        Logout\n        "),n(c.a,[t._v("\n          mdi-exit-to-app\n        ")])],1)],1)],1),t._v(" "),n(d.a,{staticClass:"align-center mb-3"},[n(l.a,{staticClass:"pa-0 ml-0",attrs:{cols:"5"}},[n("h4",{staticClass:"text-left text-xl-h5"},[n(r.a,{staticClass:"pa-2",staticStyle:{"text-transform":"capitalize"},attrs:{items:t.crumbs(),large:""},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return["admin"===r?n("nuxt-link",{attrs:{to:"/admin"}},[t._v(t._s(r))]):"edit"===r?n("span",[t._v(t._s(r))]):n("nuxt-link",{attrs:{to:"/admin/"+r}},[t._v(t._s(r))])]}},{key:"divider",fn:function(){return[n(c.a,[t._v("mdi-chevron-right")])]},proxy:!0}],null,!0)})],1)]),t._v(" "),n(l.a,{staticClass:"text-right"},[n("AdminNav")],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AdminNav:n(767).default})}}]);