(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{820:function(e,t,r){"use strict";r.r(t);var n=r(695),o=r(158),c=(r(21),r(20),r(24),r(17),r(25),r(2)),l=r(0),v=(r(22),r(5),r(16),r(3));function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m=Object(v.b)({name:"ProductFavouriteBtn",props:{product:{type:Object,default:function(){return{}}}},setup:function(e){var t=Object(v.r)(),r=t.getters,n=t.state,o=t.dispatch,c=Object(v.m)(),f=c.$notify,m=c.$system,O=Object(v.a)((function(){return r["user/isLoggedIn"]})),j=Object(v.a)((function(){return n.user.data})),h=Object(v.a)((function(){return n.user.profile})),k=Object(v.i)(!1),w=Object(v.a)((function(){return n.user.favourites.all})),y=function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,k.value=!0,!O.value){t.next=7;break}return t.next=5,o("user/favourites/add",d({},e.product));case 5:t.next=8;break;case 7:f.show({text:"Must be logged in to favourite",color:"error"});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),m.log({comp:"ProductFavouriteBtn",msg:"addToFavourites",val:t.t0});case 13:return t.prev=13,k.value=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k.value=!0,!O.value){e.next=7;break}return e.next=5,o("user/favourites/remove",t);case 5:e.next=8;break;case 7:f.show({text:"Must be logged in to favourite",color:"error"});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),m.log({comp:"ProductFavouriteBtn",msg:"removeFromFavourites",val:e.t0});case 13:return e.prev=13,k.value=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(t){return e.apply(this,arguments)}}();return{isLoggedIn:O,user:j,profile:h,loading:k,favourites:w,addToFavourites:y,removeFromFavourites:x,isFavourite:function(e){var t=w.value.filter((function(t){return t.slug===e}));return t&&t.length>0}}}}),O=m,j=r(43),component=Object(j.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"inline-block"}},[e.isFavourite(e.product.slug)?r("span",[r(n.a,{staticClass:"black--text elevation-0",attrs:{loading:e.loading,color:"white",fab:"",right:"",top:"","x-small":""},on:{click:function(t){return e.removeFromFavourites(e.product.slug)}}},[r(o.a,[e._v("mdi-bookmark")])],1)],1):r("span",[r(n.a,{staticClass:"black--text elevation-0 pa-0",attrs:{loading:e.loading,color:"white",fab:"",right:"",top:"","x-small":""},on:{click:e.addToFavourites}},[r(o.a,[e._v("mdi-bookmark-outline")])],1)],1)])}),[],!1,null,null,null);t.default=component.exports}}]);