(window.webpackJsonp=window.webpackJsonp||[]).push([[137,74],{1032:function(e,t,n){"use strict";n(863)},1033:function(e,t,n){var r=n(51)(!1);r.push([e.i,"\n.company-list-card {\n  overflow: hidden;\n}\n.company-product-0 {\n  z-index: 2;\n}\n.company-product-1 {\n  opacity: 0.25;\n  position: absolute;\n  padding-left: 5px;\n}\n",""]),e.exports=r},1046:function(e,t,n){"use strict";n.r(t);var r=n(691),o=n(675),c=n(768),l=n(273),d=n(746),f=n(808),v=n(271),y=(n(22),n(24),n(29),n(30),n(20),n(4),n(21),n(6)),h=n(0),m=(n(55),n(31),n(68),n(53),n(14),n(7)),_=n(57);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=Object(m.b)({name:"UserNotifications",middleware:"authenticated",directives:{Intersect:v.a},emits:["action"],setup:function(e,t){var n=t.emit,r=Object(m.q)(),o=r.state,c=r.dispatch,l=Object(m.l)(),d=l.$system,f=l.$fire,v=l.$capacitor,k=l.$notify,j=l.i18n,x=Object(m.p)(),w=Object(m.a)((function(){return o.user.data})),R=Object(m.a)((function(){return o.user.profile})),$=Object(m.i)(!1),P=Object(m.a)((function(){var e=o.user.notifications.all;return Object(_.orderBy)(e,["seconds"],["desc"])})),S=Object(m.a)((function(){var e=o.user.notifications.loaded,t=Object(_.filter)(e,["seen",!1]);return 0===(null==t?void 0:t.length)?c("user/setHas",{type:"notifications",value:!1}):(c("user/setHas",{type:"notifications",value:!0}),v.pushNotificationsSetBadge(null==t?void 0:t.length)),Object(_.orderBy)(e,["seconds"],["desc"])}));Object(m.m)(Object(h.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$.value=!0,$.value=!1;case 2:case"end":return e.stop()}}),e)}))));var I=function(){var e=Object(h.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.completed){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,c("user/friends/add",{id:t.meta.requestedBy,status:"approved"}).then(Object(h.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("user/friends/update",{uid:t.meta.requestedBy,id:t.uid,status:"approved"});case 2:return e.next=4,c("user/notifications/add",{uid:t.meta.requestedBy,title:"Friend Request Approved",seen:!1,body:"@".concat(R.value.username," accepted your friendship.")});case 4:case"end":return e.stop()}}),e)}))));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),k.show({text:j.t("notify.error_try_again"),color:"red"}),d.log({comp:"UserNotifications",msg:"approveFriendRequest",val:e.t0});case 11:return e.prev=11,k.show({text:j.t("notify.success"),color:"green"}),e.next=15,c("user/notifications/update",{id:t.id,completed:!0});case 15:return $.value=!1,e.finish(11);case 17:case"end":return e.stop()}}),e,null,[[2,7,11,17]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.completed){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,c("user/notifications/remove",t.id);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),k.show({text:j.t("notify.error_try_again"),color:"red"}),d.log({comp:"UserNotifications",msg:"declineFriendRequest",val:e.t0});case 11:return e.prev=11,$.value=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,7,11,14]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||!t.completed){e.next=2;break}return e.abrupt("return");case 2:return $.value=!0,e.prev=3,e.next=6,c("user/checkins/update",{uid:t.uid,id:t.meta.checkInId,responded:!0}).then((function(e){if(!1!==e){var n="";try{n="@"+t.body.split("@")[1]}catch(e){}c("user/notifications/add",{uid:t.meta.requestedBy,title:"Checked-In",created_at:new Date,seen:!1,body:"".concat(n," has checked-in.")}),k.show({text:j.t("notify.success"),color:"green"})}}));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),k.show({text:j.t("notify.error_try_again"),color:"red"}),d.log({comp:"UserNotifications",msg:"checkIn",val:e.t0});case 12:return e.prev=12,k.show({text:j.t("notify.success"),color:"green"}),e.next=16,c("user/notifications/update",{uid:t.uid,id:t.id,completed:!0});case 16:return $.value=!1,e.finish(12);case 18:case"end":return e.stop()}}),e,null,[[3,8,12,18]])})));return function(t){return e.apply(this,arguments)}}();return{loading:$,user:w,profile:R,notifications:P,notificationsLoaded:S,deleteAllNotifications:function(){var e=o.user.notifications.loaded;for(var i in e)c("user/notifications/remove",e[i]);f.firestore.doc("Users/".concat(w.value.uid)).update({"notifications.hasMessages":!1,"has.messages":!1}),v.pushNotificationsClearBadge()},goTo:function(e){e===location.pathname?(console.log("SAME, close"),n("action","close")):x.push(e)},emergencyBodyNotification:function(body){var e=body.replace("This is an emergency alarm from",j.t("notifications.this_is_emergency_alarm_from"));return e.includes("**accident alert**")&&(e=e.replace("**accident alert**","**"+j.t("accident_alert")+"**")),body.includes("**kidnapping alert**")&&(e=e.replace("**kidnapping alert**","**"+j.t("kidnapping_alert")+"**")),e.includes("**robbery alert**")&&(e=e.replace("**robbery alert**","**"+j.t("robbery_alert")+"**")),e.includes("**shout alert**")&&(e=e.replace("**shout alert**","**"+j.t("shout_alert")+"**")),e},onIntersect:function(e){var t=e[0].target.id,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.user.notifications.loaded[t]);void 0===n.seen&&(n.seen=!1),!1===n.seen&&(n.seen=!0,c("user/notifications/update",n))},checkInResponse:N,approveFriendRequest:I,declineFriendRequest:C}},head:{}}),j=k,x=(n(1032),n(58)),component=Object(x.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?n("div",[n(f.a,{attrs:{type:"list-item-avatar-three-line"}}),e._v(" "),n(f.a,{attrs:{type:"list-item-avatar-three-line"}}),e._v(" "),n(f.a,{attrs:{type:"list-item-avatar-three-line"}})],1):n("div",[e.notificationsLoaded&&Object.keys(e.notificationsLoaded).length>0?n("div",[n("div",{staticClass:"text-center mb-3"},[n(o.a,{attrs:{"x-small":"",text:""},on:{click:e.deleteAllNotifications}},[e._v(e._s(e.$t("btn.delete_all")))])],1),e._v(" "),e._l(e.notificationsLoaded,(function(t,f){return n("div",{key:f},[t.title||t.body?n(d.a,{directives:[{def:v.b,name:"intersect",rawName:"v-intersect",value:e.onIntersect,expression:"onIntersect"}],staticClass:"align-center mt-3",staticStyle:{"border-bottom":"1px solid #dedede"},attrs:{id:t.id}},[n(c.a,[t.title?n("div",{staticClass:"body-1"},["friendRequest"===t.type?n("span",[n(l.a,{attrs:{color:"myshoutOrange"}},[e._v("mdi-account-check")])],1):"checkIn"===t.type?n("span",[n(l.a,{attrs:{color:"myshoutOrange"}},[e._v("mdi-checkbox-marked-circle-outline")])],1):"chat"===t.type?n("span",[n(l.a,{attrs:{color:"myshoutOrange"}},[e._v("mdi-message")])],1):"kidnapping alert"===t.title||"accident alert"===t.title||"robbery alert"===t.title||"shout alert"===t.title?n("span",[n(l.a,{attrs:{color:"myshoutRed"}},[e._v("mdi-alert")])],1):e._e(),e._v(" "),"Check-In"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("check_in"))+"\n                ")]):"Chat Notification"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("notifications.chat_notification"))+"\n                ")]):"New Friend Request"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("notifications.new_friend_request"))+"\n                ")]):"Friend Request Approved"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("notifications.friend_request_approved"))+"\n                ")]):"kidnapping alert"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("kidnapping_alert"))+"\n                ")]):"accident alert"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("accident_alert"))+"\n                ")]):"robbery alert"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("robbery_alert"))+"\n                ")]):"shout alert"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("shout_alert"))+"\n                ")]):"Checked-In"===t.title?n("span",[e._v("\n                  "+e._s(e.$t("notifications.checked_in_title"))+"\n                ")]):n("span",[e._v("\n                  "+e._s(t.title)+"\n                ")])]):e._e(),e._v(" "),n("div",{staticClass:"body-2"},[t.body&&t.body.includes("requested to be your friend.")?n("span",[e._v("\n                  "+e._s(t.body.replace("requested to be your friend.",e.$t("notifications.requested_to_be_your_friend")))+"\n                ")]):t.body&&t.body.includes("accepted your friendship.")?n("span",[e._v("\n                  "+e._s(t.body.replace("accepted your friendship.",e.$t("notifications.accepted_your_friendship")))+"\n                ")]):t.body&&t.body.includes("This is an emergency alarm from")?n("span",[e._v("\n                  "+e._s(e.emergencyBodyNotification(t.body))+"\n                ")]):t.body&&t.body.includes("You have been requested to check-in by")?n("span",[e._v("\n                  "+e._s(t.body.replace("You have been requested to check-in by",e.$t("notifications.requested_to_check_in")).replace("Contact them by phone or text message.",e.$t("notifications.contact_them")))+"\n                ")]):t.body&&t.body.includes(" has checked-in.")?n("span",[e._v("\n                  "+e._s(t.body.replace(" has checked-in.",e.$t("notifications.has_checked_in")))+"\n                ")]):n("span",[e._v("\n                  "+e._s(t.body)+"\n                ")])]),e._v(" "),n("div",{staticClass:"caption grey--text mt-2"},[e._v("\n                "+e._s(t.created_at)+"\n              ")])]),e._v(" "),n(c.a,{staticClass:"text-right",attrs:{cols:"3"}},[t.seen?e._e():n(r.a,{attrs:{bottom:"",dot:"",left:"",overlap:""}}),e._v(" "),"friendRequest"===t.type?n(o.a,{attrs:{text:"",color:"green"},on:{click:function(n){return e.approveFriendRequest(t)}}},[t.completed?e._e():n("span",[n(l.a,[e._v("mdi-check")])],1)]):e._e(),e._v(" "),"friendRequest"===t.type?n(o.a,{attrs:{text:"",color:"red"},on:{click:function(n){return e.declineFriendRequest(t)}}},[t.completed?e._e():n("span",[n(l.a,[e._v("mdi-delete")])],1)]):t.goTo?n(o.a,{attrs:{text:""},on:{click:function(n){return e.goTo(t.goTo)}}},[n(l.a,[e._v("mdi-arrow-right")])],1):e._e()],1)],1):e._e()],1)}))],2):n("div",[n("div",{staticStyle:{"text-align":"center"}},[n("ElementH4",{attrs:{align:"center",text:e.$t("notifications.caught_up")}})],1)])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{ElementH4:n(735).default})},694:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return _}));n(22),n(60),n(63),n(24),n(59),n(47),n(38),n(29),n(30),n(4),n(44),n(37),n(21),n(35);var r=n(6),o=n(13),c=(n(15),n(20),n(31),n(209),n(130),n(8));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var pattern={styleList:/;(?![^(]*\))/g,styleProp:/:(.*)/};function y(style){var e,t={},n=f(style.split(pattern.styleList));try{for(n.s();!(e=n.n()).done;){var r=e.value.split(pattern.styleProp),l=Object(o.a)(r,2),d=l[0],v=l[1];(d=d.trim())&&("string"==typeof v&&(v=v.trim()),t[Object(c.c)(d)]=v)}}catch(e){n.e(e)}finally{n.f()}return t}function h(){for(var e,t={},i=arguments.length;i--;)for(var n=0,r=Object.keys(arguments[i]);n<r.length;n++)switch(e=r[n]){case"class":case"directives":arguments[i][e]&&(t[e]=_(t[e],arguments[i][e]));break;case"style":arguments[i][e]&&(t[e]=m(t[e],arguments[i][e]));break;case"staticClass":if(!arguments[i][e])break;void 0===t[e]&&(t[e]=""),t[e]&&(t[e]+=" "),t[e]+=arguments[i][e].trim();break;case"on":case"nativeOn":arguments[i][e]&&(t[e]=O(t[e],arguments[i][e]));break;case"attrs":case"props":case"domProps":case"scopedSlots":case"staticStyle":case"hook":case"transition":if(!arguments[i][e])break;t[e]||(t[e]={}),t[e]=d(d({},arguments[i][e]),t[e]);break;default:t[e]||(t[e]=arguments[i][e])}return t}function m(e,source){return e?source?(e=Object(c.F)("string"==typeof e?y(e):e)).concat("string"==typeof source?y(source):source):e:source}function _(e,source){return source?e&&e?Object(c.F)(e).concat(source):source:e}function O(){if(!(arguments.length<=0?void 0:arguments[0]))return arguments.length<=1?void 0:arguments[1];if(!(arguments.length<=1?void 0:arguments[1]))return arguments.length<=0?void 0:arguments[0];for(var e={},i=2;i--;){var t=i<0||arguments.length<=i?void 0:arguments[i];for(var n in t)t[n]&&(e[n]?e[n]=[].concat(t[n],e[n]):e[n]=t[n])}return e}},735:function(e,t,n){"use strict";n.r(t);var r=n(273),o={name:"ElementH4",props:{text:{type:String,default:function(){return""}},align:{type:String,default:"center"},prependIcon:{type:String,default:null}}},c=n(58),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",{class:"no-break text-"+e.align+" text-h6 text-md-h5 text-lg-h4",staticStyle:{"letter-spacing":"0px !important"}},[e.prependIcon?n(r.a,[e._v("\n    "+e._s(e.prependIcon)+"\n  ")]):e._e(),e._v("\n  "+e._s(e.text)+"\n")],1)}),[],!1,null,null,null);t.default=component.exports},863:function(e,t,n){var content=n(1033);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(52).default)("408c5d0a",content,!0,{sourceMap:!1})}}]);